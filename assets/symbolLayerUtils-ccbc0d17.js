import{_ as h}from"./preload-helper-f8378b50.js";import{U as d}from"./request-ae7029ea.js";import{a as n}from"./Error-781981d1.js";import{e as b}from"./ItemCache-dc80b100.js";import{r as a,h as w}from"./typedArrayUtil-74bbfd45.js";import{F as v,a as z}from"./aaBoundingBox-5e14079b.js";import{t as _,c as g}from"./symbolLayerUtils3D-15190f75.js";import"./string-75082bc6.js";import"./promiseUtils-28f2a985.js";import"./MemCache-9d81d118.js";import"./watch-c7facfb0.js";import"./ArrayPool-ae2ef0ab.js";import"./nextTick-3ee5a785.js";import"./Extent-8fae2379.js";import"./Accessor-815cb0cf.js";import"./ensureType-125d327f.js";import"./JSONSupport-2b897629.js";import"./cast-f7d2a22f.js";import"./mathUtils-15f63a45.js";let s=m();function m(){return new b(50)}function K(){s=m()}function M(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function N(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var o,i;if((o=r.resource)!=null&&o.href)return L(r.resource.href).then(t=>[t.width,t.height]);if((i=r.resource)!=null&&i.primitive)return a(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(o=>{if(r.size==null)return o;const i=o[0]/o[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(o=>v(o))}async function B(r,e){const o=await f(r,e);return _(o,r)}async function S(r,e){var i;if(!r.isPrimitive){const t=w((i=r.resource)==null?void 0:i.href),u=s.get(t);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-efd405e6.js").then(l=>l.o),["assets/objectResourceUtils-efd405e6.js","assets/devEnvironmentUtils-5002a058.js","assets/typedArrayUtil-74bbfd45.js","assets/mat3-53e5916e.js","assets/mathUtils-15f63a45.js","assets/mat3f64-221ce671.js","assets/mat4-a8da3f27.js","assets/mat4f64-1413b4a7.js","assets/aaBoundingBox-5e14079b.js","assets/Extent-8fae2379.js","assets/Accessor-815cb0cf.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/BufferView-4e42e0bf.js","assets/vec2-4c517306.js","assets/vec33-1a913d16.js","assets/DefaultMaterial_COLOR_GAMMA-e5023261.js","assets/types-e1c0a5bf.js","assets/request-ae7029ea.js","assets/preload-helper-f8378b50.js","assets/asyncUtils-5c97747c.js","assets/enums-64ab819c.js","assets/Version-b6e10f19.js","assets/quat-e6aebdaa.js","assets/quatf64-3363c48e.js","assets/compilerUtils-024563a4.js","assets/resourceUtils-71fe9113.js","assets/basicInterfaces-b7051eb1.js","assets/Indices-07d630fa.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/byteSizeEstimations-90c5a50d.js","assets/NestedMap-1b5db22e.js","assets/requestImageUtils-00f88c6f.js","assets/Util-91d0856f.js","assets/vec2f64-22afc56f.js","assets/vec4f64-aa64c7e9.js","assets/sphere-15cda271.js","assets/lineSegment-e940a160.js","assets/VertexAttribute-15d1866a.js","assets/Evented-3dfb26f2.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/assets-01239caf.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/ViewingMode-915d19cb.js","assets/InterleavedLayout-a7d825f4.js","assets/vec3f32-ad1dc57f.js","assets/mat4f32-60a2394b.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/symbolColorUtils-645fa695.js"]),c=await y.fetch(t,{disableTextures:!0});return s.put(t,c.referenceBoundingBox),c.referenceBoundingBox}let o=null;if(r.resource&&r.resource.primitive&&(o=z(g(r.resource.primitive)),a(e)))for(let t=0;t<o.length;t++)o[t]*=e;return o?Promise.resolve(o):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{K as clearBoundingBoxCache,p as computeIconLayerResourceSize,M as computeLayerResourceSize,N as computeLayerSize,f as computeObjectLayerResourceSize};
