import{e as l,l as ut,a as $,v as K,y as d,u as ry,t as Ke,b as oy,c as ay,x as qd,A as nr,d as ly,o as cy,n as gp,f as ol,g as Ud,h as jd,r as wr}from"./JSONSupport-ed372989.js";import{s as Gd,x as rr}from"./Basemap-1b908f31.js";import{_ as T}from"./preload-helper-f8378b50.js";import{l as Ie}from"./Color-9f46ece8.js";import{j as ee}from"./Collection-d9d92883.js";import{n as dy}from"./collectionUtils-e98ed3f0.js";import{o as uy}from"./compilerUtils-8d4f8499.js";import{s as q,a as L,b as oo}from"./Error-d97df89f.js";import{p as Qi,n as or,h as St,o as hy}from"./string-feb899cf.js";import{m as ar}from"./Loadable-c96deb83.js";import{l as py}from"./loadAll-f0d5998c.js";import{f as At,E as Ge,y as my,i as ni,g as Kr,U as Da,j as lr,b as gy,L as fy,A as fp,a as fa,v as jo,p as yy,C as vy,t as Va,D as _y,x as wy}from"./promiseUtils-ac1bd36f.js";import{T as Wd,b as oi,a as Is,t as xo,r as by,n as Na}from"./ensureType-348c3d61.js";import{r as yp,w as de,o as Iy,R as Gc,E as cr,a as ai,f as Yi,I as vp,$ as Wc,p as My,b as Sy,c as _p,d as Cy,M as xy,P as wp,s as bp,e as Zd,g as Kd,S as br}from"./Extent-fd3ac910.js";import{t as O,r as C,a as nt,u as Ey,s as Qd,o as Fr,c as za,i as Ba,e as Ne,p as Mi,w as ya,x as $y,v as Ly}from"./typedArrayUtil-96f93e5b.js";import{o as Ty}from"./enumeration-49e09bda.js";import{r as Ay,n as ky}from"./opacityUtils-cc413a8c.js";import{l as va}from"./CollectionFlattener-52a0c7e4.js";import{n as gr}from"./Evented-e2ee9722.js";import{s as rt,a as Rs}from"./cast-73cfc253.js";import{v as Ip,w as Ry,d as Py,i as Fy,r as Yd}from"./layerUtils-a0871894.js";import{K as Oy,U as ri,r as Xd,E as Dy,o as Vy}from"./request-7c0a9d4c.js";import{l as Ny,d as zy,t as By}from"./TablesMixin-1e04401c.js";import{g as Si}from"./Graphic-f117754c.js";import{i as Mp}from"./Clonable-5318ec31.js";import{s as Hy}from"./Cyclical-0205ad3e.js";import{a as dr,b as qy,r as Sp,g as Cp,m as Eo,c as al,j as Uy,A as jy,D as Gy,n as Ha,d as Wy,e as ll,P as Jd,u as Zy}from"./mathUtils-b3bee9e7.js";import{n as Ky}from"./geometry-d89d4a34.js";import{v as Xi,c as xp}from"./jsonUtils-dd0891e0.js";import{l as I,h as B,a as We,f as Ut,U as ao,j as cn,w as Ms,P as Qy}from"./reactiveUtils-307e98f9.js";import{u as dt,c as Ct,e as Yy}from"./screenUtils-7afeb41c.js";import{c as Xy}from"./workers-4f8dfa2f.js";import{e as ur,A as go,r as fo,t as yo,R as Zc}from"./projection-d7a5b449.js";import{p as Qr,j as Yr}from"./TileInfo-e107254e.js";import{i as _a,e as ge,W as Me,n as m,v as Es,h as eu,f as qt,p as Or,k as Ep,a as hr,t as $p,w as Jy,b as Lp,r as tu,c as Tp,o as iu,A as ev}from"./widget-945f9e61.js";import{c as Ap,a as dn,d as kp}from"./HandleOwner-4c8d824c.js";import{s as Mt}from"./intl-7c488bb0.js";import{s as su}from"./byteSizeEstimations-90c5a50d.js";import{m as vo,L as lo,u as tv,S as Rp}from"./number-205e28e0.js";import{a as iv}from"./AttachmentInfo-9750c730.js";import{c as nu}from"./AttachmentQuery-c89a8ac2.js";import{x as sv,i as Pp,h as nv,a as rv,r as ov}from"./fieldUtils-66be74eb.js";import{u as av,i as lv,c as Fp,a as cv,I as dv,b as Op,d as uv,e as hv,f as fr,g as Kc,h as Dp,k as Vp}from"./PopupTemplate-63dce4d3.js";import{a as _o}from"./assets-2c955bed.js";import"./LegendOptions-8200d5f5.js";import{j as un,q as co,g as pv,h as mv,w as qa,d as Np,a as gv,y as ic,f as fv,F as yv,S as cl,J as vv,N as _v,b as wv,I as zp}from"./utils-e0744d8b.js";import{m as Qc,d as bv,j as Iv,S as Ua,y as Yn,x as Bp,n as Mv,a as Sv}from"./symbols-946d4e11.js";import{a as Cv,t as xv}from"./jsonUtils-37cc07d7.js";import"./DataLayerSource-71059dc4.js";import{s as dl}from"./executeForIds-0c62bbcf.js";import"./featureConversionUtils-00c47b2e.js";import{o as Ev,v as Yc,m as Hp}from"./Polyline-9d44200b.js";import{o as $v}from"./normalizeUtils-9dc1c489.js";import"./pbf-3634de4f.js";import"./FeatureSet-00b7d51e.js";import{m as Lv,x as ul,c as Tv}from"./Query-bf719160.js";import sc from"./RelationshipQuery-a13e27d1.js";import"./TopFeaturesQuery-5bb7c994.js";import{l as qp,s as Xc}from"./locale-30120714.js";import Av from"./FeatureLayer-42e1678e.js";import{s as yr,i as Jc}from"./Identifiable-876da2a8.js";import{b as ru}from"./Layer-07a07202.js";import{y as ed,p as Up}from"./colorUtils-c0f43caf.js";import{n as nc,o as Ir,i as uo,a as td,c as id,e as ja,h as kv,f as jp,M as Rv,r as Gp}from"./mat2d-94b8f776.js";import{resolveWebStyleSymbol as Pv}from"./webStyleSymbolUtils-54e19231.js";import{e as ou}from"./Queue-c92bc561.js";import{t as Fv,R as Wp,D as Ov}from"./Scheduler-72fecd6f.js";import{T as Dv}from"./TimeExtent-d2d7594c.js";import{j as Zp,b as Vv}from"./asyncUtils-f0fdc8c7.js";import{m as Kp,_ as Nv}from"./Promise-34cff6d6.js";import{l as zv,i as Qp,a as au}from"./GraphicsCollection-89010fd9.js";import{v as sd}from"./HeightModelInfo-bad6650e.js";import{a as Yp}from"./TimeReference-b6332926.js";import{d as Bv}from"./arcgisLayerUrl-9d6ab56c.js";import{l as pr,a as lu}from"./ViewingMode-915d19cb.js";import{t as rc,r as Hv}from"./unitBezier-881ac1eb.js";import{o as oc,v as cu,y as qv,j as Uv,q as du,C as Xp,l as Ga,r as ct,z as ji,g as jv,a as wa,s as Gv,m as Wv}from"./vec2-9030ffc5.js";import{r as Zv,n as tt}from"./vec2f64-22afc56f.js";import{s as Kv,r as Qv,M as uu,h as Yv,i as Xv}from"./mat3-d3027213.js";import{e as hl}from"./mat3f32-6c416b1c.js";import{t as hu}from"./vec2f32-eaf29605.js";import"./TileStrategy-0607ccca.js";import{d as Jv,h as e_}from"./TileStore-56391591.js";import"./TileKey-555f347f.js";import{l as t_}from"./capabilities-d3148205.js";import{r as i_}from"./context-util-09fcc133.js";import{s as Jp}from"./Util-a12911ae.js";import{u as Wa,b as s_,q as n_,c as r_}from"./aaBoundingRect-a7e9efee.js";import{b as wo}from"./Portal-172924b2.js";import{a as o_}from"./EffectView-7a98f2c6.js";import{i as a_}from"./BlendLayer-5cec7349.js";import{c as l_,_ as c_}from"./MapImageLayer-030c7912.js";import{s as pu}from"./pixelRangeUtils-03719dd8.js";import{b as d_,a as u_}from"./UniqueValueRenderer-b6a7d586.js";import{u as h_}from"./messages-226fbb40.js";import{d as p_}from"./scaleUtils-2aca77b2.js";import{f as Za,s as nd,i as Ka}from"./utils-ada6b2ec.js";import{t as rd}from"./commonProperties-da958896.js";import"./nextTick-3ee5a785.js";import"./deprecate-424c57c7.js";import"./PortalItem-a25335a3.js";import"./writeUtils-5c3c75bd.js";import"./colorUtils-639f4d25.js";import"./SimpleObservable-04055e8d.js";import"./typeUtils-2ccaf90d.js";import"./Connection-5e453cc1.js";import"./mat4-1ee69bd5.js";import"./zscale-e06cee6f.js";import"./uuid-73213768.js";import"./ItemCache-d06df2a7.js";import"./MemCache-7d4aa654.js";import"./utils-1aab1134.js";import"./CIMSymbol-0fa077f5.js";import"./symbolLayerUtils3D-0c6ed99a.js";import"./aaBoundingBox-1eda6d1b.js";import"./persistableUrlUtils-26091271.js";import"./DictionaryLoader-0dadb1e0.js";import"./LRUCache-9c365b2a.js";import"./heatmapUtils-16ee21b5.js";import"./vec4f64-aa64c7e9.js";import"./Field-b17a677d.js";import"./fieldType-b21f2e7f.js";import"./query-eac603fe.js";import"./urlUtils-6a004888.js";import"./pbfQueryUtils-bad736cf.js";import"./OptimizedFeature-7af17710.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./queryZScale-a0b71b11.js";import"./normalizeUtilsCommon-155f1aa2.js";import"./MultiOriginJSONSupport-97bf66dd.js";import"./serviceCapabilitiesUtils-02cebe9b.js";import"./FeatureLayerBase-de1a166f.js";import"./OperationalLayer-a420b681.js";import"./ElevationInfo-75e7bf35.js";import"./lengthUtils-bc8879ed.js";import"./editsZScale-b954eebc.js";import"./APIKeyMixin-b93c2049.js";import"./ArcGISService-cca20289.js";import"./CustomParametersMixin-01a04769.js";import"./EditBusLayer-984da402.js";import"./FeatureReductionLayer-fd41123b.js";import"./labelingInfo-f7d1c159.js";import"./labelUtils-6965a8ca.js";import"./defaultsJSON-b087dd4d.js";import"./jsonUtils-7442f08f.js";import"./sizeVariableUtils-d4870b0d.js";import"./OrderedLayer-9cb8835d.js";import"./PortalLayer-d54f6a39.js";import"./PortalUser-7f979a04.js";import"./PortalGroup-751b527f.js";import"./portalItemUtils-72345980.js";import"./RefreshableLayer-672ecb56.js";import"./ScaleRangeLayer-24099455.js";import"./TemporalLayer-c479c738.js";import"./FeatureTemplate-1fd8fac4.js";import"./FeatureType-b736019f.js";import"./fieldProperties-1fb52610.js";import"./FieldsIndex-7c963fe9.js";import"./versionUtils-aabb6832.js";import"./styleUtils-f45b991d.js";import"./popupUtils-3d5141e6.js";import"./devEnvironmentUtils-5002a058.js";import"./styleUtils-1d3bc535.js";import"./datetime-b6333958.js";import"./rbush-f2a85c98.js";import"./quickselect-56c5966e.js";import"./parser-a11e786f.js";import"./mat4f32-60a2394b.js";import"./SublayersOwner-3d3675ca.js";import"./Version-bbcb090a.js";import"./QueryTask-809f5bb4.js";import"./imageBitmapUtils-ce029f55.js";import"./diffUtils-ac6d6369.js";import"./colorRamps-fff34da2.js";import"./visualVariableUtils-6f05f98d.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var ac;let Go=ac=class extends ut{constructor(i){super(i),this.type="none"}clone(){return new ac({type:this.type})}};l([Ty({none:"none",stayAbove:"stay-above"})],Go.prototype,"type",void 0),Go=ac=l([$("esri.ground.NavigationConstraint")],Go);let ye=class extends K{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};l([d()],ye.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),l([d()],ye.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),l([d()],ye.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),l([d()],ye.prototype,"DECONFLICTOR_SHOW_GRID",void 0),l([d()],ye.prototype,"LABELS_SHOW_BORDER",void 0),l([d()],ye.prototype,"TEXT_SHOW_BASELINE",void 0),l([d()],ye.prototype,"TEXT_SHOW_BORDER",void 0),l([d()],ye.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),l([d()],ye.prototype,"OVERLAY_SHOW_CENTER",void 0),l([d()],ye.prototype,"SHOW_POI",void 0),l([d()],ye.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),l([d()],ye.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),l([d()],ye.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),l([d()],ye.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),l([d()],ye.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),l([d()],ye.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),l([d()],ye.prototype,"I3S_TREE_SHOW_TILES",void 0),l([d()],ye.prototype,"I3S_SHOW_MODIFICATIONS",void 0),l([d()],ye.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),l([d()],ye.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),l([d()],ye.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),l([d()],ye.prototype,"LINE_WIREFRAMES",void 0),l([d()],ye.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),ye=l([$("esri.views.3d.support.DebugFlags")],ye);const m_=new ye;var lc;let di=lc=class extends ry(ar){constructor(i){super(i),this.opacity=1,this.shading=!m_.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ee;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&q.getLogger(this.declaredClass).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},t=s=>{s.parent=null};this.layers.on("after-add",s=>e(s.item)),this.layers.on("after-remove",s=>t(s.item))}initialize(){this.when().catch(i=>{q.getLogger(this.declaredClass).error("#load()","Failed to load ground",i)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const i=this.layers.removeAll();for(const e of i)e.destroy();this.layers.destroy()}normalizeCtorArgs(i){return i&&"resourceInfo"in i&&(this._set("resourceInfo",i.resourceInfo),delete(i={...i}).resourceInfo),i}set layers(i){this._set("layers",dy(i,this._get("layers")))}writeLayers(i,e,t,s){const n=[];i&&(s={...s,layerContainerType:"ground"},i.forEach(r=>{if("write"in r){const o={};uy(r)().write(o,s)&&n.push(o)}else s&&s.messages&&s.messages.push(new L("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}))})),e.layers=n}load(i){return this.addResolvingPromise(this._loadFromSource(i)),Promise.resolve(this)}loadAll(){return py(this,i=>{i(this.layers)})}async queryElevation(i,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:t}=await T(()=>import("./ElevationQuery-232221c8.js"),["assets/ElevationQuery-232221c8.js","assets/asyncUtils-f0fdc8c7.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/projection-d7a5b449.js","assets/preload-helper-f8378b50.js","assets/mathUtils-b3bee9e7.js","assets/SimpleObservable-04055e8d.js","assets/mat4-1ee69bd5.js","assets/assets-2c955bed.js","assets/request-7c0a9d4c.js","assets/zscale-e06cee6f.js","assets/aaBoundingRect-a7e9efee.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/TileInfo-e107254e.js"]);At(e);const s=new t,n=this.layers.filter(mu).toArray();return s.queryAll(n,i,e)}async createElevationSampler(i,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:t}=await T(()=>import("./ElevationQuery-232221c8.js"),["assets/ElevationQuery-232221c8.js","assets/asyncUtils-f0fdc8c7.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/projection-d7a5b449.js","assets/preload-helper-f8378b50.js","assets/mathUtils-b3bee9e7.js","assets/SimpleObservable-04055e8d.js","assets/mat4-1ee69bd5.js","assets/assets-2c955bed.js","assets/request-7c0a9d4c.js","assets/zscale-e06cee6f.js","assets/aaBoundingRect-a7e9efee.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/TileInfo-e107254e.js"]);At(e);const s=new t,n=this.layers.filter(mu).toArray();return s.createSamplerAll(n,i,e)}clone(){const i={opacity:this.opacity,surfaceColor:Qi(this.surfaceColor),navigationConstraint:Qi(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(i.loadStatus="loaded"),new lc({resourceInfo:this.resourceInfo}).set(i)}read(i,e){this.resourceInfo||this._set("resourceInfo",{data:i,context:e}),super.read(i,e)}_loadFromSource(i){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,i):Promise.resolve()}_loadLayersFromJSON(i,e,t){const s=e&&e.origin||"web-scene",n=e&&e.portal||null,r=e&&e.url||null;return T(()=>import("./layersCreator-88fc5cbb.js"),["assets/layersCreator-88fc5cbb.js","assets/Collection-d9d92883.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/lazyLayerLoader-29bad81d.js","assets/preload-helper-f8378b50.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/request-7c0a9d4c.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/portalLayers-87228bbd.js","assets/layerUtils-a0871894.js","assets/layersLoader-cab4001a.js","assets/Layer-07a07202.js","assets/geometry-d89d4a34.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/Identifiable-876da2a8.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/persistableUrlUtils-26091271.js","assets/fetchService-280e3b9b.js","assets/jsonContext-97094046.js","assets/portalItemUtils-72345980.js","assets/projection-d7a5b449.js","assets/mathUtils-b3bee9e7.js","assets/mat4-1ee69bd5.js","assets/zscale-e06cee6f.js","assets/styleUtils-f45b991d.js","assets/asyncUtils-f0fdc8c7.js"]).then(({populateOperationalLayers:o})=>{At(t);const a=[];if(i.layers&&Array.isArray(i.layers)){const c={context:{origin:s,url:r,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,i.layers,c))}return Ge(a)}).then(()=>{})}};function g_(i){return i&&"createElevationSampler"in i}function mu(i){return i.type==="elevation"||g_(i)}l([d({json:{read:!1}})],di.prototype,"layers",null),l([yp("layers")],di.prototype,"writeLayers",null),l([d({readOnly:!0})],di.prototype,"resourceInfo",void 0),l([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Wd,read:{reader:Ay,source:"transparency"},write:{writer:(i,e)=>{e.transparency=ky(i)},target:"transparency"}}})],di.prototype,"opacity",void 0),l([d({type:Boolean,nonNullable:!0,json:{read:!1}})],di.prototype,"shading",void 0),l([d({type:Ie,json:{type:[Wd],write:(i,e)=>{e.surfaceColor=i.toJSON().slice(0,3)}}})],di.prototype,"surfaceColor",void 0),l([d({type:Go,json:{write:!0}})],di.prototype,"navigationConstraint",void 0),di=lc=l([$("esri.Ground")],di);const ba=di;function f_(i){var e,t;return!(!(i!=null&&i.loaded)||!((t=(e=Ip(i))==null?void 0:e.operations)!=null&&t.supportsEditing)||"editingEnabled"in i&&!Ry(i))}const gu=q.getLogger("esri.support.basemapUtils");function y_(){return{}}function v_(i){for(const e in i){const t=i[e];(t==null?void 0:t.destroyed)===!1&&t.destroy(),delete i[e]}}function __(i,e){let t;if(typeof i=="string"){if(!(i in Gd)){const s=Object.entries(Gd).filter(([n,r])=>oo.apiKey&&!r.classic||!oo.apiKey&&r.classic&&!r.deprecated).map(([n])=>`"${n}"`).join(", ");return gu.warn(`Unable to find basemap definition for: ${i}. Try one of these: ${s}`),null}e&&(t=e[i]),t||(t=rr.fromId(i),e&&(e[i]=t))}else t=oi(rr,i);return t!=null&&t.destroyed&&(gu.warn("The provided basemap is already destroyed",{basemap:t}),t=null),t}function w_(i,e){return i===e?!0:C_(fu(i),fu(e),{mustMatchReferences:!0})==="equal"}function b_(i,e){var r;if(O(e)||O(i))return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const t=e.baseLayers.getItemAt(0);switch(t.loadStatus){case"not-loaded":t.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const s=(("supportedSpatialReferences"in t?t.supportedSpatialReferences:null)||["tileInfo"in t?(r=t.tileInfo)==null?void 0:r.spatialReference:t.spatialReference]).filter(Boolean),n=i.spatialReference;return n?{spatialReference:s.find(o=>n.equals(o))??s[0]??null,updating:!1}:{spatialReference:s[0],updating:!1}}function fu(i){return i?!i.loaded&&i.resourceInfo?M_(i.resourceInfo.data):{baseLayers:yu(i.baseLayers),referenceLayers:yu(i.referenceLayers)}:null}function yu(i){return(ee.isCollection(i)?i.toArray():i).map(I_)}function I_(i){var e,t;return{type:i.type,url:em("urlTemplate"in i&&i.urlTemplate||i.url||"styleUrl"in i&&i.styleUrl||""),minScale:"minScale"in i&&i.minScale!=null?i.minScale:0,maxScale:"maxScale"in i&&i.maxScale!=null?i.maxScale:0,opacity:i.opacity!=null?i.opacity:1,visible:i.visible==null||!!i.visible,sublayers:i.type!=="map-image"&&i.type!=="wms"||!C(i.sublayers)||(e=i.sublayers)==null?void 0:e.map(s=>({id:s.id,visible:s.visible})),activeLayerId:i.type==="wmts"?(t=i.activeLayer)==null?void 0:t.id:void 0}}function M_(i){return i?{baseLayers:vu((i.baseMapLayers??[]).filter(e=>!e.isReference)),referenceLayers:vu((i.baseMapLayers??[]).filter(e=>e.isReference))}:null}function vu(i){return i.map(e=>S_(e))}function S_(i){let e;switch(i.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;default:e="unknown"}return{type:e,url:em(i.templateUrl||i.urlTemplate||i.styleUrl||i.url),minScale:i.minScale!=null?i.minScale:0,maxScale:i.maxScale!=null?i.maxScale:0,opacity:i.opacity!=null?i.opacity:1,visible:i.visibility==null||!!i.visibility,sublayers:void 0,activeLayerId:void 0}}function C_(i,e,t){return i!=null!=(e!=null)?"not-equal":!i||!e?"equal":_u(i.baseLayers,e.baseLayers)?_u(i.referenceLayers,e.referenceLayers)?"equal":t.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function _u(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!x_(i[t],e[t]))return!1;return!0}function x_(i,e){if(i.type!==e.type||i.type==="scene"||i.url!==e.url||i.minScale!==e.minScale||i.maxScale!==e.maxScale||i.visible!==e.visible||i.opacity!==e.opacity)return!1;if(C(i.activeLayerId)||C(e.activeLayerId))return i.activeLayerId===e.activeLayerId;if(C(i.sublayers)||C(e.sublayers)){if(O(i.sublayers)||O(e.sublayers)||i.sublayers.length!==e.sublayers.length)return!1;for(let t=0;t<i.sublayers.length;t++){const s=i.sublayers.at(t),n=e.sublayers.at(t);if((s==null?void 0:s.id)!==(n==null?void 0:n.id)||(s==null?void 0:s.visible)!==(n==null?void 0:n.visible))return!1}}return!0}function em(i){return i?Oy(i).replace(/^\s*https?:/i,"").toLowerCase():""}const wu={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function E_(i){let e=null;if(typeof i=="string")if(i in wu){const t=wu[i];e=new ba({resourceInfo:{data:{layers:[t]}}})}else q.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${i}. Try "world-elevation"`);else e=oi(ba,i);return e}let ui=class extends Ny(zy(gr.EventedMixin(K))){constructor(e){super(e),this.allLayers=new va({getCollections:()=>{var t,s,n;return[(t=this.basemap)==null?void 0:t.baseLayers,(s=this.ground)==null?void 0:s.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=By(this),this.basemap=null,this.editableLayers=new va({getCollections:()=>[this.allLayers],itemFilterFunction:f_}),this.ground=new ba,this._basemapCache=y_()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),v_(this._basemapCache),this._basemapCache=null}castBasemap(e){return __(e,this._basemapCache)}castGround(e){const t=E_(e);return O(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([d({readOnly:!0,dependsOn:[]})],ui.prototype,"allLayers",void 0),l([d({readOnly:!0})],ui.prototype,"allTables",void 0),l([d({type:rr})],ui.prototype,"basemap",void 0),l([rt("basemap")],ui.prototype,"castBasemap",null),l([d({readOnly:!0})],ui.prototype,"editableLayers",void 0),l([d({type:ba,nonNullable:!0})],ui.prototype,"ground",void 0),l([rt("ground")],ui.prototype,"castGround",null),ui=l([$("esri.Map")],ui);const tm=ui;let Vi=class extends Mp(ut){constructor(...e){super(...e),this.position=new de([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,s,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const r={position:e};return t!=null&&(r.heading=t),s!=null&&(r.tilt=s),n!=null&&(r.fov=n),r}return e}writePosition(e,t,s,n){const r=e.clone();r.x=Is(e.x||0),r.y=Is(e.y||0),r.z=e.hasZ?Is(e.z||0):e.z,t[s]=r.write({},n)}readPosition(e,t){const s=new de;return s.read(e,t),s.x=Is(s.x||0),s.y=Is(s.y||0),s.z=s.hasZ?Is(s.z||0):s.z,s}equals(e){return!O(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};l([d({type:de,json:{write:{isRequired:!0}}})],Vi.prototype,"position",void 0),l([yp("position")],Vi.prototype,"writePosition",null),l([Iy("position")],Vi.prototype,"readPosition",null),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),rt(i=>Hy.normalize(Is(i)))],Vi.prototype,"heading",void 0),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),rt(i=>dr(Is(i),-180,180))],Vi.prototype,"tilt",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Vi.prototype,"fov",void 0),Vi=l([$("esri.Camera")],Vi);const $_=Vi;var cc;let ls=cc=class extends ut{constructor(i){super(i),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(i){return(i%=360)<0&&(i+=360),i}clone(){return new cc({rotation:this.rotation,scale:this.scale,targetGeometry:C(this.targetGeometry)?this.targetGeometry.clone():null,camera:C(this.camera)?this.camera.clone():null})}};function pl(){return{enabled:!this.camera}}l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pl}}}}})],ls.prototype,"rotation",void 0),l([rt("rotation")],ls.prototype,"castRotation",null),l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pl}}}}})],ls.prototype,"scale",void 0),l([d({types:Ky,json:{read:Xi,write:!0,origins:{"web-scene":{read:Xi,write:{overridePolicy:pl}}}}})],ls.prototype,"targetGeometry",void 0),l([d({type:$_,json:{write:!0}})],ls.prototype,"camera",void 0),ls=cc=l([$("esri.Viewpoint")],ls);const bi=ls,Wo={widthBreakpoint:{getValue(i){const e=i.viewSize[0],t=i.breakpoints,s=this.values;return e<=t.xsmall?s.xsmall:e<=t.small?s.small:e<=t.medium?s.medium:e<=t.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(i){const e=i.viewSize[1],t=i.breakpoints,s=this.values;return e<=t.xsmall?s.xsmall:e<=t.small?s.small:e<=t.medium?s.medium:e<=t.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(i){const e=i.viewSize,t=e[0],s=e[1],n=this.values;return s>=t?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},ml={xsmall:544,small:768,medium:992,large:1200};function L_(i){const e=i;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function gl(i,e){return e?Wo[i].valueToClassName[e].split(" "):[]}const T_=i=>{let e=class extends i{constructor(...t){super(...t),this._breakpointsHandles=new Ke,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=ml}initialize(){this._breakpointsHandles.add(I(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),B))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=nt(this._breakpointsHandles))}set breakpoints(t){if(t===this._get("breakpoints"))return;const s=L_(t);if(!s){const n=JSON.stringify(ml,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}t=s?t:ml,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;const t=xo.acquire(),s=xo.acquire();let n,r=!1;for(n in Wo){const o=this[n],a=Wo[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(r=!0,this[n]=a,gl(n,o).forEach(c=>s.push(c)),gl(n,a).forEach(c=>t.push(c)))}r&&(this._applyClassNameChanges(t,s),xo.release(t),xo.release(s))}_applyClassNameChanges(t,s){const n=this.container;n&&(s.forEach(r=>n.classList.remove(r)),t.forEach(r=>n.classList.add(r)))}_removeActiveClassNames(){const t=this.container;if(!t)return;let s;for(s in Wo)gl(s,this[s]).forEach(n=>t.classList.remove(n))}};return l([d()],e.prototype,"breakpoints",null),l([d()],e.prototype,"orientation",void 0),l([d()],e.prototype,"widthBreakpoint",void 0),l([d()],e.prototype,"heightBreakpoint",void 0),e=l([$("esri.views.BreakpointsOwner")],e),e};let cs=class extends K{constructor(){super(...arguments),this.items=new ee,this._watchUpdatingTracking=new Ap,this._callbacks=new Map,this._projector=_a(),this._hiddenProjector=_a()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const s of t.added){const n=()=>s.render();this._callbacks.set(s,n),this._projector.append(this.surface,n)}for(const s of t.removed){const n=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(n.domNode),this._callbacks.delete(s)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,s=this._hiddenProjector;let n;const r=()=>(n=e.render(),n);s.append(t,r),s.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(s.detach(r);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){const s=this.computeBoundingRect(e),n=this.computeBoundingRect(t);return Math.max(s.left,n.left)<=Math.min(s.right,n.right)&&Math.max(s.top,n.top)<=Math.min(s.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(s=>s.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(s=>{t.save(),s.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([d({readOnly:!0})],cs.prototype,"surface",void 0),l([d({readOnly:!0})],cs.prototype,"items",void 0),l([d({readOnly:!0})],cs.prototype,"needsRender",null),l([d({readOnly:!0})],cs.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],cs.prototype,"updating",null),cs=l([$("esri.views.overlay.ViewOverlay")],cs);const bu=cs;function Xn(i,e,t,s){let n=null,r=1e3;typeof e=="number"?(r=e,s=t):(n=e??null,r=t);let o,a=0;const c=()=>{a=0,i.apply(s,o)},u=(...h)=>{n&&n.apply(s,h),o=h,r?a||(a=setTimeout(c,r)):c()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),c())},u.hasPendingUpdates=()=>!!a,u}const Iu=["B","kB","MB","GB","TB"];function A_(i,e){let t=e===0?0:Math.floor(Math.log(e)/Math.log(su.KILOBYTES));t=dr(t,0,Iu.length-1);const s=vo(e/su.KILOBYTES**t,{maximumFractionDigits:2});return or(i.units.bytes[Iu[t]],{fileSize:s})}const k_="esri.widgets.Feature.support.featureUtils",Mu=q.getLogger(k_),R_=/href=(""|'')/gi,P_=/(\{([^\{\r\n]+)\})/g,F_=/\'/g,im=/^\s*expression\//i,O_=/(\n)/gi,D_=/[\u00A0-\u9999<>\&]/gim,V_=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,N_=/^(?:mailto:|tel:)/,sm="relationships/",dc=Rp("short-date-short-time");function nm(i){if(!O(i))return i.get("sourceLayer")||i.get("layer")}async function Ia(i,e){return typeof i=="function"?i.call(null,e):i}function rm(i=""){if(i)return!N_.test(i.trim().toLowerCase())}function od(i){return!!i&&im.test(i)}function z_(i,e){if(!od(e)||!i)return null;const t=e.replace(im,"").toLowerCase();let s=null;return i.some(n=>n.name.toLowerCase()===t&&(s=n,!0)),s}function om(i,e){const t=z_(e,i==null?void 0:i.fieldName);return t?t.title||null:i?i.label||i.fieldName:null}function B_(i,e){const t=e.get(i.toLowerCase());return`{${t&&t.fieldName||i}}`}function H_(i){return i.replace(R_,"")}function ho(i,e){const t=ad(e,i);return t?t.name:i}function q_(i,e){return i&&i.map(t=>ho(t,e))}function ad(i,e){return i&&typeof i.getField=="function"&&e?i.getField(e)??null:null}function am(i){return`${i}`.trim()}function rn({attributes:i,globalAttributes:e,layer:t,text:s,expressionAttributes:n,fieldInfoMap:r}){return s?uc({formattedAttributes:e,template:W_(s,{...e,...n,...i},t),fieldInfoMap:r}):""}function uc({formattedAttributes:i,template:e,fieldInfoMap:t}){return am(H_(or(or(e,s=>B_(s,t)),i)))}function U_(i,e,t=!1){const s=e[i];if(typeof s=="string"){const n="%27",r=(t?encodeURIComponent(s):s).replace(F_,n);e[i]=r}}function j_(i,e=!1){const t={...i};return Object.keys(t).forEach(s=>U_(s,t,e)),t}function G_(i,e,t){const s=(e=am(e))&&e[0]!=="{";return or(i,j_(t,s||!1))}function hc(i,e){return i.replace(P_,(t,s,n)=>{const r=ad(e,n);return r?`{${r.name}}`:s})}function W_(i,e,t){const s=hc(i,t);return s&&s.replace(V_,(n,r,o)=>G_(n,r||o,e))}function Z_(i,e){if(typeof i=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const t=Number(i);if(!isNaN(t))return t}return i}function K_(i){return(i==null?void 0:i.type)==="feature"}function Su(i){return!!(i!=null&&i.layer)}function Q_(i){return(i==null?void 0:i.type)==="map-image"}function Y_(i,e){var u;const t=e.fieldInfos,s=e.fieldName,n=(u=lm(t,s))==null?void 0:u.clone(),r=e.preventPlacesFormatting,o=e.layer,a=ad(o,s);if(n&&(a==null?void 0:a.type)==="date"){const h=n.format||new av;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!Su(o)&&K_(o)&&o.datesInUnknownTimezone||Su(o)&&Q_(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const c=n&&n.format;return typeof i=="string"&&nv(s)&&c?c.formatRasterPixelValue(i):typeof(i=Z_(i,c))=="string"||i==null||c==null?bo(i):r?vo(i,{...tv(c),minimumFractionDigits:0,maximumFractionDigits:20}):c.format(i)}function lm(i,e){if(!i||!i.length||!e)return;const t=e.toLowerCase();let s;return i.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==t)&&(s=n,!0)),s}function X_({fieldName:i,graphic:e,layer:t}){if(Wi(i)||!t||typeof t.getFeatureType!="function")return null;const{typeIdField:s}=t;if(!s||i!==s)return null;const n=t.getFeatureType(e);return n?n.name:null}function J_({fieldName:i,value:e,graphic:t,layer:s}){if(Wi(i)||!s||typeof s.getFieldDomain!="function")return null;const n=t&&s.getFieldDomain(i,{feature:t});return n&&n.type==="coded-value"?n.getName(e):null}function ew(i,e){const{creatorField:t,creationDateField:s,editorField:n,editDateField:r}=i;if(!e)return;const o=e[r];if(typeof o=="number"){const c=e[n];return{type:"edit",date:lo(o,dc),user:c}}const a=e[s];if(typeof a=="number"){const c=e[t];return{type:"create",date:lo(a,dc),user:c}}return null}function tw(i,e){const t=new Map;return i&&i.forEach(s=>{const n=ho(s.fieldName,e);s.fieldName=n,t.set(n.toLowerCase(),s)}),t}function Cu(i){const e=[];if(!i)return e;const{fieldInfos:t,content:s}=i;return t&&e.push(...t),s&&Array.isArray(s)&&s.forEach(n=>{if(n.type==="fields"){const r=n&&n.fieldInfos;r&&e.push(...r)}}),e}function ld(i){return i.replace(D_,e=>`&#${e.charCodeAt(0)};`)}function bo(i){return typeof i=="string"?i.replace(O_,'<br class="esri-text-new-line" />'):i}function cm(i){const{value:e,fieldName:t,fieldInfos:s,fieldInfoMap:n,layer:r,graphic:o}=i;if(e==null)return"";const a=J_({fieldName:t,value:e,graphic:o,layer:r});if(a)return a;const c=X_({fieldName:t,graphic:o,layer:r});if(c)return c;if(n.get(t.toLowerCase()))return Y_(e,{fieldInfos:s||Array.from(n.values()),fieldName:t,layer:r});const u=r&&r.fieldsIndex;return u&&u.isDateField(t)?lo(e,dc):bo(e)}function fl({fieldInfos:i,attributes:e,layer:t,graphic:s,fieldInfoMap:n,relatedInfos:r}){const o={};return r==null||r.forEach(a=>rw({attributes:o,relatedInfo:a,fieldInfoMap:n,fieldInfos:i,layer:t})),e&&Object.keys(e).forEach(a=>{const c=e[a];o[a]=cm({fieldName:a,fieldInfos:i,fieldInfoMap:n,layer:t,value:c,graphic:s})}),o}async function dm(i,e){var h,p;const{layer:t,graphic:s,outFields:n,objectIds:r,returnGeometry:o,spatialReference:a}=i,c=r[0];if(typeof c!="number"&&typeof c!="string"){const g="Could not query required fields for the specified feature. The feature's ID is invalid.",f={layer:t,graphic:s,objectId:c,requiredFields:n};return Mu.warn(g,f),null}if(!((p=(h=Ip(t))==null?void 0:h.operations)!=null&&p.supportsQuery)){const g="The specified layer cannot be queried. The following fields will not be available.",f={layer:t,graphic:s,requiredFields:n,returnGeometry:o};return Mu.warn(g,f),null}const u=t.createQuery();return u.objectIds=r,u.outFields=n!=null&&n.length?n:[t.objectIdField],u.returnGeometry=!!o,u.returnZ=!!o,u.returnM=!!o,u.outSpatialReference=a,(await t.queryFeatures(u,e)).features[0]}async function iw(i){var s;if(!((s=i.expressionInfos)!=null&&s.length))return!1;const e=await Pp(),{arcadeUtils:{hasGeometryFunctions:t}}=e;return t(i)}async function sw({graphic:i,popupTemplate:e,layer:t,spatialReference:s},n){if(!t||!e||(typeof t.load=="function"&&await t.load(n),!i.attributes))return;const r=i.attributes[t.objectIdField];if(r==null)return;const o=[r],a=await e.getRequiredFields(t.fieldsIndex),c=sv(a,i),u=c?[]:a,h=e.returnGeometry||await iw(e);if(c&&!h)return;const p=await dm({layer:t,graphic:i,outFields:u,objectIds:o,returnGeometry:h,spatialReference:s},n);p&&(p.geometry&&(i.geometry=p.geometry),p.attributes&&(i.attributes={...i.attributes,...p.attributes}))}function Wi(i=""){return!!i&&i.includes(sm)}function nw(i){return i?`${sm}${i.layerId}/${i.fieldName}`:""}function xu({attributes:i,graphic:e,relatedInfo:t,fieldInfos:s,fieldInfoMap:n,layer:r}){i&&e&&t&&Object.keys(e.attributes).forEach(o=>{const a=nw({layerId:t.relation.id.toString(),fieldName:o}),c=e.attributes[o];i[a]=cm({fieldName:a,fieldInfos:s,fieldInfoMap:n,layer:r,value:c,graphic:e})})}function rw({attributes:i,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n}){i&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(r=>xu({attributes:i,graphic:r,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(r=>xu({attributes:i,graphic:r,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n})))}const Eu=i=>{if(!i)return!1;const e=i.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},um=({layer:i,method:e,query:t,definitionExpression:s})=>{var o,a;if(!((a=(o=i.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||e==="attachments")return;const n=C(t.where)?t.where:null,r=C(t.geometry)?t.geometry:null;Eu(s)||Eu(n)||(r==null?void 0:r.type)==="extent"||t.resultType==="tile"||(t.cacheHint=!0)},ow=({query:i,layer:e,method:t})=>{um({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},aw=({queryPayload:i,layer:e,method:t})=>{um({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function lw(i,e,t){return i&&e&&t?$u(i.allLayers,e,t)||$u(i.allTables,e,t):null}function $u(i,e,t){return i.find(s=>s!==e&&s.type==="feature"&&s.url===e.url&&s.layerId===t.relatedTableId)}const Lu={editing:!1,operations:{add:!0,update:!0,delete:!0}},hm=ee.ofType(iv);let $t=class extends K{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...Lu},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new hm,this.fileInfos=new ee,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(I(()=>this.graphic,()=>this._graphicChanged(),B))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...Lu,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&t.capabilities&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new L("invalid-layer","getAttachments(): A valid layer is required.");const s=this._getObjectId(),n=new nu({objectIds:[s],returnMetadata:!0}),r=[],o=e.queryAttachments(n).then(c=>c[s]||r).catch(()=>r);this._getAttachmentsPromise=o,this.notifyChange("state");const a=await o;return t.removeAll(),a.length&&t.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(e,t=this.graphic){var c;const{_attachmentLayer:s,attachmentInfos:n,abilities:r}=this;if(!t)throw new L("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new L("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((c=r.operations)!=null&&c.add))throw new L("invalid-abilities","addAttachment(): add abilities are required.");if(!s||typeof s.addAttachment!="function")throw new L("invalid-layer","addAttachment(): A valid layer is required.");const o=s.addAttachment(t,e).then(u=>this._queryAttachment(u.objectId,t)),a=await o;return n.add(a),a}async deleteAttachment(e){var c;const{_attachmentLayer:t,attachmentInfos:s,graphic:n,abilities:r}=this;if(!e)throw new L("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((c=r.operations)!=null&&c.delete))throw new L("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new L("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new L("invalid-graphic","deleteAttachment(): A graphic is required.");const o=t.deleteAttachments(n,[e.id]).then(()=>e),a=await o;return s.remove(a),a}async updateAttachment(e,t=this.activeAttachmentInfo){var h;const{_attachmentLayer:s,attachmentInfos:n,graphic:r,abilities:o}=this;if(!e)throw new L("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new L("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((h=o.operations)!=null&&h.update))throw new L("invalid-abilities","updateAttachment(): Update abilities are required.");const a=n.findIndex(p=>p===t);if(!s||typeof s.updateAttachment!="function")throw new L("invalid-layer","updateAttachment(): A valid layer is required.");if(!r)throw new L("invalid-graphic","updateAttachment(): A graphic is required.");const c=s.updateAttachment(r,t.id,e).then(p=>this._queryAttachment(p.objectId)),u=await c;return n.splice(a,1,u),u}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const s={file:e,form:t};return this.fileInfos.add(s),s}updateFile(e,t,s=this.activeFileInfo){if(!e||!t||!s)return null;const n=this.fileInfos.findIndex(r=>s===r);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:t}),this.fileInfos.items[n]}deleteFile(e){const t=this.fileInfos.find(s=>s.file===e);return t?(this.fileInfos.remove(t),t):null}async _queryAttachment(e,t){const{_attachmentLayer:s}=this;if(!e||!(s!=null&&s.queryAttachments))throw new L("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(t),r=new nu({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return s.queryAttachments(r).then(o=>o[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=nm(e);this._attachmentLayer=t?t.type==="scene"&&C(t.associatedLayer)?t.associatedLayer:t:null}};l([d()],$t.prototype,"abilities",void 0),l([rt("abilities")],$t.prototype,"castAbilities",null),l([d()],$t.prototype,"activeAttachmentInfo",void 0),l([d()],$t.prototype,"activeFileInfo",void 0),l([d({readOnly:!0,type:hm})],$t.prototype,"attachmentInfos",void 0),l([d()],$t.prototype,"fileInfos",void 0),l([d({type:Si})],$t.prototype,"graphic",void 0),l([d()],$t.prototype,"mode",void 0),l([d({readOnly:!0})],$t.prototype,"state",null),l([d()],$t.prototype,"filesEnabled",void 0),l([d({readOnly:!0})],$t.prototype,"supportsResizeAttachments",null),$t=l([$("esri.widgets.Attachments.AttachmentsViewModel")],$t);const cd=$t;function Tu(i){const e=i.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function cw(i){const e=_o("esri/themes/base/images/files/");return i?i==="text/plain"?`${e}text-32.svg`:i==="application/pdf"?`${e}pdf-32.svg`:i==="text/csv"?`${e}csv-32.svg`:i==="application/gpx+xml"?`${e}gpx-32.svg`:i==="application/x-dwf"?`${e}cad-32.svg`:i==="application/postscript"||i==="application/json"||i==="text/xml"||i==="model/vrml"?`${e}code-32.svg`:i==="application/x-zip-compressed"||i==="application/x-7z-compressed"||i==="application/x-gzip"||i==="application/x-tar"||i==="application/x-gtar"||i==="application/x-bzip2"||i==="application/gzip"||i==="application/x-compress"||i==="application/x-apple-diskimage"||i==="application/x-rar-compressed"||i==="application/zip"?`${e}zip-32.svg`:i.includes("image/")?`${e}image-32.svg`:i.includes("audio/")?`${e}sound-32.svg`:i.includes("video/")?`${e}video-32.svg`:i.includes("msexcel")||i.includes("ms-excel")||i.includes("spreadsheetml")?`${e}excel-32.svg`:i.includes("msword")||i.includes("ms-word")||i.includes("wordprocessingml")?`${e}word-32.svg`:i.includes("powerpoint")||i.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const Au={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},se="esri-attachments",Os="esri-button",R={base:se,loaderContainer:`${se}__loader-container`,loader:`${se}__loader`,fadeIn:`${se}--fade-in`,container:`${se}__container`,containerList:`${se}__container--list`,containerPreview:`${se}__container--preview`,actions:`${se}__actions`,deleteButton:`${se}__delete-button`,addAttachmentButton:`${se}__add-attachment-button`,errorMessage:`${se}__error-message`,items:`${se}__items`,item:`${se}__item`,itemButton:`${se}__item-button`,itemMask:`${se}__item-mask`,itemMaskIcon:`${se}__item-mask--icon`,itemImage:`${se}__image`,itemImageResizable:`${se}__image--resizable`,itemLabel:`${se}__label`,itemFilename:`${se}__filename`,itemChevronIcon:`${se}__item-chevron-icon`,itemLink:`${se}__item-link`,itemLinkOverlay:`${se}__item-link-overlay`,itemLinkOverlayIcon:`${se}__item-link-overlay-icon`,itemEditIcon:`${se}__item-edit-icon`,itemAddIcon:`${se}__item-add-icon`,itemAddButton:`${se}__item-add-button`,formNode:`${se}__form-node`,fileFieldset:`${se}__file-fieldset`,fileLabel:`${se}__file-label`,fileName:`${se}__file-name`,fileInput:`${se}__file-input`,metadata:`${se}__metadata`,metadataFieldset:`${se}__metadata-fieldset`,progressBar:`${se}__progress-bar`,esriWidget:"esri-widget",esriButton:Os,buttonDisabled:`${Os}--disabled`,esriButtonSecondary:`${Os}--secondary`,esriButtonTertiary:`${Os}--tertiary`,esriButtonThird:`${Os}--third`,esriButtonSmall:`${Os}--small`,esriButtonHalf:`${Os}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},yl=window.CSS;let mt=class extends Me{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...Au},this._supportsImageOrientation=yl&&yl.supports&&yl.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new cd),this.addHandles([We(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),We(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),I(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),B)])}loadDependencies(){return Promise.all([T(()=>import("./calcite-icon-ea91723d.js"),["assets/calcite-icon-ea91723d.js","assets/icon-e372469c.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js"])])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...Au,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(s=>(this._set("submitting",!1),this._set("error",null),t.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new L("attachments:add-attachment",this.messages.addErrorMessage,s)),s})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(s=>(this._set("submitting",!1),this._set("error",null),t.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new L("attachments:delete-attachment",this.messages.deleteErrorMessage,s)),s})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(s=>(this._set("submitting",!1),this._set("error",null),e.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new L("attachments:update-attachment",this.messages.updateErrorMessage,s)),s})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){var s;const t=this.viewModel.deleteFile(e||((s=this.viewModel.activeFileInfo)==null?void 0:s.file));return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:s}=t;return m("div",{class:this.classes(R.base,R.esriWidget)},e?this.renderProgressBar():null,s==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?m("div",{key:"error-message",class:R.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:s}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(s||e):this.renderAttachmentContainer()}renderLoading(){return m("div",{class:R.loaderContainer,key:"loader"},m("div",{class:R.loader}))}renderProgressBar(){return this.visibleElements.progressBar?m("div",{class:R.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,s=e||!t,n=this.visibleElements.cancelAddButton?m("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(R.esriButton,R.esriButtonTertiary,R.esriButtonSmall,R.esriButtonHalf,e&&R.buttonDisabled)},this.messages.cancel):null,r=this.visibleElements.addSubmitButton?m("button",{type:"submit",disabled:s,class:this.classes(R.esriButton,R.esriButtonSecondary,R.esriButtonSmall,R.esriButtonHalf,{[R.buttonDisabled]:s})},this.messages.add):null,o=t?m("span",{key:"file-name",class:R.fileName},t.name):null,a=m("form",{bind:this,afterCreate:Es,afterRemoved:eu,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},m("fieldset",{class:R.fileFieldset},o,m("label",{class:this.classes(R.fileLabel,R.esriButton,R.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,m("input",{class:R.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),r,n);return m("div",{key:"add-form-container",class:R.formNode},a)}renderDetailsForm(e){var S,x,A;const{visibleElements:t,viewModel:s,selectedFile:n,submitting:r}=this,{abilities:o}=s,a=r||!n;let c,u,h,p;n?(c=n.type,u=n.name,h=n.size):e&&"file"in e?(c=e.file.type,u=e.file.name,h=e.file.size):e&&"contentType"in e&&(c=e.contentType,u=e.name,h=e.size,p=e.url);const g=o.editing&&((S=o.operations)!=null&&S.delete)&&t.deleteButton?m("button",{key:"delete-button",type:"button",disabled:r,bind:this,onclick:k=>this._submitDeleteAttachment(k,e),class:this.classes(R.esriButton,R.esriButtonSmall,R.esriButtonTertiary,R.deleteButton,{[R.buttonDisabled]:r})},this.messages.delete):void 0,f=o.editing&&((x=o.operations)!=null&&x.update)&&t.updateButton?m("button",{disabled:a,key:"update-button",type:"submit",class:this.classes(R.esriButton,R.esriButtonSmall,R.esriButtonThird,{[R.buttonDisabled]:a})},this.messages.update):void 0,y=this.visibleElements.cancelUpdateButton?m("button",{disabled:r,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(R.esriButton,R.esriButtonSmall,R.esriButtonTertiary,R.esriButtonThird,{[R.buttonDisabled]:r})},this.messages.cancel):void 0,_=o.editing&&((A=o.operations)!=null&&A.update)?m("fieldset",{key:"file",class:R.fileFieldset},m("span",{key:"file-name",class:R.fileName},u),m("label",{class:this.classes(R.fileLabel,R.esriButton,R.esriButtonSecondary)},this.messages.changeFile,m("input",{class:R.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,v=m("fieldset",{key:"size",class:R.metadataFieldset},m("label",null,A_(this.messagesUnits,h??0))),w=m("fieldset",{key:"content-type",class:R.metadataFieldset},m("label",null,c)),b=C(p)?m("a",{class:R.itemLink,href:p,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),m("div",{class:R.itemLinkOverlay},m("span",{class:R.itemLinkOverlayIcon},m("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),M=m("form",{bind:this,afterCreate:Es,afterRemoved:eu,"data-node-ref":"_updateAttachmentForm",onsubmit:k=>this._submitUpdateAttachment(k,e)},m("div",{class:R.metadata},v,w),_,m("div",{class:R.actions},g,y,f));return m("div",{key:"edit-form-container",class:R.formNode},b,M)}renderImageMask(e,t){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t):null}renderGenericImageMask(e,t){const{supportsResizeAttachments:s}=this.viewModel,n=cw(t),r={[R.itemImageResizable]:s};return m("div",{class:this.classes(R.itemMaskIcon,R.itemMask)},m("img",{title:e,alt:e,src:n,class:this.classes(r,R.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:s}=this.viewModel;if(!e)return null;const{contentType:n,name:r,url:o}=e;if(!s||!Tu(n))return this.renderGenericImageMask(r,n);const a=this._getCSSTransform(e),c=a?{transform:a,"image-orientation":"none"}:{},u=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${t}`,h={[R.itemImageResizable]:s};return m("div",{class:this.classes(R.itemMask)},m("img",{styles:c,alt:r,title:r,src:u,class:this.classes(h,R.itemImage)}))}renderFile(e){const{file:t}=e;return m("li",{class:R.item,key:t},m("button",{key:"details-button",bind:this,class:R.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),m("label",{class:R.itemLabel},m("span",{class:R.itemFilename},t.name||this.messages.noTitle),m("span",{"aria-hidden":"true",class:this.classes(R.itemChevronIcon,qt(this.container)?R.iconLeft:R.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:s,effectiveDisplayType:n}=this,{abilities:r,supportsResizeAttachments:o}=s,{contentType:a,name:c,url:u}=e,h=this.renderImageMask(e,t==="list"?48:400),p=r.editing?m("span",{"aria-hidden":"true",class:this.classes(R.itemChevronIcon,qt(this.container)?R.iconLeft:R.iconRight)}):null,g=[h,n==="preview"&&o&&Tu(a)?null:m("label",{class:R.itemLabel},m("span",{class:R.itemFilename},c||this.messages.noTitle),p)],f=r.editing?m("button",{key:"details-button",bind:this,class:R.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},g):m("a",{key:"details-link",class:R.itemButton,href:u??void 0,target:"_blank"},g);return m("li",{class:R.item,key:e},f)}renderAttachmentContainer(){var y;const{effectiveDisplayType:e,viewModel:t,visibleElements:s}=this,{attachmentInfos:n,abilities:r,fileInfos:o}=t,a=!!(n!=null&&n.length),c=!!(o!=null&&o.length),u={[R.containerList]:e!=="preview",[R.containerPreview]:e==="preview"},h=r.editing&&((y=r.operations)!=null&&y.add)&&s.addButton?m("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(R.esriButton,R.esriButtonTertiary,R.addAttachmentButton),type:"button"},m("span",{"aria-hidden":"true",class:this.classes(R.itemAddIcon,R.iconPlus)}),this.messages.add):void 0,p=a?m("ul",{key:"attachments-list",class:R.items},n.toArray().map(_=>this.renderAttachmentInfo({attachmentInfo:_,displayType:e}))):void 0,g=c?m("ul",{key:"file-list",class:R.items},o.toArray().map(_=>this.renderFile(_))):void 0,f=c||a?void 0:m("div",{class:R.empty},this.messages.noAttachments);return m("div",{key:"attachments-container",class:this.classes(R.container,u)},p,g,f,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,s=t&&t.files&&t.files.item(0);this._set("selectedFile",s)}_submitDeleteAttachment(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};l([d()],mt.prototype,"abilities",null),l([d()],mt.prototype,"displayType",void 0),l([d({readOnly:!0})],mt.prototype,"effectiveDisplayType",null),l([d()],mt.prototype,"graphic",null),l([d()],mt.prototype,"label",null),l([d(),ge("esri/widgets/Attachments/t9n/Attachments")],mt.prototype,"messages",void 0),l([d(),ge("esri/core/t9n/Units")],mt.prototype,"messagesUnits",void 0),l([d({readOnly:!0})],mt.prototype,"selectedFile",void 0),l([d({readOnly:!0})],mt.prototype,"submitting",void 0),l([d({readOnly:!0})],mt.prototype,"error",void 0),l([d({type:cd})],mt.prototype,"viewModel",void 0),l([d()],mt.prototype,"visibleElements",void 0),l([rt("visibleElements")],mt.prototype,"castVisibleElements",null),mt=l([$("esri.widgets.Attachments")],mt);const dw=mt;let Dr=class extends cd{constructor(e){super(e),this.description=null,this.title=null}};l([d()],Dr.prototype,"description",void 0),l([d()],Dr.prototype,"title",void 0),Dr=l([$("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Dr);const dd=Dr,uw={heading:"esri-widget__heading"};function Ls({level:i,class:e,...t},s){const n=pm(i);return m(`h${n}`,{...t,class:Or(uw.heading,e),role:"heading","aria-level":String(n)},s)}function pm(i){return dr(Math.ceil(i),1,6)}function hw(i,e=1){return pm(i+e)}const vl="esri-feature-element-info",_l={base:vl,title:`${vl}__title`,description:`${vl}__description`};let $n=class extends Me{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return m("div",{class:_l.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?m(Ls,{level:this.headingLevel,class:_l.title},e):null}renderDescription(){const{description:e}=this;return e?m("div",{key:"description",class:_l.description},e):null}};l([d()],$n.prototype,"description",void 0),l([d()],$n.prototype,"headingLevel",void 0),l([d()],$n.prototype,"title",void 0),$n=l([$("esri.widgets.Feature.support.FeatureElementInfo")],$n);const Qa=$n,pw={base:"esri-feature-attachments"};let hi=class extends Me{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new dw,this.headingLevel=2,this.viewModel=new dd}initialize(){this._featureElementInfo=new Qa,this.addHandles([I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),B),I(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,B)])}destroy(){var e;this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return m("div",{class:pw.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:t,headingLevel:s}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:t,headingLevel:s})}};l([d({readOnly:!0})],hi.prototype,"attachmentsWidget",void 0),l([d()],hi.prototype,"description",null),l([d()],hi.prototype,"displayType",null),l([d()],hi.prototype,"graphic",null),l([d()],hi.prototype,"headingLevel",void 0),l([d()],hi.prototype,"title",null),l([d({type:dd})],hi.prototype,"viewModel",void 0),hi=l([$("esri.widgets.Feature.FeatureAttachments")],hi);const mw=hi;let ds=class extends dn(K){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(I(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},B))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:s}=this;e&&t&&(Ia(s,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const t=this.graphic;if(!t||!e)return;const s=Ia(e,{graphic:t}).catch(()=>null);this._loadingPromise=s,this.notifyChange("state");const n=await s;s===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};l([d({readOnly:!0})],ds.prototype,"created",void 0),l([d()],ds.prototype,"creator",void 0),l([d()],ds.prototype,"destroyer",void 0),l([d({type:Si})],ds.prototype,"graphic",void 0),l([d({readOnly:!0})],ds.prototype,"state",null),ds=l([$("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],ds);const Ma=ds;function ke(){return function(i,e){if(!i[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:fw(i[e])}}}function gw(i){const e=i==null?void 0:i.type;return i instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function fw(i){return function(e,...t){gw(e)?Ep(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):i.call(this,e,...t)}}function ud(i){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const t=e._delegatedEventNames,s=Array.isArray(i)?i:yw(i);t.push(...s)}}function yw(i){return i.split(",").map(e=>e.trim())}const mm="calcite-mode-";function vw(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function po(){return vw().startsWith("dark")}function _w(){return`${mm}${po()?"dark":"light"}`}function ww(i){bw(i),i.classList.add(_w())}function bw(i){Array.from(i.classList).forEach(e=>{e.startsWith(mm)&&i.classList.remove(e)})}const wl="esri-feature-content",bl={base:wl,loaderContainer:`${wl}__loader-container`,loader:`${wl}__loader`};let Ln=class extends Me{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=s=>{Array.from(s.querySelectorAll("a")).forEach(n=>{rm(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return m("div",{class:bl.loaderContainer,key:"loader"},m("div",{class:bl.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?m("div",{key:e,bind:e,afterCreate:this._attachToNode}):hr(e)?m("div",{key:e},!e.destroyed&&e.render()):m("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return m("div",{class:bl.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};l([d()],Ln.prototype,"creator",null),l([d()],Ln.prototype,"graphic",null),l([d({type:Ma})],Ln.prototype,"viewModel",void 0),Ln=l([$("esri.widgets.Feature.FeatureContent")],Ln);const Zo=Ln;let Ni=class extends K{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,s=[];return t==null||t.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const r=n.clone();r.label=om(r,e),s.push(r)}),s}};l([d()],Ni.prototype,"attributes",void 0),l([d({type:[lv]})],Ni.prototype,"expressionInfos",void 0),l([d()],Ni.prototype,"description",void 0),l([d({type:[Fp]})],Ni.prototype,"fieldInfos",void 0),l([d({readOnly:!0})],Ni.prototype,"formattedFieldInfos",null),l([d()],Ni.prototype,"title",void 0),Ni=l([$("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Ni);const Ya=Ni,Iw=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Mw(i){let e=null;return Iw.some(t=>(t.pattern.test(i)&&(e=t),!!e)),e}function Sw(i,e){if(typeof e!="string"||!e)return e;const t=Mw(e);if(!t)return e;const s=e.match(t.pattern),n=s&&s[2],r=or(or(t.label,{messages:i,hierPart:n}),{appName:t.appName}),o=t.target?` target="${t.target}"`:"",a=t.target==="_blank"?' rel="noreferrer"':"";return e.replace(t.pattern,`<a${o} href="$1"${a}>${r}</a>`)}const $o="esri-feature-fields",Mr={base:$o,fieldHeader:`${$o}__field-header`,fieldData:`${$o}__field-data`,fieldDataDate:`${$o}__field-data--date`,esriTable:"esri-widget__table"};let ti=class extends Me{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new Ya,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Qa,this.addHandles(I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),B))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:s}=this.viewModel,n=e.fieldName,r=e.label||n,o=s?s[n]==null?"":s[n]:"",a=!(!e.format||!e.format.dateFormat),c=typeof o=="number"&&!a?this._forceLTR(o):Sw(this.messagesURIUtils,o),u={[Mr.fieldDataDate]:a};return m("tr",{key:`fields-element-info-row-${n}-${t}`},m("th",{key:`fields-element-info-row-header-${n}-${t}`,class:Mr.fieldHeader,innerHTML:r}),m("td",{key:`fields-element-info-row-data-${n}-${t}`,class:this.classes(Mr.fieldData,u),innerHTML:c}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?m("table",{class:Mr.esriTable,summary:this.messages.fieldsSummary},m("tbody",null,e.map((t,s)=>this.renderFieldInfo(t,s)))):null}render(){var e;return m("div",{class:Mr.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var s;const{description:e,title:t}=this;(s=this._featureElementInfo)==null||s.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};l([d()],ti.prototype,"attributes",null),l([d()],ti.prototype,"description",null),l([d()],ti.prototype,"expressionInfos",null),l([d()],ti.prototype,"fieldInfos",null),l([d()],ti.prototype,"title",null),l([d({type:Ya,nonNullable:!0})],ti.prototype,"viewModel",void 0),l([d(),ge("esri/widgets/Feature/t9n/Feature")],ti.prototype,"messages",void 0),l([d(),ge("esri/widgets/support/t9n/uriUtils")],ti.prototype,"messagesURIUtils",void 0),ti=l([$("esri.widgets.Feature.FeatureFields")],ti);const gm=ti,Cw=/^-?(\d+)(\.(\d+))?$/i;function xw(i,e){return i-e}function Ew(i,e){let t,s;return t=Number(i.toFixed(e)),t<i?s=t+1/10**e:(s=t,t-=1/10**e),t=Number(t.toFixed(e)),s=Number(s.toFixed(e)),[t,s]}function $w(i,e,t,s,n){const r=Ko(i,e,t,s),o=r.previous==null||r.previous<=n,a=r.next==null||r.next<=n;return o&&a||r.previous+r.next<=2*n}function Sa(i){const e=String(i),t=e.match(Cw);if(t&&t[1])return{integer:t[1].split("").length,fractional:t[3]?t[3].split("").length:0};if(e.toLowerCase().includes("e")){const s=e.split("e"),n=s[0],r=s[1];if(n&&r){const o=Number(n);let a=Number(r);const c=a>0;c||(a=Math.abs(a));const u=Sa(o);return c?(u.integer+=a,a>u.fractional?u.fractional=0:u.fractional-=a):(u.fractional+=a,a>u.integer?u.integer=1:u.integer-=a),u}}return{integer:0,fractional:0}}function Ko(i,e,t,s){const n={previous:null,next:null};if(t!=null){const r=i-t,o=e-t-r;n.previous=Math.floor(Math.abs(100*o/r))}if(s!=null){const r=s-i,o=s-e-r;n.next=Math.floor(Math.abs(100*o/r))}return n}function Ca(i,e={}){const t=i.slice(0),{tolerance:s=2,strictBounds:n=!1,indexes:r=t.map((o,a)=>a)}=e;r.sort(xw);for(let o=0;o<r.length;o++){const a=r[o],c=t[a],u=a===0?null:t[a-1],h=a===t.length-1?null:t[a+1],p=Sa(c).fractional;if(p){let g,f=0,y=!1;for(;f<=p&&!y;){const _=Ew(c,f);g=n&&o===0?_[1]:_[0],y=$w(c,g,u,h,s),f++}y&&(t[a]=g)}}return t}const Lw={maximumFractionDigits:20};function Tw(i){return vo(i,Lw)}const fm="<",ym=">",Aw=Rp("short-date");function vm(i,e,t,s){let n="";e===0?n=`${fm} `:e===t&&(n=`${ym} `);let r=null;return r=s?lo(i,Aw):Tw(i),n+r}const kw=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function pc(i){if(!("visualVariables"in i)||!i.visualVariables)return null;const e=i.visualVariables.find(o=>o.type==="color");if(!e)return null;let t=null,s=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;t=e.stops[0].value,s=e.stops[e.stops.length-1].value}const n=t!=null&&s!=null?t+(s-t)/2:0,{getColor:r}=await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"]);return r(e,n)??null}async function _m(i,e){const t=i.trailCap,s=i.trailWidth||1,n=e||await pc(i)||i.color;return new Qc({cap:t,color:n,width:s})}const Rw=new Ie([64,64,64]);function wm(i,e){const t=[],s=i.length-1;return i.length===5?t.push(0,2,4):t.push(0,s),i.map((n,r)=>t.includes(r)?vm(n,r,s,e):null)}async function mc(i,e,t){let s=!1,n=[],r=[];if(i.stops){const u=i.stops;n=u.map(h=>h.value),s=u.some(h=>!!h.label),s&&(r=u.map(h=>h.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const c=s?null:wm(n,t??!1);return(await Promise.all(n.map(async(u,h)=>({value:u,color:i.type==="opacity"?await Pw(u,i,e):(await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"])).getColor(i,u),label:s?r[h]:(c==null?void 0:c[h])??""})))).reverse()}async function Pw(i,e,t=Rw){const s=new Ie(t),n=(await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"])).getOpacity(e,i);return n!=null&&(s.a=n),s}function Fw(i){let e=!1,t=[],s=[];t=i.map(a=>a.value),e=i.some(a=>!!a.label),e&&(s=i.map(a=>a.label??""));const n=t[0],r=t[t.length-1];if(n==null&&r==null)return null;const o=e?null:wm(t,!1);return t.map((a,c)=>({value:a,color:bm(a,i),label:e?s[c]:(o==null?void 0:o[c])??""})).reverse()}function bm(i,e){const{startIndex:t,endIndex:s,weight:n}=Ow(i,e);if(t===s)return e[t].color;const r=Ie.blendColors(e[t].color,e[s].color,n);return new Ie(r)}function Ow(i,e){let t=0,s=e.length-1;return e.some((n,r)=>i<n.value?(s=r,!0):(t=r,!1)),{startIndex:t,endIndex:s,weight:(i-e[t].value)/(e[s].value-e[t].value)}}function Dw(i,e){let t=[];if(i&&i.type==="multipart")i.colorRamps.reverse().forEach((s,n)=>{n===0?t.push({value:e.max,color:new Ie(s.toColor),label:"high"}):t.push({value:null,color:new Ie(s.toColor),label:""}),n===i.colorRamps.length-1?t.push({value:e.min,color:new Ie(s.fromColor),label:"low"}):t.push({value:null,color:new Ie(s.fromColor),label:""})});else{let s,n;i&&i.type==="algorithmic"?(s=i.fromColor,n=i.toColor):(s=[0,0,0,1],n=[255,255,255,1]),t=[{value:e.max,color:new Ie(n),label:"high"},{value:e.min,color:new Ie(s),label:"low"}]}return t}function Im(i){if(!i.colorStops)return[];const e=[...i.colorStops].filter(s=>{var n;return((n=s.color)==null?void 0:n.a)>0});let t=e.length-1;if(e&&e[0]){const s=e[t];s&&s.ratio!==1&&(e.push(new Cv({ratio:1,color:s.color})),t++)}return e.map((s,n)=>{var o,a;let r="";return n===0?r=((o=i.legendOptions)==null?void 0:o.minLabel)||"low":n===t&&(r=((a=i.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:s.color,label:r,ratio:s.ratio}}).reverse()}q.getLogger("esri.renderers.support.utils");async function Rt(i,e,t){by(i,e,()=>[]).push(...t)}async function Vw(i){var t,s;const e=new Map;if(!i)return e;if("visualVariables"in i&&i.visualVariables){const n=i.visualVariables.filter(r=>r.type==="color");for(const r of n){const o=(await mc(r)??[]).map(a=>a.color);await Rt(e,r.field||r.valueExpression,o)}}if(i.type==="heatmap"){const n=Im(i).map(r=>r.color);await Rt(e,i.field||i.valueExpression,n)}else if(i.type==="pie-chart"){for(const n of i.attributes)await Rt(e,n.field||n.valueExpression,[n.color]);await Rt(e,"default",[(t=i==null?void 0:i.othersCategory)==null?void 0:t.color,un(i.backgroundFillSymbol,null)])}else if(i.type==="dot-density"){for(const n of i.attributes)await Rt(e,n.field||n.valueExpression,[n.color]);await Rt(e,"default",[i.backgroundColor])}else if(i.type==="unique-value")if(((s=i.authoringInfo)==null?void 0:s.type)==="predominance")for(const n of i.uniqueValueInfos??[])await Rt(e,n.value.toString(),[un(n.symbol,null)]);else{const n=(i.uniqueValueInfos??[]).map(u=>un(u.symbol,null)),{field:r,field2:o,field3:a,valueExpression:c}=i;(r||c)&&await Rt(e,r||c,n),o&&await Rt(e,o,n),a&&await Rt(e,a,n)}else if(i.type==="class-breaks"){const n=i.classBreakInfos.map(a=>un(a.symbol,null)),{field:r,valueExpression:o}=i;await Rt(e,r??o,n)}else i.type==="simple"&&await Rt(e,"default",[un(i.symbol,null)]);return"defaultSymbol"in i&&i.defaultSymbol&&await Rt(e,"default",[un(i.defaultSymbol,null)]),e.forEach((n,r)=>{const o=Ey(n.filter(Boolean),(a,c)=>JSON.stringify(a)===JSON.stringify(c));e.set(r,o)}),e}const Nw="esri.widgets.Feature.support.relatedFeatureUtils",ku=q.getLogger(Nw),Ru=new Map;function Qo(i){if(!Wi(i))return null;const[e,t]=i.split("/").slice(1);return{layerId:e,fieldName:t}}function zw(i,e){if(!e.relationships)return null;let t=null;const{relationships:s}=e;return s.some(n=>n.id===parseInt(i,10)&&(t=n,!0)),t}function Bw({originRelationship:i,relationships:e,layerId:t}){let s=null;return e&&e.some(n=>(`${n.relatedTableId}`===t&&n.id===(i==null?void 0:i.id)&&(s=n),!!s)),s}function Hw(i,e){const t=e.toLowerCase();for(const s in i)if(s.toLowerCase()===t)return i[s];return null}function qw(i,e){const t=zw(i,e);if(t)return{url:`${e.url}/${t.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:t,relatedFields:[],outStatistics:[]}}function Uw(i,e){if(!e||!i)return;const{features:t,statsFeatures:s}=i,n=t&&t.value;e.relatedFeatures=n?n.features:[];const r=s&&s.value;e.relatedStatsFeatures=r?r.features:[]}function jw(i,e,t,s){var r;const n=new sc;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[i.attributes[t.objectIdField]],((r=t.queryRelatedFeatures)==null?void 0:r.call(t,n,s))??Promise.resolve({})}function Gw(i,e,t){let s=0;const n=[];for(;s<e.length;)n.push(`${i} IN (${e.slice(s,t+s)})`),s+=t;return n.join(" OR ")}async function Ww(i,e,t,s){const n=t.layerId.toString(),{layerInfo:r,relation:o,relatedFields:a,outStatistics:c,url:u,sourceSpatialReference:h}=e;if(!r||!o)return null;const p=Bw({originRelationship:o,relationships:r.relationships,layerId:n});if(p!=null&&p.relationshipTableId&&p.keyFieldInRelationshipTable){const f=(await jw(i,p,t,s))[i.attributes[t.objectIdField]];if(!f)return null;const y=f.features.map(_=>_.attributes[r.objectIdField]);if(c!=null&&c.length&&r.supportsStatistics){const _=new ul;_.where=Gw(r.objectIdField,y,1e3),_.outFields=a,_.outStatistics=c,_.sourceSpatialReference=h;const v={features:Promise.resolve(f),statsFeatures:dl(u,_)};return Ge(v)}}const g=p==null?void 0:p.keyField;if(g){const f=rv(Xw(r.fields,g)),y=Hw(i.attributes,o.keyField),_=f?`${g}=${y}`:`${g}='${y}'`,v=dl(u,new ul({where:_,outFields:e.relatedFields,sourceSpatialReference:h}),s),w=e.outStatistics&&e.outStatistics.length>0&&r.supportsStatistics?dl(u,new ul({where:_,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:h}),s):null,b={features:v};return w&&(b.statsFeatures=w),Ge(b)}return null}function Zw(i,e){return ri(i,{query:{f:"json"},signal:e&&e.signal})}function Kw({relatedInfos:i,layer:e},t){const s={};return i.forEach((n,r)=>{const{relation:o}=n;if(!o){const p=new L("relation-required","A relation is required on a layer to retrieve related records.");throw ku.error(p),p}const{relatedTableId:a}=o;if(typeof a!="number"){const p=new L("A related table ID is required on a layer to retrieve related records.");throw ku.error(p),p}const c=`${e.url}/${a}`,u=Ru.get(c),h=u||Zw(c);u||Ru.set(c,h),s[r]=h}),my(Ge(s),t)}function Qw({graphic:i,relatedInfos:e,layer:t},s){const n={};return e.forEach((r,o)=>{r.layerInfo&&(n[o]=Ww(i,r,t,s))}),Ge(n)}function Yw({relatedInfo:i,fieldName:e,fieldInfo:t}){var s,n;if((s=i.relatedFields)==null||s.push(e),t.statisticType){const r=new Lv({statisticType:t.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=i.outStatistics)==null||n.push(r)}}function Xw(i,e){if(i!=null){e=e.toLowerCase();for(const t of i)if(t&&t.name.toLowerCase()===e)return t}return null}const Pu={chartAnimation:!0};let qe=class extends K{constructor(e){super(e),this.abilities={...Pu},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...Pu,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,s=(e+t)%t;this.activeMediaInfoIndex=s}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,s=t+e;this._setContentElementMedia(s)}_formatMediaInfos(){const{mediaInfos:e,layer:t}=this,s=this.attributes??{},n=this.formattedAttributes??{},r=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(a=>{const c=a==null?void 0:a.clone();if(!c)return null;if(c.title=rn({attributes:s,fieldInfoMap:o,globalAttributes:n,expressionAttributes:r,layer:t,text:c.title}),c.caption=rn({attributes:s,fieldInfoMap:o,globalAttributes:n,expressionAttributes:r,layer:t,text:c.caption}),c.altText=rn({attributes:s,fieldInfoMap:o,globalAttributes:n,expressionAttributes:r,layer:t,text:c.altText}),c.type==="image"){const{value:u}=c;return this._setImageValue({value:u,formattedAttributes:n,layer:t}),c.value.sourceURL?c:void 0}if(c.type==="pie-chart"||c.type==="line-chart"||c.type==="column-chart"||c.type==="bar-chart"){const{value:u}=c;return this._setChartValue({value:u,chartType:c.type,attributes:s,formattedAttributes:n,layer:t,expressionAttributes:r}),c}return null}).filter(C))??[]}_setImageValue(e){const t=this.fieldInfoMap??new Map,{value:s,formattedAttributes:n,layer:r}=e,{linkURL:o,sourceURL:a}=s;if(a){const c=hc(a,r);s.sourceURL=uc({formattedAttributes:n,template:c,fieldInfoMap:t})}if(o){const c=hc(o,r);s.linkURL=uc({formattedAttributes:n,template:c,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:s,formattedAttributes:n,chartType:r,layer:o,expressionAttributes:a}=e,{popupTemplate:c,relatedInfos:u}=this,{fields:h,normalizeField:p}=t,g=o;if(t.fields=q_(h,g),p&&(t.normalizeField=ho(p,g)),!h.some(y=>!!(n[y]!=null||Wi(y)&&(u!=null&&u.size))))return;const f=(c==null?void 0:c.fieldInfos)??[];h.forEach(y=>{if(Wi(y))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:f,fieldName:y,formattedAttributes:n,chartType:r,value:t})]);const _=this._getChartOption({value:t,attributes:s,chartType:r,formattedAttributes:n,expressionAttributes:a,fieldName:y,fieldInfos:f});t.series.push(_)})}_getRelatedChartInfos(e){var f;const{fieldInfos:t,fieldName:s,formattedAttributes:n,chartType:r,value:o}=e,a=[],c=Qo(s),u=c&&((f=this.relatedInfos)==null?void 0:f.get(c.layerId.toString()));if(!u)return a;const{relatedFeatures:h,relation:p}=u;if(!p||!h)return a;const{cardinality:g}=p;return h.forEach(y=>{const{attributes:_}=y;_&&Object.keys(_).forEach(v=>{v===c.fieldName&&a.push(this._getChartOption({value:o,attributes:_,formattedAttributes:n,fieldName:s,chartType:r,relatedFieldName:v,hasMultipleRelatedFeatures:(h==null?void 0:h.length)>1,fieldInfos:t}))})}),g==="one-to-many"||g==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:t,chartType:s}){return s==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var A;const{value:t,attributes:s,formattedAttributes:n,expressionAttributes:r,fieldName:o,relatedFieldName:a,fieldInfos:c,chartType:u,hasMultipleRelatedFeatures:h}=e,p=this.layer,g=this.fieldInfoMap??new Map,{normalizeField:f,tooltipField:y}=t,_=f?Wi(f)?s[Qo(f).fieldName]:s[f]:null,v=od(o)&&r&&r[o]!==void 0?r[o]:a&&s[a]!==void 0?s[a]:s[o]!==void 0?s[o]:n[o],w=new cv({fieldName:o,value:v===void 0?null:v&&_?v/_:v});if(Wi(o)){const k=g.get(o.toLowerCase()),te=y&&g.get(y.toLowerCase()),U=(k==null?void 0:k.fieldName)??o,J=h&&y?Qo(y).fieldName:(te==null?void 0:te.fieldName)??y,oe=h&&J?s[J]:n[J]??(k==null?void 0:k.label)??(k==null?void 0:k.fieldName)??a,Le=h&&a?s[a]:n[U];return w.tooltip=this._getTooltip({label:oe,value:Le,chartType:u}),w}const b=lm(c,o),M=ho(o,p),S=y&&n[y]!==void 0?n[y]:om(b||new Fp({fieldName:M}),(A=this.popupTemplate)==null?void 0:A.expressionInfos),x=n[M];return w.tooltip=this._getTooltip({label:S,value:x,chartType:u}),w}};l([d()],qe.prototype,"abilities",void 0),l([rt("abilities")],qe.prototype,"castAbilities",null),l([d()],qe.prototype,"activeMediaInfoIndex",void 0),l([d({readOnly:!0})],qe.prototype,"activeMediaInfo",null),l([d()],qe.prototype,"attributes",void 0),l([d()],qe.prototype,"description",void 0),l([d()],qe.prototype,"fieldInfoMap",void 0),l([d()],qe.prototype,"formattedAttributes",void 0),l([d()],qe.prototype,"expressionAttributes",void 0),l([d({readOnly:!0})],qe.prototype,"formattedMediaInfos",null),l([d()],qe.prototype,"isAggregate",void 0),l([d()],qe.prototype,"layer",void 0),l([d({readOnly:!0})],qe.prototype,"formattedMediaInfoCount",null),l([d()],qe.prototype,"mediaInfos",void 0),l([d()],qe.prototype,"popupTemplate",void 0),l([d()],qe.prototype,"relatedInfos",void 0),l([d()],qe.prototype,"title",void 0),qe=l([$("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],qe);const on=qe;var Fu=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Jw=[].concat(Fu.slice(30,39),Fu.slice(28,30).reverse()),eb=[{name:"default",colors:Jw},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const Ou="en-us",hd=new Map([["ar",()=>T(()=>import("./ar-bb1fe5ab.js"),["assets/ar-bb1fe5ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.a)],["bg-bg",()=>T(()=>import("./bg_BG-184a2bfa.js"),["assets/bg_BG-184a2bfa.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.b)],["bs-ba",()=>T(()=>import("./bs_BA-f32cc344.js"),["assets/bs_BA-f32cc344.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.b)],["ca-es",()=>T(()=>import("./ca_ES-d17ee95b.js"),["assets/ca_ES-d17ee95b.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.c)],["cs-cz",()=>T(()=>import("./cs_CZ-bcd1e782.js"),["assets/cs_CZ-bcd1e782.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.c)],["da-dk",()=>T(()=>import("./da_DK-27b1b06e.js"),["assets/da_DK-27b1b06e.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.d)],["de-de",()=>T(()=>import("./de_DE-c0a1d8dd.js"),["assets/de_DE-c0a1d8dd.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.d)],["de-ch",()=>T(()=>import("./de_CH-be7b4255.js"),["assets/de_CH-be7b4255.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.d)],["el-gr",()=>T(()=>import("./el_GR-05fb9ec0.js"),["assets/el_GR-05fb9ec0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["en-us",()=>T(()=>import("./en_US-170979d8.js"),["assets/en_US-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["en-ca",()=>T(()=>import("./en_CA-170979d8.js"),["assets/en_CA-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["es-es",()=>T(()=>import("./es_ES-d0b66640.js"),["assets/es_ES-d0b66640.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["et-ee",()=>T(()=>import("./et_EE-56dd74d3.js"),["assets/et_EE-56dd74d3.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["fi-fi",()=>T(()=>import("./fi_FI-91d58cb9.js"),["assets/fi_FI-91d58cb9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.f)],["fr-fr",()=>T(()=>import("./fr_FR-a11503e0.js"),["assets/fr_FR-a11503e0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.f)],["he-il",()=>T(()=>import("./he_IL-90db98c4.js"),["assets/he_IL-90db98c4.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.h)],["hr-hr",()=>T(()=>import("./hr_HR-fac8bb29.js"),["assets/hr_HR-fac8bb29.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.h)],["hu-hu",()=>T(()=>import("./hu_HU-e8803856.js"),["assets/hu_HU-e8803856.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.h)],["id-id",()=>T(()=>import("./id_ID-86e57d06.js"),["assets/id_ID-86e57d06.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.i)],["it-it",()=>T(()=>import("./it_IT-2d4485ba.js"),["assets/it_IT-2d4485ba.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.i)],["ja-jp",()=>T(()=>import("./ja_JP-77c6c16d.js"),["assets/ja_JP-77c6c16d.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.j)],["ko-kr",()=>T(()=>import("./ko_KR-e155b9ab.js"),["assets/ko_KR-e155b9ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.k)],["lt-lt",()=>T(()=>import("./lt_LT-fde47ae9.js"),["assets/lt_LT-fde47ae9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.l)],["lv-lv",()=>T(()=>import("./lv_LV-359be050.js"),["assets/lv_LV-359be050.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.l)],["nb-no",()=>T(()=>import("./nb_NO-30d57c1a.js"),["assets/nb_NO-30d57c1a.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.n)],["nl-nl",()=>T(()=>import("./nl_NL-cb904b48.js"),["assets/nl_NL-cb904b48.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.n)],["pl-pl",()=>T(()=>import("./pl_PL-58c54c9f.js"),["assets/pl_PL-58c54c9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.p)],["pt-br",()=>T(()=>import("./pt_BR-d2e10248.js"),["assets/pt_BR-d2e10248.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.p)],["pt-pt",()=>T(()=>import("./pt_PT-65a41842.js"),["assets/pt_PT-65a41842.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.p)],["ro-ro",()=>T(()=>import("./ro_RO-15e90e9f.js"),["assets/ro_RO-15e90e9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.r)],["ru-ru",()=>T(()=>import("./ru_RU-a74d21e5.js"),["assets/ru_RU-a74d21e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.r)],["sk-sk",()=>T(()=>import("./sk_SK-a928dbd1.js"),["assets/sk_SK-a928dbd1.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["sl-sl",()=>T(()=>import("./sl_SL-1a3c3078.js"),["assets/sl_SL-1a3c3078.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["sr-rs",()=>T(()=>import("./sr_RS-0b18b911.js"),["assets/sr_RS-0b18b911.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["sv-se",()=>T(()=>import("./sv_SE-ce7e3f84.js"),["assets/sv_SE-ce7e3f84.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["th-th",()=>T(()=>import("./th_TH-1448f333.js"),["assets/th_TH-1448f333.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.t)],["tr-tr",()=>T(()=>import("./tr_TR-dd92f630.js"),["assets/tr_TR-dd92f630.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.t)],["uk-ua",()=>T(()=>import("./uk_UA-fe4434ed.js"),["assets/uk_UA-fe4434ed.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.u)],["vi-vn",()=>T(()=>import("./vi_VN-41938633.js"),["assets/vi_VN-41938633.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.v)],["zh-cn",()=>T(()=>import("./zh_Hans-524a1291.js"),["assets/zh_Hans-524a1291.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.z)],["zh-hk",()=>T(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.z)],["zh-tw",()=>T(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.z)]]);function tb(i){const e=i.split("-")[0].toLowerCase();let t=null;for(const s of hd.keys())if(s.startsWith(e)){t=s;break}return t}function ib(i){return i?hd.has(i.toLowerCase())?i.toLowerCase():tb(i)||Ou:Ou}let hn=null,Sr=null;async function sb(i=qp()){if(i=ib(i),hn&&i===Sr)return hn;hn=T(()=>import("./index-a70dd312.js"),["assets/index-a70dd312.js","assets/_commonjsHelpers-2f3e7994.js"]).then(e=>e.i),Sr=i;try{const[e,t]=await Promise.all([hn,hd.get(Sr)()]);Sr===i&&(e.am4core.options.defaultLocale=t.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return hn=null,Sr=null,null}return hn}function nb(i,e="default"){const t=eb.find(s=>s.name===e);return t?t.colors.map(s=>i.color(s)):null}const ft="esri-feature-media",Te={base:ft,mediaContainer:`${ft}__container`,mediaItemContainer:`${ft}__item-container`,mediaItem:`${ft}__item`,mediaItemTitle:`${ft}__item-title`,mediaItemCaption:`${ft}__item-caption`,mediaPrevious:`${ft}__previous`,mediaPreviousIconLTR:`${ft}__previous-icon`,mediaPreviousIconRTL:`${ft}__previous-icon--rtl`,mediaNext:`${ft}__next`,mediaNextIconLTR:`${ft}__next-icon`,mediaNextIconRTL:`${ft}__next-icon--rtl`,mediaChart:`${ft}__chart`,mediaButton:`${ft}__button`,mediaIcon:`${ft}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},Il=.05,Ml=.95,Sl=15,xi="color",ts="tooltip",Cr="value",Du="default-line-value";let Lt=class extends Me{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new on,this.messages=null,this._getChartDependencies=async s=>{const n=await sb(),{destroyed:r,viewModel:o}=this;if(r||!o||!s)return;const{activeMediaInfo:a}=o,c=await this._getRendererColors(n);this._renderChart({chartDiv:s,mediaInfo:a,chartsModule:n,colorMap:c})}}initialize(){this._featureElementInfo=new Qa,this.addHandles([I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),B),I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),B)])}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return m("div",{bind:this,class:Te.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?m("div",{key:"media-element-container",class:Te.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:s,formattedMediaInfoCount:n}=this.viewModel,{value:r,refreshInterval:o,altText:a,title:c,type:u}=e,{sourceURL:h,linkURL:p}=r,g=rm(p??void 0)?"_blank":"_self",f=g==="_blank"?"noreferrer":"",y=o?t:null,_=y?y.timestamp:0,v=y?y.sourceURL:h,w=m("img",{alt:a||c,key:`media-${u}-${s}-${n}-${_}`,src:v??void 0});return(p?m("a",{title:c,href:p,rel:f,target:g},w):null)||w}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:s}=this.viewModel;return m("div",{key:`media-${e.type}-${t}-${s}`,bind:this,class:Te.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?m("div",{key:"media-title",class:Te.mediaItemTitle,innerHTML:e.title}):null,s=e.caption?m("div",{key:"media-caption",class:Te.mediaItemCaption,innerHTML:e.caption}):null;return m("div",{key:"media-container",class:Te.mediaItemContainer},m("div",{key:"media-item-container",class:Te.mediaItem},this.renderMediaInfoType()),t,s)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",s=t?this.messages.previous:this.messages.next,n=t?this.classes(Te.mediaButton,Te.mediaPrevious):this.classes(Te.mediaButton,Te.mediaNext),r=t?this.classes(Te.mediaIcon,Te.mediaPreviousIconLTR,Te.iconLeftTriangleArrow):this.classes(Te.mediaIcon,Te.mediaNextIconLTR,Te.iconRightTriangleArrow),o=t?this.classes(Te.mediaIcon,Te.mediaPreviousIconRTL,Te.iconRightTriangleArrow):this.classes(Te.mediaIcon,Te.mediaNextIconRTL,Te.iconLeftTriangleArrow),a=t?"media-previous":"media-next",c=t?this._previous:this._next;return m("button",{type:"button",key:a,title:s,"aria-label":s,tabIndex:0,class:n,bind:this,onclick:c},m("span",{"aria-hidden":"true",class:r}),m("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){var s;const{description:e,title:t}=this;(s=this._featureElementInfo)==null||s.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:e,layer:t}=this.viewModel;return e&&(t!=null&&t.featureReduction)&&"renderer"in t.featureReduction?t.featureReduction.renderer:t==null?void 0:t.renderer}async _getRendererColors(e){const{am4core:t}=e,s=new Map,n=this._getRenderer(),r="default";if(!n)return s;const o=await Vw(n);return o.delete(r),Array.from(o.values()).every(a=>(a==null?void 0:a.length)===1)&&(s.set(Du,t.color({r:50,g:50,b:50,a:1})),Array.from(o.keys()).forEach(a=>{var c;a&&s.set(a,t.color((c=o.get(a))==null?void 0:c[0].toCss(!0)))})),s}_handleMediaKeyup(e){const t=ni(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:s,chartDiv:n,mediaInfo:r,colorMap:o}=e,{value:a,type:c}=r,{am4core:u}=s,h=nb(u);function p(y){y instanceof u.ColorSet&&h&&(y.list=h)}po()&&u.useTheme(s.am4themes_dark);const g=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!g.matches?u.useTheme(s.am4themes_animated):u.unuseTheme(s.am4themes_animated),u.useTheme(p);const f=c==="pie-chart"?this._createPieChart(e):this._createXYChart(e);n.setAttribute("aria-label",r.altText||r.title),f.data=a.series.map(y=>({[ts]:y.tooltip,[Cr]:y.value,[xi]:o.get(y.fieldName)})).filter(y=>c!=="pie-chart"||y.value!=null&&y.value>0)}_customizeChartTooltip(e,t){e&&(e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7}))}_createPieChart(e){const{chartDiv:t,chartsModule:s}=e,{am4core:n,am4charts:r}=s,o=n.create(t,r.PieChart);o.rtl=qt(this.container);const a=o.series.push(new r.PieSeries);return a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.dataFields.value=Cr,a.dataFields.category=ts,this._customizeChartTooltip(a.tooltip,n),a.slices.template.propertyFields.fill=xi,a.slices.template.propertyFields.stroke=xi,o}_getMinSeriesValue(e){let t=0;return e.forEach(s=>t=Math.min(s.value,t)),t}_createColumnChart(e,t){const{chartsModule:s,mediaInfo:n}=t,{value:r}=n,{am4core:o,am4charts:a}=s,c=e.xAxes.push(new a.CategoryAxis);c.dataFields.category=ts,c.renderer.labels.template.disabled=!0;const u=c.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dy=-u.contentHeight});const h=e.yAxes.push(new a.ValueAxis),p=h.renderer.labels.template;h.renderer.minLabelPosition=Il,h.renderer.maxLabelPosition=Ml,h.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(h.tooltip,o),p.wrap=!0;const g=e.series.push(new a.ColumnSeries);g.dataFields.valueY=Cr,g.dataFields.categoryX=ts,g.columns.template.propertyFields.fill=xi,g.columns.template.propertyFields.stroke=xi,e.cursor=new a.XYCursor,r.series.length>Sl&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,t){const{chartsModule:s,mediaInfo:n}=t,{value:r}=n,{am4core:o,am4charts:a}=s,c=e.yAxes.push(new a.CategoryAxis);c.dataFields.category=ts,c.renderer.inversed=!0,c.renderer.labels.template.disabled=!0;const u=c.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dx=u.contentWidth});const h=e.xAxes.push(new a.ValueAxis),p=h.renderer.labels.template;h.renderer.minLabelPosition=Il,h.renderer.maxLabelPosition=Ml,h.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(h.tooltip,o),p.wrap=!0;const g=e.series.push(new a.ColumnSeries);g.dataFields.valueX=Cr,g.dataFields.categoryY=ts,g.columns.template.propertyFields.fill=xi,g.columns.template.propertyFields.stroke=xi,e.cursor=new a.XYCursor,r.series.length>Sl&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,t){const{chartsModule:s,mediaInfo:n,colorMap:r}=t,{value:o}=n,{am4core:a,am4charts:c}=s,u=e.xAxes.push(new c.CategoryAxis);u.dataFields.category=ts,u.renderer.labels.template.disabled=!0;const h=u.tooltip;this._customizeChartTooltip(h,a),h.events.on("sizechanged",()=>{h.dy=-h.contentHeight});const p=e.yAxes.push(new c.ValueAxis),g=p.renderer.labels.template;p.renderer.minLabelPosition=Il,p.renderer.maxLabelPosition=Ml,p.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(p.tooltip,a),g.wrap=!0;const f=e.series.push(new c.LineSeries);f.dataFields.categoryX=ts,f.dataFields.valueY=Cr,f.strokeWidth=1;const y=r.get(Du);y&&(f.stroke=y);const _=f.bullets.push(new c.CircleBullet);_.propertyFields.fill=xi,_.propertyFields.stroke=xi,e.cursor=new c.XYCursor,o.series.length>Sl&&(e.scrollbarX=new a.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:s,mediaInfo:n}=e,{type:r}=n,{am4core:o,am4charts:a}=s,c=o.create(t,a.XYChart);return c.rtl=qt(this.container),r==="column-chart"&&this._createColumnChart(c,e),r==="bar-chart"&&this._createBarChart(c,e),r==="line-chart"&&this._createLineChart(c,e),c}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:s}=e;if(!t)return;const n=6e4*t;this._updateMediaInfoTimestamp(s.sourceURL);const r=setInterval(()=>{this._updateMediaInfoTimestamp(s.sourceURL)},n);this._refreshTimer=r}_getImageSource(e,t){const s=e.includes("?")?"&":"?",[n,r=""]=e.split("#");return`${n}${s}timestamp=${t}${r?"#":""}${r}`}};l([d()],Lt.prototype,"attributes",null),l([d()],Lt.prototype,"activeMediaInfoIndex",null),l([d()],Lt.prototype,"description",null),l([d()],Lt.prototype,"fieldInfoMap",null),l([d()],Lt.prototype,"layer",null),l([d()],Lt.prototype,"mediaInfos",null),l([d()],Lt.prototype,"popupTemplate",null),l([d()],Lt.prototype,"relatedInfos",null),l([d()],Lt.prototype,"title",null),l([d({type:on})],Lt.prototype,"viewModel",void 0),l([d(),ge("esri/widgets/Feature/t9n/Feature")],Lt.prototype,"messages",void 0),Lt=l([$("esri.widgets.Feature.FeatureMedia")],Lt);const Mm=Lt,rb=["$datastore","$map","$layer","$aggregatedfeatures"],ob="esri.widgets.Feature.support.arcadeFeatureUtils",ab=q.getLogger(ob);function lb(i){return typeof i=="string"?bo(ld(i)):Array.isArray(i)?cb(i):(i==null?void 0:i.declaredClass)==="esri.arcade.Dictionary"?db(i):i}function cb(i){return`<ul class="esri-widget__list">${i.map(e=>`<li>${typeof e=="string"?bo(ld(e)):e}</li>`).join("")}</ul>`}function db(i){return`<table class="esri-widget__table">${i.keys().map(e=>{const t=i.field(e);return`<tr><th>${e}</th><td>${typeof t=="string"?bo(ld(t)):t}</td></tr>`}).join("")}</table>`}function ub({aggregatedFeatures:i,arcadeUtils:e,featureSetVars:t,context:s,viewInfo:n,map:r,graphic:o,interceptor:a}){t.forEach(c=>{const u=c.toLowerCase(),h=n.sr,p={map:r,spatialReference:h,interceptor:a};if(u==="$map"&&(s.vars[u]=e.convertMapToFeatureSetCollection(p)),u==="$layer"&&(s.vars[u]=e.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:h,interceptor:a})),u==="$datastore"&&(s.vars[u]=e.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:h,interceptor:a})),u==="$aggregatedfeatures"){const g=o.layer,{fields:f,objectIdField:y,geometryType:_,spatialReference:v,displayField:w}=g,b=new Av({fields:f,objectIdField:y,geometryType:_,spatialReference:v,displayField:w,...g.type==="feature"?{templates:g.templates,typeIdField:g.typeIdField,types:g.types}:null,source:i});s.vars[u]=e.convertFeatureLayerToFeatureSet({layer:b,spatialReference:v,interceptor:a})}})}function Sm(){return T(()=>import("./arcadeUtils-3871f134.js").then(i=>i.ax),["assets/arcadeUtils-3871f134.js","assets/geometry-d89d4a34.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/Error-d97df89f.js","assets/Extent-fd3ac910.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/preload-helper-f8378b50.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/number-cef82404.js","assets/locale-30120714.js","assets/Field-b17a677d.js","assets/enumeration-49e09bda.js","assets/fieldType-b21f2e7f.js","assets/jsonUtils-dd0891e0.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/mathUtils-b3bee9e7.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/request-7c0a9d4c.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/sizeVariableUtils-d4870b0d.js"])}function hb(i){return"createQuery"in i&&"queryFeatures"in i}async function pb({graphic:i,view:e}){const{isAggregate:t,layer:s}=i;if(!t||!s||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(s);if(!hb(n))return[];const r=n.createQuery(),o=i.getObjectId();r.aggregateIds=o!=null?[o]:[];const{features:a}=await n.queryFeatures(r);return a}async function Cm({expressionInfo:i,arcadeUtils:e,interceptor:t,spatialReference:s,map:n,graphic:r,view:o}){if(!i||!i.expression)return null;const a=e.createSyntaxTree(i.expression),c=rb.filter(f=>e.hasVariable(a,f)),[u]=await Promise.all([pb({graphic:r,view:o}),e.loadScriptDependencies(a,!0,c)]),h=e.getViewInfo({spatialReference:s}),p=e.createExecContext(r,h);p.interceptor=t,p.useAsync=!0,ub({aggregatedFeatures:u,arcadeUtils:e,featureSetVars:c,context:p,viewInfo:h,map:n,graphic:r,interceptor:t});const g=e.createFunction(a,p);return e.executeAsyncFunction(g,p).catch(f=>ab.error("arcade-execution-error",{error:f,graphic:r,expressionInfo:i}))}async function mb({expressionInfos:i,spatialReference:e,graphic:t,interceptor:s,map:n,view:r}){if(!i||!i.length)return{};const o=await Sm(),a={};for(const h of i)a[`expression/${h.name}`]=Cm({expressionInfo:h,arcadeUtils:o,interceptor:s,spatialReference:e,map:n,graphic:t,view:r});const c=await Ge(a),u={};for(const h in c)u[h]=lb(c[h].value);return u}const gb=1;let Ot=class extends dn(K){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var n,r;const t=(n=this.contentElement)==null?void 0:n.type;(r=this.contentElementViewModel)==null||r.destroy();const s=t==="fields"?new Ya:t==="media"?new on:t==="text"?new Ma:null;this._set("contentElementViewModel",s)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=Xn(this._compile,gb,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:s,interceptor:n,spatialReference:r,map:o,view:a,_abortController:c}=this;if(!(t&&s&&r&&o))return void this._set("contentElement",null);const u=await Sm();if(c!==this._abortController)return;const h=await Cm({arcadeUtils:u,expressionInfo:t,graphic:s,interceptor:n,map:o,spatialReference:r,view:a});if(!h||h.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const p=await h.castAsJsonAsync(c==null?void 0:c.signal),g=p==null?void 0:p.type,f=g==="media"?dv.fromJSON(p):g==="text"?Op.fromJSON(p):g==="fields"?uv.fromJSON(p):null;this._set("contentElement",f)},this.handles.add([I(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),B),I(()=>[this.contentElement],()=>this._createVM(),B)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:s}=this;return e?"loading":t||s?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};l([d()],Ot.prototype,"_abortController",void 0),l([d({type:hv})],Ot.prototype,"expressionInfo",void 0),l([d({type:Si})],Ot.prototype,"graphic",void 0),l([d({readOnly:!0})],Ot.prototype,"contentElement",void 0),l([d({readOnly:!0})],Ot.prototype,"contentElementViewModel",void 0),l([d()],Ot.prototype,"interceptor",void 0),l([d()],Ot.prototype,"spatialReference",null),l([d({readOnly:!0})],Ot.prototype,"state",null),l([d()],Ot.prototype,"map",null),l([d()],Ot.prototype,"view",void 0),Ot=l([$("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Ot);const pd=Ot,Lo={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let Yo=class extends Me{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new pd}initialize(){this.addHandles(I(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),B))}destroy(){this._destroyContentWidget()}renderLoading(){return m("div",{key:"loading-container",class:Lo.loadingSpinnerContainer},m("span",{class:this.classes(Lo.iconLoading,Lo.spinner)}))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:Lo.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,s=t==null?void 0:t.type;this._destroyContentWidget();const n=e?s==="fields"?new gm({viewModel:e}):s==="media"?new Mm({viewModel:e}):s==="text"?new Zo({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};l([d({type:pd})],Yo.prototype,"viewModel",void 0),Yo=l([$("esri.widgets.Feature.FeatureExpression")],Yo);const fb=Yo,Cl=100;let he=class extends Mp(yr(dn(K))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await Kr(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await Kr(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await Kr(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=Xn(this._queryController,Cl,this),this._queryFeatureCountThrottled=Xn(this._queryFeatureCountController,Cl,this),this._queryPageThrottled=Xn(this._queryPageController,Cl,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:s}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,s.removeAll(),s.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([I(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),B),I(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),I(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:s}=this,n=1,r=Math.ceil(s/t)||1;this._set("featurePage",Math.min(Math.max(e,n),r))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t!=null&&t.loaded)?e.map(s=>{const n=s.clone(),r=ho(s.field,t);return n.field=r,n}):e??[]}get supportsCacheHint(){var e,t,s;return!!((s=(t=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:t.queryRelated)!=null&&s.supportsCacheHint)}get canQuery(){var t,s;const e=(s=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:s.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t;return(this.objectIdField&&((t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new ee}get relatedLayer(){const{layer:e,map:t,relationship:s}=this;return e!=null&&e.loaded&&t&&s?lw(t,e,s)??null:null}get relationship(){var s;const{relationshipId:e,layer:t}=this;return typeof e=="number"?((s=t==null?void 0:t.relationships)==null?void 0:s.find(({id:n})=>n===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new ee}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:s,canQuery:n}=this;return t?"loading":e||s?"querying":n?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:t,relationshipId:s,objectId:n,_queryFeatureCountAbortController:r,canQuery:o,supportsCacheHint:a}=this;if(await(e==null?void 0:e.load()),await(t==null?void 0:t.load()),!o||!e||!t)return void this._set("featureCount",0);const c=t.createQuery(),u=new sc({cacheHint:a,relationshipId:s,returnGeometry:!1,objectIds:[n],where:Qd(c.where,void 0)}),h=await e.queryRelatedFeaturesCount(u,{signal:r==null?void 0:r.signal});this._set("featureCount",h[n]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:s}=this;return t?e:s?e.slice(0,s):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:s,_queryPageAbortController:n}=this;!s||t<2||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var A;const{orderByFieldsFixedCasing:t,showAllEnabled:s,featuresPerPage:n,displayCount:r,layer:o,relationshipId:a,featurePage:c,featureCount:u,relatedLayer:h,supportsCacheHint:p}=this,{canQuery:g,objectId:f}=this;if(!g||!o||!h)return[];const y=s?((c-1)*n+u)%u:0,_=s?n:r,v=h.objectIdField,w=[...t==null?void 0:t.map(k=>k.field),v].filter(C),b=t==null?void 0:t.map(k=>`${k.field} ${k.order}`),M=h.createQuery(),S=new sc({orderByFields:b,start:y,num:_,outFields:w,cacheHint:p,relationshipId:a,returnGeometry:!1,objectIds:[f],where:Qd(M.where,void 0)}),x=((A=(await o.queryRelatedFeatures(S,{signal:e==null?void 0:e.signal}))[f])==null?void 0:A.features)||[];return x.forEach(k=>{k.sourceLayer=h,k.layer=h}),x}};l([d()],he.prototype,"_queryAbortController",void 0),l([d()],he.prototype,"_queryPageAbortController",void 0),l([d()],he.prototype,"_queryFeatureCountAbortController",void 0),l([d({value:1})],he.prototype,"featurePage",null),l([d()],he.prototype,"featuresPerPage",void 0),l([d({readOnly:!0})],he.prototype,"orderByFieldsFixedCasing",null),l([d({readOnly:!0})],he.prototype,"supportsCacheHint",null),l([d({readOnly:!0})],he.prototype,"canQuery",null),l([d()],he.prototype,"description",void 0),l([d({readOnly:!0})],he.prototype,"itemDescriptionFieldName",null),l([d({value:3})],he.prototype,"displayCount",null),l([d({type:Si})],he.prototype,"graphic",void 0),l([d()],he.prototype,"layer",void 0),l([d()],he.prototype,"map",void 0),l([d({readOnly:!0})],he.prototype,"objectId",null),l([d({readOnly:!0})],he.prototype,"objectIdField",null),l([d()],he.prototype,"orderByFields",void 0),l([d({readOnly:!0})],he.prototype,"relatedFeatures",null),l([d({readOnly:!0})],he.prototype,"relatedLayer",null),l([d({readOnly:!0})],he.prototype,"relationship",null),l([d()],he.prototype,"featureCount",void 0),l([d({readOnly:!0})],he.prototype,"relatedFeatureViewModels",null),l([d()],he.prototype,"relationshipId",void 0),l([d()],he.prototype,"showAllEnabled",void 0),l([d()],he.prototype,"state",null),l([d()],he.prototype,"title",void 0),he=l([$("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],he);const md=he,Vr="esri-feature",xl=`${Vr}-relationship`,Ei={base:xl,esriWidget:"esri-widget",listContainer:`${xl}__list`,listContainerQuerying:`${xl}__list--querying`,featureObserver:`${Vr}__feature-observer`,stickySpinnerContainer:`${Vr}__sticky-loading-container`,loadingSpinnerContainer:`${Vr}__loading-container`,spinner:`${Vr}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},Vu={title:!0,description:!0};let _t=class extends Me{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([s])=>{s!=null&&s.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new md,this.messages=null,this.messagesCommon=null,this.visibleElements={...Vu},this._increaseFeaturePage=()=>{const{state:s,showAllEnabled:n,relatedFeatures:r,featuresPerPage:o,featurePage:a}=this.viewModel;s==="ready"&&n&&r.length>=o*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Qa,this.addHandles([I(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),B),I(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),We(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([T(()=>import("./calcite-list-3633b011.js"),["assets/calcite-list-3633b011.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/interactive-1de2e238.js","assets/observers-ec23deda.js","assets/utils3-7e94db45.js","assets/loadable-6afd516d.js","assets/debounce-d5abe404.js","assets/t9n-6475eb95.js","assets/icon-e372469c.js","assets/loader-cc767927.js","assets/guid-51402ee7.js","assets/scrim-cf105b6c.js"]),T(()=>import("./calcite-list-item-abe94bcf.js"),["assets/calcite-list-item-abe94bcf.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/interactive-1de2e238.js","assets/utils3-7e94db45.js","assets/loadable-6afd516d.js","assets/icon-e372469c.js","assets/observers-ec23deda.js"]),T(()=>import("./calcite-icon-ea91723d.js"),["assets/calcite-icon-ea91723d.js","assets/icon-e372469c.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js"]),T(()=>import("./calcite-notice-710208a9.js"),["assets/calcite-notice-710208a9.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js","assets/loadable-6afd516d.js","assets/t9n-6475eb95.js","assets/icon-e372469c.js"])])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=nt(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:s}=this.viewModel;return!e&&!!t&&(t>s||s===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return Mt(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...Vu,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?m("div",{key:"sticky-loader",class:Ei.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return m("span",{class:this.classes(Ei.iconLoading,Ei.spinner)})}renderLoading(){return m("div",{key:"loading-container",class:Ei.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return m("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=qt(this.container)?"chevron-left":"chevron-right";return m("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var r,o;const{itemDescriptionFieldName:t}=this.viewModel,s=e.title;e.description=t&&((r=e.formattedAttributes)==null?void 0:r.global[t]);const n=e.state==="loading";return m("calcite-list-item",{key:e.uid,label:n?`${(o=this.messagesCommon)==null?void 0:o.loading}…`:s,description:n?"…":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?m("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return m("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return m("div",{key:"feature-observer",class:Ei.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return m("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return m("div",{key:"list-container",class:this.classes(Ei.listContainer,{[Ei.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return m("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:this.classes(Ei.base,Ei.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(s=>{this.addHandles(I(()=>[s.title,s.state],()=>this.scheduleRender(),B),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var r;const{headingLevel:e,visibleElements:t}=this,s=t.description&&this.description,n=t.title&&this.title;(r=this._featureElementInfo)==null||r.set({description:s,title:n,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await Da(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};l([d()],_t.prototype,"_relatedFeatureIntersectionObserverNode",void 0),l([d({readOnly:!0})],_t.prototype,"displayShowAllButton",null),l([d({readOnly:!0})],_t.prototype,"displayListItems",null),l([d()],_t.prototype,"description",null),l([d({readOnly:!0})],_t.prototype,"featureCountDescription",null),l([d()],_t.prototype,"headingLevel",void 0),l([d()],_t.prototype,"title",null),l([d({type:md})],_t.prototype,"viewModel",void 0),l([d(),ge("esri/widgets/Feature/t9n/Feature")],_t.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],_t.prototype,"messagesCommon",void 0),l([d()],_t.prototype,"visibleElements",void 0),l([rt("visibleElements")],_t.prototype,"castVisibleElements",null),_t=l([$("esri.widgets.Feature.FeatureRelationship")],_t);const Nu=_t;let yb=class{constructor(e,t){this.preLayerQueryCallback=e,this.preRequestCallback=t,this.preLayerQueryCallback||(this.preLayerQueryCallback=s=>{}),this.preRequestCallback||(this.preLayerQueryCallback=s=>{})}};var Nr;const vb=1,zu="content-view-models",Bu="relationship-view-models",Hu={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let ve=Nr=class extends yr(K){constructor(i){super(i),this._handles=new Ke,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=Xn(this._graphicChanged,vb,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Hu},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return e.type==="attachments"&&!!t.attachmentsContent||e.type==="custom"&&!!t.customContent||e.type==="fields"&&!!t.fieldsContent||e.type==="media"&&!!t.mediaContent||e.type==="text"&&!!t.textContent||e.type==="expression"&&!!t.expressionContent||e.type==="relationship"&&!!t.relationshipContent},this._handles.add(I(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),B))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return C(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return tw(Cu(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return nm(this.graphic)}castAbilities(i){return{...Hu,...i}}get isTable(){var i;return((i=this._sourceLayer)==null?void 0:i.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(i){this._set("graphic",i?i.clone():null)}get spatialReference(){var i;return((i=this.view)==null?void 0:i.spatialReference)??null}set spatialReference(i){this._override("spatialReference",i)}get map(){var i;return((i=this.view)==null?void 0:i.map)||null}set map(i){this._override("map",i)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(i,e){const t=this.contentViewModels[i];t instanceof on&&t.setActiveMedia(e)}nextMedia(i){const e=this.contentViewModels[i];e instanceof on&&e.next()}previousMedia(i){const e=this.contentViewModels[i];e instanceof on&&e.previous()}async updateGeometry(){var o,a;const{graphic:i,spatialReference:e,_sourceLayer:t}=this;await(t==null?void 0:t.load());const s=t==null?void 0:t.objectIdField;if(!s||!i||!t)return;const n=(o=i==null?void 0:i.attributes)==null?void 0:o[s];if(n==null)return;const r=[n];if(!i.geometry){const c=(a=await dm({layer:t,graphic:i,outFields:[],objectIds:r,returnGeometry:!0,spatialReference:e}))==null?void 0:a.geometry;c&&(i.geometry=c)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:i}=this;if(!i)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(t){lr(t)||(this._error=t,q.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:t,graphic:i,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:i}=this;i&&i.abort(),this._featureAbortController=null}_compileContentElement(i,e){return i.type==="attachments"?this._compileAttachments(i,e):i.type==="custom"?this._compileCustom(i,e):i.type==="fields"?this._compileFields(i,e):i.type==="media"?this._compileMedia(i,e):i.type==="text"?this._compileText(i,e):i.type==="expression"?this._compileExpression(i,e):i.type==="relationship"?this._compileRelationship(i,e):void 0}_compileContent(i){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(i)?i.filter(this._isAllowedContentType).map((e,t)=>this._compileContentElement(e,t)).filter(C):typeof i=="string"?this._compileText(new Op({text:i}),0).text:i}_destroyContentViewModels(){var i,e;(i=this._handles)==null||i.remove(Bu),(e=this._handles)==null||e.remove(zu),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(i,e){var n;const t=(n=i==null?void 0:i.graphic)==null?void 0:n.getObjectId(),s=e==null?void 0:e.getObjectId();return C(t)&&C(s)&&t===s}_setRelatedFeaturesViewModels({relatedFeatureViewModels:i,relatedFeatures:e,map:t}){const{view:s,spatialReference:n}=this;e==null||e.filter(Boolean).forEach(r=>{i.find(o=>this._matchesFeature(o,r))||i.add(new Nr({abilities:{relationshipContent:!1},map:t,view:s,spatialReference:n,graphic:r}))}),i.forEach(r=>{(e==null?void 0:e.find(a=>this._matchesFeature(r,a)))||i.remove(r)})}_setExpressionContentVM(i,e){const t=this.formattedAttributes,{contentElement:s,contentElementViewModel:n}=i,r=s==null?void 0:s.type;n&&r&&(r==="fields"&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:e,formattedAttributes:t}),n.set(this._createFieldsVMParams(s,e))),r==="media"&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:e,formattedAttributes:t}),n.set(this._createMediaVMParams(s,e))),r==="text"&&n.set(this._createTextVMParams(s)))}_compileRelationship(i,e){const{displayCount:t,orderByFields:s,relationshipId:n,title:r,description:o}=i,{_sourceLayer:a,graphic:c,map:u}=this,h=new md({displayCount:t,graphic:c,orderByFields:s,relationshipId:n,layer:a,map:u,...this._compileTitleAndDesc({title:r,description:o})});return this.contentViewModels[e]=h,this._handles.add(We(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),Bu),i}_compileExpression(i,e){const{expressionInfo:t}=i,{graphic:s,map:n,spatialReference:r,view:o}=this,a=new pd({expressionInfo:t,graphic:s,interceptor:Nr.interceptor,map:n,spatialReference:r,view:o});return this.contentViewModels[e]=a,this._handles.add(I(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,e),B),zu),i}_compileAttachments(i,e){const{graphic:t}=this,{description:s,title:n}=i;return this.contentViewModels[e]=new dd({graphic:t,...this._compileTitleAndDesc({title:n,description:s})}),i}_compileCustom(i,e){const{graphic:t}=this,{creator:s,destroyer:n}=i;return this.contentViewModels[e]=new Ma({graphic:t,creator:s,destroyer:n}),i}_compileTitleAndDesc({title:i,description:e}){const{_fieldInfoMap:t,_sourceLayer:s,graphic:n,formattedAttributes:r}=this,o=n==null?void 0:n.attributes,a=this._expressionAttributes,c=r.global;return{title:rn({attributes:o,fieldInfoMap:t,globalAttributes:c,expressionAttributes:a,layer:s,text:i}),description:rn({attributes:o,fieldInfoMap:t,globalAttributes:c,expressionAttributes:a,layer:s,text:e})}}_createFieldsVMParams(i,e){var u;const t=this._effectivePopupTemplate,s=this.formattedAttributes,n={...s==null?void 0:s.global,...s==null?void 0:s.content[e]},r=(u=(i==null?void 0:i.fieldInfos)||(t==null?void 0:t.fieldInfos))==null?void 0:u.filter(({fieldName:h})=>od(h)||Wi(h)||n.hasOwnProperty(h)),o=t==null?void 0:t.expressionInfos,{description:a,title:c}=i;return{attributes:n,expressionInfos:o,fieldInfos:r,...this._compileTitleAndDesc({title:c,description:a})}}_compileFields(i,e){const t=i.clone(),s=new Ya(this._createFieldsVMParams(i,e));return this.contentViewModels[e]=s,t.fieldInfos=s.formattedFieldInfos.slice(0),t}_createMediaVMParams(i,e){const{abilities:t,graphic:s,_fieldInfoMap:n,_effectivePopupTemplate:r,relatedInfos:o,_sourceLayer:a,_expressionAttributes:c}=this,u=this.formattedAttributes,h=(s==null?void 0:s.attributes)??{},{description:p,mediaInfos:g,title:f}=i;return{abilities:{chartAnimation:t.chartAnimation},activeMediaInfoIndex:i.activeMediaInfoIndex||0,attributes:h,isAggregate:s==null?void 0:s.isAggregate,layer:a,fieldInfoMap:n,formattedAttributes:{...u==null?void 0:u.global,...u==null?void 0:u.content[e]},expressionAttributes:c,mediaInfos:g,popupTemplate:r,relatedInfos:o,...this._compileTitleAndDesc({title:f,description:p})}}_compileMedia(i,e){const t=i.clone(),s=new on(this._createMediaVMParams(i,e));return t.mediaInfos=s.formattedMediaInfos.slice(0),this.contentViewModels[e]=s,t}_createTextVMParams(i){var r;const{graphic:e,_fieldInfoMap:t,_sourceLayer:s,_expressionAttributes:n}=this;if(i&&i.text){const o=(e==null?void 0:e.attributes)??{},a=((r=this.formattedAttributes)==null?void 0:r.global)??{};i.text=rn({attributes:o,fieldInfoMap:t,globalAttributes:a,expressionAttributes:n,layer:s,text:i.text})}return{graphic:e,creator:i.text}}_compileText(i,e){const t=i.clone();return this.contentViewModels[e]=new Ma(this._createTextVMParams(t)),t}_compileLastEditInfo(){const{_effectivePopupTemplate:i,_sourceLayer:e,graphic:t}=this;if(!i)return;const{lastEditInfoEnabled:s}=i,n=e==null?void 0:e.editFieldsInfo;return s&&n?ew(n,t==null?void 0:t.attributes):void 0}_compileTitle(i){var a;const{_fieldInfoMap:e,_sourceLayer:t,graphic:s,_expressionAttributes:n}=this,r=(s==null?void 0:s.attributes)??{},o=((a=this.formattedAttributes)==null?void 0:a.global)??{};return rn({attributes:r,fieldInfoMap:e,globalAttributes:o,expressionAttributes:n,layer:t,text:i})}async _getTitle(){const{_effectivePopupTemplate:i,graphic:e}=this;if(!e)return null;const t=i==null?void 0:i.title;return Ia(t,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:i,graphic:e}=this;if(!e)return null;const t=i==null?void 0:i.content;return Ia(t,{graphic:e})}async _queryFeature(i){const{_featureAbortController:e,_sourceLayer:t,graphic:s,_effectivePopupTemplate:n}=this,r=this.map,o=this.view,a=this.spatialReference;if(e!==this._featureAbortController||!s)return;await sw({graphic:s,popupTemplate:n,layer:t,spatialReference:a},i);const{content:{value:c},title:{value:u}}=await Ge({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:h}}=await Ge({checkForRelatedFeatures:this._checkForRelatedFeatures(i),expressionAttributes:mb({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:a,graphic:s,map:r,interceptor:Nr.interceptor,view:o})});e===this._featureAbortController&&s&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...s.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(c)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(c)||null))}_createMediaFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){const{_effectivePopupTemplate:s,graphic:n,relatedInfos:r,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:c}=this;t.content[e]=fl({fieldInfos:s==null?void 0:s.fieldInfos,graphic:n,attributes:{...c,...i.attributes},layer:o,fieldInfoMap:a,relatedInfos:r})}_createFieldsFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){if(i.fieldInfos){const{graphic:s,relatedInfos:n,_sourceLayer:r,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;t.content[e]=fl({fieldInfos:i.fieldInfos,graphic:s,attributes:{...a,...i.attributes},layer:r,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(i){const{_effectivePopupTemplate:e,graphic:t,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:r,_graphicExpressionAttributes:o}=this,a=e==null?void 0:e.fieldInfos,c={global:fl({fieldInfos:a,graphic:t,attributes:o,layer:n,fieldInfoMap:r,relatedInfos:s}),content:[]};return Array.isArray(i)&&i.forEach((u,h)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:c}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:c})}),c}_checkForRelatedFeatures(i){const{graphic:e,_effectivePopupTemplate:t}=this;return this._queryRelatedInfos(e,Cu(t),i)}async _queryRelatedInfos(i,e,t){const{relatedInfos:s,_sourceLayer:n}=this;s.clear();const r=C(n==null?void 0:n.associatedLayer)?await(n==null?void 0:n.associatedLayer.load(t)):n;if(!r||!i)return;const o=e.filter(u=>u&&Wi(u.fieldName));if(!o||!o.length)return;e.forEach(u=>this._configureRelatedInfo(u,r));const a=await Kw({relatedInfos:s,layer:r},t);Object.keys(a).forEach(u=>{var g;const h=s.get(u.toString()),p=(g=a[u])==null?void 0:g.value;h&&p&&(h.layerInfo=p.data)});const c=await Qw({graphic:i,relatedInfos:s,layer:r},t);Object.keys(c).forEach(u=>{var h;Uw((h=c[u])==null?void 0:h.value,s.get(u.toString()))})}_configureRelatedInfo(i,e){const{relatedInfos:t}=this,s=Qo(i.fieldName);if(!s)return;const{layerId:n,fieldName:r}=s;if(!n)return;const o=t.get(n.toString())||qw(n,e);o&&(Yw({relatedInfo:o,fieldName:r,fieldInfo:i}),this.relatedInfos.set(n,o))}};ve.interceptor=new yb(ow,aw),l([d()],ve.prototype,"_error",void 0),l([d()],ve.prototype,"_featureAbortController",void 0),l([d({readOnly:!0})],ve.prototype,"_effectivePopupTemplate",null),l([d({readOnly:!0})],ve.prototype,"_fieldInfoMap",null),l([d({readOnly:!0})],ve.prototype,"_sourceLayer",null),l([d()],ve.prototype,"abilities",void 0),l([rt("abilities")],ve.prototype,"castAbilities",null),l([d({readOnly:!0})],ve.prototype,"content",void 0),l([d({readOnly:!0})],ve.prototype,"contentViewModels",void 0),l([d()],ve.prototype,"description",void 0),l([d({type:Boolean})],ve.prototype,"defaultPopupTemplateEnabled",void 0),l([d({readOnly:!0})],ve.prototype,"isTable",null),l([d({readOnly:!0})],ve.prototype,"state",null),l([d({readOnly:!0})],ve.prototype,"formattedAttributes",void 0),l([d({type:Si,value:null})],ve.prototype,"graphic",null),l([d({readOnly:!0})],ve.prototype,"lastEditInfo",void 0),l([d({readOnly:!0})],ve.prototype,"relatedInfos",void 0),l([d()],ve.prototype,"spatialReference",null),l([d({readOnly:!0})],ve.prototype,"title",void 0),l([d()],ve.prototype,"map",null),l([d({readOnly:!0})],ve.prototype,"waitingForContent",null),l([d()],ve.prototype,"view",void 0),ve=Nr=l([$("esri.widgets.FeatureViewModel")],ve);const gd=ve,ot="esri-feature",Ee={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:ot,container:`${ot}__size-container`,title:`${ot}__title`,main:`${ot}__main-container`,btn:`${ot}__button`,icon:`${ot}__icon`,content:`${ot}__content`,contentNode:`${ot}__content-node`,contentElement:`${ot}__content-element`,text:`${ot}__text`,lastEditedInfo:`${ot}__last-edited-info`,fields:`${ot}__fields`,fieldHeader:`${ot}__field-header`,fieldData:`${ot}__field-data`,fieldDataDate:`${ot}__field-data--date`,loadingSpinnerContainer:`${ot}__loading-container`,spinner:`${ot}__loading-spinner`},xm=i=>{let e=class extends i{constructor(){super(...arguments),this.renderNodeContent=t=>hr(t)&&!t.destroyed?m("div",{class:Ee.contentNode,key:t},t.render()):t instanceof HTMLElement?m("div",{class:Ee.contentNode,key:t,bind:t,afterCreate:this._attachToNode}):$p(t)?m("div",{class:Ee.contentNode,key:t,bind:t.domNode,afterCreate:this._attachToNode}):null}_attachToNode(t){const s=this;t.appendChild(s)}};return e=l([$("esri.widgets.Feature.ContentMixin")],e),e};var gc;const qu={title:!0,content:!0,lastEditedInfo:!0},Uu="relationship-handles";let Xe=gc=class extends xm(Me){constructor(i,e){super(i,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...qu},this.viewModel=new gd}initialize(){this.addHandles(I(()=>{var i;return(i=this.viewModel)==null?void 0:i.contentViewModels},()=>this._setupContentWidgets(),B))}loadDependencies(){return T(()=>import("./calcite-notice-710208a9.js"),["assets/calcite-notice-710208a9.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js","assets/loadable-6afd516d.js","assets/t9n-6475eb95.js","assets/icon-e372469c.js"])}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(i){this.viewModel.graphic=i}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(i){this.viewModel.defaultPopupTemplateEnabled=i}get isTable(){return this.viewModel.isTable}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(i){this.viewModel.spatialReference=i}get title(){return this.viewModel.title}castVisibleElements(i){return{...qu,...i}}get map(){return this.viewModel.map}set map(i){this.viewModel.map=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}render(){const{state:i}=this.viewModel,e=m("div",{class:Ee.container,key:"container"},this.renderTitle(),i==="error"?this.renderError():i==="loading"?this.renderLoading():this.renderContentContainer());return m("div",{class:this.classes(Ee.base,Ee.esriWidget)},e)}setActiveMedia(i,e){return this.viewModel.setActiveMedia(i,e)}nextMedia(i){return this.viewModel.nextMedia(i)}previousMedia(i){return this.viewModel.previousMedia(i)}renderError(){const{messagesCommon:i,messages:e,visibleElements:t}=this;return m("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},t.title?m("div",{key:"error-title",slot:"title"},i.errorMessage):null,m("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return m("div",{key:"loading-container",class:Ee.loadingSpinnerContainer},m("span",{class:this.classes(Ee.iconLoading,Ee.spinner)}))}renderContentContainer(){const{visibleElements:i}=this;return i.content?m("div",{class:Ee.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:i,title:e}=this;return i.title?m(Ls,{level:this.headingLevel,class:Ee.title,innerHTML:e}):null}renderContent(){const i=this.viewModel.content,e="content";if(!i)return null;if(Array.isArray(i))return i.length?m("div",{class:Ee.contentNode,key:`${e}-content-elements`},i.map(this.renderContentElement,this)):null;if(typeof i=="string"){const t=this._contentWidgets[0];return!t||t.destroyed?null:m("div",{class:Ee.contentNode,key:`${e}-content`},t.render())}return this.renderNodeContent(i)}renderContentElement(i,e){var s;const{visibleElements:t}=this;if(typeof t.content!="boolean"&&!((s=t.content)!=null&&s[i.type]))return null;switch(i.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(i,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(i,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(i){const e=this._contentWidgets[i];if(!e||e.destroyed)return null;const{state:t,attachmentInfos:s}=e.viewModel;return t==="loading"||s.length>0?m("div",{key:this._buildKey("attachments-element",i),class:this.classes(Ee.contentElement)},e.render()):null}renderRelationship(i){const e=this._contentWidgets[i];return e&&!e.destroyed&&this.flowItems?m("div",{key:this._buildKey("relationship-element",i),class:Ee.contentElement},e.render()):null}renderExpression(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("expression-element",i),class:Ee.contentElement},e.render())}renderCustom(i,e){const{creator:t}=i,s=this._contentWidgets[e];return!s||s.destroyed?null:t?m("div",{key:this._buildKey("custom-element",e),class:Ee.contentElement},s.render()):null}renderFields(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("fields-element",i),class:Ee.contentElement},e.render())}renderMedia(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("media-element",i),class:Ee.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:i,messages:e}=this,{lastEditInfo:t}=this.viewModel;if(!t||!i.lastEditedInfo)return null;const{date:s,user:n}=t,r=t.type==="edit"?n?e.lastEditedByUser:e.lastEdited:n?e.lastCreatedByUser:e.lastCreated,o=Mt(r,{date:s,user:n});return m("div",{key:"edit-info-element",class:this.classes(Ee.lastEditedInfo,Ee.contentElement)},o)}renderText(i,e){const t=i.text,s=this._contentWidgets[e];return!s||s.destroyed?null:t?m("div",{key:this._buildKey("text-element",e),class:this.classes(Ee.contentElement,Ee.text)},s.render()):null}_buildKey(i,...e){return`${i}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(i){i&&(i.viewModel=null,!i.destroyed&&i.destroy())}_destroyContentWidgets(){this.removeHandles(Uu),this._contentWidgets.forEach(i=>this._destroyContentWidget(i)),this._contentWidgets=[]}_addFeatureRelationshipHandles(i){const{flowItems:e,visibleElements:t}=this;this.addHandles([We(()=>i,"select-record",({featureViewModel:s})=>{e&&(s.abilities={relationshipContent:!0},e.push(new gc({flowItems:e,viewModel:s,visibleElements:t})))}),We(()=>i,"show-all-records",()=>{if(!e)return;const{viewModel:s}=i;s.showAllEnabled=!0;const n=new Nu({visibleElements:{title:!1,description:!1},viewModel:s});this._addFeatureRelationshipHandles(n),e.push(n)})],Uu)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:i,visibleElements:e}=this,t=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(t))t.forEach((n,r)=>{if(n.type==="attachments"&&(this._contentWidgets[r]=new mw({displayType:n.displayType,headingLevel:e.title?i+1:i,viewModel:s[r]})),n.type==="fields"&&(this._contentWidgets[r]=new gm({viewModel:s[r]})),n.type==="media"&&(this._contentWidgets[r]=new Mm({viewModel:s[r]})),n.type==="text"&&(this._contentWidgets[r]=new Zo({viewModel:s[r]})),n.type==="custom"&&(this._contentWidgets[r]=new Zo({viewModel:s[r]})),n.type==="expression"&&(this._contentWidgets[r]=new fb({viewModel:s[r]})),n.type==="relationship"){const o=new Nu({viewModel:s[r]});this._addFeatureRelationshipHandles(o),this._contentWidgets[r]=o}},this);else{const n=s[0];n&&!n.destroyed&&(this._contentWidgets[0]=new Zo({viewModel:n}))}this.scheduleRender()}};l([d()],Xe.prototype,"graphic",null),l([d()],Xe.prototype,"defaultPopupTemplateEnabled",null),l([d()],Xe.prototype,"flowItems",void 0),l([d()],Xe.prototype,"headingLevel",void 0),l([d({readOnly:!0})],Xe.prototype,"isTable",null),l([d()],Xe.prototype,"label",null),l([d(),ge("esri/widgets/Feature/t9n/Feature")],Xe.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],Xe.prototype,"messagesCommon",void 0),l([d(),ge("esri/widgets/support/t9n/uriUtils")],Xe.prototype,"messagesURIUtils",void 0),l([d()],Xe.prototype,"spatialReference",null),l([d({readOnly:!0})],Xe.prototype,"title",null),l([d()],Xe.prototype,"visibleElements",void 0),l([rt("visibleElements")],Xe.prototype,"castVisibleElements",null),l([d()],Xe.prototype,"map",null),l([d()],Xe.prototype,"view",null),l([d({type:gd})],Xe.prototype,"viewModel",void 0),Xe=gc=l([$("esri.widgets.Feature")],Xe);const _b=Xe;var Em;const Xo=Symbol("anchorHandles");let Us=class extends gr.EventedAccessor{constructor(e){super(e),this[Em]=new Ke,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Xo].add([Ut(()=>Fr(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),I(()=>this.screenLocation,(t,s)=>{C(t)&&C(s)&&this.emit("view-change")})])}destroy(){this.view=null,this[Xo]=nt(this[Xo])}get screenLocation(){var n;const{location:e,view:t,screenLocationEnabled:s}=this;return s&&C(e)&&C(t)&&t.ready?(n=t.toScreen)==null?void 0:n.call(t,e):null}};Em=Xo,l([d()],Us.prototype,"location",void 0),l([d()],Us.prototype,"screenLocation",null),l([d()],Us.prototype,"screenLocationEnabled",void 0),l([d()],Us.prototype,"view",void 0),Us=l([$("esri.widgets.support.AnchorElementViewModel")],Us);const $m=Us,wb="esri.widgets.CompassViewModel";let Jo=class extends $m{constructor(e){super(e),this.visible=!1}};l([d()],Jo.prototype,"visible",void 0),Jo=l([$(wb)],Jo);const Lm=Jo,El="esri-spinner",$l={base:El,spinnerStart:`${El}--start`,spinnerFinish:`${El}--finish`};let js=class extends Me{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Lm}initialize(){this.addHandles(I(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:s}=e??{};t&&(this.viewModel.location=t),this.visible=!0;const n=()=>this.hide();s&&s.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,s=!!t,n=e&&s,r=!e&&s,o={[$l.spinnerStart]:n,[$l.spinnerFinish]:r},a=this._getPositionStyles();return m("div",{class:this.classes($l.base,o),styles:a})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Da(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(O(t)||O(e))return{};const{padding:s}=t;return{left:e.x-s.left+"px",top:e.y-s.top+"px"}}};l([d()],js.prototype,"location",null),l([d()],js.prototype,"view",null),l([d({type:Lm})],js.prototype,"viewModel",void 0),l([d()],js.prototype,"visible",null),js=l([$("esri.widgets.Spinner")],js);const bb=js,Xa={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},an=new fr({id:"zoom-to-feature",title:"{messages.zoom}",className:Xa.iconZoom}),ju=new fr({id:"remove-selected-feature",title:"{messages.remove}",className:Xa.iconTrash}),qn=new fr({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Xa.iconZoom}),Un=new fr({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Xa.iconBrowseClusteredFeatures}),Ib="esri.widgets.Popup.PopupViewModel",xa=q.getLogger(Ib),Mb=i=>{const{event:e,view:t}=i,{action:s}=e,n=t&&t.popup;if(!s)return Promise.reject(new L("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new L("trigger-action:missing-arguments","view.popup is missing"));const{disabled:r,id:o}=s;if(!o)return Promise.reject(new L("trigger-action:invalid-action","action.id is missing"));if(r)return Promise.reject(new L("trigger-action:invalid-action","Action is disabled"));if(o===an.id)return Cb(n.viewModel).catch(gy);if(o===qn.id)return xb(n.viewModel);if(o===Un.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,o===ju.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new L(`trigger-action:${ju.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:c}=a;return c?c.remove(a):t.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Tm(i){const{selectedFeature:e,location:t,view:s}=i;return s?s.type==="3d"?e??t??null:i.get("selectedFeature.geometry")||t:null}function tn(i){var e,t;return!!i&&i.isAggregate&&((t=(e=i.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:t.type)==="cluster"}async function Sb(i,e){if((e==null?void 0:e.type)!=="3d"||!i||i.declaredClass!=="esri.Graphic")return!0;const t=e.getViewForGraphic(i);if(t&&"whenGraphicBounds"in t){let s;try{s=await t.whenGraphicBounds(i,{useViewElevation:!0})}catch{}return!s||!s.boundingBox||s.boundingBox[0]===s.boundingBox[3]&&s.boundingBox[1]===s.boundingBox[4]&&s.boundingBox[2]===s.boundingBox[5]}return!0}async function Cb(i){var h;const{location:e,selectedFeature:t,view:s,zoomFactor:n}=i,r=Tm(i);if(!s||!r){const p=new L("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:r,view:s});throw xa.error(p),p}const o=s.scale/n,a=(h=i.selectedFeature)==null?void 0:h.geometry,c=a??e,u=C(c)&&c.type==="point"&&await Sb(t,s);an.active=!0,an.disabled=!0;try{await i.zoomTo({target:{target:r,scale:u?o:void 0}})}catch{const g=new L("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:t});xa.error(g)}finally{an.active=!1,an.disabled=!1,i.zoomToLocation=null,u&&(i.location=c)}}async function xb(i){const{selectedFeature:e,view:t}=i;if((t==null?void 0:t.type)!=="2d"){const o=new L("zoomToCluster:invalid-view","View must be 2d MapView.",{view:t});throw xa.error(o),o}if(!e||!tn(e)){const o=new L("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw xa.error(o),o}const[s,n]=await fd(t,e);qn.active=!0,qn.disabled=!0;const{extent:r}=await s.queryExtent(n);await i.zoomTo({target:r}),qn.active=!1,qn.disabled=!1}async function Eb(i){const{view:e,selectedFeature:t}=i;if(!e||!t)return;const[s,n]=await fd(e,t),{extent:r}=await s.queryExtent(n);i.selectedClusterBoundaryFeature.geometry=r,e.graphics.add(i.selectedClusterBoundaryFeature)}async function $b(i){var o;const{selectedFeature:e,view:t}=i;if(!t||!e)return;const[s,n]=await fd(t,e);Un.active=!0,Un.disabled=!0;const{features:r}=await s.queryFeatures(n);Un.active=!1,Un.disabled=!1,(o=t.popup)==null||o.open({features:[e].concat(r),featureMenuOpen:!0})}async function fd(i,e){const t=await i.whenLayerView(e.sourceLayer),s=t.createQuery(),n=e.getObjectId();return s.aggregateIds=n!=null?[n]:[],[t,s]}function Lb(i){const e=i.features.filter(t=>tn(t));e.length&&(i.features=e)}function Am(i){var e;if(O(i))return null;switch(i.type){case"point":return i;case"extent":return i.center;case"polygon":return i.centroid;case"multipoint":case"polyline":return(e=i.extent)==null?void 0:e.center;default:return null}}const z="esri-popup",xr=`${z}__header`,Ds=`${z}--is-docked`,E={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:z,widget:"esri-widget",main:`${z}__main-container`,loadingContainer:`${z}__loading-container`,isCollapsible:`${z}--is-collapsible`,isCollapsed:`${z}--is-collapsed`,shadow:`${z}--shadow`,isDocked:Ds,isDockedTopLeft:`${Ds}-top-left`,isDockedTopCenter:`${Ds}-top-center`,isDockedTopRight:`${Ds}-top-right`,isDockedBottomLeft:`${Ds}-bottom-left`,isDockedBottomCenter:`${Ds}-bottom-center`,isDockedBottomRight:`${Ds}-bottom-right`,alignTopCenter:`${z}--aligned-top-center`,alignBottomCenter:`${z}--aligned-bottom-center`,alignTopLeft:`${z}--aligned-top-left`,alignBottomLeft:`${z}--aligned-bottom-left`,alignTopRight:`${z}--aligned-top-right`,alignBottomRight:`${z}--aligned-bottom-right`,isFeatureMenuOpen:`${z}--feature-menu-open`,isActionsMenuOpen:`${z}--actions-menu-open`,hasFeatureUpdated:`${z}--feature-updated`,header:xr,headerButtons:`${xr}-buttons`,headerContainer:`${xr}-container`,headerContainerButton:`${xr}-container--button`,headerTitle:`${xr}-title`,content:`${z}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${z}__footer`,footerHasPagination:`${z}__footer--has-pagination`,footerHasActions:`${z}__footer--has-actions`,footerHasActionsMenu:`${z}__footer--has-actions-menu`,button:`${z}__button`,buttonDisabled:`${z}__button--disabled`,buttonDock:`${z}__button--dock`,icon:`${z}__icon`,iconDock:`${z}__icon--dock-icon`,inlineActionsContainer:`${z}__inline-actions-container`,actionsMenuButton:`${z}__actions-menu-button`,actions:`${z}__actions`,action:`${z}__action`,actionImage:`${z}__action-image`,actionText:`${z}__action-text`,actionToggle:`${z}__action-toggle`,actionToggleOn:`${z}__action-toggle--on`,actionExit:`${z}__action--exit`,actionSelectFeature:`${z}__action--select-feature`,pointer:`${z}__pointer`,pointerDirection:`${z}__pointer-direction`,navigation:`${z}__navigation`,paginationPrevious:`${z}__pagination-previous`,paginationNext:`${z}__pagination-next`,paginationPreviousIconLTR:`${z}__pagination-previous-icon`,paginationPreviousIconRTL:`${z}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${z}__pagination-next-icon`,paginationNextIconRTL:`${z}__pagination-next-icon--rtl`,featureMenu:`${z}__feature-menu`,featureMenuList:`${z}__feature-menu-list`,featureMenuItem:`${z}__feature-menu-item`,featureMenuViewport:`${z}__feature-menu-viewport`,featureMenuHeader:`${z}__feature-menu-header`,featureMenuNote:`${z}__feature-menu-note`,featureMenuSelected:`${z}__feature-menu-item--selected`,featureMenuButton:`${z}__feature-menu-button`,featureMenuTitle:`${z}__feature-menu-title`,featureMenuObserver:`${z}__feature-menu-observer`,featureMenuLoader:`${z}__feature-menu-loader`,collapseButton:`${z}__collapse-button`,collapseIcon:`${z}__collapse-icon`},Tb="OBJECTID";var Ze;(function(i){i[i.size=22]="size",i[i.lineWidth=50]="lineWidth",i[i.maxSize=120]="maxSize",i[i.maxOutlineSize=80]="maxOutlineSize",i[i.tallSymbolWidth=20]="tallSymbolWidth"})(Ze||(Ze={}));const fc={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function Ab(i,e,t){const s=Ze.size;let n=s,r=s;i<1?n*=.75:i>1&&(r*=1.25);const o=0,a=0;let c=s,u=s;return e&&t&&(n=r=c=u=0),[{type:"path",path:[{command:"M",values:[c,o]},{command:"L",values:[t?c:.875*c,o]},{command:"L",values:[t?n-.5*c:a,r-.5*u]},{command:"L",values:[n-.5*c,r-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c,o]},{command:"L",values:[c,e?o:.125*u]},{command:"L",values:[n-.5*c,e?r-.5*u:u]},{command:"L",values:[n-.5*c,r-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*c,r-.5*u]},{command:"L",values:[t?n-.5*c:a,r-.5*u]},{command:"L",values:[t?n-.5*c:a,e?r-.5*u:u]},{command:"L",values:[n-.5*c,e?r-.5*u:u]},{command:"Z",values:[]}]}]}function kb(i){const e=Ze.size,t=.5*i,s=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+t]},{command:"L",values:[n,.7*e+t-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+t]},{command:"L",values:[e,t]},{command:"L",values:[e,s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,s]},{command:"L",values:[e,s]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function Rb(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function Pb(i,e){let t=e?Ze.tallSymbolWidth:i;const s=i,n=e?4:6;t<=Ze.size?t-=.5*n:t-=n;const r=0,o=0,a=e?.35*t:.5*t;return[{type:"path",path:[{command:"M",values:[.5*t,r]},{command:"L",values:[t,.5*a]},{command:"L",values:[.5*t,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,.5*a]},{command:"L",values:[.5*t,a]},{command:"L",values:[.5*t,s]},{command:"L",values:[o,s-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*t,a]},{command:"L",values:[.5*t,s]},{command:"L",values:[t,s-.5*a]},{command:"L",values:[t,.5*a]},{command:"Z",values:[]}]}]}function Fb(i,e){let t=e?Ze.tallSymbolWidth:i;const s=i,n=e?4:6;t<=Ze.size?t-=.5*n:t-=n;const r=.5*t,o=.15*t,a=0,c=s-o;return[{type:"ellipse",cx:.5*t,cy:c,rx:r,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,c]},{command:"L",values:[t,c]},{command:"L",values:[t,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:r,ry:o}]}function Ob(i,e){let t=e?Ze.tallSymbolWidth:i;const s=i,n=e?4:6;t<=Ze.size?t-=.5*n:t-=n;const r=.15*t,o=s-r;return[{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:r},{type:"path",path:[{command:"M",values:[.5*t,0]},{command:"L",values:[t,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function Db(i){let e=i;const t=i,s=6;e<Ze.size?e-=.5*s:e-=s;const n=.15*e,r=0;return[{type:"path",path:[{command:"M",values:[0,r]},{command:"L",values:[e,r]},{command:"L",values:[.5*e,t-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:r,rx:.5*e,ry:n}]}function Vb(i){let e=i;const t=i,s=4;e<Ze.size?e-=.5*s:e-=s;const n=0,r=0,o=e,a=t,c=Math.floor(i/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-c]},{command:"L",values:[.45*o-c,.5*a+c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-c,.5*a+c]},{command:"L",values:[r,.5*a-c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,.5*a-c]},{command:"L",values:[.45*o-c,.5*a+c]},{command:"L",values:[.45*o,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,t]},{command:"L",values:[o,.5*a-c]},{command:"L",values:[.45*o-c,.5*a+c]},{command:"Z",values:[]}]}]}function Nb(i){const e=i,t=2;let s=i;s<Ze.size?s-=.5*t:s-=t;const n=0,r=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,s]},{command:"L",values:[.45*e,.6*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*s]},{command:"L",values:[r,s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,s]},{command:"L",values:[.45*e,.6*s]},{command:"L",values:[e,s]},{command:"Z",values:[]}]}]}function Ts(i,e){return Math.round(Math.min(Math.max(i+255*e*.75,0),255))}function CA(i,e){if(i==null)return new Ie;if("type"in i&&(i.type==="linear"||i.type==="pattern"))return i;const t=new Ie(i);return new Ie([Ts(t.r,e),Ts(t.g,e),Ts(t.b,e),t.a])}const zb="http://www.w3.org/2000/svg";let Bb=0,Hb=0;const Gu=St("android"),qb=St("chrome")||Gu&&Gu>=4?"auto":"optimizeLegibility",Ub={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},jb=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let $e={},ae={};const Wu={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},Gb=Math.PI;let Wb=1;function jn(i,e){const t=i*(Gb/180);return Math.abs(e*Math.sin(t))+Math.abs(e*Math.cos(t))}function km(i){return i.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function yd(i,e,t,s){if(i){if(i.type==="circle")return m("circle",{fill:e,"fill-rule":"evenodd",stroke:t.color,"stroke-width":t.width,"stroke-linecap":t.cap,"stroke-linejoin":t.join,"stroke-dasharray":t.dashArray,"stroke-dashoffset":t.dashOffset,"stroke-miterlimit":"4",cx:i.cx,cy:i.cy,r:i.r});if(i.type==="ellipse")return m("ellipse",{fill:e,"fill-rule":"evenodd",stroke:t.color,"stroke-width":t.width,"stroke-linecap":t.cap,"stroke-linejoin":t.join,"stroke-dasharray":t.dashArray,"stroke-miterlimit":"4",cx:i.cx,cy:i.cy,rx:i.rx,ry:i.ry});if(i.type==="rect")return m("rect",{fill:e,"fill-rule":"evenodd",stroke:t.color,"stroke-width":t.width,"stroke-linecap":t.cap,"stroke-linejoin":t.join,"stroke-dasharray":t.dashArray,"stroke-miterlimit":"4",x:i.x,y:i.y,width:i.width,height:i.height});if(i.type==="image")return m("image",{href:i.src,x:i.x,y:i.y,width:i.width,height:i.height,preserveAspectRatio:"none"});if(i.type==="path"){const n=typeof i.path!="string"?km(i.path):i.path;return m("path",{fill:e,"fill-rule":"evenodd",stroke:t.color,"stroke-width":t.width,"stroke-linecap":t.cap,"stroke-linejoin":t.join,"stroke-dasharray":t.dashArray,"stroke-miterlimit":"4",d:n})}if(i.type==="text")return Ba(s),m("text",{"dominant-baseline":s.dominantBaseline,fill:e,"fill-rule":"evenodd",stroke:t.color,"stroke-width":t.width,"stroke-linecap":t.cap,"stroke-linejoin":t.join,"stroke-dasharray":t.dashArray,"stroke-miterlimit":"4","text-anchor":s.align,"text-decoration":s.decoration,kerning:s.kerning,rotate:s.rotate,"text-rendering":qb,"font-style":s.font.style,"font-variant":s.font.variant,"font-weight":s.font.weight,"font-size":s.font.size,"font-family":s.font.family,x:i.x,y:i.y},i.text)}return null}function vd(i){const e={fill:"none",pattern:null,linearGradient:null};if(i){if("type"in i&&i.type==="pattern"){const t="patternId-"+ ++Bb;e.fill=`url(#${t})`,e.pattern={id:t,x:i.x,y:i.y,width:i.width,height:i.height,image:{x:0,y:0,width:i.width,height:i.height,href:i.src}}}else if("type"in i&&i.type==="linear"){const t="linearGradientId-"+ ++Hb;e.fill=`url(#${t})`,e.linearGradient={id:t,x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,stops:i.colors.map(s=>({offset:s.offset,color:s.color&&new Ie(s.color).toString()}))}}else if(i){const t=new Ie(i);e.fill=t.toString()}}return e}function _d(i){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(i&&(i.width!=null&&(e.width=i.width),i.cap&&(e.cap=i.cap),i.join&&(e.join=i.join.toString()),i.color&&(e.color=new Ie(i.color).toString()),i.dashArray&&(e.dashArray=i.dashArray),i.dashArray&&(e.dashOffset=i.dashoffset),i.style)){let t=null;if(i.style in Wu&&(t=Wu[i.style]),Array.isArray(t)){t=t.slice(0);const s=i.width??0;for(let n=0;n<t.length;++n)t[n]*=s;if(i.cap!=="butt"){for(let n=0;n<t.length;n+=2)t[n]-=s,t[n]<1&&(t[n]=1);for(let n=1;n<t.length;n+=2)t[n]+=s}t=t.join(",")}e.dashArray=t}return e}function Rm(i,e){const t={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(i){const s=i.alignBaseline,n=s==="baseline"?"auto":s==="top"?"text-top":s==="bottom"?"hanging":s;t.align=i.align,t.dominantBaseline=n,t.decoration=i.decoration,t.kerning=i.kerning?"auto":"0",t.rotate=i.rotated?"90":"0",Ba(e),t.font.style=e.style||"normal",t.font.variant=e.variant||"normal",t.font.weight=e.weight||"normal",t.font.size=e.size&&e.size.toString()||"10pt",t.font.family=e.family||"serif"}return t}function Pm(i){const{pattern:e,linearGradient:t}=i;if(e)return m("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},m("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(t){const s=t.stops.map((n,r)=>m("stop",{key:`${r}-stop`,offset:n.offset,"stop-color":n.color}));return m("linearGradient",{id:t.id,gradientUnits:"userSpaceOnUse",x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},s)}return null}function Zb(i,e){if(!i)return null;const t=[];for(const s of i){const{shape:n,fill:r,stroke:o,font:a}=s,c=vd(r),u=_d(o),h=n.type==="text"?Rm(n,a):null,p=yd(n,c.fill,u,h);p&&t.push(p)}return m("mask",{id:e,maskUnits:"userSpaceOnUse"},m("g",null,t))}function Zu(i,e,t){return uo(i,td(i),[e,t])}function Ku(i,e,t,s,n){return id(i,td(i),[e,t]),i[4]=i[4]*e-s*e+s,i[5]=i[5]*t-n*t+n,i}function Kb(i,e,t,s){const n=e%360*Math.PI/180;ja(i,td(i),n);const r=Math.cos(n),o=Math.sin(n),a=i[4],c=i[5];return i[4]=a*r-c*o+s*o-t*r+t,i[5]=c*r+a*o-t*o-s*r+s,i}function yt(i,e){$e&&"left"in $e?($e.left!=null&&$e.left>i&&($e.left=i),($e.right==null||$e.right<i)&&($e.right=i),($e.top==null||$e.top>e)&&($e.top=e),($e.bottom==null||$e.bottom<e)&&($e.bottom=e)):$e={left:i,bottom:e,right:i,top:e}}function Qu(i){const e=i.args,t=e.length;let s;switch(i.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(s=0;s<t;s+=2)yt(e[s],e[s+1]);ae.x=e[t-2],ae.y=e[t-1];break;case"H":for(s=0;s<t;++s)yt(e[s],ae.y);ae.x=e[t-1];break;case"V":for(s=0;s<t;++s)yt(ae.x,e[s]);ae.y=e[t-1];break;case"m":{let n=0;for(("x"in ae)||(yt(ae.x=e[0],ae.y=e[1]),n=2),s=n;s<t;s+=2)yt(ae.x+=e[s],ae.y+=e[s+1]);break}case"l":case"t":for(s=0;s<t;s+=2)yt(ae.x+=e[s],ae.y+=e[s+1]);break;case"h":for(s=0;s<t;++s)yt(ae.x+=e[s],ae.y);break;case"v":for(s=0;s<t;++s)yt(ae.x,ae.y+=e[s]);break;case"c":for(s=0;s<t;s+=6)yt(ae.x+e[s],ae.y+e[s+1]),yt(ae.x+e[s+2],ae.y+e[s+3]),yt(ae.x+=e[s+4],ae.y+=e[s+5]);break;case"s":case"q":for(s=0;s<t;s+=4)yt(ae.x+e[s],ae.y+e[s+1]),yt(ae.x+=e[s+2],ae.y+=e[s+3]);break;case"A":for(s=0;s<t;s+=7)yt(e[s+5],e[s+6]);ae.x=e[t-2],ae.y=e[t-1];break;case"a":for(s=0;s<t;s+=7)yt(ae.x+=e[s+5],ae.y+=e[s+6])}}function Yu(i,e,t){const s=Ub[i.toLowerCase()];let n;typeof s=="number"&&(s?e.length>=s&&(n={action:i,args:e.slice(0,e.length-e.length%s)},t.push(n),Qu(n)):(n={action:i,args:[]},t.push(n),Qu(n)))}function Qb(i){const e=(typeof i.path!="string"?km(i.path):i.path).match(jb),t=[];if($e={},ae={},!e)return null;let s="",n=[];const r=e.length;for(let a=0;a<r;++a){const c=e[a],u=parseFloat(c);isNaN(u)?(s&&Yu(s,n,t),n=[],s=c):n.push(u)}Yu(s,n,t);const o={x:0,y:0,width:0,height:0};return $e&&"left"in $e&&(o.x=$e.left,o.y=$e.top,o.width=$e.right-$e.left,o.height=$e.bottom-$e.top),o}function Fm(i){const e={x:0,y:0,width:0,height:0};if(i.type==="circle")e.x=i.cx-i.r,e.y=i.cy-i.r,e.width=2*i.r,e.height=2*i.r;else if(i.type==="ellipse")e.x=i.cx-i.rx,e.y=i.cy-i.ry,e.width=2*i.rx,e.height=2*i.ry;else if(i.type==="image"||i.type==="rect")e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height;else if(i.type==="path"){const t=za(Qb(i));e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}return e}function Om(i){const e={x:0,y:0,width:0,height:0};let t=null,s=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const r of i)t?(t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),s=Math.max(s,r.x+r.width),n=Math.max(n,r.y+r.height)):(t=e,t.x=r.x,t.y=r.y,s=r.x+r.width,n=r.y+r.height);return t&&(t.width=s-t.x,t.height=n-t.y),t}function yc(i,e,t,s,n,r,o,a,c){let u=(o&&r?jn(r,e):e)/2,h=(o&&r?jn(r,t):t)/2;if(c){const b=c[0],M=c[1];u=(o&&r?jn(r,b):b)/2,h=(o&&r?jn(r,M):M)/2}const p=i.width+s,g=i.height+s,f=nc(),y=nc();let _=!1;if(n&&p!==0&&g!==0){const b=e!==t?e/t:p/g,M=e>t?e:t;let S=1,x=1;isNaN(M)||(b>1?(S=M/p,x=M/b/g):(x=M/g,S=M*b/p)),Ir(y,y,Ku(f,S,x,u,h)),_=!0}const v=i.x+(p-s)/2,w=i.y+(g-s)/2;if(Ir(y,y,Zu(f,u-v,h-w)),!_&&(p>e||g>t)){const b=p/e>g/t,M=(b?e:t)/(b?p:g);Ir(y,y,Ku(f,M,M,v,w))}return r&&Ir(y,y,Kb(f,r,v,w)),a&&Ir(y,y,Zu(f,a[0],a[1])),`matrix(${y[0]},${y[1]},${y[2]},${y[3]},${y[4]},${y[5]})`}function Yb(i,e,t){const s=i==null?void 0:i.effects.find(u=>u.type==="bloom");if(!s)return null;const{strength:n,radius:r}=s,o=n>0?r:0,a=(n+o)*e,c=4*n+1;return m("filter",{id:`bloom${t}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},m("feMorphology",{operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),in:"SourceGraphic",result:"dilate"}),m("feGaussianBlur",{in:"dilate",stdDeviation:a/25,result:"blur"}),m("feGaussianBlur",{in:"blur",stdDeviation:a/50,result:"intensityBlur"}),m("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},m("feFuncR",{type:"linear",slope:c}),m("feFuncG",{type:"linear",slope:c}),m("feFuncB",{type:"linear",slope:c})),m("feMerge",null,m("feMergeNode",{in:"intensityBlur"}),m("feMergeNode",{in:"intensityBrightness"}),m("feGaussianBlur",{stdDeviation:n/10})))}function Dm(i,e,t,s={}){var u;const n=[],r=[],o=++Wb,a=Yb(s.effectView,e,o);let c=null;if(a){const h=(u=s.effectView)==null?void 0:u.effects.find(y=>y.type==="bloom"),p=(h.strength?h.strength+h.radius/2:0)/3,g=e+e*p,f=t+t*p;c=[Math.max(g,10),Math.max(f,10)]}for(let h=0;h<i.length;h++){const p=i[h],g=[],f=[];let y=0,_=0,v=0;for(const M of p){const{shape:S,fill:x,stroke:A,font:k,offset:te}=M;s.ignoreStrokeWidth||(y+=A&&A.width||0);const U=vd(x),J=_d(A),oe=S.type==="text"?Rm(S,k):null;n.push(Pm(U)),g.push(yd(S,U.fill,J,oe)),f.push(Fm(S)),te&&(_+=te[0],v+=te[1])}const w=yc(za(Om(f)),e,t,y,s.scale??!1,s.rotation,s.useRotationSize??!1,[_,v],c);let b=null;if(s.masking){const M=`mask-${h}`,S=s.masking[h];n.push(Zb(S,M)),b=`url(#${M})`}r.push(b?m("g",{mask:b},m("g",{transform:w},g)):m("g",{transform:w},g))}return s.useRotationSize&&s.rotation&&(e=jn(s.rotation,e),t=jn(s.rotation,t)),a&&(Ba(c),e=c[0],t=c[1]),m("svg",{xmlns:zb,width:e,height:t,style:"display: block;"},a,m("defs",null,n),a?m("g",{filter:`url(#bloom${o})`},r):r)}const Xu=_a();function Xb(i,e){Xu.append(i,e),Xu.detach(e)}function Io(i,e,t){const s=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!i.some(o=>!!o.length))return null;const r=t&&t.node||document.createElement("div");return t.opacity!=null&&(r.style.opacity=t.opacity.toString()),t.effectView!=null&&(r.style.filter=co(t.effectView)),Xb(r,()=>Dm(i,s,n,t)),r}function Jb(i,e){i=Math.ceil(i),e=Math.ceil(e);const t=document.createElement("canvas");t.width=i,t.height=e,t.style.width=i+"px",t.style.height=e+"px";const s=t.getContext("2d");return s.clearRect(0,0,i,e),s}function e0(i,e,t){return i?ri(i,{responseType:"image"}).then(s=>{const n=s.data,r=n.width,o=n.height,a=r/o;let c=e;if(t){const u=Math.max(r,o);c=Math.min(c,u)}return{image:n,width:a<=1?Math.ceil(c*a):c,height:a<=1?c:Math.ceil(c/a)}}):Promise.reject(new L("renderUtils: imageDataSize","href not provided."))}function t0(i,e){return!(!i||e==="ignore")&&(e!=="multiply"||i.r!==255||i.g!==255||i.b!==255||i.a!==1)}function i0(i,e,t,s,n){switch(n){case"multiply":i[e+0]*=t[0],i[e+1]*=t[1],i[e+2]*=t[2],i[e+3]*=t[3];break;default:{const r=ed({r:i[e+0],g:i[e+1],b:i[e+2]});r.h=s.h,r.s=s.s,r.v=r.v/100*s.v;const o=Up(r);i[e+0]=o.r,i[e+1]=o.g,i[e+2]=o.b,i[e+3]*=t[3];break}}}function s0(i,e,t,s,n){return e0(i,e,n).then(r=>{const o=r.width?r.width:e,a=r.height?r.height:e;if(r.image&&t0(t,s)){let c=r.image.width,u=r.image.height;St("edge")&&/\.svg$/i.test(i)&&(c-=1,u-=1);const h=Jb(o,a);h.drawImage(r.image,0,0,c,u,0,0,o,a);const p=h.getImageData(0,0,o,a),g=[t.r/255,t.g/255,t.b/255,t.a],f=ed(t);for(let y=0;y<p.data.length;y+=4)i0(p.data,y,g,f,s);h.putImageData(p,0,0),i=h.canvas.toDataURL("image/png")}else{const c=Xd&&Xd.findCredential(i);if(c&&c.token){const u=i.includes("?")?"&":"?";i=`${i}${u}token=${c.token}`}}return{url:i,width:o,height:a}}).catch(()=>({url:i,width:e,height:e}))}const Vm="esri-relationship-ramp",pn=`${Vm}--diamond`,is=`${Vm}--square`,n0="http://www.w3.org/2000/svg",me={diamondContainer:`${pn}__container`,diamondLeftCol:`${pn}__left-column`,diamondRightCol:`${pn}__right-column`,diamondMidCol:`${pn}__middle-column`,diamondMidColLabel:`${pn}__middle-column--label`,diamondMidColRamp:`${pn}__middle-column--ramp`,squareTable:`${is}__table`,squareTableRow:`${is}__table-row`,squareTableCell:`${is}__table-cell`,squareTableLabel:`${is}__table-label`,squareTableLabelLeftBottom:`${is}__table-label--left-bottom`,squareTableLabelRightBottom:`${is}__table-label--right-bottom`,squareTableLabelLeftTop:`${is}__table-label--left-top`,squareTableLabelRightTop:`${is}__table-label--right-top`};function Nm(i,e,t,s){const{focus:n,labels:r}=i,o=!!n,a=r0(i,e,t,s),c={justifyContent:"center"},u=qt();return o?m("div",{class:me.diamondContainer,styles:c},m("div",{class:me.diamondLeftCol},u?r.right:r.left),m("div",{class:me.diamondMidCol},m("div",{class:me.diamondMidColLabel},r.top),a,m("div",{class:me.diamondMidColLabel},r.bottom)),m("div",{class:me.diamondRightCol},u?r.left:r.right)):m("div",{class:me.squareTable},m("div",{class:me.squareTableRow},m("div",{class:Or(me.squareTableCell,me.squareTableLabel,me.squareTableLabelRightBottom)},u?r.top:r.left),m("div",{class:me.squareTableCell}),m("div",{class:Or(me.squareTableCell,me.squareTableLabel,me.squareTableLabelLeftBottom)},u?r.left:r.top)),m("div",{class:me.squareTableRow},m("div",{class:me.squareTableCell}),a,m("div",{class:me.squareTableCell})),m("div",{class:me.squareTableRow},m("div",{class:Or(me.squareTableCell,me.squareTableLabel,me.squareTableLabelRightTop)},u?r.right:r.bottom),m("div",{class:me.squareTableCell}),m("div",{class:Or(me.squareTableCell,me.squareTableLabel,me.squareTableLabelLeftTop)},u?r.bottom:r.right)))}function Ju(i,e,t){const s=`${t}_arrowStart`,n=`${t}_arrowEnd`,r=i==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":r?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${s})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":r?o.markerEnd=`url(#${s})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${s})`}return o}function r0(i,e,t,s,n=60){const{focus:r,numClasses:o,colors:a,rotation:c}=i,u=!!r,h=Math.sqrt(n**2+n**2)+(u?0:5),p=[],g=[],f=[],y=(n||75)/o;for(let J=0;J<o;J++){const oe=J*y;for(let Le=0;Le<o;Le++){const Re=Le*y,_e=vd(a[J][Le]),Qe=_d(null),Ye={type:"rect",x:Re,y:oe,width:y,height:y},Be=Pm(_e);Be&&p.push(Be);const Se=yd(Ye,_e.fill,Qe,null);Se&&g.push(Se),f.push(Fm(Ye))}}const _=10,v=15,w=15,b=10;let M=null;u||(M="margin: -15px -15px -18px -15px");const S=Ju("left",r,e),x=Ju("right",r,e),A=Om(f),k=yc(A,h,h,0,!1,c,!1),te=yc(A,h,h,0,!1,u?-45:null,!1),U={filter:co(s),opacity:t==null?"":`${t}`};return m("div",{styles:U,class:u?me.diamondMidColRamp:me.squareTableCell},m("svg",{xmlns:n0,width:h,height:h,style:M},m("defs",null,m("marker",{id:`${e}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},m("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),m("marker",{id:`${e}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},m("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),p),m("g",{transform:k},g),m("g",{transform:te},m("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":S.markerStart,"marker-end":S.markerEnd,x1:-_,y1:n-v,x2:-_,y2:v}),m("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":x.markerStart,"marker-end":x.markerEnd,x1:w,y1:n+b,x2:n-w,y2:n+b}))))}const sn=Ze.size,ea=Ze.maxSize,wd=Ze.maxOutlineSize,eh=Ze.lineWidth,vc=Ze.tallSymbolWidth;function Gn(i){const e=i.outline,t=C(i.material)?i.material.color:null,s=C(t)?t.toHex():null;if(O(e)||"pattern"in e&&C(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none")return i.type==="fill"&&s==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=dt(e.size)||0;return{color:"rgba("+(C(e.color)?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,wd),style:"pattern"in e&&C(e.pattern)&&e.pattern.type==="style"?Np(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}function o0(i,e){const t=e&&e.resource,s=t&&t.href;if(i.thumbnail&&i.thumbnail.url)return Promise.resolve(i.thumbnail.url);if(s&&e.type!=="object")return Promise.resolve(gv(e));const n=_o("esri/images/Legend/legend3dsymboldefault.png");return i.styleOrigin&&(i.styleOrigin.styleName||i.styleOrigin.styleUrl)?Pv(i.styleOrigin,{portal:i.styleOrigin.portal},"webRef").catch(r=>r).then(r=>{var o;return((o=r==null?void 0:r.thumbnail)==null?void 0:o.url)||n}):Promise.resolve(n)}function Ll(i,e=1){const t=i.a,s=ed(i),n=s.h,r=s.s/e,o=100-(100-s.v)/e,{r:a,g:c,b:u}=Up({h:n,s:r,v:o});return[a,c,u,t]}function Ea(i){return i.type==="water"?O(i.color)?null:i.color:O(i.material)||O(i.material.color)?null:i.material.color}function ue(i,e=0){const t=Ea(i);if(!t){if(i.type==="fill")return null;const n=pv.r,r=Ts(n,e);return[r,r,r,100]}const s=t.toRgba();for(let n=0;n<3;n++)s[n]=Ts(s[n],e);return s}async function zm(i,e){const t=i.style;return t==="none"?null:{type:"pattern",x:0,y:0,src:await mv(_o(`esri/symbols/patterns/${t}.png`),e.toCss(!0)),width:5,height:5}}function th(i){return i.outline?Gn(i):{color:"rgba(0, 0, 0, 1)",width:1.5}}function Bm(i,e){const t=Ea(i);if(!t)return null;let s="rgba(";return s+=Ts(t.r,e)+",",s+=Ts(t.g,e)+",",s+=Ts(t.b,e)+",",s+t.a+");"}function _c(i,e){const t=Bm(i,e);return t?"pattern"in i&&C(i.pattern)&&i.pattern.type==="style"&&i.pattern.style==="none"?null:{color:t,width:Math.min(i.size?dt(i.size):.75,wd),style:"pattern"in i&&C(i.pattern)&&i.pattern.type==="style"?Np(i.pattern.style):null,cap:"cap"in i?i.cap:null,join:"join"in i?i.join==="miter"?dt(2):i.join:null}:{}}function To(i,e,t){const s=t!=null?.75*t:0;return{type:"linear",x1:s?.25*s:0,y1:s?.5*s:0,x2:s||4,y2:s?.5*s:4,colors:[{color:i,offset:0},{color:e,offset:1}]}}function a0(i){const e=i.depth,t=i.height,s=i.width;return s!==0&&e!==0&&t!==0&&s===e&&s!=null&&t!=null&&s<t}function l0(i,e,t){const s=[];if(!i)return s;switch(i.type){case"icon":{const o=e,a=e;switch(i.resource&&i.resource.primitive||Iv){case"circle":s.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:ue(i,0),stroke:Gn(i)});break;case"square":s.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:ue(i,0),stroke:Gn(i)});break;case"triangle":s.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:ue(i,0),stroke:Gn(i)});break;case"cross":s.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:th(i)});break;case"x":s.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:th(i)});break;case"kite":s.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:ue(i,0),stroke:Gn(i)})}break}case"object":switch(i.resource&&i.resource.primitive||bv){case"cone":{const n=To(ue(i,0),ue(i,-.6),t?vc:e),r=Ob(e,t);s.push({shape:r[0],fill:n}),s.push({shape:r[1],fill:n});break}case"inverted-cone":{const n=ue(i,0),r=To(n,ue(i,-.6),e),o=Db(e);s.push({shape:o[0],fill:r}),s.push({shape:o[1],fill:n});break}case"cube":{const n=Pb(e,t);s.push({shape:n[0],fill:ue(i,0)}),s.push({shape:n[1],fill:ue(i,-.3)}),s.push({shape:n[2],fill:ue(i,-.5)});break}case"cylinder":{const n=To(ue(i,0),ue(i,-.6),t?vc:e),r=Fb(e,t);s.push({shape:r[0],fill:n}),s.push({shape:r[1],fill:n}),s.push({shape:r[2],fill:ue(i,0)});break}case"diamond":{const n=Vb(e);s.push({shape:n[0],fill:ue(i,-.3)}),s.push({shape:n[1],fill:ue(i,0)}),s.push({shape:n[2],fill:ue(i,-.3)}),s.push({shape:n[3],fill:ue(i,-.7)});break}case"sphere":{const n=To(ue(i,0),ue(i,-.6));n.x1=0,n.y1=0,n.x2=.25*e,n.y2=.25*e,s.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:n});break}case"tetrahedron":{const n=Nb(e);s.push({shape:n[0],fill:ue(i,-.3)}),s.push({shape:n[1],fill:ue(i,0)}),s.push({shape:n[2],fill:ue(i,-.6)});break}}break}return s}function Ja(i){const e=typeof(i==null?void 0:i.size)=="number"?i==null?void 0:i.size:null;return e?dt(e):null}function c0(i){return i.type==="icon"?"multiply":"tint"}function d0(i,e){const t=Ja(e),s=e!=null&&e.maxSize?dt(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,r=i.symbolLayers,o=[];let a=0,c=0;const u=r.getItemAt(r.length-1);let h;return u&&u.type==="icon"&&(h=u.size&&dt(u.size)),r.forEach(p=>{var y;if(p.type!=="icon"&&p.type!=="object")return;const g=p.type==="icon"?p.size&&dt(p.size):0,f=t||g?Math.ceil(Math.min(t||g,s||ea)):sn;if(p&&p.resource&&p.resource.href){const _=o0(i,p).then(v=>{const w=p.get("material.color"),b=c0(p);return s0(v,f,w,b,n)}).then(v=>{const w=v.width,b=v.height;return a=Math.max(a,w),c=Math.max(c,b),[{shape:{type:"image",x:0,y:0,width:w,height:b,src:v.url},fill:null,stroke:null}]});o.push(_)}else{let _=f;p.type==="icon"&&h&&t&&(_=f*(g/h));const v=(e==null?void 0:e.symbolConfig)==="tall"||((y=e==null?void 0:e.symbolConfig)==null?void 0:y.isTall)||p.type==="object"&&a0(p);a=Math.max(a,v?vc:_),c=Math.max(c,_),o.push(Promise.resolve(l0(p,_,v)))}}),Ge(o).then(p=>{const g=[];return p.forEach(f=>{f.value?g.push(f.value):f.error&&q.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",f.error)}),Io(g,[a,c],{node:e&&e.node,scale:!1,opacity:e&&e.opacity})})}function u0(i,e){const t=i.symbolLayers,s=[],n=qa(i),r=Ja(e),o=(e&&e.maxSize?dt(e.maxSize):null)||wd;let a,c=0,u=0;return t.forEach((h,p)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const g=[];switch(h.type){case"line":{const f=_c(h,0);if(O(f))break;const y=f&&f.width||0;p===0&&(a=y);const _=Math.min(r||y,o),v=p===0?_:r?_*(y/a):_,w=v>eh/2?2*v:eh;u=Math.max(u,v),c=Math.max(c,w),f.width=v,g.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[c,.5*u]}]},stroke:f});break}case"path":{const f=Math.min(r||sn,o),y=ue(h,0),_=ue(h,-.2),v=Bm(h,-.4),w=v?{color:v,width:1}:{};if(h.profile==="quad"){const b=h.width,M=h.height,S=Ab(b&&M?b/M:1,M===0,b===0),x={...w,join:"bevel"};g.push({shape:S[0],fill:_,stroke:x}),g.push({shape:S[1],fill:_,stroke:x}),g.push({shape:S[2],fill:y,stroke:x})}else g.push({shape:fc.pathSymbol3DLayer[0],fill:_,stroke:w}),g.push({shape:fc.pathSymbol3DLayer[1],fill:y,stroke:w});u=Math.max(u,f),c=u}}s.push(g)}),Promise.resolve(Io(s,[c,u],{node:e&&e.node,scale:n,opacity:e&&e.opacity}))}async function h0(i,e){const t=i.type==="mesh-3d",s=i.symbolLayers,n=Ja(e),r=e&&e.maxSize?dt(e.maxSize):null,o=n||sn,a=[];let c=0,u=0,h=!1;for(let p=0;p<s.length;p++){const g=s.getItemAt(p),f=[];if(t&&g.type!=="fill")continue;const y=fc.fill[0];switch(g.type){case"fill":{const _=Gn(g),v=Math.min(o,r||ea);c=Math.max(c,v),u=Math.max(u,v),h=!0;let w=ue(g,0);const b="pattern"in g?g.pattern:null,M=Ea(g);!t&&C(b)&&b.type==="style"&&b.style!=="solid"&&M&&(w=await zm(b,M)),f.push({shape:y,fill:w,stroke:_});break}case"line":{const _=_c(g,0);if(O(_))break;const v={stroke:_,shape:y};c=Math.max(c,sn),u=Math.max(u,sn),f.push(v);break}case"extrude":{const _={join:"round",width:1,..._c(g,-.4)},v=ue(g,0),w=ue(g,-.2),b=Math.min(o,r||ea),M=kb(b);_.width=1,f.push({shape:M[0],fill:w,stroke:_}),f.push({shape:M[1],fill:w,stroke:_}),f.push({shape:M[2],fill:v,stroke:_});const S=sn,x=.7*sn+.5*b;c=Math.max(c,S),u=Math.max(u,x);break}case"water":{const _=za(Ea(g)),v=Ll(_),w=Ll(_,2),b=Ll(_,3),M=Rb();h=!0,f.push({shape:M[0],fill:v}),f.push({shape:M[1],fill:w}),f.push({shape:M[2],fill:b});const S=Math.min(o,r||ea);c=Math.max(c,S),u=Math.max(u,S);break}}a.push(f)}return Io(a,[c,u],{node:e&&e.node,scale:h,opacity:e&&e.opacity})}function p0(i,e){if(i.symbolLayers.length===0)return Promise.reject(new L("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(i.type){case"point-3d":return d0(i,e);case"line-3d":return u0(i,e);case"polygon-3d":case"mesh-3d":return h0(i,e)}return Promise.reject(new L("symbolPreview: swatchInfo3D","symbol not supported."))}const m0=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:zm,getSizeFromOptions:Ja,getSymbolLayerFill:ue,previewSymbol3D:p0},Symbol.toStringTag,{value:"Module"})),ih={HH:315,HL:45,LL:135,LH:225},g0={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function f0(i){if(!i)return;const{type:e}=i;if(e.includes("3d"))return ue(i.symbolLayers.getItemAt(0));if(e==="simple-line"){const t=ic(i);return t&&t.color}if(i.type==="simple-marker"&&(i.style==="x"||i.style==="cross")){const t=ic(i);return t&&t.color}return fv(i)}function y0(i,e){const t=e.HH.label,s=e.LL.label,n=e.HL.label,r=e.LH.label;switch(i){case"HH":default:return{top:t,bottom:s,left:n,right:r};case"HL":return{top:n,bottom:r,left:s,right:t};case"LL":return{top:s,bottom:t,left:r,right:n};case"LH":return{top:r,bottom:n,left:t,right:s}}}function v0(i){const{focus:e,infos:t,numClasses:s}=i,n=g0[s],r={};t.forEach(a=>{r[a.value]={label:a.label,fill:f0(a.symbol)}});const o=[];for(let a=0;a<s;a++){const c=[];for(let u=0;u<s;u++){const h=r[n[a][u]];c.push(h.fill)}o.push(c)}return{type:"relationship-ramp",numClasses:s,focus:e,colors:o,labels:y0(e,r),rotation:Hm(e)}}function Hm(i){let e=ih[i];return i&&e==null&&(e=ih.HH),e||0}let mn=null;const sh=[255,255,255];function nh(i,e){return Math.floor(Math.random()*(e-i+1)+i)}function _0(i,e,t){const{backgroundColor:s,outline:n,dotSize:r}=i,o=t&&t.swatchSize||Ze.size,a=.8,c=Math.round(o*o/r**2*a),u=window.devicePixelRatio,h=document.createElement("canvas"),p=o*u;h.width=p,h.height=p,h.style.width=h.width/u+"px",h.style.height=h.height/u+"px";const g=h.getContext("2d");if(s&&(g.fillStyle=s.toCss(!0),g.fillRect(0,0,p,p),g.fill()),g.fillStyle=e.toCss(!0),mn&&mn.length/2===c)for(let y=0;y<2*c;y+=2){const _=mn[y],v=mn[y+1];g.fillRect(_,v,r*u,r*u),g.fill()}else{mn=[];for(let y=0;y<2*c;y+=2){const _=nh(0,p),v=nh(0,p);mn.push(_,v),g.fillRect(_,v,r*u,r*u),g.fill()}}n&&(n.color&&(g.strokeStyle=n.color.toCss(!0)),g.lineWidth=n.width,g.strokeRect(0,0,p,p));const f=new Image(o,o);return f.src=h.toDataURL(),f}function w0(i,e={}){const t=e.radius||40,s=2*Math.PI*t,n=i.length,r=s/n,o=[],a=ic(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:t,cy:t,r:t},fill:e.backgroundColor,stroke:a,offset:[0,0]});const c=e.values,u=c&&c.length===n&&c.reduce((y,_)=>y+_,0)===100,h=[0];for(let y=0;y<n;y++){let _=null;u&&(_=c[y]*s/100,h.push(_+h[y])),o.push({shape:{type:"circle",cx:t,cy:t,r:t/2},fill:[0,0,0,0],stroke:{width:t,dashArray:`${(_??r)/2} ${s}`,dashoffset:"-"+(u?h[y]/2:y*(r/2)),color:i[y]},offset:[0,0]})}let p=null;const g=2*t+((a==null?void 0:a.width)||0),f=e.holePercentage;if(f){a&&o.push({shape:{type:"circle",cx:t,cy:t,r:t*f},fill:null,stroke:a,offset:[0,0]});const y=g/2;p=[[{shape:{type:"circle",cx:y,cy:y,r:y},fill:sh,stroke:a?{...a,color:sh}:null,offset:[0,0]},{shape:{type:"circle",cx:y,cy:y,r:t*f},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return Io([o],[g,g],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:p,rotation:-90})}function Gs(i,e={}){const n=e.align==="horizontal",r=n?75:24,o=n?24:75,{width:a=r,height:c=o,gradient:u=!0}=e,h=window.devicePixelRatio,p=a*h,g=c*h,f=document.createElement("canvas");f.width=p,f.height=g,f.style.width=`${a}px`,f.style.height=`${c}px`;const y=f.getContext("2d"),_=n?p:0,v=n?0:g;if(u){const b=y.createLinearGradient(0,0,_,v),M=i.length,S=M===1?0:1/(M-1);i.forEach((x,A)=>b.addColorStop(A*S,x.toString())),y.fillStyle=b,y.fillRect(0,0,p,g)}else{const b=n?p/i.length:p,M=n?g:g/i.length;let S=0,x=0;for(const A of i)y.fillStyle=A.toString(),y.fillRect(S,x,b,M),S=n?S+b:0,x=n?0:x+M}const w=document.createElement("div");return w.style.width=`${a}px`,w.style.height=`${c}px`,b0(w,e==null?void 0:e.effectList),w.appendChild(f),w}function b0(i,e){if(!e)return;i.style.filter=co(e);const t=e.effects;if(t){for(const s of t)if((s==null?void 0:s.type)==="drop-shadow"){s.offsetX<0?i.style.marginLeft=`${Math.abs(s.offsetX)}px`:i.style.marginRight=`${s.offsetX}px`;break}}}async function qm(i,e){switch(i.type){case"web-style":{const{previewWebStyleSymbol:t}=await T(()=>import("./previewWebStyleSymbol-52234f6f.js"),["assets/previewWebStyleSymbol-52234f6f.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/Error-d97df89f.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/promiseUtils-ac1bd36f.js","assets/screenUtils-7afeb41c.js","assets/utils-e0744d8b.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/ensureType-348c3d61.js","assets/symbols-946d4e11.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/CIMSymbol-0fa077f5.js","assets/enumeration-49e09bda.js","assets/cast-73cfc253.js","assets/Extent-fd3ac910.js","assets/fieldUtils-66be74eb.js","assets/geometry-d89d4a34.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/persistableUrlUtils-26091271.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/Clonable-5318ec31.js","assets/asyncUtils-f0fdc8c7.js","assets/BlendLayer-5cec7349.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/assets-2c955bed.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Identifiable-876da2a8.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/number-205e28e0.js","assets/jsonUtils-dd0891e0.js","assets/Cyclical-0205ad3e.js","assets/reactiveUtils-307e98f9.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/aaBoundingRect-a7e9efee.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/HandleOwner-4c8d824c.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/featureConversionUtils-00c47b2e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/context-util-09fcc133.js","assets/Util-a12911ae.js","assets/EffectView-7a98f2c6.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"]);return t(i,qm,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:t}=await T(()=>Promise.resolve().then(()=>m0),void 0);return t(i,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:t}=await T(()=>import("./previewSymbol2D-c5492403.js"),["assets/previewSymbol2D-c5492403.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/fontUtils-95b845d3.js","assets/screenUtils-7afeb41c.js","assets/utils-e0744d8b.js","assets/preload-helper-f8378b50.js","assets/symbols-946d4e11.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/CIMSymbol-0fa077f5.js","assets/enumeration-49e09bda.js","assets/cast-73cfc253.js","assets/Extent-fd3ac910.js","assets/fieldUtils-66be74eb.js","assets/geometry-d89d4a34.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/Clonable-5318ec31.js","assets/asyncUtils-f0fdc8c7.js","assets/BlendLayer-5cec7349.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/assets-2c955bed.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Identifiable-876da2a8.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/number-205e28e0.js","assets/jsonUtils-dd0891e0.js","assets/Cyclical-0205ad3e.js","assets/reactiveUtils-307e98f9.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/aaBoundingRect-a7e9efee.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/HandleOwner-4c8d824c.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/featureConversionUtils-00c47b2e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/context-util-09fcc133.js","assets/Util-a12911ae.js","assets/EffectView-7a98f2c6.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"]);return t(i,e)}case"cim":{const{previewCIMSymbol:t}=await T(()=>import("./previewCIMSymbol-d69cc9ff.js"),["assets/previewCIMSymbol-d69cc9ff.js","assets/screenUtils-7afeb41c.js","assets/cimAnalyzer-fade93fe.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/fontUtils-95b845d3.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/jsonUtils-dd0891e0.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-1aab1134.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/request-7c0a9d4c.js","assets/CIMResourceManager-f2dc3d5c.js","assets/Rasterizer-c0c27c81.js","assets/_commonjsHelpers-2f3e7994.js","assets/rasterizingUtils-9666244d.js","assets/imageutils-92e8b989.js","assets/utils-e0744d8b.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/enumeration-49e09bda.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/persistableUrlUtils-26091271.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/Clonable-5318ec31.js","assets/asyncUtils-f0fdc8c7.js","assets/BlendLayer-5cec7349.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/assets-2c955bed.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Identifiable-876da2a8.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/number-205e28e0.js","assets/Cyclical-0205ad3e.js","assets/reactiveUtils-307e98f9.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/HandleOwner-4c8d824c.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/featureConversionUtils-00c47b2e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/mat3f32-6c416b1c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/context-util-09fcc133.js","assets/Util-a12911ae.js","assets/EffectView-7a98f2c6.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"]);return t(i,e)}default:return}}function Um(i){return i&&"opacity"in i?i.opacity*Um(i.parent):1}async function I0(i,e){if(!i)return;const t=i.sourceLayer,s=(C(e)&&e.useSourceLayer?t:i.layer)??t,n=Um(s);if(C(i.symbol)&&(!C(e)||e.ignoreGraphicSymbol!==!0)){const v=i.symbol.type==="web-style"?await yv(i.symbol,{...e,cache:C(e)?e.webStyleCache:null}):i.symbol.clone();return cl(v,null,n),v}const r=(C(e)?e.renderer:null)??(s&&"renderer"in s?s.renderer:null);let o=r&&"getSymbolAsync"in r?await r.getSymbolAsync(i,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:C(e)?e.webStyleCache:null}):o.clone(),!(r&&"visualVariables"in r&&r.visualVariables&&r.visualVariables.length))return cl(o,null,n),o;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&(O(e)||O(e.arcade))){const v={...Ne(e)};v.arcade=await Pp(),e=v}const a=await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"]),c=[],u=[],h=[],p=[];for(const v of r.visualVariables)switch(v.type){case"color":c.push(v);break;case"opacity":u.push(v);break;case"rotation":p.push(v);break;case"size":v.target||h.push(v)}const g=!!c.length&&c[c.length-1],f=g?a.getColor(g,i,e):null,y=!!u.length&&u[u.length-1];let _=y?a.getOpacity(y,i,e):null;if(n!=null&&(_=_!=null?_*n:n),cl(o,f,_),h.length){const v=a.getAllSizes(h,i,e);await vv(o,v)}for(const v of p)_v(o,a.getRotationAngle(v,i,e),v.axis);return o}let M0=class{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const s in e){const n=e[s],r=new oy(n,void 0,void 0,2,2);this._properties[s]={pool:r,acquired:[]}}this._afterDispatchHandle=ay(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const s of t.acquired)qd(s)||t.pool.release(s);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),s=this._properties[e];let n=s.pool.acquire();for(s.acquired.push(n);n===t;)s.acquired.push(n),n=s.pool.acquire();return n}_release(){for(const e in this._properties){const t=this._properties[e];let s=0;for(const n of t.acquired)qd(n)?t.acquired[s++]=n:t.pool.release(n);t.acquired.length=s}}};const S0=St("mac")?"Meta":"Ctrl",el={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let i=48;i<58;i++)el[i]=String.fromCharCode(i);for(let i=1;i<25;i++)el[111+i]=`F${i}`;for(let i=65;i<91;i++)el[i]=[String.fromCharCode(i+32),String.fromCharCode(i)];function C0(i){if(i.key!==void 0)return ni(i);const e=el[i.keyCode];return Array.isArray(e)?i.shiftKey?e[1]:e[0]:e}function x0(i){switch(i){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let E0=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const t=e.modifiers;for(const s of this.keyModifiers)if(!t.has(s))return!1;return!0}};const rh=q.getLogger("esri.views.input.InputHandler");let it=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const s of t)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?rh.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(t=>this._handleEvent(t)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,t,s){let n;typeof t=="function"?(s=t,n=[]):n=t||[];const r=typeof e=="string"?new E0(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const g=p.indexOf(h);p.splice(g,1),o(),this._manager&&this._manager.updateDependencies()}},c=new $0(r,s,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[r.eventType];return u||(u=[],this._incoming[r.eventType]=u),u.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new L0(e,{onEmit:(s,n,r,o)=>{var a;(a=this._manager)==null||a.emit(s.eventType,n,r,o)},onRemove:s=>{var n;delete this._outgoing[s.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!0)}stopCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):rh.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var s;const t=this._incoming[e.type];if(t){for(const n of t)if(n.match.matches(e)&&((s=n.callback)==null||s.call(n,e),e.shouldStopPropagation()))break}}},$0=class{constructor(e,t,s){this.match=e,this._callback=t,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},L0=class{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,s){this._removed||this._handler.onEmit(this,e,t,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},T0=class extends it{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",t=>{this._update(t.data)})}_update(e){const t=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:n}=e;t===this._value&&this._x===s&&this._y===n||(this._value=t,this._x=s,this._y=n,this._onChange(t,s,n))}},A0=class extends it{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new Fv(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},pi=class extends K{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=S0,this._latestPointerType="mouse",this._propertiesPool=new M0({latestPointerLocation:P0},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,s=As.INTERNAL){if(this._nameToGroup[e])return void q.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void q.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const n={name:e,handlers:t.map(r=>({handler:r,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let r=n.handlers.length-1;r>=0;r--){const o=n.handlers[r];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,c,u,h,p)=>{this._emitInputEvent(o.priorityIndex+1,a,c,u,p,h)},setPointerCapture:(a,c)=>{this._setPointerCapture(n,o,a,c)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(s=>{var n;s.removed=!0,(n=s.uninstallCallback)==null||n.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):q.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const n=this._handlers[s];n.priorityIndex=s,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const n=this._handlersPriority[s];n.priorityIndex=s;let r=n.handler.hasSideEffects;if(!r){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){r=!0;break}}if(r)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)x0(a)||t.add(a)}n.active=r}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,s){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(O(n)||n.x!==t||n.y!==s){const r=this._propertiesPool.get("latestPointerLocation");r.x=t,r.y=s,this._set("latestPointerLocation",r)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const r=t;this._pointerCaptures.delete(r.native.pointerId)}this._updateKeyModifiers(e,t);const s=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,n=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,s,n)}_updateKeyModifiers(e,t){if(!t)return;let s=!1;const n=()=>{if(!s){const a=new Set;this._activeKeyModifiers.forEach(c=>{a.add(c)}),this._activeKeyModifiers=a,s=!0}},r=(a,c)=>{c&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!c&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=t.key;this._keyModifiers.has(a)&&r(a,e==="key-down")}const o=t.native;r("Alt",!(!o||!o.altKey)),r("Ctrl",!(!o||!o.ctrlKey)),r("Shift",!(!o||!o.shiftKey)),r("Meta",!(!o||!o.metaKey)),r("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new T0((e,t,s)=>this._setLatestPointer(e,t,s)),this._multiTouchHandler=new A0,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],As.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,As.INTERNAL)}_setPointerCapture(e,t,s,n){const r=e.name+"-"+t.priorityIndex,o=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,o),n?(o.add(r),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):o.has(r)&&(o.delete(r),o.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,s,n){this._emitInputEvent(0,e,t,s,n)}_emitInputEvent(e,t,s,n,r,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),c=r!==void 0&&r,u={event:new k0(t,s,a,o||this._activeKeyModifiers,c),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new ou,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,s;const e=za(this._currentPropagation);for(;e.events.length>0;){const{event:n,priorityIndex:r}=e.events.pop(),o=n.data&&n.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((s=(t=e.currentHandler).eventCallback)==null||s.call(t,n)),n.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new ou;t.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)t.push(s.events.pop());s.events=t,s.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const n of t.handler.incomingEventMatches){if(s.eventType!==n.eventType)continue;const r=s.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(r.length===s.keyModifiers.length!=(r.length===n.keyModifiers.length))return s.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const s of e){let n=0;for(;n<t.length&&this._compareHandlerPriority(s,t[n])>=0;)n++;t.splice(n,0,s)}return t}get debug(){const e=t=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=s};return{injectEvent:(t,s)=>{e(()=>{this._onEventReceived(t,s)})},disablePointerCapture:e}}};l([d({readOnly:!0})],pi.prototype,"hasPendingInputs",null),l([d({constructOnly:!0})],pi.prototype,"eventSource",void 0),l([d({constructOnly:!0})],pi.prototype,"recognizers",void 0),l([d()],pi.prototype,"_latestPointerType",void 0),l([d()],pi.prototype,"latestPointerType",null),l([d()],pi.prototype,"multiTouchActive",null),l([d({readOnly:!0})],pi.prototype,"latestPointerLocation",void 0),pi=l([$("esri.views.input.InputManager")],pi);let k0=class{constructor(e,t,s,n,r){this.type=e,this.data=t,this.timestamp=s,this.modifiers=n,this.cancelable=r,this._propagationState=Ss.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Ss.STOPPED}shouldStopPropagation(){return(this._propagationState&Ss.STOPPED)!=0}async(e){this._propagationState|=Ss.PAUSED;const t=(s,n)=>{this._propagationState&=~Ss.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),n)throw s;return s};return(typeof e=="function"?e():e).then(s=>t(s,!1),s=>t(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&Ss.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Ss;(function(i){i[i.NONE=0]="NONE",i[i.STOPPED=1]="STOPPED",i[i.PAUSED=2]="PAUSED"})(Ss||(Ss={}));const As={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let R0=class{};const P0=R0;function wc(i){return i&&typeof i.highlight=="function"}const bd=i=>{let e=class extends i{constructor(...t){super(...t),this.goToOverride=null,this.view=null}callGoTo(t){const{view:s}=this;return Ba(s),this.goToOverride?this.goToOverride(s,t):s.goTo(t.target,t.options)}};return l([d()],e.prototype,"goToOverride",void 0),l([d()],e.prototype,"view",void 0),e=l([$("esri.widgets.support.GoTo")],e),e},Xr=ee.ofType({key:"type",defaultKeyValue:"button",base:Kc,typeMap:{button:fr,toggle:Dp}}),F0=()=>[an.clone()],O0=()=>[qn.clone(),Un.clone()];let ie=class extends bd($m){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Ke,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Xr,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Si({symbol:new Ua({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([I(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),I(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),I(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),I(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),I(()=>this.location,e=>this._locationChange(e)),I(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),I(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),I(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),I(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>Mb({event:e,view:this.view})),Ut(()=>!this.waitingForResult,()=>this._waitingForResultChange(),ao),I(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),I(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Ut(()=>!this.visible,()=>this.browseClusterEnabled=!1),I(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Xr;e.removeAll();const{actions:t,defaultActions:s,defaultPopupTemplateEnabled:n,includeDefaultActions:r,selectedFeature:o}=this,a=r?s.concat(t):t,c=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(n)||o.popupTemplate),u=c&&c.actions,h=c&&c.overwriteActions?u:u?u.concat(a):a;return h&&h.filter(Boolean).forEach(p=>e.add(p)),e}get defaultActions(){const e=this._get("defaultActions")||new Xr;return e.removeAll(),e.addMany(tn(this.selectedFeature)?O0():F0()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:s,promiseCount:n,selectedFeatureIndex:r}=this,o=n&&t.length;o&&s&&r===-1?this.selectedFeatureIndex=0:o&&r!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){var n,r,o;let t=e;const s=(r=(n=this.view)==null?void 0:n.spatialReference)==null?void 0:r.isWebMercator;e&&((o=e==null?void 0:e.spatialReference)!=null&&o.isWGS84)&&s&&(t=Gc(e)),this._set("location",t)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const s=r=>{this._pendingPromises.has(t)&&this._updateFeatures(r),this._updatePendingPromises(t)},n=()=>this._updatePendingPromises(t);t.then(s,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=Tm(this);return t&&e?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new L("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:s}=this;if(!s||!e)throw new L("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:s});return s.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:s}=t;delete t.fetchFeatures,s&&this._setFetchFeaturesPromises(t.location);const n=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const r of n)delete t[r];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Lb(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?tn(t)?(await Eb(this),await $b(this)):q.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):q.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(an.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(tn(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:s}=this;s&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:s,featuresPerPage:n,featureViewModels:r}=this;if(s===null)return;const o=((s-1)*n+t)%t,a=o+n;r.slice(o,a).forEach((c,u)=>{c&&!c.graphic&&(c.graphic=e[o+u])})}async _selectedFeatureChange(e){const{location:t,updateLocationEnabled:s,view:n}=this;if(e&&n){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),tn(e)?void 0:(e.symbol=await I0(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));!s&&t||!e.geometry?s&&!e.geometry&&this.centerAtLocation().then(()=>{var o;const r=(o=n.center)==null?void 0:o.clone();r&&(this.location=r)}):this.location=Ne(Am(e.geometry))}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:s,promisesPerLayerView:n}=t,r=Promise.resolve(s),o=n.map(a=>a.promise);this.promises=[r,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:s}=this;if(tn(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const n=s.slice(0),r=[];t.forEach((o,a)=>{var u,h;if(!o)return;let c=null;if(n.some((p,g)=>(p&&p.graphic===o&&(c=p,n.splice(g,1)),!!c)),c)r[a]=c;else{const p=new gd({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(u=this.view)==null?void 0:u.spatialReference,graphic:o===e?o:null,map:(h=this.view)==null?void 0:h.map,view:this.view});r[a]=p}}),n.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",r)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:s}=this;if(t.remove(e),s&&this.view){const n=this.view.on("click",r=>{r.pointerType==="mouse"&&r.button!==0||this._fetchFeaturesAndOpen(r)},As.WIDGET);t.add(n,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const s=new AbortController,{signal:n}=s;this._fetchFeaturesController=s,this.notifyChange("waitingForResult");const r=this.fetchFeatures(e,{signal:n,event:t});return r.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),r}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:s}=e,{view:n}=this;this._fetchFeaturesWithController(t,e).then(r=>{var h;const{clientOnlyGraphics:o,promisesPerLayerView:a,location:c}=r,u=[Promise.resolve(o),...a.map(p=>p.promise)];return(h=n==null?void 0:n.popup)==null||h.open({location:c||s,promises:u}),r})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:s}=e;return s&&"layer"in s&&s.layer?s.layer:(s==null?void 0:s.type)==="map-notes"||(s==null?void 0:s.type)==="subtype-group"?s:t}_getHighlightTarget(e,t){const s=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||Tb:null,n=e.attributes;return n&&s&&n[s]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:s,activeFeature:n,visible:r}=this;if(!(n&&s&&t&&r))return;const o=this._getHighlightLayer(n);if(!(o&&o instanceof ru))return;const a=this._getLayerView(s,o);this._highlightActiveFeaturePromise=a;const c=await a;if(!(c&&wc(c)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;const u=c.highlight(this._getHighlightTarget(n,o));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:s,view:n,visible:r}=this;if(!(t&&n&&s&&r))return;const o=this._getHighlightLayer(t);if(!(o&&o instanceof ru))return;const a=this._getLayerView(n,o);this._highlightSelectedFeaturePromise=a;const c=await a;if(!(c&&wc(c)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=c.highlight(this._getHighlightTarget(t,o));this._handles.add(u,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const s=e.filter(n=>!t.includes(n));this.features=t.concat(s)}};l([d()],ie.prototype,"featurePage",void 0),l([d()],ie.prototype,"isLoadingFeature",null),l([d({type:Xr})],ie.prototype,"actions",void 0),l([d({readOnly:!0})],ie.prototype,"active",null),l([d()],ie.prototype,"activeFeature",void 0),l([d({readOnly:!0})],ie.prototype,"allActions",null),l([d({type:Boolean})],ie.prototype,"defaultPopupTemplateEnabled",void 0),l([d()],ie.prototype,"autoCloseEnabled",void 0),l([d()],ie.prototype,"autoOpenEnabled",void 0),l([d()],ie.prototype,"browseClusterEnabled",void 0),l([d()],ie.prototype,"content",void 0),l([d({type:Xr,readOnly:!0})],ie.prototype,"defaultActions",null),l([d({readOnly:!0})],ie.prototype,"featureCount",null),l([d()],ie.prototype,"features",null),l([d()],ie.prototype,"featuresPerPage",void 0),l([d()],ie.prototype,"featureViewModelAbilities",void 0),l([d({readOnly:!0})],ie.prototype,"featureViewModels",void 0),l([d()],ie.prototype,"highlightEnabled",void 0),l([d()],ie.prototype,"includeDefaultActions",void 0),l([d({type:de})],ie.prototype,"location",null),l([d({readOnly:!0})],ie.prototype,"pendingPromisesCount",null),l([d({readOnly:!0})],ie.prototype,"selectedClusterBoundaryFeature",void 0),l([d({readOnly:!0})],ie.prototype,"waitingForResult",null),l([d({readOnly:!0})],ie.prototype,"promiseCount",null),l([d()],ie.prototype,"promises",null),l([d({value:null,readOnly:!0})],ie.prototype,"selectedFeature",null),l([d({value:-1})],ie.prototype,"selectedFeatureIndex",null),l([d({readOnly:!0})],ie.prototype,"selectedFeatureViewModel",null),l([d({readOnly:!0})],ie.prototype,"state",null),l([d()],ie.prototype,"title",void 0),l([d()],ie.prototype,"updateLocationEnabled",void 0),l([d()],ie.prototype,"view",void 0),l([d()],ie.prototype,"visible",void 0),l([d()],ie.prototype,"zoomFactor",void 0),l([d()],ie.prototype,"zoomToLocation",void 0),l([d()],ie.prototype,"centerAtLocation",null),ie=l([$("esri.widgets.Popup.PopupViewModel")],ie);const jm=ie,oh="selected-index",D0=0,ah="popup-spinner",lh={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},ch="esri-popup";function $i(i,e){return e===void 0?`${ch}__${i}`:`${ch}__${i}-${e}`}const dh={closeButton:!0,featureNavigation:!0};let N=class extends xm(Me){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Ke,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([s])=>{s!=null&&s.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Xn(()=>this._displaySpinner(),D0),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new ee,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new jm,this.visibleElements={...dh},this._handleOpenRelatedFeature=s=>{this._openRelatedFeature(s)},this._addSelectedFeatureIndexHandle(),this.addHandles([I(()=>{var s;return(s=this.viewModel)==null?void 0:s.screenLocation},()=>this._positionContainer()),I(()=>{var s;return[(s=this.viewModel)==null?void 0:s.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.screenLocation},(s,n)=>{!!s!=!!n&&this.reposition()}),I(()=>{var s,n,r,o,a,c;return[(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.padding,(o=(r=this.viewModel)==null?void 0:r.view)==null?void 0:o.size,(a=this.viewModel)==null?void 0:a.active,(c=this.viewModel)==null?void 0:c.location,this.alignment]},()=>this.reposition()),I(()=>this.spinnerEnabled,s=>this._spinnerEnabledChange(s)),I(()=>{var s,n;return(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.size},(s,n)=>this._updateDockEnabledForViewSize(s,n)),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.view},(s,n)=>this._viewChange(s,n)),I(()=>{var s,n;return(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.ready},(s,n)=>this._viewReadyChange(s??!1,n??!1)),I(()=>{var s,n;return[(s=this.viewModel)==null?void 0:s.waitingForResult,(n=this.viewModel)==null?void 0:n.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),I(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),I(()=>{var s,n,r,o;return[(n=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:n.title,(o=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:o.state]},()=>this._setTitleFromFeatureWidget()),I(()=>{var s,n,r,o;return[(n=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:n.content,(o=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:o.state]},()=>this._setContentFromFeatureWidget()),Ut(()=>!this.collapsed,()=>{var s,n;((n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),We(()=>{var s;return(s=this.viewModel)==null?void 0:s.allActions},"change",()=>this._watchActions()),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.allActions},()=>this._watchActions(),B),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.featureViewModels},()=>this._featureMenuViewportScrollTop()),We(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),I(()=>{var s,n,r,o;return[(n=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:n.state,(o=(r=this._activeFlowItemWidget)==null?void 0:r.viewModel)==null?void 0:o.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([T(()=>import("./calcite-flow-e7eb1209.js"),["assets/calcite-flow-e7eb1209.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js"]),T(()=>import("./calcite-flow-item-c076728a.js"),["assets/calcite-flow-item-c076728a.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/interactive-1de2e238.js","assets/loadable-6afd516d.js","assets/t9n-6475eb95.js","assets/observers-ec23deda.js","assets/guid-51402ee7.js","assets/action-29125fbf.js","assets/icon-e372469c.js","assets/loader-cc767927.js","assets/tooltip-f4ab6b43.js","assets/debounce-d5abe404.js","assets/scrim-cf105b6c.js"]),T(()=>import("./calcite-action-121d7aad.js"),["assets/calcite-action-121d7aad.js","assets/action-29125fbf.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/guid-51402ee7.js","assets/interactive-1de2e238.js","assets/loadable-6afd516d.js","assets/t9n-6475eb95.js","assets/observers-ec23deda.js","assets/icon-e372469c.js","assets/loader-cc767927.js"]),T(()=>import("./calcite-tooltip-b8e8a825.js"),["assets/calcite-tooltip-b8e8a825.js","assets/tooltip-f4ab6b43.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/debounce-d5abe404.js","assets/guid-51402ee7.js"]),T(()=>import("./calcite-icon-ea91723d.js"),["assets/calcite-icon-ea91723d.js","assets/icon-e372469c.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js"])])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t!=null&&t.content);const s=e.viewModel;if(s!=null&&s.waitingForContent||(s==null?void 0:s.state)==="error")return!0;const n=s==null?void 0:s.content;return Array.isArray(n)?!!n.length:!!n}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||lh}set dockOptions(e){var c,u;const t={...lh},s=(u=(c=this.viewModel)==null?void 0:c.view)==null?void 0:u.breakpoints,n={};s&&(n.width=s.xsmall,n.height=s.xsmall);const r={...t,...e},o={...t.breakpoint,...n},{breakpoint:a}=r;typeof a=="object"?r.breakpoint={...o,...a}:a&&(r.breakpoint=o),this._set("dockOptions",r),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:s,_flowItems:n}=this,{selectedFeatureViewModel:r}=this.viewModel,o={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=o):this._feature=new _b({flowItems:n,headingLevel:s+1,viewModel:r,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...dh,...e}}blur(){const{active:e}=this.viewModel;e||q.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||q.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var r,o;this._handles.remove(oh);const t=!!e&&!!e.featureMenuOpen,s=!!e&&!!e.actionsMenuOpen,n={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:s,featureMenuOpen:t};((o=(r=this.viewModel)==null?void 0:r.view)==null?void 0:o.widthBreakpoint)==="xsmall"&&(n.collapsed=!0),this.set(n),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var _,v,w,b;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:s,dividedActions:n,currentAlignment:r,currentDockPosition:o}=this,{active:a}=this.viewModel,{menuActions:c}=n,u=a&&c.length>1&&e,h=a&&t,p=a&&!t,g=(v=(_=this.selectedFeature)==null?void 0:_.layer)==null?void 0:v.title,f=(b=(w=this.selectedFeature)==null?void 0:w.layer)==null?void 0:b.id,y={[E.alignTopCenter]:r==="top-center",[E.alignBottomCenter]:r==="bottom-center",[E.alignTopLeft]:r==="top-left",[E.alignBottomLeft]:r==="bottom-left",[E.alignTopRight]:r==="top-right",[E.alignBottomRight]:r==="bottom-right",[E.isDocked]:h,[E.shadow]:p,[E.isDockedTopLeft]:o==="top-left",[E.isDockedTopCenter]:o==="top-center",[E.isDockedTopRight]:o==="top-right",[E.isDockedBottomLeft]:o==="bottom-left",[E.isDockedBottomCenter]:o==="bottom-center",[E.isDockedBottomRight]:o==="bottom-right",[E.isFeatureMenuOpen]:s,[E.isActionsMenuOpen]:u};return m("div",{class:this.classes(E.base,y),role:"presentation","data-layer-title":g,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},a?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return m("span",{"aria-hidden":"true",class:this.classes(E.icon,E.iconLoading,E.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?m("div",{key:$i("loading-container"),role:"presentation",class:E.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=qt(this.container),t={[E.iconRightTriangleArrow]:e,[E.paginationPreviousIconRTL]:e,[E.iconLeftTriangleArrow]:!e,[E.paginationPreviousIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(E.icon,t)})}renderPreviousButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(E.button,E.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=qt(this.container),t={[E.iconLeftTriangleArrow]:e,[E.paginationNextIconRTL]:e,[E.iconRightTriangleArrow]:!e,[E.paginationNextIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(E.icon,t)})}renderNextButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(E.button,E.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:s}=this,{featureCount:n,selectedFeatureIndex:r}=this.viewModel;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(E.button,E.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":s.menu,title:s.menu},this._getPageText(n,r))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),s={[E.iconUndock]:e,[E.iconDock]:!e,[E.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[E.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[E.iconDockToTop]:!e&&t==="top-center",[E.iconDockToBottom]:!e&&t==="bottom-center"};return m("span",{"aria-hidden":"true",class:this.classes(s,E.icon)})}renderDockButton(){var r,o,a;const{dockEnabled:e,messages:t}=this,s=(o=(r=this.viewModel)==null?void 0:r.view)==null?void 0:o.widthBreakpoint,n=e?t.undock:t.dock;return s!=="xsmall"&&((a=this.dockOptions)!=null&&a.buttonEnabled)?m("div",{role:"button","aria-label":n,title:n,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(E.button,E.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:s,contentCollapsed:n,messagesCommon:r}=this,o={[E.headerContainerButton]:s},a=m(Ls,{level:this.headingLevel,class:E.headerTitle,innerHTML:e??""}),c=s?m("button",{key:`${e}--collapsible`,id:t,title:n?r.expand:r.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(E.headerContainer,o),"aria-expanded":n?"false":"true",onclick:this._toggleCollapsed,type:"button"},a,m("calcite-icon",{class:E.collapseIcon,key:"collapse-icon",icon:n?"chevron-down":"chevron-up",scale:"m"})):m("div",{key:e??"title",id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(E.headerContainer,o)},a);return e?c:null}renderCloseIcon(){return m("span",{"aria-hidden":"true",class:this.classes(E.icon,E.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?m("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:E.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return m("header",{class:E.header},this.renderTitle(),m("div",{class:E.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:s,_flowItems:n}=this,{content:r}=this.viewModel,o=n.toArray(),a={[E.contentHasFlows]:!!o.length};return t&&!s?m("div",{key:r??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(E.content,a)},m("calcite-flow",{bind:this},m("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Es,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),o.map(c=>this.renderFlowItem(c))),o.map(c=>this.renderFlowItemTooltips(c))):null}renderFlowItem(e){const{messages:t}=this,s=po(),n="graphic"in e&&!e.isTable;return m("calcite-flow-item",{bind:this,class:this.classes({[E.calciteThemeDark]:!s,[E.calciteThemeLight]:s}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},m("calcite-action",{class:E.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:r=>this._storeExitRelatedRecordsAction(e,r),onclick:this._destroyFlowItemWidgets}),n?m("calcite-action",{class:E.actionSelectFeature,icon:"zoom-to-object",label:t==null?void 0:t.selectFeature,text:t==null?void 0:t.selectFeature,slot:"header-actions-end",bind:this,afterCreate:r=>this._storeFeatureSelectionAction(e,r),onclick:()=>this._handleOpenRelatedFeature(e)}):null,m("div",{class:this.classes(E.contentFlowItem,{[E.calciteThemeDark]:s,[E.calciteThemeLight]:!s})},e.render()))}renderFlowItemTooltips(e){const{messages:t,_exitRelatedRecordsActions:s,_featureSelectionActions:n}=this,r=po(),o=n.get(e);return[m("calcite-tooltip",{class:this.classes({[E.calciteThemeDark]:!r,[E.calciteThemeLight]:r}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:s.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords),o?m("calcite-tooltip",{class:this.classes({[E.calciteThemeDark]:!r,[E.calciteThemeLight]:r}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.selectFeature,overlayPositioning:"fixed",referenceElement:o,placement:"top"},t==null?void 0:t.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:s,dividedActions:n,messagesCommon:r}=this,o=s?r.close:r.open,{menuActions:a}=n;return a.length?m("div",{key:$i("actions-menu-button"),class:this.classes(E.button,E.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":s?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},m("span",{"aria-hidden":"true",class:E.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:s,dividedActions:n}=this,{menuActions:r}=n;return r.length&&s?m("ul",{id:e,role:"menu","aria-labelledby":t,key:$i("actions"),class:E.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},r.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(t=>this.renderAction({action:t,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,s=!!e.length,n=!!t.length;return s||n?m("div",{key:"inline-actions-container","data-inline-actions":s.toString(),"data-menu-actions":n.toString(),class:E.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?m("section",{key:$i("navigation"),class:this.classes(E.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:s,menuActions:n}=t,r=!!s.length,o=!!n.length,a={[E.footerHasPagination]:e,[E.footerHasActions]:r,[E.footerHasActionsMenu]:o};return e||r?m("div",{key:$i("feature-buttons"),class:this.classes(E.footer,a)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:s}=this.viewModel,n=Mt(e.selectedFeatures,{total:t.length});return m("section",{key:$i("menu"),class:E.featureMenu},m("strong",{class:E.featureMenuHeader},n),m("nav",{bind:this,class:E.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Es},this.renderFeatureMenu(),m("div",{class:E.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),s?m("div",{class:E.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:m("div",{key:$i("pointer"),class:E.pointer,role:"presentation"},m("div",{class:this.classes(E.pointerDirection,E.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:s,titleId:n,contentId:r,collapsible:o,hasContent:a,contentCollapsed:c,visibleElements:u}=this,{title:h}=this.viewModel,p=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||s==="top-left"||s==="top-center"||s==="top-right",g=t==="top-left"||t==="top-center"||t==="top-right"||s==="bottom-left"||s==="bottom-center"||s==="bottom-right",f={[E.shadow]:e,[E.isCollapsible]:o,[E.isCollapsed]:c};return m("div",{class:this.classes(E.main,E.widget,f),tabIndex:u.closeButton?void 0:-1,role:"dialog","aria-labelledby":h?n:"","aria-describedby":a&&!c?r:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),g?this.renderFooter():null,g?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?m("div",{class:Ee.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return m("span",{key:"text",class:E.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),s=this._getActionImage(e),n={[E.iconLoading]:e.active,[E.rotating]:e.active,[E.icon]:!!t,[E.actionImage]:!e.active&&!!s};return t&&(n[t]=!e.active),m("span",{key:"icon","aria-hidden":"true",class:this.classes(E.icon,n),styles:this._getIconStyles(s)})}renderAction(e){const{action:t,type:s}=e,n=this._getActionTitle(t),r={[E.action]:t.type!=="toggle",[E.actionToggle]:t.type==="toggle",[E.actionToggleOn]:t.type==="toggle"&&t.value,[E.buttonDisabled]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(n)],a=s==="menu-item"?m("li",{key:t.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(E.button,r),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):m("div",{key:t.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(E.button,r),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?a:null}renderFeatureMenuItem(e,t){const{messages:s,messagesCommon:n}=this,{selectedFeatureIndex:r,selectedFeatureViewModel:o}=this.viewModel,a=e===o,c={[E.featureMenuSelected]:a},u=a?m("span",{key:$i(`feature-menu-selected-feature-${r}`),title:s.selectedFeature,"aria-label":s.selectedFeature,class:E.iconCheckMark}):null,h=m("span",{innerHTML:e.title||n.untitled});return m("li",{role:"menuitem",tabIndex:-1,key:$i(`feature-menu-feature-${r}`),class:this.classes(c,E.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},m("span",{class:E.featureMenuTitle},h,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?m("ol",{class:E.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(s=>!!s.graphic).map((s,n)=>this.renderFeatureMenuItem(s,n))):null}_storeFeatureSelectionAction(e,t){this._featureSelectionActions.set(e,t),this.scheduleRender()}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const t=e.graphic,s=t==null?void 0:t.geometry;if(O(s)||O(t))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:s});const n=Am(s);this.open({features:[t],location:C(n)?n:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){const{messages:t,selectedFeature:s,messagesCommon:n}=this,{id:r}=e,o=s==null?void 0:s.attributes,a=e.title??"",c=r==="zoom-to-feature"?Mt(a,{messages:t}):r==="remove-selected-feature"?Mt(a,{messages:n}):r==="zoom-to-clustered-features"||r==="browse-clustered-features"?Mt(a,{messages:t}):e.title;return c&&o?Mt(c,o):c??""}_getActionClass(e){const{selectedFeature:t}=this,s=t==null?void 0:t.attributes,{className:n,image:r}=e,o=r||n?n:E.iconDefaultAction;return o&&s?Mt(o,s):o??""}_getActionImage(e){const{selectedFeature:t}=this,s=t==null?void 0:t.attributes,{image:n}=e;return n&&s?Mt(n,s):n??""}_createFeatureUpdatedAnimation(){return Jy("enter",E.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const s=Math.round(e);return Math.max(t?s-1:s,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(s=>{this._handles.add(I(()=>[s.uid,s.active,s.className,s.disabled,s.id,s.title,s.image,s.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(o=>o.visible),s=this._getInlineActionCount(),n=s===null,r=s===0;return{inlineActions:n?t.slice(0):r?new ee:t.slice(0,s),menuActions:n?new ee:r?t.slice(0):t.slice(s)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var s,n;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((s=e.viewModel)==null?void 0:s.state)==="error"?t.errorMessage:((n=e.viewModel)==null?void 0:n.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){ni(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){ni(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,s=e.currentTarget["data-feature-index"];t.activeFeature=t.features[s]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=ni(e),{_featureMenuNode:s}=this,n=e.currentTarget["data-feature-index"];if(!s)return;const r=s.querySelectorAll("li"),o=r.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),r[r.length-1].focus()):(e.stopPropagation(),r[0].focus()):(e.stopPropagation(),r[(n+1+o)%o].focus()):(e.stopPropagation(),r[(n-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const t=ni(e),{_actionsMenuNode:s}=this,n=e.currentTarget.dataset.actionUid,{menuActions:r}=this.dividedActions,o=r.findIndex(u=>u.uid===n);if(!s)return;const a=s.querySelectorAll("li"),c=a.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),a[a.length-1].focus()):(e.stopPropagation(),a[0].focus()):(e.stopPropagation(),a[(o+1+c)%c].focus()):(e.stopPropagation(),a[(o-1+c)%c].focus())}_handleMainKeyup(e){const t=ni(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:s}=this.viewModel;s&&t?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e!=null&&e.shouldFocus&&(await cn(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=I(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,s)=>this._selectedFeatureIndexUpdated(t,s));this._handles.add(e,oh)}_selectedFeatureIndexUpdated(e,t){const{featureCount:s}=this;s&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:s,screenLocation:n,side:r,view:o}=e;if(isNaN(s)||isNaN(t)||!o||!n)return!1;const a=o.padding;return r==="right"&&n.x+s/2>o.width-a.right||r==="left"&&n.x-s/2<a.left||r==="top"&&n.y-t<a.top||r==="bottom"&&n.y+t>o.height-a.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:s,_mainContainerNode:n,viewModel:r}=this,{screenLocation:o,view:a}=r;if(O(o)||!a||!s)return"top-center";if(!this._isScreenLocationWithinView(o,a))return this._get("currentAlignment")||"top-center";function c(S){return parseInt(S.replace(/[^-\d\.]/g,""),10)}const u=n?window.getComputedStyle(n,null):null,h=u?c(u.getPropertyValue("max-height")):0,p=u?c(u.getPropertyValue("height")):0,{height:g,width:f}=s.getBoundingClientRect(),y=f+t,_=Math.max(g,h,p)+t,v=this._isOutsideView({popupHeight:_,popupWidth:y,screenLocation:o,side:"right",view:a}),w=this._isOutsideView({popupHeight:_,popupWidth:y,screenLocation:o,side:"left",view:a}),b=this._isOutsideView({popupHeight:_,popupWidth:y,screenLocation:o,side:"top",view:a}),M=this._isOutsideView({popupHeight:_,popupWidth:y,screenLocation:o,side:"bottom",view:a});return w?b?"bottom-right":"top-right":v?b?"bottom-left":"top-left":b?M?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return qt(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var a;if(e!=="auto")return e;const t=(a=this.viewModel)==null?void 0:a.view,s=qt(this.container)?"top-left":"top-right";if(!t)return s;const n=t.padding||{left:0,right:0,top:0,bottom:0},r=t.width-n.left-n.right,{breakpoints:o}=t;return o&&r<=o.xsmall?"bottom-center":s}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:t}=this.viewModel,{width:s}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(t,s);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:s}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+s:e}_calculateAlignmentPosition(e,t,s,n){const{currentAlignment:r,_pointerOffsetInPx:o}=this;if(!s)return;const{padding:a}=s,c=n/2,u=s.height-t,h=s.width-e;return r==="bottom-center"?{top:t+o-a.top,left:e-c-a.left}:r==="top-left"?{bottom:u+o-a.bottom,right:h+o-a.right}:r==="bottom-left"?{top:t+o-a.top,right:h+o-a.right}:r==="top-right"?{bottom:u+o-a.bottom,left:e+o-a.left}:r==="bottom-right"?{top:t+o-a.top,left:e+o-a.left}:r==="top-center"?{bottom:u+o-a.bottom,left:e-c-a.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:s,view:n}=this;if(!n)return;if(s)return{left:"",top:"",right:"",bottom:""};if(O(e)||!t)return;const r=this._calculateFullWidth(t),o=this._calculateAlignmentPosition(e.x,e.y,n,r);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const s=this.get("viewModel.view");this._wireUpView(s)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,s){const[n,r]=e,[o,a]=t,{width:c=0,height:u=0}=s??{};return n<=c&&o>c||n>c&&o<=c||r<=u&&a>u||r>u&&a<=u}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const s=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},n=s.left+s.right,r=s.top+s.bottom,o=[],a=[];o[0]=e[0]-n,o[1]=e[1]-r,a[0]=t[0]-n,a[1]=t[1]-r;const{dockOptions:c}=this,u=c.breakpoint;this._dockingThresholdCrossed(o,a,u)&&this._setDockEnabledForViewSize(c),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const s=t.active&&!e;t.screenLocationEnabled=s}_shouldDockAtCurrentViewSize(e){var c,u;const t=e.breakpoint,s=(u=(c=this.viewModel)==null?void 0:c.view)==null?void 0:u.ui;if(!s)return!1;const{width:n,height:r}=s;if(isNaN(n)||isNaN(r)||!t)return!1;const o=t.hasOwnProperty("width")&&n<=(t.width??0),a=t.hasOwnProperty("height")&&r<=(t.height??0);return o||a}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Mt(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(e,ah),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new bb({view:e}),e.ui.add(this._spinner,{key:ah,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:s}=this.viewModel,n=s.findIndex(o=>o.uid===t),r=s.getItemAt(n);r&&r.type==="toggle"&&(r.value=!r.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(n)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};l([d({readOnly:!0})],N.prototype,"actionsMenuId",null),l([d({readOnly:!0})],N.prototype,"actionsMenuButtonId",null),l([d({readOnly:!0})],N.prototype,"featureMenuId",null),l([d({readOnly:!0})],N.prototype,"titleId",null),l([d({readOnly:!0})],N.prototype,"contentId",null),l([d({readOnly:!0})],N.prototype,"hasContent",null),l([d({readOnly:!0})],N.prototype,"featureNavigationVisible",null),l([d({readOnly:!0})],N.prototype,"collapsible",null),l([d({readOnly:!0})],N.prototype,"featureMenuVisible",null),l([d({readOnly:!0})],N.prototype,"contentCollapsed",null),l([d({readOnly:!0})],N.prototype,"dividedActions",null),l([d({readOnly:!0,dependsOn:["_flowItems.length"]})],N.prototype,"_activeFlowItemWidget",null),l([d()],N.prototype,"actions",null),l([d()],N.prototype,"actionsMenuOpen",null),l([d()],N.prototype,"alignment",void 0),l([d()],N.prototype,"autoCloseEnabled",null),l([d()],N.prototype,"autoOpenEnabled",null),l([d()],N.prototype,"defaultPopupTemplateEnabled",null),l([d()],N.prototype,"content",null),l([d()],N.prototype,"collapsed",void 0),l([d()],N.prototype,"collapseEnabled",void 0),l([d({readOnly:!0})],N.prototype,"currentAlignment",null),l([d({readOnly:!0})],N.prototype,"currentDockPosition",null),l([d()],N.prototype,"dockOptions",null),l([d()],N.prototype,"dockEnabled",void 0),l([d({readOnly:!0})],N.prototype,"featureCount",null),l([d()],N.prototype,"featureMenuOpen",void 0),l([d()],N.prototype,"features",null),l([d()],N.prototype,"goToOverride",null),l([d()],N.prototype,"headingLevel",void 0),l([d()],N.prototype,"highlightEnabled",null),l([d()],N.prototype,"location",null),l([d()],N.prototype,"label",null),l([d()],N.prototype,"maxInlineActions",void 0),l([d(),ge("esri/widgets/Popup/t9n/Popup")],N.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],N.prototype,"messagesCommon",void 0),l([d()],N.prototype,"promises",null),l([d({readOnly:!0})],N.prototype,"selectedFeature",null),l([d()],N.prototype,"selectedFeatureIndex",null),l([d({readOnly:!0})],N.prototype,"selectedFeatureWidget",null),l([d()],N.prototype,"spinnerEnabled",void 0),l([d()],N.prototype,"title",null),l([d()],N.prototype,"updateLocationEnabled",null),l([d()],N.prototype,"view",null),l([d({type:jm}),ud(["triggerAction","trigger-action"])],N.prototype,"viewModel",void 0),l([d()],N.prototype,"visible",null),l([d()],N.prototype,"visibleElements",void 0),l([rt("visibleElements")],N.prototype,"castVisibleElements",null),l([ke()],N.prototype,"_close",null),l([ke()],N.prototype,"_toggleDockEnabled",null),l([ke()],N.prototype,"_toggleFeatureMenu",null),l([ke()],N.prototype,"_toggleActionsMenu",null),l([ke()],N.prototype,"_triggerAction",null),l([ke()],N.prototype,"_selectFeature",null),l([ke()],N.prototype,"_next",null),l([ke()],N.prototype,"_previous",null),N=l([$("esri.widgets.Popup")],N);const uh=N,Tl=[0,0];function V0(i){const e=(i.ownerDocument||window.document).defaultView,t=i.getBoundingClientRect();return Tl[0]=t.left+((e==null?void 0:e.pageXOffset)??0),Tl[1]=t.top+((e==null?void 0:e.pageYOffset)??0),Tl}function hh(i){i&&(Tp(i),i.parentNode&&i.parentNode.removeChild(i))}function N0(i){const e=document.createElement("div");return i.appendChild(e),e}const Er=16,Ao=750,z0=512,B0=2,H0=i=>{let e=class extends i{constructor(...t){var s;super(...t),this._freqInfo={freq:Er,time:Ao},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,t.length!==0&&((s=t[0])==null?void 0:s.popup)!==void 0||(this.popup=new uh({view:this})),this.handles.add([I(()=>this.cursor,n=>{const{surface:r}=this;r&&r.setAttribute("data-cursor",n)}),I(()=>this.interacting,n=>{const{surface:r}=this;r&&r.setAttribute("data-interacting",n.toString())})])}initialize(){this.handles.add(I(()=>this.ui,(t,s)=>this._handleUIChange(t,s))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=nt(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(t){const s=this._get("container"),n=Lp(t);if(n||typeof t!="string"||q.getLogger(this.declaredClass).error("#container",`element with id '${t}' not found`),s===n)return;const r="dom-size";if(this.handles.remove(r),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(hh(this.root),this._set("root",null)),this.userContent&&(tu(this.userContent,s),hh(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",tu(n,o),n.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",n.insertBefore(a,n.firstChild),this._set("root",a);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,a.appendChild(c),this._set("surface",c);const u=new bu;a.appendChild(u.surface),this._set("overlay",u),I(()=>u.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=nr({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Mi(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(I(()=>this.size,h=>{const[p,g]=h,f="esri-view-surface--inset-outline";p>=document.body.clientWidth||g>=document.body.clientHeight?c.classList.add(f):c.classList.remove(f)},B),r),this._set("container",n),this._startMeasuring()}get focused(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}set popup(t){const s=this._get("popup");s&&s!==t&&s.destroy(),this._set("popup",t)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(t,s,n){const r=this.position;return t-=r?r[0]:0,s-=r?r[1]:0,n?(n[0]=t,n[1]=s):n=[t,s],n}containerToPage(t,s,n){const r=this.position;return t+=r?r[0]:0,s+=r?r[1]:0,n?(n[0]=t,n[1]=s):n=[t,s],n}_handleUIChange(t,s){s&&(this.handles.remove("ui"),s.destroy()),t&&this._wireUI(t),this._set("ui",t)}_wireUI(t){this.handles.remove("ui"),t&&(t.view=this,this.handles.add([I(()=>this.root,s=>{t.container=s?N0(s):null},B),I(()=>this.popup,(s,n)=>{const r="popup",o="manual";n&&t.remove(n,r),s&&(s.view=t.view,t.add(s,{key:r,position:o}))},B)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const t=this._freqInfo;t.freq=Er,t.time=Ao,this.handles.add([(()=>{const s=()=>{t.freq=Er,t.time=Ao};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),nr({prepare:s=>{const n=this._measure(),r=this._freqInfo;if(r.time+=s.deltaTime,n&&(r.freq=Er,this._get("resizing")||this._set("resizing",!0)),r.time<r.freq)return;r.time=0;const o=this._position();r.freq=o||n?Er:Math.min(Ao,r.freq*B0),!n&&r.freq>=z0&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const t=this.container,s=t?t.clientWidth:0,n=t?t.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const r=this.width,o=this.height;return s===r&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:o,width:s,height:n}),!0)}_position(){const t=this.container,s=this.position,n=t&&V0(t);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return l([d()],e.prototype,"container",null),l([d({readOnly:!0})],e.prototype,"focused",null),l([d({readOnly:!0})],e.prototype,"height",void 0),l([d({type:uh})],e.prototype,"popup",null),l([d({type:bu})],e.prototype,"overlay",void 0),l([d({readOnly:!0})],e.prototype,"position",void 0),l([d({readOnly:!0})],e.prototype,"resizing",void 0),l([d({readOnly:!0})],e.prototype,"root",void 0),l([d({value:null,readOnly:!0})],e.prototype,"size",null),l([d({readOnly:!0})],e.prototype,"surface",void 0),l([d({readOnly:!0})],e.prototype,"suspended",void 0),l([d()],e.prototype,"ui",void 0),l([d({readOnly:!0})],e.prototype,"userContent",void 0),l([d({readOnly:!0})],e.prototype,"width",void 0),l([d()],e.prototype,"widthBreakpoint",void 0),e=l([$("esri.views.DOMContainer")],e),e},q0=i=>{let e=class extends i{async fetchPopupFeatures(t,s){await this.when();const{location:n,queryArea:r,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(t,s),c=Promise.resolve(a),u=this._queryLayerPopupFeatures(r,o,s),h=u.map(p=>p.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:fy([c,...h]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(t,s,n){return s.map(({layerView:r,graphics:o})=>{const a={clientGraphics:o,event:C(n)?n.event:void 0,signal:C(n)?n.signal:void 0,defaultPopupTemplateEnabled:!!C(n)&&!!n.defaultPopupTemplateEnabled},c=r.fetchPopupFeatures(t,a);return{layerView:r,promise:c}})}_isValidPopupGraphic(t,s){return t&&!!t.getEffectivePopupTemplate(C(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,s){const{clientGraphics:n,queryArea:r,location:o}=await this._popupHitTestGraphics(t,s),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:c,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:c,queryArea:r,location:o}}async _popupHitTestGraphics(t,s){const n=await this.popupHitTest(t),r=n.results,o=n.mapPoint,a=r.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,s)),c=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(u=>u.graphic),queryArea:o,location:o||c}}_getFetchPopupLayerViews(){const t=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&t.push(s)}),C(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return C(t)&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,s){const n=[],r=new Map,o=s.map(a=>{const c=[];return"layer"in a?r.set(a.layer,c):r.set(a.graphics,c),{layerView:a,graphics:c}});for(const a of t){const c=r.get(a.layer)||r.get(a.sourceLayer)||null;c?c.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return e=l([$("esri.views.PopupView")],e),e};let $a=class extends zv{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{O(t.item)||t.item.parent===this.owner&&(q.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};$a=l([$("esri.support.AnalysesCollection")],$a);let us=class extends K{constructor(e){super(e),this.view=null,this.baseLayerViews=new ee,this.referenceLayerViews=new ee,this._loadingHandle=I(()=>{var t,s;return(s=(t=this.view)==null?void 0:t.map)==null?void 0:s.basemap},t=>{t&&t.load().catch(()=>{})},B)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,s;if(this.view&&this.view.suspended)return!1;const e=(s=(t=this.view)==null?void 0:t.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};l([d({constructOnly:!0})],us.prototype,"view",void 0),l([d({readOnly:!0})],us.prototype,"baseLayerViews",void 0),l([d({readOnly:!0})],us.prototype,"referenceLayerViews",void 0),l([d({readOnly:!0})],us.prototype,"suspended",null),l([d({type:Boolean,readOnly:!0})],us.prototype,"updating",null),us=l([$("esri.views.BasemapView")],us);function U0(i){return"tryRecycleWith"in i}let j0=class{constructor(e,t,s){this.layer=e,this.view=t,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=fp(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,jo(this._controller.signal,()=>{const n=new L("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!U0(this.layerView))return null;const t=this.layer.type,s=this._controller.signal;for(let n=0;n<e.length;n++){const r=e[n];if(r.type!==t)continue;const o=this.layerView.tryRecycleWith(r,{signal:s});if(o){e.splice(n,1),this.layer=r;const a=this.layerView,c=a.view;return this.promise=Promise.race([o.then(()=>(At(this._controller.signal),r.emit("layerview-destroy",{view:c,layerView:a}),c.emit("layerview-destroy",{view:c,layerView:a}),r.emit("layerview-create",{view:c,layerView:a}),c.emit("layerview-create",{view:c,layerView:a}),a)),new Promise((u,h)=>jo(this._controller.signal,()=>h(fa())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:t,view:s}=this;t.emit("layerview-destroy",{view:s,layerView:e}),s.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,r,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:s}=this;this._map=s.map;try{let a,c;if(await t.load({signal:e}),"prefetchResources"in t&&await((n=t.prefetchResources)==null?void 0:n.call(t,{signal:e})),W0(t))a=await t.createLayerView(s,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new L("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(t);At(e),a="default"in p?new p.default({layer:t,view:s}):new p({layer:t,view:s})}const u=()=>{c=Mi(c),a.destroyed||a.destroy(),a.layer=null,a.parent=null,a.view=null,this.done=!0};c=jo(e,u),At(e);try{await a.when()}catch(p){throw u(),p}if(!((o=(r=this._map)==null?void 0:r.allLayers)==null?void 0:o.includes(t)))return u(),void this._deferred.reject(new L("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=a,t.emit("layerview-create",{view:s,layerView:a}),s.emit("layerview-create",{layer:t,layerView:a}),this.done=!0,this._deferred.resolve(a)}catch(a){t.emit("layerview-create-error",{view:s,error:a}),s.emit("layerview-create-error",{layer:t,error:a}),this.done=!0,this._deferred.reject(new L("layerview:create-error","layerview creation failed",{layer:t,error:a}))}}},Gt=class extends K{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Ap,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var s;const t=(s=this.view.map)==null?void 0:s.allLayers;if(t)for(const n of t)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>(O(this._workPromise)&&(this._workPromise=fp(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(ly(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var c,u,h;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),O(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const s=new Set,n=[],r=this.view.ready,o=p=>{if(!O(p)){for(const g of p)if(g){s.add(g);const f=this._layerLayerViewInfoMap.get(g);f&&r?f.start():f||this._recyclingInfoMap.has(g)||n.push(g),"layers"in g&&g.layers&&o(g.layers)}}};for(const p of this._rootCollectionNames)o(this.get(p));for(const[p,g]of this._layerLayerViewInfoMap)if(!s.has(p)){this._layerLayerViewInfoMap.delete(g.layer);const f=g.tryRecycle(n);f?(this._recyclingInfoMap.set(g.layer,g),f.then(()=>{this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule()})):g.destroy()}for(const[p,g]of this._recyclingInfoMap)s.has(p)||(this._recyclingInfoMap.delete(g.layer),g.destroy());for(const p of n)this._createLayerView(p);this._refreshCollections();const a=[(c=t==null?void 0:t.ground)==null?void 0:c.layers,(u=t==null?void 0:t.basemap)==null?void 0:u.baseLayers,(h=t==null?void 0:t.basemap)==null?void 0:h.referenceLayers,t==null?void 0:t.layers].filter(p=>!!p);s.forEach(p=>"layers"in p&&a.push(p.layers)),this.addHandles(a.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([We(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),I(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Ms)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,C(this._workPromise)&&(this._workPromise.reject(fa()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return C(this._workPromise)||this._watchUpdatingTracking.updating||Na(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new L("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,s){if(!e||!t)return void(t&&t.removeAll());let n=0;for(const r of e){const o=this._layerLayerViewInfoMap.get(r);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=r,a.parent=s,t.getItemAt(n)!==a&&t.splice(n,0,a),r.layers&&this._populateLayerViewsOwners(r.layers,a.layerViews,a),n+=1}n<t.length&&t.splice(n,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new j0(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),s=>{s&&(lr(s)||s.name==="cancelled:layerview-create")||q.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:s}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([d()],Gt.prototype,"_workPromise",void 0),l([d({readOnly:!0})],Gt.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],Gt.prototype,"_layersToLayerViews",null),l([d({readOnly:!0})],Gt.prototype,"_rootCollectionNames",null),l([d()],Gt.prototype,"layerViewImporter",void 0),l([d()],Gt.prototype,"supportsGround",void 0),l([d({readOnly:!0})],Gt.prototype,"updating",null),l([d({readOnly:!0})],Gt.prototype,"updatingRemaining",null),l([d({constructOnly:!0})],Gt.prototype,"view",void 0),Gt=l([$("esri.views.LayerViewManager")],Gt);const G0=Gt;function W0(i){return"createLayerView"in i&&i.createLayerView!=null}let Dt=class extends K{constructor(e){super(e),this.factor=1.5,this.offset=Ct(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([d({type:Number})],Dt.prototype,"factor",void 0),l([d({nonNullable:!0})],Dt.prototype,"offset",void 0),l([d()],Dt.prototype,"position",void 0),l([d({type:Number,range:{min:0}})],Dt.prototype,"size",void 0),l([d()],Dt.prototype,"maskUrl",void 0),l([d()],Dt.prototype,"maskEnabled",void 0),l([d()],Dt.prototype,"overlayUrl",void 0),l([d()],Dt.prototype,"overlayEnabled",void 0),l([d({readOnly:!0})],Dt.prototype,"version",null),l([d({type:Boolean})],Dt.prototype,"visible",void 0),Dt=l([$("esri.views.Magnifier")],Dt);const Gm=Dt;let zr=class extends K{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(t==null?void 0:t.registerTask(Wp.TEXTURE_UNLOAD))??Ov}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,s){const n=this.makeUid(e);let r=this._textureRequests.get(n);if(!r){const o=t();r={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:s},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(n,r)}return r.referenceCount++,{uid:n,texture:r.texture,release:()=>this._release(n)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return C(t)?`${e}.${t}px`:e}};l([d()],zr.prototype,"_frameTask",void 0),l([d()],zr.prototype,"updating",null),zr=l([$("esri.views.3d.support.TextureCollection")],zr);var ph;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right"})(ph||(ph={}));const Wm=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Zm={};function Km(i){return!!Zm[i]}function Z0(i){for(const e of i)if(!Km(e))return!1;return!0}Wm.forEach(i=>{Zm[i]=!0});let K0=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:t,priority:s},n)=>{var r;return(r=this.inputManager)==null?void 0:r.installHandlers(n,[t],s)})}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>{var s;return(s=this.inputManager)==null?void 0:s.uninstallHandlers(t)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,s,n){const r=Array.isArray(e)?e:e.split(",");if(!Z0(r))return r.some(Km)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(t)?a=t:(o=t,a=[]),typeof s=="function"?o=s:n=s,n=n??As.DEFAULT;const c=this._createUniqueGroupName(),u=new Q0(this.view,r,a,o);this._handlers.set(c,{handler:u,priority:n});for(const h of r){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(c,[u],n),{remove:()=>this._removeHandler(c,r)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const s of t){const n=this._handlerCounts.get(s);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):n===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Q0=class extends it{constructor(e,t,s,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const r of t)switch(r){case"click":this.registerIncoming("click",s,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",s,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",s,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",s,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",s,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",s,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",s,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",s,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",s,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",s,o=>{n(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:s,buttons:n,x:r,y:o,native:a,eventId:c}=e.data,{cancelable:u,timestamp:h}=e;return{type:"click",pointerType:t,button:s,buttons:n,x:r,y:o,native:a,timestamp:h,screenPoint:Ct(r,o),mapPoint:this._getMapPoint(r,o),eventId:c,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:s,buttons:n,x:r,y:o,native:a,eventId:c}=e.data,{cancelable:u,timestamp:h}=e;return{type:"double-click",pointerType:t,button:s,buttons:n,x:r,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(r,o),eventId:c,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:s,buttons:n,x:r,y:o,native:a,eventId:c}=e.data,u=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-click",pointerId:u,pointerType:t,button:s,buttons:n,x:r,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(r,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:s,buttons:n,x:r,y:o,native:a,eventId:c}=e.data,u=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-double-click",pointerId:u,pointerType:t,button:s,buttons:n,x:r,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(r,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:s,buttons:n,x:r,y:o,native:a}=e.data,{cancelable:c,timestamp:u}=e;return{type:"hold",pointerType:t,button:s,buttons:n,x:r,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(r,o),cancelable:c,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap(Ct(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:s,y:n}=t.center,{action:r,pointerType:o,button:a}=t;if(r==="start"&&(this._latestDragStart=t),!this._latestDragStart)return;const c=t.pointer.native,u=t.buttons,{cancelable:h,timestamp:p}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return r==="end"&&(this._latestDragStart=void 0),{type:"drag",action:r,x:s,y:n,origin:g,pointerType:o,button:a,buttons:u,radius:t.radius,angle:qy(t.angle),native:c,timestamp:p,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:s,native:n}=e.data,{cancelable:r,timestamp:o}=e;return{type:"key-down",key:t,repeat:s,native:n,timestamp:o,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:s}=e.data,{cancelable:n,timestamp:r}=e;return{type:"key-up",key:t,native:s,timestamp:r,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:s,y:n,button:r,buttons:o,native:a,eventId:c}=e.data,u=a.pointerId,h=a.pointerType,{cancelable:p,timestamp:g}=e;return{type:t,x:s,y:n,pointerId:u,pointerType:h,button:r,buttons:o,native:a,timestamp:g,eventId:c,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:s,buttons:n,native:r,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,c=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:g,timestamp:f}=e;return{type:"pointer-drag",x:t,y:s,pointerId:c,pointerType:u,button:a,buttons:n,action:h,origin:p,native:r,timestamp:f,eventId:o,cancelable:g,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:s,timestamp:n}=e,{x:r,y:o,deltaY:a,native:c}=s;return{type:"mouse-wheel",x:r,y:o,deltaY:a,native:c,timestamp:n,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:s,device:n}=e.data,{cancelable:r,timestamp:o}=e,{buttons:a,axes:c}=s;return{type:"gamepad",device:n,timestamp:o,action:t,buttons:a,axes:c,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}};var mo,mh,gh;(function(i){i[i.USER=0]="USER",i[i.MANAGER=1]="MANAGER"})(mo||(mo={})),function(i){i[i.None=0]="None",i[i.Unfocused=1]="Unfocused",i[i.Focused=2]="Focused",i[i.Unselected=4]="Unselected",i[i.Selected=8]="Selected",i[i.All=15]="All"}(mh||(mh={})),function(i){i[i.None=0]="None",i[i.Custom1=16]="Custom1",i[i.Custom2=32]="Custom2",i[i.Custom3=64]="Custom3",i[i.Custom4=128]="Custom4",i[i.Custom5=256]="Custom5",i[i.Custom6=512]="Custom6",i[i.Custom7=1024]="Custom7",i[i.Custom8=2048]="Custom8",i[i.Custom9=4096]="Custom9",i[i.Custom10=8192]="Custom10",i[i.Custom11=16384]="Custom11",i[i.Custom12=32768]="Custom12",i[i.All=65520]="All"}(gh||(gh={}));function Y0(i){return[i.on("before-add",e=>{const t=e.item;if(t==null||i.includes(t))return q.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();t.onAdd()}),i.on("after-remove",e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()})]}function bc(i){return i.visible&&i.getEditableFlag!=null&&i.getEditableFlag(mo.USER)&&i.getEditableFlag(mo.MANAGER)}function mi(i){return Ct(i.x,i.y)}function Qm(i,e){var s;const t=(s=i instanceof HTMLElement?i:i.surface)==null?void 0:s.getBoundingClientRect();return t?Ct(e.clientX-t.left,e.clientY-t.top):Ct(0,0)}function fh(i,e){return e instanceof Event?Qm(i,e):mi(e)}function yh(i){if(i instanceof Event)return!0;if(typeof i=="object"&&"type"in i)switch(i.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let X0=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,t){const s=()=>e.stopPropagation();switch(e.type){case"pointer-move":vh(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!_h(e))break;const n=mi(e),r=this._intersect(n,e.pointerType,t.forEachTool);if(O(r))break;const o=r.manipulator,a=r.tool;!(C(o)&&C(a)&&o.interactive)||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,t),C(o)&&C(a)&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&O(t.activeTool)&&(this._revertToNullActiveTool=!0,t.setActiveTool(r.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),s());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!_h(e))break;const n=this._grabbedManipulators.get(e.pointerId),r=Fr(n,({manipulator:h})=>h),o=Fr(n,({tool:h})=>h);if(O(r)||O(o))break;const a=mi(e);a.x=dr(a.x,0,t.view.width),a.y=dr(a.y,0,t.view.height);const c=Ne(n).start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(r.dragging=!0,u?r.events.emit("drag",{action:"update",start:c,screenPoint:a}):r.events.emit("drag",{action:"start",start:c,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:r,start:c}));break;case"end":r.dragging=!1,u&&r.events.emit("drag",{action:"end",start:c,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}s();break}case"immediate-click":{const n=mi(e),r=this._intersect(n,e.pointerType,t.forEachTool);if(J0(e)||t.forEachTool(u=>{if((!C(r)||r.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let h=!1;u.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),O(r))break;const{manipulator:o,tool:a}=r;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const c=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:c,stopPropagation:s});break}case"click":{const n=mi(e),r=this._intersect(n,e.pointerType,t.forEachTool),o=C(r)?r.manipulator:null;if(O(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),s();break}case"double-click":{const n=mi(e),r=this._intersect(n,e.pointerType,t.forEachTool),o=C(r)?r.manipulator:null;if(O(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:s});break}case"immediate-double-click":{const n=mi(e),r=this._intersect(n,e.pointerType,t.forEachTool),o=C(r)?r.manipulator:null;if(O(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:s});break}}this._onFocusChange(t.forEachTool)}_ungrabManipulatorBeforeDragging(e,t,s){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:mi(t)}),this._grabbedManipulators.forEach(({manipulator:n},r)=>{n===e&&this._grabbedManipulators.delete(r)}),this._afterManipulatorUngrab(s.setActiveTool)}_handlePointerEnd(e,t){const s=Fr(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);O(s)||s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:mi(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(t.setActiveTool))}_cursorFromMap(e){let t=null;return Na(e,({manipulator:s})=>!(O(s)||!s.interactive)&&(s.grabbing&&s.grabCursor?(t=s.grabCursor,!0):!!s.cursor&&(t=s.cursor,!0))),t}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:n})=>{t.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{s.add(n)}),e(n=>{n.hasGrabbedManipulators=t.has(n),n.hasHoveredManipulators=s.has(n);const r=this._grabbedManipulators.values(),o=cy(r,({tool:a})=>a===n);n.firstGrabbedManipulator=C(o)?o.manipulator:null})}clearPointers(e,{forEachTool:t,setActiveTool:s},n=!0,r){const o=(a,c)=>a===e&&(O(r)||r===c);this._grabbedManipulators.forEach(({tool:a,manipulator:c,pointerType:u},h)=>{o(a,c)&&(this._grabbedManipulators.delete(h),c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:c},u)=>{o(a,c)&&(this._draggedManipulators.delete(u),c.dragging=!1,c.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:c},u)=>{o(a,c)&&(this._hoveredManipulators.delete(u),c.hovering=!1)}),this._afterManipulatorUngrab(s),this._onFocusChange(t)}_intersect(e,t,s){let n=null;return s(r=>{if(r.manipulators==null||!bc(r))return!1;const o=r.manipulators.intersect(e,t);return!O(o)&&(n={tool:r,manipulator:o},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Ct(t.x,t.y),s,t.pointerType,e)})}handleHoverEvent(e,t){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!vh(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(mi(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,s,n){let r=this._intersect(e,s,n);const o=Fr(this._hoveredManipulators.get(t),({manipulator:a})=>a);C(r)&&!r.manipulator.interactive&&(r=null),C(r)&&o===r.manipulator||(C(o)&&(o.hovering=!1),C(r)?(r.manipulator.hovering=!0,this._hoveredManipulators.set(t,r)):this._hoveredManipulators.delete(t),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function vh(i){return i==="mouse"}function _h(i){return i.pointerType!=="mouse"||i.button===0}function J0(i){return!!i.native.shiftKey}const wh="attached",Al="tools";let zi=class extends kp{constructor(e){super(e),this._manipulatorState=new X0,this.tools=new ee,this.cursor=null,this._forEachTool=t=>{for(const s of this.tools.items)if(t(s))return}}initialize(){this.handles.add([this.view.on(Wm,e=>{this._handleInputEvent(e)},As.TOOL),...Y0(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(C(e)&&!this.view.ready)return void q.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),C(t)&&t.deactivate(),C(e)&&e.activate(),this._removeIncompleteTools(e);for(const s of this.tools){this._updateToolEditableFlag(s);const n=bc(s);!O(this.activeTool)&&n||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(t=>t.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}attach(){var e;this.view.type==="3d"?(this._set("textures",new zr(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([I(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",t=>this._forEachManipulator(s=>s.onElevationChange(t))),gp(()=>this._set("textures",nt(this.textures)))],wh)):this.handles.add(I(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){C(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(wh)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:s})=>e(s,t))})}_handleInputEvent(e){let t=!1;const s={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};C(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool(n=>{!t&&n.visible&&n.handleInputEvent(s)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),!t&&C(this.activeTool)&&this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Al),this._forEachTool(e=>{if(e instanceof K){const t=I(()=>[e.cursor,e.visible,e.editable],()=>{bc(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,Al)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Al)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var t;(t=e.setEditableFlag)==null||t.call(e,mo.MANAGER,O(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;O(e)&&this._forEachTool(t=>!(!C(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(O(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};l([d({constructOnly:!0,nonNullable:!0})],zi.prototype,"view",void 0),l([d({readOnly:!0,nonNullable:!0})],zi.prototype,"textures",void 0),l([d({value:null})],zi.prototype,"activeTool",null),l([d({readOnly:!0,type:ee})],zi.prototype,"tools",void 0),l([d({readOnly:!0})],zi.prototype,"cursor",void 0),l([d({readOnly:!0})],zi.prototype,"updating",null),zi=l([$("esri.views.ToolViewManager")],zi);const eI=zi;let Tn=class extends K{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":tI.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return iI[this.deviceType]}};l([d({nonNullable:!0,readOnly:!0})],Tn.prototype,"nativeIndex",void 0),l([d({type:String,readOnly:!0})],Tn.prototype,"deviceType",null),l([d({type:Number,readOnly:!0})],Tn.prototype,"axisThreshold",null),Tn=l([$("esri.views.input.gamepad.GamepadInputDevice")],Tn);const tI=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),iI={standard:.15,spacemouse:.025,unknown:0},Id=Tn;let Br=class extends K{constructor(...e){super(...e),this.devices=new ee,this.enabledFocusMode="document"}};l([d({type:ee.ofType(Id),readOnly:!0})],Br.prototype,"devices",void 0),l([d({type:["document","view","none"]})],Br.prototype,"enabledFocusMode",void 0),Br=l([$("esri.views.input.gamepad.GamepadSettings")],Br);const sI=Br;let ta=class extends K{constructor(){super(...arguments),this.gamepad=new sI}};l([d({readOnly:!0})],ta.prototype,"gamepad",void 0),ta=l([$("esri.views.input.Input")],ta);const nI=ta;let hs=class extends K{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([d({type:Boolean,nonNullable:!0})],hs.prototype,"enabled",void 0),l([d({type:Id})],hs.prototype,"device",void 0),l([d({type:["pan","zoom"],nonNullable:!0})],hs.prototype,"mode",void 0),l([d({type:["forward-down","forward-up"],nonNullable:!0})],hs.prototype,"tiltDirection",void 0),l([d({type:Number,nonNullable:!0})],hs.prototype,"velocityFactor",void 0),hs=l([$("esri.views.navigation.gamepad.GamepadSettings")],hs);const Ym=hs;let Ws=class extends K{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Ym,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};l([d({type:Boolean})],Ws.prototype,"browserTouchPanEnabled",void 0),l([d({type:Ym,nonNullable:!0})],Ws.prototype,"gamepad",void 0),l([d({type:Boolean})],Ws.prototype,"momentumEnabled",void 0),l([d({type:Boolean})],Ws.prototype,"mouseWheelZoomEnabled",void 0),Ws=l([$("esri.views.navigation.Navigation")],Ws);const Xm=Ws;var bh;function rI(i){var s;const e=i.url?Bv(i.url):void 0;return!(((s=i.spatialReference)==null?void 0:s.vcsWkid)==null&&C(e)&&e.serverType==="ImageServer")&&Jm(i)&&i.heightModelInfo?i.heightModelInfo:oI(i)?sd.deriveUnitFromSR(lI,i.spatialReference):null}function Jm(i){return"heightModelInfo"in i}function eg(i){if(i.type==="unknown"||!("capabilities"in i))return!1;switch(i.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function oI(i){return eg(i)?!!(i.capabilities&&i.capabilities.data&&i.capabilities.data.supportsZ):tg(i)}function aI(i){return i.layers!=null||tg(i)||eg(i)||Jm(i)}function tg(i){switch(i.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(i){i[i.Ok=0]="Ok",i[i.Units=1]="Units",i[i.HeightModel=2]="HeightModel",i[i.CRS=3]="CRS",i[i.Unsupported=4]="Unsupported"})(bh||(bh={}));const lI=new sd({heightModel:"gravity-related-height"});let Ic,kl=null;async function cI(i){kl||(kl=T(()=>import("./geometryServiceUtils-c9de85a5.js"),["assets/geometryServiceUtils-c9de85a5.js","assets/Error-d97df89f.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/Portal-172924b2.js","assets/preload-helper-f8378b50.js","assets/JSONSupport-ed372989.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/request-7c0a9d4c.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/Basemap-1b908f31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/compilerUtils-8d4f8499.js","assets/enumeration-49e09bda.js","assets/opacityUtils-cc413a8c.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/geometry-d89d4a34.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/Identifiable-876da2a8.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/fieldUtils-66be74eb.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/persistableUrlUtils-26091271.js","assets/jsonUtils-dd0891e0.js","assets/Cyclical-0205ad3e.js","assets/reactiveUtils-307e98f9.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/mat4-1ee69bd5.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/aaBoundingRect-a7e9efee.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/HandleOwner-4c8d824c.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/featureConversionUtils-00c47b2e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/context-util-09fcc133.js","assets/Util-a12911ae.js","assets/EffectView-7a98f2c6.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"]).then(e=>Ic=e)),await kl,At(i)}async function ig(i,e,t,s){if(!i)return null;const n=i.spatialReference;return ur()||go(n,e)?fo(i,e):Ic?Ic.projectGeometry(i,e,t,s):(await Promise.race([cI(s),yo(s)]),ig(i,e,t,s))}let pe=class extends K{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ya(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return C(this.userSpatialReference)?this.userSpatialReference:Ne(this._spatialReferenceTask.spatialReference)}get extent(){return Ne(this._extentTask.extent)}get heightModelInfo(){return Ne(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return Ne(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return Ne(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return O(this.userSpatialReference)||this.userSpatialReference.equals(Ne(this._spatialReferenceTask.spatialReference))?Ne(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return Ne(this._tileInfoTask.tileInfo)}get mapCollections(){var s,n,r,o;const e=(s=this.map)==null?void 0:s.call(this),t=[];return C(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(r=e==null?void 0:e.ground)==null?void 0:r.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let s=null;for(const r of e){const o=this._getSupportedSpatialReferences(r);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(s,o);C(a)&&(s=a)}if(C(s)&&s.length===1)break}if(t&&(O(s)||s.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(s);return{spatialReference:C(n)?n.spatialReference:null,viewingMode:C(n)?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var s,n,r,o,a,c,u;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(s=this.map)==null?void 0:s.call(this))==null?void 0:n.basemap,layers:(a=(o=(r=this.map)==null?void 0:r.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(u=(c=this.map)==null?void 0:c.call(this))==null?void 0:u.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var s,n,r;if(!this.required.heightModelInfo||this.suspended&&((s=this._get("_heightModelInfoTask"))!=null&&s.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const o of e)if(aI(o)){const a=rI(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(r=o.spatialReference)==null?void 0:r.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,s=[];for(const n of e.layers){const r="fullExtents"in n&&n.fullExtents||(C(n.fullExtent)?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:r[0],a=r.find(c=>c.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const c of r)s.push({extent:c,layer:n})}return{candidates:s,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(O(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(e),n=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:C(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(C(this._projectExtentTask.task)&&(this._projectExtentTask.task=ya(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:n.clone(),task:Zp(async r=>{try{const o=await ig(s.extent,n,s.layer.portalItem,r);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(yy(r))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(O(e))return t;const s=[],n=(r,o)=>C(r)?C(o)?r===o&&r:r:o;for(const r of e)for(const o of t){if(!r.spatialReference.equals(o.spatialReference))continue;const a=n(r.viewingMode,o.viewingMode);if(a!==!1){s.push({spatialReference:r.spatialReference,viewingMode:a});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return O(e)||e.length<1?C(t)?{spatialReference:t,viewingMode:null}:null:(C(t)&&e.length>1&&e.some(({spatialReference:s})=>s.equals(t))&&(e=e.filter(({spatialReference:s})=>s.equals(t))),e.length>1&&e.some(({viewingMode:s})=>s!==pr.Local)&&(e=e.filter(({viewingMode:s})=>s!==pr.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const s=[];for(const n of t){const r=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(C(r)){const o=C(r.constraints)?r.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:c}of o)(!this.requiresExtentInSpatialReference||O(this.userSpatialReference)||a.equals(this.userSpatialReference))&&s.push({spatialReference:a,viewingMode:c})}}return s}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:s})=>t.equals(s.spatialReference))||e[0]}_collectLayers(e){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const s of e.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(s),"layers"in s&&this._collectCollection({layers:s.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};l([d()],pe.prototype,"required",void 0),l([d({constructOnly:!0})],pe.prototype,"map",void 0),l([d({constructOnly:!0})],pe.prototype,"getSpatialReferenceSupport",void 0),l([d()],pe.prototype,"defaultSpatialReference",void 0),l([d()],pe.prototype,"userSpatialReference",void 0),l([d()],pe.prototype,"sourcePreloadCount",void 0),l([d()],pe.prototype,"priorityCollection",void 0),l([d()],pe.prototype,"requiresExtentInSpatialReference",void 0),l([d()],pe.prototype,"suspended",void 0),l([d({readOnly:!0})],pe.prototype,"ready",null),l([d({readOnly:!0})],pe.prototype,"heightModelInfoReady",null),l([d({readOnly:!0})],pe.prototype,"spatialReference",null),l([d({readOnly:!0})],pe.prototype,"extent",null),l([d({readOnly:!0})],pe.prototype,"heightModelInfo",null),l([d({readOnly:!0})],pe.prototype,"vcsWkid",null),l([d({readOnly:!0})],pe.prototype,"latestVcsWkid",null),l([d({readOnly:!0})],pe.prototype,"viewingMode",null),l([d({readOnly:!0})],pe.prototype,"tileInfo",null),l([d({readOnly:!0})],pe.prototype,"mapCollections",null),l([d({readOnly:!0})],pe.prototype,"_allLayers",null),l([d({readOnly:!0})],pe.prototype,"_spatialReferenceTask",null),l([d({readOnly:!0})],pe.prototype,"_tileInfoTask",null),l([d({readOnly:!0})],pe.prototype,"_heightModelInfoTask",null),l([d({readOnly:!0})],pe.prototype,"_extentCandidatesTask",null),l([d()],pe.prototype,"_extentTask",null),l([d()],pe.prototype,"_projectExtentTask",void 0),pe=l([$("esri.views.support.DefaultsFromMap")],pe);var ia;let H=ia=class extends dn(gr.EventedMixin(Kp(K))){constructor(i){super(i),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new va({getCollections:()=>{var e,t,s;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(t=this.groundView)==null?void 0:t.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Qp,this.analyses=new $a,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ee,this.magnifier=new Gm,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Yp,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new nI,this.navigation=new Xm,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new K0(this),this.persistableViewModels=new ee,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(I(()=>this.preconditionsReady,e=>{var t,s;e?(this._currentSpatialReference=this.spatialReference,ia.views.add(this)):(this._currentSpatialReference=null,ia.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((t=this.toolViewManager)==null||t.detach(),C(this.analysisViewManager)&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown()):e&&!this.ready&&(this._startup(),C(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},ao))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,cn(()=>this.ready)))),this.basemapView=new us({view:this}),this.layerViewManager=new G0({view:this,layerViewImporter:{importLayerView:i=>this.importLayerView(i),hasLayerViewModule:i=>this.hasLayerViewModule(i)},supportsGround:this.supportsGround}),this.toolViewManager=new eI({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([I(()=>this.initialExtentRequired,i=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:i},{sync:!0,initial:!0}),I(()=>this.ready,i=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=i,this.defaultsFromMap.userSpatialReference=i?this.spatialReference:this._userSpatialReference)},{sync:!0}),I(()=>this._userSpatialReference,i=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=i)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let i=null;this.handles.add([I(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var s;const t=((s=this.map)==null?void 0:s.allLayers.length)>0;if(e&&!this.spatialReference&&t){if(C(i))return;const n=gp(()=>i=ya(i));i=Zp(async r=>{try{await Da(this.spatialReferenceWarningDelay,null,r)}catch{return}finally{i=null}q.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=nt(this.graphics),this.analyses=nt(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),nt(this.analysisViewManager),this.toolViewManager=nt(this.toolViewManager),this.layerViewManager=nt(this.layerViewManager),this.basemapView=nt(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const i=this.map;this.map=null,i==null||i.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return q.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var i;return(i=this.toolViewManager)==null?void 0:i.activeTool}set activeTool(i){this.toolViewManager&&(this.toolViewManager.activeTool=i)}get animation(){return this._get("animation")}set animation(i){this._set("animation",i)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new pe({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:i=>this.getSpatialReferenceSupport(i),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(i){this._set("extent",i)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var i;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ar.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((i=this.defaultsFromMap)!=null&&i.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(i){i!==this._get("map")&&(i!=null&&i.destroyed&&(q.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:i}),i=null),ar.isLoadable(i)&&i.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",i))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&((t=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&t.heightModelInfo)&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(i){const e=!cr(i,this._get("spatialReference"));this._set("_userSpatialReference",i),e&&(this._set("spatialReference",i),this._spatialReferenceChanged(i))}_spatialReferenceChanged(i){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var i;return(i=this.toolViewManager)==null?void 0:i.tools}get initialExtent(){var i;return(i=this.defaultsFromMap)==null?void 0:i.extent}get cursor(){const i=this.toolViewManager?this.toolViewManager.cursor:null;return C(i)?i:this._cursor||"default"}set cursor(i){this._cursor=i,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(i){return this.layerViewManager.whenLayerView(i)}getDefaultSpatialReference(){var i;return(i=this.defaultsFromMap)==null?void 0:i.spatialReference}getDefaultHeightModelInfo(){var i;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((i=this.defaultsFromMap)==null?void 0:i.heightModelInfo)??null}importLayerView(i){throw new L("importLayerView() not implemented")}hasLayerViewModule(i){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(i){return C(this.getSpatialReferenceSupport({spatialReference:i}))}when(i,e){return this.isResolved()&&!this.ready&&q.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(i,e)}forceReadyCycle(){this.ready&&(Ut(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(i){this.toolViewManager.tools.add(i),this.activeTool=i}tryFatalErrorRecovery(){this.fatalError=null}};H.views=new ee,l([d()],H.prototype,"_userSpatialReference",void 0),l([d()],H.prototype,"activeTool",null),l([d({readOnly:!0})],H.prototype,"allLayerViews",void 0),l([d()],H.prototype,"groundView",void 0),l([d()],H.prototype,"animation",null),l([d()],H.prototype,"basemapView",void 0),l([d()],H.prototype,"center",null),l([d({readOnly:!0})],H.prototype,"_defaultsFromMapSettings",null),l([d()],H.prototype,"defaultsFromMap",null),l([d()],H.prototype,"fatalError",void 0),l([d({type:ai})],H.prototype,"extent",null),l([d(au(Qp,"graphics"))],H.prototype,"graphics",void 0),l([d(au($a,"analyses"))],H.prototype,"analyses",void 0),l([d({readOnly:!0,type:sd})],H.prototype,"heightModelInfo",null),l([d({readOnly:!0})],H.prototype,"interacting",null),l([d({readOnly:!0})],H.prototype,"navigating",null),l([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],H.prototype,"preconditionsReady",null),l([d({readOnly:!0})],H.prototype,"typeSpecificPreconditionsReady",void 0),l([d({type:ee,readOnly:!0})],H.prototype,"layerViews",void 0),l([d()],H.prototype,"resolution",null),l([d({type:Gm})],H.prototype,"magnifier",void 0),l([d({value:null,type:tm})],H.prototype,"map",null),l([d()],H.prototype,"padding",void 0),l([d({readOnly:!0})],H.prototype,"ready",void 0),l([d({type:Yi})],H.prototype,"spatialReference",null),l([d()],H.prototype,"spatialReferenceWarningDelay",void 0),l([d()],H.prototype,"stationary",null),l([d({readOnly:!0})],H.prototype,"supportsGround",void 0),l([d({type:Dv})],H.prototype,"timeExtent",void 0),l([d({type:Yp,nonNullable:!0})],H.prototype,"timeReference",void 0),l([d()],H.prototype,"tools",null),l([d()],H.prototype,"toolViewManager",void 0),l([d({readOnly:!0})],H.prototype,"type",void 0),l([d({type:Number})],H.prototype,"scale",void 0),l([d({readOnly:!0})],H.prototype,"updating",void 0),l([d({readOnly:!0})],H.prototype,"initialExtentRequired",void 0),l([d({readOnly:!0})],H.prototype,"initialExtent",null),l([d()],H.prototype,"cursor",null),l([d({readOnly:!0})],H.prototype,"input",void 0),l([d({type:Xm,nonNullable:!0})],H.prototype,"navigation",void 0),l([d()],H.prototype,"layerViewManager",void 0),l([d()],H.prototype,"analysisViewManager",void 0),l([d()],H.prototype,"width",void 0),l([d()],H.prototype,"height",void 0),l([d({readOnly:!0})],H.prototype,"resizing",void 0),l([d({value:null,readOnly:!0})],H.prototype,"size",null),l([d({readOnly:!0})],H.prototype,"suspended",void 0),l([d({readOnly:!0})],H.prototype,"viewEvents",void 0),l([d({readOnly:!0})],H.prototype,"persistableViewModels",void 0),l([d()],H.prototype,"_isValid",void 0),l([d()],H.prototype,"_readyCycleForced",void 0),l([d()],H.prototype,"_currentSpatialReference",void 0),H=ia=l([$("esri.views.View")],H);const dI=H;let ps=class extends Nv{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new L("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=vy(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([d({readOnly:!0})],ps.prototype,"done",null),l([d({readOnly:!0,type:String})],ps.prototype,"state",void 0),l([d()],ps.prototype,"target",void 0),ps=l([$("esri.views.ViewAnimation")],ps),function(i){i.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(ps||(ps={}));const Mc=ps;function ks(){return[1,0,0,1,0,0]}function uI(i){return[i[0],i[1],i[2],i[3],i[4],i[5]]}function hI(i,e,t,s,n,r){return[i,e,t,s,n,r]}function pI(i,e){return new Float64Array(i,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:uI,create:ks,createView:pI,fromValues:hI},Symbol.toStringTag,{value:"Module"}));const sg=96,ng=39.37,mI=180/Math.PI;function rg(i){return i.wkid?i:i.spatialReference||Yi.WGS84}function Md(i,e){return e.type?ct(i,e.x,e.y):wa(i,e)}function og(i){return Wc(i)}function Jr(i,e){const t=Math.max(1,e[0]),s=Math.max(1,e[1]);return Math.max(i.width/t,i.height/s)*MI(i.spatialReference)}async function Hr(i,e,t,s){let n,r;if(!i||Array.isArray(i)&&!i.length)return null;if(ee.isCollection(i)&&(i=i.toArray()),Array.isArray(i)&&i.length&&typeof i[0]=="object"){const a=i.every(h=>"attributes"in h),c=i.some(h=>!h.geometry);let u=i;if(a&&c&&e&&e.allLayerViews){const h=new Map;for(const y of i){const _=y.layer,v=h.get(_)||[],w=y.attributes[_.objectIdField];w!=null&&v.push(w),h.set(_,v)}const p=[];h.forEach((y,_)=>{const v=e.allLayerViews.find(w=>w.layer.id===_.id);if(v&&"queryFeatures"in v){const w=_.createQuery();w.objectIds=y,w.returnGeometry=!0,p.push(v.queryFeatures(w))}});const g=await Promise.all(p),f=[];for(const y of g)if(y&&y.features&&y.features.length)for(const _ of y.features)C(_.geometry)&&f.push(_.geometry);u=f}for(const h of u)s=await Hr(h,e,t,s);return s}if(Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number")n=new de(i);else if(i instanceof My)n=i;else if("geometry"in i){if(i.geometry)n=i.geometry;else if(i.layer){const a=i.layer,c=e.allLayerViews.find(u=>u.layer.id===a.id);if(c&&"queryFeatures"in c){const u=a.createQuery();u.objectIds=[i.attributes[a.objectIdField]],u.returnGeometry=!0;const h=await c.queryFeatures(u);n=$y(h,"features",0,"geometry")}}}if(O(n)||(r=n.type==="point"?new ai({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!r))return null;ur()||go(r.spatialReference,t)||await yo();const o=fo(r,t);return o?s=s?s.union(o):o:null}function gI(i){if(i&&(!Array.isArray(i)||typeof i[0]!="number")&&(typeof i=="object"||Array.isArray(i)&&typeof i[0]=="object")){if("layer"in i&&i.layer&&i.layer.minScale&&i.layer.maxScale){const e=i.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(i)&&i.length&&i.every(e=>"layer"in e)){let e=0,t=0;for(const s of i){const n=s.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,t=n.maxScale>t?n.maxScale:t)}return e&&t?{min:e,max:t}:null}}}function Rl(i,e){return cr(rg(i),e)?i:fo(i,e)}async function fI(i,e){if(!i||!e)return new bi({targetGeometry:new de,scale:0,rotation:0});let t=e.spatialReference;const{constraints:s,padding:n,viewpoint:r,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let c=null;i instanceof bi?c=i:i.viewpoint?c=i.viewpoint:i.target&&i.target.declaredClass==="esri.Viewpoint"&&(c=i.target);let u=null;c&&c.targetGeometry?u=c.targetGeometry:i instanceof ai?u=i:(i||i&&("center"in i||"extent"in i||"target"in i))&&(u=await Hr(i.center,e,t)||await Hr(i.extent,e,t)||await Hr(i.target,e,t)||await Hr(i,e,t)),!u&&r&&r.targetGeometry?u=r.targetGeometry:!u&&e.extent&&(u=e.extent),t||(t=rg(e.spatialReference||e.extent||u)),ur()||cr(u.spatialReference,t)||go(u,t)||await yo();const h=Rl(u.center?u.center:u,t);let p=0;if(c&&C(c.targetGeometry)&&c.targetGeometry.type==="point")p=c.scale;else if("scale"in i&&i.scale)p=i.scale;else if("zoom"in i&&i.zoom!==-1&&s&&s.effectiveLODs)p=s.zoomToScale(i.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const _=Rl(e.extent,t);p=C(_)?Jr(_,a):e.extent?Jr(e.extent,a):r.scale}else p=Jr(Rl(u.extent,t),a);const g=gI(i);g&&(g.min&&g.min>p?p=g.min:g.max&&g.max<p&&(p=g.max));let f=0;c?f=c.rotation:i.hasOwnProperty("rotation")?f=i.rotation:r&&(f=r.rotation);let y=new bi({targetGeometry:h,scale:p,rotation:f});return s&&(y=s.fit(y),s.constrainByGeometry(y),s.rotationEnabled||(y.rotation=f)),y}function li(i,e){const t=i.targetGeometry,s=e.targetGeometry;return t.x=s.x,t.y=s.y,t.spatialReference=s.spatialReference,i.scale=e.scale,i.rotation=e.rotation,i}function yI(i,e,t){return t?ct(i,.5*(e[0]-t.right+t.left),.5*(e[1]-t.bottom+t.top)):Ga(i,e,.5)}const vI=function(){const i=tt();return function(e,t,s){const n=t.targetGeometry;Md(i,n);const r=.5*vr(t);return e.xmin=i[0]-r*s[0],e.ymin=i[1]-r*s[1],e.xmax=i[0]+r*s[0],e.ymax=i[1]+r*s[1],e.spatialReference=n.spatialReference,e}}();function _I(i,e,t,s,n){return Sc(i,e,t.center),i.scale=Jr(t,s),n&&n.constraints&&n.constraints.constrain(i),i}function wI(i,e,t,s){return xd(i,e,t,s),Gp(i,i)}const ag=function(){const i=tt();return function(e,t,s){return Xp(e,SI(e,t),yI(i,t,s))}}(),bI=function(){const i=ks(),e=tt();return function(t,s,n,r){const o=vr(s),a=Sd(s);return ct(e,o,o),Rv(i,e),ja(i,i,a),uo(i,i,ag(e,n,r)),uo(i,i,[0,r.top-r.bottom]),ct(t,i[4],i[5])}}();function vr(i){return i.scale*II(i.targetGeometry)}function II(i){return C(i)&&vp(i.spatialReference)?1/(og(i.spatialReference)*ng*sg):1}function Sd(i){return Sp(i.rotation)||0}function MI(i){return vp(i)?og(i)*ng*sg:1}function SI(i,e){return Ga(i,e,.5)}const Cd=function(){const i=tt(),e=tt(),t=tt();return function(s,n,r,o,a,c){return jv(i,n),Ga(e,r,.5*c),ct(t,1/o*c,-1/o*c),jp(s,e),a&&ja(s,s,a),id(s,s,t),uo(s,s,i),s}}(),xd=function(){const i=tt();return function(e,t,s,n){const r=vr(t),o=Sd(t);return Md(i,t.targetGeometry),Cd(e,i,s,r,o,n)}}(),CI=function(){const i=tt();return function(e,t,s,n){const r=vr(t);return Md(i,t.targetGeometry),Cd(e,i,s,r,0,n)}}();function xI(i){const e=Sy(i);return e?e.valid[1]-e.valid[0]:0}function EI(i,e){return Math.round(xI(i)/e)}const $I=function(){const i=tt(),e=tt(),t=[0,0,0];return function(s,n,r){oc(i,s,n),cu(i,i),oc(e,s,r),cu(e,e),qv(t,i,e);let o=Math.acos(Uv(i,e)/(du(i)*du(e)))*mI;return t[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),LI=function(){const i=tt();return function(e,t,s,n){const r=e.targetGeometry;return li(e,t),bI(i,t,s,n),r.x+=i[0],r.y+=i[1],e}}(),Sc=function(i,e,t){li(i,e);const s=i.targetGeometry;return s.x=t.x,s.y=t.y,s.spatialReference=t.spatialReference,i},TI=function(){const i=tt();return function(e,t,s,n,r){r||(r="center"),Xp(i,s,n),Ga(i,i,.5);const o=i[0],a=i[1];switch(r){case"center":ct(i,0,0);break;case"left":ct(i,-o,0);break;case"top":ct(i,0,a);break;case"right":ct(i,o,0);break;case"bottom":ct(i,0,-a);break;case"top-left":ct(i,-o,a);break;case"bottom-left":ct(i,-o,-a);break;case"top-right":ct(i,o,a);break;case"bottom-right":ct(i,o,-a)}return tl(e,t,i),e}}();function tk(i,e,t){return li(i,e),i.rotation+=t,i}function AI(i,e,t){return li(i,e),i.rotation=t,i}const kI=function(){const i=tt();return function(e,t,s,n,r){return li(e,t),isNaN(s)||s===0||(cg(i,n,t,r),e.scale=t.scale*s,dg(i,i,e,r),tl(e,e,ct(i,i[0]-n[0],n[1]-i[1]))),e}}();function Ih(i,e,t){return li(i,e),i.scale=t,i}const lg=function(){const i=tt();return function(e,t,s,n,r,o){return li(e,t),isNaN(s)||s===0||(cg(i,r,t,o),e.scale=t.scale*s,e.rotation+=n,dg(i,i,e,o),tl(e,e,ct(i,i[0]-r[0],r[1]-i[1]))),e}}(),ik=function(){const i=tt(),e=tt();return function(t,s,n,r,o,a,c){return ag(e,a,c),Gv(i,o,e),r?lg(t,s,n,r,i,a):kI(t,s,n,i,a)}}(),cg=function(){const i=ks();return function(e,t,s,n){return ji(e,t,wI(i,s,n,1))}}(),dg=function(){const i=ks();return function(e,t,s,n){return ji(e,t,xd(i,s,n,1))}}(),tl=function(){const i=tt(),e=ks();return function(t,s,n){li(t,s);const r=vr(s),o=t.targetGeometry;return kv(e,Sd(s)),id(e,e,Zv(r,r)),ji(i,n,e),o.x+=i[0],o.y+=i[1],t}}();let RI=class{constructor(e,t,s,n){const r=e.targetGeometry,o=t.targetGeometry;n?typeof n=="string"&&(n=Hv(n)||rc.ease):n=rc.ease,this.easing=n,this.duration=s,this.sCenterX=r.x,this.sCenterY=r.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const s=this.easing(t);let n,r,o,a;t>=1?(n=this.tCenterX,r=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+s*this.dCenterX,r=this.sCenterY+s*this.dCenterY,o=this.sRotation+s*this.dRotation,a=this.sScale+s*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=r,e.scale=a,e.rotation=o}},Bi=class extends K{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=rc.ease,this.view=null,this.viewpoint=new bi({targetGeometry:new de,scale:0,rotation:0}),this._updateTask=nr({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Mi(this._updateTask)}animate(e,t,s){this.stop();const n=this.viewpoint;li(n,t),this.transition=new RI(this.viewpoint,e.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const r=()=>{var o,a;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const s=new Mc({target:e.clone()}),n=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var s,n;const t=this.animation;if(t&&t.state!==Mc.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const r=this.transition,o=(performance.now()-this._startTime)/r.duration,a=o>=1;r.applyRatio(this.viewpoint,o),a&&((s=this.animation)==null||s.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};l([d()],Bi.prototype,"animation",void 0),l([d()],Bi.prototype,"duration",void 0),l([d()],Bi.prototype,"transition",void 0),l([d()],Bi.prototype,"easing",void 0),l([d()],Bi.prototype,"view",void 0),l([d()],Bi.prototype,"viewpoint",void 0),Bi=l([$("esri.views.2d.AnimationManager")],Bi);const PI=Bi;let FI=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var a;this._updateRequested=!1;const{basemapView:t,graphicsView:s,labelManager:n,layerViews:r,state:{id:o}}=this.view;t==null||t.baseLayerViews.forEach(this._updateLayerView,this),r.forEach(this._updateLayerView,this),t==null||t.referenceLayerViews.forEach(this._updateLayerView,this),C(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),C(s)&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=I(()=>e.stationary,t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=nr(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,s=e.lastUpdateId;s!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),s!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function Ve(){return Promise.all([T(()=>import("./webglDeps-86f5b5fd.js"),["assets/webglDeps-86f5b5fd.js","assets/VertexArrayObject-d5986ce6.js","assets/Error-d97df89f.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/Texture-8f8edc49.js","assets/mathUtils-b3bee9e7.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/ProgramTemplate-802e89ed.js","assets/programUtils-55627473.js","assets/NestedMap-1b5db22e.js"]),T(()=>import("./mapViewDeps-3a90ee8e.js"),["assets/mapViewDeps-3a90ee8e.js","assets/Error-d97df89f.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/promiseUtils-ac1bd36f.js","assets/JSONSupport-ed372989.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/mat3f32-6c416b1c.js","assets/CIMResourceManager-f2dc3d5c.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/Rasterizer-c0c27c81.js","assets/_commonjsHelpers-2f3e7994.js","assets/mathUtils-b3bee9e7.js","assets/cimAnalyzer-fade93fe.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/fontUtils-95b845d3.js","assets/screenUtils-7afeb41c.js","assets/fieldUtils-66be74eb.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/jsonUtils-dd0891e0.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-1aab1134.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/rasterizingUtils-9666244d.js","assets/imageutils-92e8b989.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Evented-e2ee9722.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/BufferPool-0209c612.js","assets/enums-b1d611e3.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/reactiveUtils-307e98f9.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/programUtils-55627473.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-058f7143.js","assets/pbf-3634de4f.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/enumeration-49e09bda.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/Clonable-5318ec31.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/assets-2c955bed.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/persistableUrlUtils-26091271.js","assets/styleUtils-1d3bc535.js","assets/CircularArray-364d163c.js","assets/webgl-debug-b1f7a2c5.js","assets/HandleOwner-4c8d824c.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js","assets/RenderingContext-b5a2cb5c.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/mat3-d3027213.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-b31c1259.js","assets/normalizeUtilsSync-6eaa2318.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/SimpleObservable-04055e8d.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/Collection-d9d92883.js","assets/collectionUtils-e98ed3f0.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/jsonUtils-7442f08f.js","assets/AttributeStoreView-ba467075.js","assets/TiledDisplayObject-fd49a9f6.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/PopupTemplate-63dce4d3.js","assets/number-205e28e0.js","assets/Identifiable-876da2a8.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/visualVariableUtils-6f05f98d.js","assets/Graphic-f117754c.js","assets/compilerUtils-8d4f8499.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/normalizeUtils-9dc1c489.js","assets/utils-ada6b2ec.js","assets/GraphicContainer-c91358c0.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/TileContainer-5d892b13.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-f0fdc8c7.js","assets/requestImageUtils-2eca6bfa.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])])}const $r=()=>Ve().then(()=>T(()=>import("./TileLayerView2D-797a1391.js"),["assets/TileLayerView2D-797a1391.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/reactiveUtils-307e98f9.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/GraphicsCollection-89010fd9.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/HandleOwner-4c8d824c.js","assets/Rasterizer-c0c27c81.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-1aab1134.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/rasterizingUtils-9666244d.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/BufferPool-0209c612.js","assets/enums-b1d611e3.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-058f7143.js","assets/pbf-3634de4f.js","assets/imageutils-92e8b989.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/assets-2c955bed.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-1d3bc535.js","assets/CircularArray-364d163c.js","assets/webgl-debug-b1f7a2c5.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/GraphicsView2D-b31c1259.js","assets/normalizeUtilsSync-6eaa2318.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/jsonUtils-7442f08f.js","assets/AttributeStoreView-ba467075.js","assets/mat3-d3027213.js","assets/TiledDisplayObject-fd49a9f6.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/normalizeUtils-9dc1c489.js","assets/utils-ada6b2ec.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-f0fdc8c7.js","assets/imageUtils-c7d04ded.js","assets/BitmapTileContainer-fc67271b.js","assets/Bitmap-e1bc1857.js","assets/TileContainer-5d892b13.js","assets/LayerView-fefba7b3.js","assets/HighlightGraphicContainer-c56025b1.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/RefreshableLayerView-33218a74.js","assets/drapedUtils-6f8e3eb6.js","assets/scaleUtils-2aca77b2.js","assets/MapImageLayer-030c7912.js","assets/loadAll-f0d5998c.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/Layer-07a07202.js","assets/APIKeyMixin-b93c2049.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/CollectionFlattener-52a0c7e4.js","assets/QueryTask-809f5bb4.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/FeatureType-b736019f.js","assets/FeatureTemplate-1fd8fac4.js","assets/AttachmentQuery-c89a8ac2.js","assets/popupUtils-3d5141e6.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/PortalLayer-d54f6a39.js","assets/PortalItem-a25335a3.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/imageBitmapUtils-ce029f55.js","assets/versionUtils-aabb6832.js","assets/popupUtils-b04ee323.js","assets/Basemap-1b908f31.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/fieldProperties-1fb52610.js","assets/styleUtils-f45b991d.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),gn=()=>Ve().then(()=>T(()=>import("./FeatureLayerView2D-4c2a0e5b.js"),["assets/FeatureLayerView2D-4c2a0e5b.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/TimeExtent-d2d7594c.js","assets/Query-bf719160.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureSet-00b7d51e.js","assets/definitions-19bfb61c.js","assets/LayerView-fefba7b3.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/enums-b1d611e3.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-f79d880b.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-9549b6c3.js","assets/createSymbolSchema-07e2efee.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/ExpandedCIM-04b9ce70.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/util-7f828970.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/assets-2c955bed.js","assets/intl-7c488bb0.js","assets/messages-226fbb40.js","assets/MapImageLayer-030c7912.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/scaleUtils-2aca77b2.js","assets/Layer-07a07202.js","assets/APIKeyMixin-b93c2049.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/CollectionFlattener-52a0c7e4.js","assets/QueryTask-809f5bb4.js","assets/utils-ada6b2ec.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/zscale-e06cee6f.js","assets/featureConversionUtils-00c47b2e.js","assets/FeatureType-b736019f.js","assets/FeatureTemplate-1fd8fac4.js","assets/FieldsIndex-7c963fe9.js","assets/AttachmentQuery-c89a8ac2.js","assets/popupUtils-3d5141e6.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/PortalLayer-d54f6a39.js","assets/PortalItem-a25335a3.js","assets/portalItemUtils-72345980.js","assets/projection-d7a5b449.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/imageBitmapUtils-ce029f55.js","assets/versionUtils-aabb6832.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Cyclical-0205ad3e.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/fieldProperties-1fb52610.js","assets/styleUtils-f45b991d.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/TileStrategy-0607ccca.js","assets/Util-a12911ae.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),Mh={"base-dynamic":()=>Ve().then(()=>T(()=>import("./BaseDynamicLayerView2D-cc87ab66.js"),["assets/BaseDynamicLayerView2D-cc87ab66.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/BitmapContainer-1c90efb1.js","assets/WGLContainer-cd626f28.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/mathUtils-b3bee9e7.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/screenUtils-7afeb41c.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Evented-e2ee9722.js","assets/reactiveUtils-307e98f9.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/aaBoundingRect-a7e9efee.js","assets/jsonUtils-dd0891e0.js","assets/Polyline-9d44200b.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-fefba7b3.js","assets/Collection-d9d92883.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/HandleOwner-4c8d824c.js","assets/Identifiable-876da2a8.js","assets/Promise-34cff6d6.js","assets/ExportStrategy-334649b2.js","assets/TileInfo-e107254e.js","assets/Bitmap-e1bc1857.js","assets/mat3-d3027213.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/enumeration-49e09bda.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/Clonable-5318ec31.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/preload-helper-f8378b50.js","assets/deprecate-424c57c7.js","assets/Loadable-c96deb83.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/request-7c0a9d4c.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/opacityUtils-cc413a8c.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/fieldUtils-66be74eb.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/persistableUrlUtils-26091271.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-0607ccca.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"base-tile":$r,"bing-maps":$r,csv:gn,"geo-rss":()=>Ve().then(()=>T(()=>import("./GeoRSSLayerView2D-fb01f77f.js"),["assets/GeoRSSLayerView2D-fb01f77f.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/cast-73cfc253.js","assets/Extent-fd3ac910.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/geometry-d89d4a34.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/reactiveUtils-307e98f9.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/LegendOptions-8200d5f5.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/Graphic-f117754c.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/FeatureSet-00b7d51e.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/LayerView-fefba7b3.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/GraphicContainer-c91358c0.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/Queue-c92bc561.js","assets/AttributeStoreView-ba467075.js","assets/mat2d-94b8f776.js","assets/mat3-d3027213.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-9549b6c3.js","assets/VertexArrayObject-d5986ce6.js","assets/TileContainer-5d892b13.js","assets/WGLContainer-cd626f28.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/capabilities-d3148205.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/utils-ada6b2ec.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),feature:gn,geojson:gn,graphics:()=>Ve().then(()=>T(()=>import("./GraphicsLayerView2D-1778534a.js"),["assets/GraphicsLayerView2D-1778534a.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/LayerView-fefba7b3.js","assets/reactiveUtils-307e98f9.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/GraphicContainer-c91358c0.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/Queue-c92bc561.js","assets/AttributeStoreView-ba467075.js","assets/mat2d-94b8f776.js","assets/mat3-d3027213.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-9549b6c3.js","assets/VertexArrayObject-d5986ce6.js","assets/TileContainer-5d892b13.js","assets/WGLContainer-cd626f28.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/lengthUtils-bc8879ed.js","assets/capabilities-d3148205.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/utils-ada6b2ec.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-7442f08f.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-1d3bc535.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),group:()=>Ve().then(()=>T(()=>import("./GroupLayerView2D-9c621019.js"),["assets/GroupLayerView2D-9c621019.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/GroupContainer-a26a6947.js","assets/WGLContainer-cd626f28.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/mathUtils-b3bee9e7.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/screenUtils-7afeb41c.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Evented-e2ee9722.js","assets/reactiveUtils-307e98f9.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/aaBoundingRect-a7e9efee.js","assets/jsonUtils-dd0891e0.js","assets/Polyline-9d44200b.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-fefba7b3.js","assets/Collection-d9d92883.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/HandleOwner-4c8d824c.js","assets/Identifiable-876da2a8.js","assets/Promise-34cff6d6.js","assets/Basemap-1b908f31.js","assets/preload-helper-f8378b50.js","assets/deprecate-424c57c7.js","assets/Loadable-c96deb83.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/request-7c0a9d4c.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/enumeration-49e09bda.js","assets/opacityUtils-cc413a8c.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/fieldUtils-66be74eb.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/persistableUrlUtils-26091271.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/mat3-d3027213.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),imagery:()=>Ve().then(()=>T(()=>import("./ImageryLayerView2D-4e8a8e5e.js"),["assets/ImageryLayerView2D-4e8a8e5e.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/GraphicsCollection-89010fd9.js","assets/HandleOwner-4c8d824c.js","assets/RasterVFDisplayObject-dca242ec.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-150420c8.js","assets/pixelRangeUtils-03719dd8.js","assets/mat3f32-6c416b1c.js","assets/WGLContainer-cd626f28.js","assets/definitions-19bfb61c.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/mat3-d3027213.js","assets/LayerView-fefba7b3.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/mat2d-94b8f776.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-7442f08f.js","assets/AttributeStoreView-ba467075.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-1d3bc535.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/normalizeUtils-9dc1c489.js","assets/utils-ada6b2ec.js","assets/HighlightGraphicContainer-c56025b1.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/TileContainer-5d892b13.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-1c90efb1.js","assets/Bitmap-e1bc1857.js","assets/ExportStrategy-334649b2.js","assets/TileInfo-e107254e.js","assets/rasterProjectionHelper-bb772c6d.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/commonProperties-da958896.js"])),"imagery-tile":()=>Ve().then(()=>T(()=>import("./ImageryTileLayerView2D-50dcbaa3.js"),["assets/ImageryTileLayerView2D-50dcbaa3.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/multidimensionalUtils-db77e077.js","assets/RasterVFDisplayObject-dca242ec.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-150420c8.js","assets/pixelRangeUtils-03719dd8.js","assets/mat3f32-6c416b1c.js","assets/WGLContainer-cd626f28.js","assets/definitions-19bfb61c.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/mat3-d3027213.js","assets/LayerView-fefba7b3.js","assets/HandleOwner-4c8d824c.js","assets/rasterUtils-b28f40e4.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/TileContainer-5d892b13.js","assets/TileInfo-e107254e.js","assets/RawBlockCache-78b300a6.js","assets/rasterProjectionHelper-bb772c6d.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/capabilities-d3148205.js","assets/util-7f828970.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/lengthUtils-bc8879ed.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/commonProperties-da958896.js"])),kml:()=>Ve().then(()=>T(()=>import("./KMLLayerView2D-12ac72c7.js"),["assets/KMLLayerView2D-12ac72c7.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/reactiveUtils-307e98f9.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/projection-d7a5b449.js","assets/mathUtils-b3bee9e7.js","assets/mat4-1ee69bd5.js","assets/Polyline-9d44200b.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/kmlUtils-66f011cc.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/fieldUtils-66be74eb.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/aaBoundingBox-1eda6d1b.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/LegendOptions-8200d5f5.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/Graphic-f117754c.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/FeatureSet-00b7d51e.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/utils-ada6b2ec.js","assets/GraphicsCollection-89010fd9.js","assets/HandleOwner-4c8d824c.js","assets/Bitmap-e1bc1857.js","assets/mat3-d3027213.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/BitmapContainer-1c90efb1.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-fefba7b3.js","assets/GraphicContainer-c91358c0.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/Queue-c92bc561.js","assets/AttributeStoreView-ba467075.js","assets/mat2d-94b8f776.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/TileContainer-5d892b13.js","assets/capabilities-d3148205.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/projectionSupport-5e649f05.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/rasterProjectionHelper-bb772c6d.js","assets/RenderingContext-b5a2cb5c.js","assets/programUtils-55627473.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/webgl-debug-b1f7a2c5.js","assets/rasterUtils-b28f40e4.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"knowledge-graph":()=>Ve().then(()=>T(()=>import("./KnowledgeGraphLayerView2D-e09fe591.js"),["assets/KnowledgeGraphLayerView2D-e09fe591.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/LayerView-fefba7b3.js","assets/reactiveUtils-307e98f9.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/mathUtils-b3bee9e7.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/jsonUtils-dd0891e0.js","assets/HandleOwner-4c8d824c.js","assets/Identifiable-876da2a8.js","assets/Promise-34cff6d6.js","assets/Basemap-1b908f31.js","assets/preload-helper-f8378b50.js","assets/deprecate-424c57c7.js","assets/Loadable-c96deb83.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/request-7c0a9d4c.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/Color-9f46ece8.js","assets/compilerUtils-8d4f8499.js","assets/enumeration-49e09bda.js","assets/opacityUtils-cc413a8c.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/fieldUtils-66be74eb.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/persistableUrlUtils-26091271.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/aaBoundingRect-a7e9efee.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/featureConversionUtils-00c47b2e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"link-chart":()=>Ve().then(()=>T(()=>import("./KnowledgeGraphLayerView2D-e09fe591.js"),["assets/KnowledgeGraphLayerView2D-e09fe591.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/LayerView-fefba7b3.js","assets/reactiveUtils-307e98f9.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/mathUtils-b3bee9e7.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/jsonUtils-dd0891e0.js","assets/HandleOwner-4c8d824c.js","assets/Identifiable-876da2a8.js","assets/Promise-34cff6d6.js","assets/Basemap-1b908f31.js","assets/preload-helper-f8378b50.js","assets/deprecate-424c57c7.js","assets/Loadable-c96deb83.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/request-7c0a9d4c.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/Color-9f46ece8.js","assets/compilerUtils-8d4f8499.js","assets/enumeration-49e09bda.js","assets/opacityUtils-cc413a8c.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/fieldUtils-66be74eb.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/persistableUrlUtils-26091271.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/aaBoundingRect-a7e9efee.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/featureConversionUtils-00c47b2e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"knowledge-graph-sublayer":gn,"map-image":()=>Ve().then(()=>T(()=>import("./MapImageLayerView2D-5c1d1e62.js"),["assets/MapImageLayerView2D-5c1d1e62.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/reactiveUtils-307e98f9.js","assets/GraphicsCollection-89010fd9.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/HandleOwner-4c8d824c.js","assets/BitmapContainer-1c90efb1.js","assets/WGLContainer-cd626f28.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-fefba7b3.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/mat2d-94b8f776.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-7442f08f.js","assets/AttributeStoreView-ba467075.js","assets/mat3-d3027213.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-1d3bc535.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/normalizeUtils-9dc1c489.js","assets/utils-ada6b2ec.js","assets/HighlightGraphicContainer-c56025b1.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/TileContainer-5d892b13.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-334649b2.js","assets/TileInfo-e107254e.js","assets/Bitmap-e1bc1857.js","assets/MapImageLayer-030c7912.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/scaleUtils-2aca77b2.js","assets/Layer-07a07202.js","assets/APIKeyMixin-b93c2049.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/CollectionFlattener-52a0c7e4.js","assets/QueryTask-809f5bb4.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/FeatureType-b736019f.js","assets/FeatureTemplate-1fd8fac4.js","assets/AttachmentQuery-c89a8ac2.js","assets/popupUtils-3d5141e6.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/PortalLayer-d54f6a39.js","assets/PortalItem-a25335a3.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/imageBitmapUtils-ce029f55.js","assets/versionUtils-aabb6832.js","assets/RefreshableLayerView-33218a74.js","assets/drapedUtils-6f8e3eb6.js","assets/popupUtils-b04ee323.js","assets/Basemap-1b908f31.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/fieldProperties-1fb52610.js","assets/styleUtils-f45b991d.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"map-notes":()=>Ve().then(()=>T(()=>import("./MapNotesLayerView2D-97d9e5e6.js"),["assets/MapNotesLayerView2D-97d9e5e6.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/GroupContainer-a26a6947.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-fefba7b3.js","assets/HandleOwner-4c8d824c.js","assets/GraphicContainer-c91358c0.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/Queue-c92bc561.js","assets/AttributeStoreView-ba467075.js","assets/mat2d-94b8f776.js","assets/mat3-d3027213.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/TileContainer-5d892b13.js","assets/lengthUtils-bc8879ed.js","assets/capabilities-d3148205.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/utils-ada6b2ec.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-7442f08f.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-1d3bc535.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),media:()=>Ve().then(()=>T(()=>import("./MediaLayerView2D-15d70f31.js"),["assets/MediaLayerView2D-15d70f31.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/reactiveUtils-307e98f9.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/aaBoundingRect-a7e9efee.js","assets/perspectiveUtils-9e6a34f5.js","assets/projection-d7a5b449.js","assets/mat4-1ee69bd5.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/normalizeUtilsSync-6eaa2318.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/mat3-d3027213.js","assets/mat3f64-221ce671.js","assets/vec2-9030ffc5.js","assets/Rasterizer-c0c27c81.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-1aab1134.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-94b8f776.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/rasterizingUtils-9666244d.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/BufferPool-0209c612.js","assets/enums-b1d611e3.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/utils-f79d880b.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-058f7143.js","assets/pbf-3634de4f.js","assets/imageutils-92e8b989.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/defaultsJSON-b087dd4d.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-364d163c.js","assets/webgl-debug-b1f7a2c5.js","assets/HandleOwner-4c8d824c.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/GraphicsView2D-b31c1259.js","assets/projectionSupport-5e649f05.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/AttributeStoreView-ba467075.js","assets/TiledDisplayObject-fd49a9f6.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/normalizeUtils-9dc1c489.js","assets/utils-ada6b2ec.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-f0fdc8c7.js","assets/LayerView-fefba7b3.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"ogc-feature":()=>Ve().then(()=>T(()=>import("./OGCFeatureLayerView2D-531145e5.js"),["assets/OGCFeatureLayerView2D-531145e5.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/FeatureLayerView2D-4c2a0e5b.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/TimeExtent-d2d7594c.js","assets/Query-bf719160.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureSet-00b7d51e.js","assets/definitions-19bfb61c.js","assets/LayerView-fefba7b3.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/enums-b1d611e3.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-f79d880b.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-9549b6c3.js","assets/createSymbolSchema-07e2efee.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/ExpandedCIM-04b9ce70.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/util-7f828970.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/assets-2c955bed.js","assets/intl-7c488bb0.js","assets/messages-226fbb40.js","assets/MapImageLayer-030c7912.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/scaleUtils-2aca77b2.js","assets/Layer-07a07202.js","assets/APIKeyMixin-b93c2049.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/CollectionFlattener-52a0c7e4.js","assets/QueryTask-809f5bb4.js","assets/utils-ada6b2ec.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/zscale-e06cee6f.js","assets/featureConversionUtils-00c47b2e.js","assets/FeatureType-b736019f.js","assets/FeatureTemplate-1fd8fac4.js","assets/FieldsIndex-7c963fe9.js","assets/AttachmentQuery-c89a8ac2.js","assets/popupUtils-3d5141e6.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/PortalLayer-d54f6a39.js","assets/PortalItem-a25335a3.js","assets/portalItemUtils-72345980.js","assets/projection-d7a5b449.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/imageBitmapUtils-ce029f55.js","assets/versionUtils-aabb6832.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Cyclical-0205ad3e.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/fieldProperties-1fb52610.js","assets/styleUtils-f45b991d.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/TileStrategy-0607ccca.js","assets/Util-a12911ae.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"open-street-map":$r,"oriented-imagery":gn,route:()=>Ve().then(()=>T(()=>import("./RouteLayerView2D-b89f471a.js"),["assets/RouteLayerView2D-b89f471a.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/CollectionFlattener-52a0c7e4.js","assets/reactiveUtils-307e98f9.js","assets/Stop-9710aac9.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/LayerView-fefba7b3.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/GraphicContainer-c91358c0.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/Queue-c92bc561.js","assets/AttributeStoreView-ba467075.js","assets/mat2d-94b8f776.js","assets/mat3-d3027213.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/visualVariablesUtils-7effa371.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-9549b6c3.js","assets/VertexArrayObject-d5986ce6.js","assets/TileContainer-5d892b13.js","assets/WGLContainer-cd626f28.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/lengthUtils-bc8879ed.js","assets/capabilities-d3148205.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/utils-ada6b2ec.js","assets/GraphicsView2D-b31c1259.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/normalizeUtilsSync-6eaa2318.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-7442f08f.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-1d3bc535.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),stream:()=>Ve().then(()=>T(()=>import("./StreamLayerView2D-856c6182.js"),["assets/StreamLayerView2D-856c6182.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/reactiveUtils-307e98f9.js","assets/FeatureSet-00b7d51e.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/FeatureLayerView2D-4c2a0e5b.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/TimeExtent-d2d7594c.js","assets/Query-bf719160.js","assets/DataLayerSource-71059dc4.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/definitions-19bfb61c.js","assets/LayerView-fefba7b3.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/enums-b1d611e3.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-f79d880b.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-9549b6c3.js","assets/createSymbolSchema-07e2efee.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/ExpandedCIM-04b9ce70.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/util-7f828970.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/assets-2c955bed.js","assets/intl-7c488bb0.js","assets/messages-226fbb40.js","assets/MapImageLayer-030c7912.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/scaleUtils-2aca77b2.js","assets/Layer-07a07202.js","assets/APIKeyMixin-b93c2049.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/CollectionFlattener-52a0c7e4.js","assets/QueryTask-809f5bb4.js","assets/utils-ada6b2ec.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/zscale-e06cee6f.js","assets/featureConversionUtils-00c47b2e.js","assets/FeatureType-b736019f.js","assets/FeatureTemplate-1fd8fac4.js","assets/FieldsIndex-7c963fe9.js","assets/AttachmentQuery-c89a8ac2.js","assets/popupUtils-3d5141e6.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/PortalLayer-d54f6a39.js","assets/PortalItem-a25335a3.js","assets/portalItemUtils-72345980.js","assets/projection-d7a5b449.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/imageBitmapUtils-ce029f55.js","assets/versionUtils-aabb6832.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Cyclical-0205ad3e.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/fieldProperties-1fb52610.js","assets/styleUtils-f45b991d.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/TileStrategy-0607ccca.js","assets/Util-a12911ae.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"subtype-group":()=>Ve().then(()=>T(()=>import("./SubtypeGroupLayerView2D-2cdbc679.js"),["assets/SubtypeGroupLayerView2D-2cdbc679.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/reactiveUtils-307e98f9.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/parser-a11e786f.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/mathUtils-b3bee9e7.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/TimeExtent-d2d7594c.js","assets/Query-bf719160.js","assets/enumeration-49e09bda.js","assets/jsonUtils-dd0891e0.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/Clonable-5318ec31.js","assets/PopupTemplate-63dce4d3.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/UniqueValueRenderer-b6a7d586.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/LegendOptions-8200d5f5.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/Graphic-f117754c.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/layerUtils-a0871894.js","assets/styleUtils-1d3bc535.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/deprecate-424c57c7.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureLayerView2D-4c2a0e5b.js","assets/EffectView-7a98f2c6.js","assets/FeatureSet-00b7d51e.js","assets/definitions-19bfb61c.js","assets/LayerView-fefba7b3.js","assets/Container-b72af0ce.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/HandleOwner-4c8d824c.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/enums-b1d611e3.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-f79d880b.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-9549b6c3.js","assets/createSymbolSchema-07e2efee.js","assets/cimAnalyzer-fade93fe.js","assets/fontUtils-95b845d3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/GeometryUtils-53652037.js","assets/utils-1aab1134.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/ExpandedCIM-04b9ce70.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/util-7f828970.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/assets-2c955bed.js","assets/intl-7c488bb0.js","assets/messages-226fbb40.js","assets/MapImageLayer-030c7912.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/scaleUtils-2aca77b2.js","assets/Layer-07a07202.js","assets/APIKeyMixin-b93c2049.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/CollectionFlattener-52a0c7e4.js","assets/QueryTask-809f5bb4.js","assets/utils-ada6b2ec.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-a0b71b11.js","assets/zscale-e06cee6f.js","assets/featureConversionUtils-00c47b2e.js","assets/FeatureType-b736019f.js","assets/FeatureTemplate-1fd8fac4.js","assets/FieldsIndex-7c963fe9.js","assets/AttachmentQuery-c89a8ac2.js","assets/popupUtils-3d5141e6.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/PortalLayer-d54f6a39.js","assets/PortalItem-a25335a3.js","assets/portalItemUtils-72345980.js","assets/projection-d7a5b449.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/imageBitmapUtils-ce029f55.js","assets/versionUtils-aabb6832.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/writeUtils-5c3c75bd.js","assets/TablesMixin-1e04401c.js","assets/Cyclical-0205ad3e.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/fieldProperties-1fb52610.js","assets/styleUtils-f45b991d.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-d3027213.js","assets/TileStrategy-0607ccca.js","assets/Util-a12911ae.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),tile:$r,"vector-tile":()=>Ve().then(()=>T(()=>import("./VectorTileLayerView2D-2fc8265b.js"),["assets/VectorTileLayerView2D-2fc8265b.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/diffUtils-ac6d6369.js","assets/aaBoundingRect-a7e9efee.js","assets/enums-fb086c25.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/Queue-c92bc561.js","assets/assets-2c955bed.js","assets/intl-7c488bb0.js","assets/messages-226fbb40.js","assets/Rect-ea14f53a.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/pbf-3634de4f.js","assets/rasterizingUtils-9666244d.js","assets/floatRGBA-bff1e6d8.js","assets/TileKey-555f347f.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/TileStore-56391591.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/mat3-d3027213.js","assets/mat3f32-6c416b1c.js","assets/VertexArrayObject-d5986ce6.js","assets/config-1337d16e.js","assets/TiledDisplayObject-fd49a9f6.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/definitions-19bfb61c.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/TileContainer-5d892b13.js","assets/WGLContainer-cd626f28.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/vec2f32-eaf29605.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/StyleRepository-4cdcfdb4.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/unitBezier-881ac1eb.js","assets/LayerView-fefba7b3.js","assets/HandleOwner-4c8d824c.js","assets/TileInfo-e107254e.js","assets/TileStrategy-0607ccca.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),wcs:()=>Ve().then(()=>T(()=>import("./ImageryTileLayerView2D-50dcbaa3.js"),["assets/ImageryTileLayerView2D-50dcbaa3.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/Graphic-f117754c.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/reactiveUtils-307e98f9.js","assets/multidimensionalUtils-db77e077.js","assets/RasterVFDisplayObject-dca242ec.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-150420c8.js","assets/pixelRangeUtils-03719dd8.js","assets/mat3f32-6c416b1c.js","assets/WGLContainer-cd626f28.js","assets/definitions-19bfb61c.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingRect-a7e9efee.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/mat3-d3027213.js","assets/LayerView-fefba7b3.js","assets/HandleOwner-4c8d824c.js","assets/rasterUtils-b28f40e4.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/TileContainer-5d892b13.js","assets/TileInfo-e107254e.js","assets/RawBlockCache-78b300a6.js","assets/rasterProjectionHelper-bb772c6d.js","assets/projection-d7a5b449.js","assets/assets-2c955bed.js","assets/zscale-e06cee6f.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/capabilities-d3148205.js","assets/util-7f828970.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/lengthUtils-bc8879ed.js","assets/popupUtils-b04ee323.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/commonProperties-da958896.js"])),"web-tile":$r,wfs:gn,wms:()=>Ve().then(()=>T(()=>import("./WMSLayerView2D-42386834.js"),["assets/WMSLayerView2D-42386834.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/reactiveUtils-307e98f9.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/BitmapContainer-1c90efb1.js","assets/WGLContainer-cd626f28.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-d5986ce6.js","assets/Texture-8f8edc49.js","assets/mathUtils-b3bee9e7.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/screenUtils-7afeb41c.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Evented-e2ee9722.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/aaBoundingRect-a7e9efee.js","assets/jsonUtils-dd0891e0.js","assets/Polyline-9d44200b.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-fefba7b3.js","assets/Collection-d9d92883.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/HandleOwner-4c8d824c.js","assets/Identifiable-876da2a8.js","assets/Promise-34cff6d6.js","assets/ExportStrategy-334649b2.js","assets/TileInfo-e107254e.js","assets/Bitmap-e1bc1857.js","assets/mat3-d3027213.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/enumeration-49e09bda.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/Clonable-5318ec31.js","assets/RefreshableLayerView-33218a74.js","assets/OperationalLayer-a420b681.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/persistableUrlUtils-26091271.js","assets/ElevationInfo-75e7bf35.js","assets/fieldUtils-66be74eb.js","assets/lengthUtils-bc8879ed.js","assets/opacityUtils-cc413a8c.js","assets/ExportWMSImageParameters-b3803e0e.js","assets/Basemap-1b908f31.js","assets/deprecate-424c57c7.js","assets/Loadable-c96deb83.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-0607ccca.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),wmts:()=>Ve().then(()=>T(()=>import("./WMTSLayerView2D-8e1c6cd0.js"),["assets/WMTSLayerView2D-8e1c6cd0.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/reactiveUtils-307e98f9.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/imageUtils-c7d04ded.js","assets/BitmapTileContainer-fc67271b.js","assets/aaBoundingRect-a7e9efee.js","assets/mathUtils-b3bee9e7.js","assets/mat3f32-6c416b1c.js","assets/Bitmap-e1bc1857.js","assets/mat3-d3027213.js","assets/vec2f32-eaf29605.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Evented-e2ee9722.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/TiledDisplayObject-fd49a9f6.js","assets/TileKey-555f347f.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/alignmentUtils-ae955d28.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/Color-9f46ece8.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-9030ffc5.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/jsonUtils-dd0891e0.js","assets/Polyline-9d44200b.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/TileContainer-5d892b13.js","assets/LayerView-fefba7b3.js","assets/Collection-d9d92883.js","assets/SimpleObservable-04055e8d.js","assets/collectionUtils-e98ed3f0.js","assets/geometry-d89d4a34.js","assets/typeUtils-2ccaf90d.js","assets/HandleOwner-4c8d824c.js","assets/Identifiable-876da2a8.js","assets/Promise-34cff6d6.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/enumeration-49e09bda.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/Clonable-5318ec31.js","assets/TileStrategy-0607ccca.js","assets/RefreshableLayerView-33218a74.js","assets/Basemap-1b908f31.js","assets/preload-helper-f8378b50.js","assets/deprecate-424c57c7.js","assets/Loadable-c96deb83.js","assets/loadAll-f0d5998c.js","assets/asyncUtils-f0fdc8c7.js","assets/request-7c0a9d4c.js","assets/Portal-172924b2.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/PortalItem-a25335a3.js","assets/assets-2c955bed.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/layerUtils-a0871894.js","assets/compilerUtils-8d4f8499.js","assets/opacityUtils-cc413a8c.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Graphic-f117754c.js","assets/PopupTemplate-63dce4d3.js","assets/fieldUtils-66be74eb.js","assets/number-205e28e0.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/persistableUrlUtils-26091271.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/projection-d7a5b449.js","assets/zscale-e06cee6f.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/LegendOptions-8200d5f5.js","assets/utils-e0744d8b.js","assets/BlendLayer-5cec7349.js","assets/ItemCache-d06df2a7.js","assets/MemCache-7d4aa654.js","assets/utils-1aab1134.js","assets/jsonUtils-37cc07d7.js","assets/UniqueValueRenderer-b6a7d586.js","assets/diffUtils-ac6d6369.js","assets/colorRamps-fff34da2.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-6f05f98d.js","assets/lengthUtils-bc8879ed.js","assets/jsonUtils-7442f08f.js","assets/styleUtils-1d3bc535.js","assets/DictionaryLoader-0dadb1e0.js","assets/LRUCache-9c365b2a.js","assets/executeForIds-0c62bbcf.js","assets/utils-ada6b2ec.js","assets/query-eac603fe.js","assets/normalizeUtils-9dc1c489.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/pbf-3634de4f.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/TimeReference-b6332926.js","assets/datetime-b6333958.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/FeatureReductionLayer-fd41123b.js","assets/labelingInfo-f7d1c159.js","assets/labelUtils-6965a8ca.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/FieldsIndex-7c963fe9.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/mat2d-94b8f776.js","assets/webStyleSymbolUtils-54e19231.js","assets/devEnvironmentUtils-5002a058.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/capabilities-d3148205.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function OI(i){const e=i.declaredClass?i.declaredClass.slice(i.declaredClass.lastIndexOf(".")+1):"Unknown",t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new L(`${t}:view-not-supported`,`${e} is not supported in 2D`)}const Sh={hasLayerViewModule:i=>C(Mh[i.type]),importLayerView:i=>{const e=Mh[i.type];if(O(e))throw OI(i);return e(i)}};function DI(i,e){const{spatialReference:t}=e,s=[e.x,e.y];let n=Number.POSITIVE_INFINITY,r=0,o=0;const a=[0,0],c=i.type==="extent"?[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]:i.rings;for(const u of c)for(let h=0;h<u.length-1;h++){Ev(a,s,u,h);const p=Wv(s,a);p<n&&(n=p,r=a[0],o=a[1])}return{coordinate:new de({x:r,y:o,spatialReference:t}),distance:n}}var Cc;let nn=Cc=class extends Jc(K){constructor(i){super(i),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(O(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return fo(this.geometry,this.spatialReference)}catch(i){return q.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:i}),null}return this.geometry}constrain(i,e){if(O(this.normalizedGeometry))return i;const t=i.targetGeometry;if(this.normalizedGeometry.type==="extent"?_p(this.normalizedGeometry,t):Cy(this.normalizedGeometry,t))return i;const{coordinate:s}=DI(this.normalizedGeometry,t);return s&&(i.targetGeometry=s),i}clone(){var i,e;return new Cc({geometry:(i=this.geometry)==null?void 0:i.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};l([d({constructOnly:!0})],nn.prototype,"geometry",void 0),l([d({readOnly:!0})],nn.prototype,"normalizedGeometry",null),l([d({constructOnly:!0})],nn.prototype,"spatialReference",void 0),nn=Cc=l([$("esri.views.2d.constraints.GeometryConstraint")],nn);var xc;let qr=xc=class extends Jc(K){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(i,e){return this.enabled&&e&&(this.rotationEnabled||(i.rotation=e.rotation)),i}clone(){return new xc({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([d()],qr.prototype,"enabled",void 0),l([d()],qr.prototype,"rotationEnabled",void 0),qr=xc=l([$("esri.views.2d.constraints.RotationConstraint")],qr);const ug=qr;var Ec;let Tt=Ec=class extends Jc(K){constructor(i){super(i),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let i,{lods:e,minScale:t,maxScale:s,minZoom:n,maxZoom:r}=this,o=-1,a=-1,c=!1,u=!1;if(t!==0&&s!==0&&t<s&&([t,s]=[s,t]),!e||!e.length)return this._set("effectiveMinScale",t),void this._set("effectiveMaxScale",s);e=e.map(h=>h.clone()),e.sort((h,p)=>p.scale-h.scale),e.forEach((h,p)=>h.level=p);for(const h of e)!c&&t>0&&t>=h.scale&&(o=h.level,c=!0),!u&&s>0&&s>=h.scale&&(a=i?i.level:-1,u=!0),i=h;n===-1&&(n=t===0?0:o),r===-1&&(r=s===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),r=Math.max(r,0),r=Math.min(r,e.length-1),n>r&&([n,r]=[r,n]),t=e[n].scale,s=e[r].scale,e.splice(0,n),e.splice(r-n+1,e.length),e.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",r),this._set("effectiveMinScale",t),this._set("effectiveMaxScale",s)}constrain(i,e){if(e&&i.scale===e.scale)return i;const t=this.effectiveMinScale,s=this.effectiveMaxScale,n=i.targetGeometry,r=e&&e.targetGeometry,o=s!==0&&i.scale<s,a=t!==0&&i.scale>t;if(o||a){const c=a?t:s;if(e&&r){const u=(c-e.scale)/(i.scale-e.scale);n.x=r.x+(n.x-r.x)*u,n.y=r.y+(n.y-r.y)*u}i.scale=c}return this.snapToZoom&&this.effectiveLODs&&(i.scale=this._getClosestScale(i.scale)),i}fit(i){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(i,null);const e=this.scaleToZoom(i.scale),t=Math.abs(e-Math.floor(e));return i.scale=this.zoomToScale(t>.99?Math.round(e):Math.floor(e)),i}zoomToScale(i){if(!this.effectiveLODs)return 0;i-=this.effectiveMinZoom,i=Math.max(0,i);const e=this._scales;if(i<=0)return e[0];if(i>=e.length)return e[e.length-1];const t=Math.round(i-.5),s=Math.round(i);return e[s]+(s-i)*(e[t]-e[s])}scaleToZoom(i){if(!this.effectiveLODs)return-1;const e=this._scales;let t,s;if(i>=e[0])return this.effectiveMinZoom;if(i<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(t=e[n],s=e[n+1],s===i)return n+this.effectiveMinZoom+1;if(t>i&&s<i)return n+this.effectiveMinZoom+1-(i-s)/(t-s)}return-1}snapToClosestScale(i){if(!this.effectiveLODs)return i;const e=this.scaleToZoom(i);return this.zoomToScale(Math.round(e))}snapToNextScale(i,e=.5){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t+1)}snapToPreviousScale(i,e=2){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t-1)}clone(){return new Ec({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(i){return this._lodByScale[i]||(i=this._scales.reduce((e,t)=>Math.abs(t-i)<=Math.abs(e-i)?t:e,this._scales[0])),this._lodByScale[i].scale}};l([d({readOnly:!0})],Tt.prototype,"effectiveLODs",void 0),l([d({readOnly:!0})],Tt.prototype,"effectiveMinZoom",void 0),l([d({readOnly:!0})],Tt.prototype,"effectiveMaxZoom",void 0),l([d({readOnly:!0})],Tt.prototype,"effectiveMinScale",void 0),l([d({readOnly:!0})],Tt.prototype,"effectiveMaxScale",void 0),l([d()],Tt.prototype,"lods",void 0),l([d()],Tt.prototype,"minZoom",void 0),l([d()],Tt.prototype,"maxZoom",void 0),l([d()],Tt.prototype,"minScale",void 0),l([d()],Tt.prototype,"maxScale",void 0),l([d()],Tt.prototype,"snapToZoom",void 0),Tt=Ec=l([$("esri.views.2d.constraints.ZoomConstraint")],Tt);const hg=Tt,VI={base:null,key:"type",typeMap:{extent:ai,polygon:Yc}};let Pe=class extends K{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,s;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _defaultLODs(){var s,n,r;const e=(n=(s=this.view)==null?void 0:s.defaultsFromMap)==null?void 0:n.tileInfo,t=(r=this.view)==null?void 0:r.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new nn({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new ug({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,s=this.minZoom,n=this.maxZoom,r=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===t&&e.minZoom===s&&e.maxZoom===n&&e.minScale===r&&e.maxScale===o&&e.snapToZoom===a?e:new hg({lods:t,minZoom:s,maxZoom:n,minScale:r,maxScale:o,snapToZoom:a})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([d({readOnly:!0})],Pe.prototype,"effectiveLODs",null),l([d({readOnly:!0})],Pe.prototype,"effectiveMinScale",null),l([d({readOnly:!0})],Pe.prototype,"effectiveMaxScale",null),l([d({readOnly:!0})],Pe.prototype,"effectiveMinZoom",null),l([d({readOnly:!0})],Pe.prototype,"effectiveMaxZoom",null),l([d({types:VI,value:null})],Pe.prototype,"geometry",null),l([d({type:[Qr]})],Pe.prototype,"lods",void 0),l([d()],Pe.prototype,"minScale",void 0),l([d()],Pe.prototype,"maxScale",void 0),l([d()],Pe.prototype,"minZoom",void 0),l([d()],Pe.prototype,"maxZoom",void 0),l([d()],Pe.prototype,"rotationEnabled",void 0),l([d()],Pe.prototype,"snapToZoom",void 0),l([d()],Pe.prototype,"view",void 0),l([d({readOnly:!0})],Pe.prototype,"version",null),l([d()],Pe.prototype,"_defaultLODs",null),l([d({type:nn})],Pe.prototype,"_geometry",null),l([d({type:ug})],Pe.prototype,"_rotation",null),l([d({readOnly:!0,type:hg})],Pe.prototype,"_zoom",null),Pe=l([$("esri.views.2d.MapViewConstraints")],Pe);const pg=Pe;function NI(i){return i instanceof Float32Array&&i.length>=2}function zI(i){return Array.isArray(i)&&i.length>=2}function Pl(i){return NI(i)||zI(i)}var $c;const Li=[0,0];let ms=$c=class extends ut{constructor(i){super(i),this._viewpoint2D={center:tt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new ai,this.id=0,this.inverseTransform=ks(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=ks(),this.transformNoRotation=ks(),this.displayMat3=hl(),this.displayViewMat3=hl(),this.viewMat3=hl(),this.viewMat2d=nc(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(i){this._set("pixelRatio",i),this._update()}set size(i){this._set("size",i),this._update()}set viewpoint(i){if(i){const e=this._viewpoint2D,t=i.targetGeometry;e.center[0]=t.x,e.center[1]=t.y,e.rotation=i.rotation,e.scale=i.scale,e.spatialReference=t.spatialReference}this._update()}copy(i){const e=this.size,t=this.viewpoint;return t&&e?(this.viewpoint=li(t,i.viewpoint),this._set("size",wa(e,i.size))):(this.viewpoint=i.viewpoint.clone(),this._set("size",[i.size[0],i.size[1]])),this._set("pixelRatio",i.pixelRatio),this}clone(){return new $c({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(i,e,t){return Pl(e)?ji(i,e,this.inverseTransform):(Li[0]=e,Li[1]=t,ji(i,Li,this.inverseTransform))}toScreen(i,e,t){return Pl(e)?ji(i,e,this.transform):(Li[0]=e,Li[1]=t,ji(i,Li,this.transform))}toScreenNoRotation(i,e,t){return Pl(e)?ji(i,e,this.transformNoRotation):(Li[0]=e,Li[1]=t,ji(i,Li,this.transformNoRotation))}getScreenTransform(i,e){const{center:t}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return Cd(i,t,n,e,0,s),i}_update(){const{center:i,spatialReference:e,scale:t,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,r=this._get("size"),o=new bi({targetGeometry:new de(i[0],i[1],e),scale:t,rotation:s});if(this._set("viewpoint",o),!r||!e||!t)return;this.resolution=vr(o),this.rotation=s,this.scale=t,this.spatialReference=e,wa(this.center,i);const a=r[0]!==0?2/r[0]:0,c=r[1]!==0?-2/r[1]:0;Kv(this.displayMat3,a,0,0,0,c,0,-1,1,1);const u=Qv(this.viewMat3),h=hu(r[0]/2,r[1]/2),p=hu(-r[0]/2,-r[1]/2),g=Sp(s);uu(u,u,h),Yv(u,u,g),uu(u,u,p),Xv(this.displayViewMat3,this.displayMat3,u);const f=jp(this.viewMat2d,h);return ja(f,f,g),uo(f,f,p),vI(this.extent,o,r),xd(this.transform,o,r,n),Gp(this.inverseTransform,this.transform),CI(this.transformNoRotation,o,r,n),this.worldScreenWidth=EI(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([d({readOnly:!0})],ms.prototype,"id",void 0),l([d({value:1,json:{write:!0}})],ms.prototype,"pixelRatio",null),l([d({json:{write:!0}})],ms.prototype,"size",null),l([d()],ms.prototype,"spatialReference",void 0),l([d({type:bi,json:{write:!0}})],ms.prototype,"viewpoint",null),ms=$c=l([$("esri.views.2d.ViewState")],ms);const Ch=ms;var Lc,Tc;let Gi=Lc=class extends K{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Lc({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([d()],Gi.prototype,"left",void 0),l([d()],Gi.prototype,"top",void 0),l([d()],Gi.prototype,"right",void 0),l([d()],Gi.prototype,"bottom",void 0),Gi=Lc=l([$("esri.views.2d.PaddedViewState.Padding")],Gi);let An=Tc=class extends Ch{constructor(...i){super(...i),this.paddedViewState=new Ch,this._updateContent=(()=>{const e=tt();return()=>{const t=this._get("size"),s=this._get("padding");if(!t||!s)return;const n=this.paddedViewState;ct(e,s.left+s.right,s.top+s.bottom),oc(e,t,e),wa(n.size,e);const r=n.viewpoint;r&&(this.viewpoint=r)}})(),this.addHandles(I(()=>[this.size,this.padding],()=>this._updateContent(),ao)),this.padding=new Gi,this.size=[0,0]}set padding(i){this._set("padding",i||new Gi)}set viewpoint(i){if(i){const e=i.clone();this.paddedViewState.viewpoint=i,LI(e,i,this._get("size"),this._get("padding"));const t=this._viewpoint2D,s=e.targetGeometry;t.center[0]=s.x,t.center[1]=s.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=s.spatialReference,this._update()}}clone(){return new Tc({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([d()],An.prototype,"paddedViewState",void 0),l([d({type:Gi})],An.prototype,"padding",null),l([d()],An.prototype,"viewpoint",null),An=Tc=l([$("esri.views.2d.PaddedViewState")],An);const BI=An;function Ed(i,e){switch(e){case"primary":return i.pointerType==="touch"||i.button===0;case"secondary":return i.pointerType!=="touch"&&i.button===2;case"tertiary":return i.pointerType!=="touch"&&i.button===1}}let xh=class extends it{constructor(e,t){super(!0),this._view=e,this.registerIncoming("double-click",t,s=>this._handleDoubleClick(s,t))}_handleDoubleClick(e,t){Ed(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},HI=class extends it{constructor(e,t,s){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",s,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:s}=t;if(s!==this.pointerType)return;e.stopPropagation();const{action:n,delta:r}=t,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:c}=o;this._startScale=c,this._currentScale=c,this._previousDelta=r,a.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;const c=1.015**r.y,u=this._startScale*c,h=u/this._currentScale;a.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:c}=o,{effectiveLODs:u,snapToZoom:h}=c;if(!h||!u)return void a.end();const p=c.snapScale(this._currentScale),g=(r.y>0?Math.max(p,c.snapToPreviousScale(this._startScale)):Math.min(p,c.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(g);break}}}},il=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const t=e.data,s=t.pointers.size;switch(t.action){case"start":this._currentCount=s,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var t,s;this._startEvent=e,(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var t,s;(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var t,s;(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},qI=class extends it{constructor(e,t,s){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",s,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new il({start:(t,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(t,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(t,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(t,s)=>t===1&&Ed(s.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},UI=class extends it{constructor(e,t,s){super(!0),this._view=e,this.pointerAction=t;const n=this._view.mapViewNavigation;this._dragEventSeparator=new il({start:(r,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(r,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(r,o)=>{n.rotate.end(),o.stopPropagation()},condition:(r,o)=>r===1&&Ed(o.data,this.pointerAction)}),this.registerIncoming("drag",s,r=>this._dragEventSeparator.handle(r))}};function Jt(i){let e=i*i;return i<0&&(e*=-1),e}function jI(i){return i.translation[0]=0,i.translation[1]=0,i.translation[2]=0,i.heading=0,i.tilt=0,i}function GI(i,e,t){const s=t,n=i.state,r=i.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return r.deviceType==="standard"?(s.translation[0]=Jt(n.axes[0]),s.translation[1]=Jt(n.axes[1]),s.translation[2]=Jt(n.buttons[7])-Jt(n.buttons[6]),s.heading=Jt(n.axes[2]),s.tilt=Jt(n.axes[3])):r.deviceType==="spacemouse"&&(s.translation[0]=1.2*Jt(n.axes[0]),s.translation[1]=1.2*Jt(n.axes[1]),s.translation[2]=2*-Jt(n.axes[2]),s.heading=1.2*Jt(n.axes[5]),s.tilt=1.2*Jt(n.axes[3])),s.tilt*=o,Cp(s.translation,s.translation,a),s}function WI(i){return i.translation[0]===0&&i.translation[1]===0&&i.translation[2]===0&&i.heading===0&&i.tilt===0&&i.zoom===0}let ZI=class extends it{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Ke,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",t=>this._handleGamePadEvent(t)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([I(()=>{var t;return(t=this._view.navigation.gamepad)==null?void 0:t.enabled},t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=nr({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},B)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,jI(this._transformation)):(this._currentDevice=e.data.device,GI(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const t=this._transformation;if(WI(t))return;const s=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,r=QI*n*e;tl(s,s,[t.translation[0]*r,-t.translation[1]*r]);const o=1+t.translation[2]*YI*e,a=this._view.constraints.rotationEnabled?-t.heading*KI*e:0,c=this._view.size,u=[c[0]/2,c[1]];lg(s,s,o,a,u,c);const h=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=h}};const KI=.06,QI=.7,YI=6e-4;let XI=class extends it{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const s=this._keyMap[e.data.key];if(this._pressed=s!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},JI=class extends it{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const s=e.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Wn;(function(i){i[i.IN=0]="IN",i[i.OUT=1]="OUT"})(Wn||(Wn={}));let eM=class extends it{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),t.zoomIn.forEach(n=>this._keysToZoomAction[n]=Wn.IN),t.zoomOut.forEach(n=>this._keysToZoomAction[n]=Wn.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:s}=e.data;if(!(s in this._keysToZoomAction))return;const n=this._keysToZoomAction[s],{mapViewNavigation:r}=this.view;let o=null;switch(n){case Wn.IN:o=r.zoomIn();break;case Wn.OUT:o=r.zoomOut();break;default:return}r.begin(),o.then(()=>r.end()),e.stopPropagation()}};const tM=.6;let iM=class extends it{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,s=>this._handleMouseWheel(s))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const t=this._view.mapViewNavigation,{x:s,y:n,deltaY:r}=e.data,o=1/tM**(1/60*r),a=t.zoom(o,[s,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()}))}},sM=class extends it{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const t=this.view.mapViewNavigation;this._dragEventSeparator=new il({start:(s,n)=>{t.pinch.begin(this.view,n.data),n.stopPropagation()},update:(s,n)=>{t.pinch.update(this.view,n.data),n.stopPropagation()},end:(s,n)=>{t.pinch.end(this.view),n.stopPropagation()},condition:s=>s>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Eh(i){const e=i.native;return e?{buttons:e.buttons.map(t=>t.pressed?t.value?t.value:1:0),axes:e.axes.map(t=>oM(t,i.axisThreshold))}:{buttons:[],axes:[]}}function nM(i,e){if(i.axes.length!==e.axes.length||i.buttons.length!==e.buttons.length)return!1;for(let t=0;t<i.axes.length;t++)if(i.axes[t]!==e.axes[t])return!1;for(let t=0;t<i.buttons.length;t++)if(i.buttons[t]!==e.buttons[t])return!1;return!0}function rM(i){for(let e=0;e<i.axes.length;e++)if(i.axes[e]!==0)return!1;for(let e=0;e<i.buttons.length;e++)if(i.buttons[e]!==0)return!1;return!0}function oM(i,e){const t=Math.abs(i);return t<e?0:Math.sign(i)*(t-e)/(1-e)}let aM=class{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=r=>{this._connectGamepad(r.gamepad)},this._onDisconnectGamepad=r=>{const o=r.gamepad,a=o.index,c=this._inputDevices[a];c&&(this._emitGamepadEvent(o,Eh(c),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=s&&n,this.supported&&(this._forEachGamepad(r=>this._connectGamepad(r)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const t=new Id(e);t.deviceType!=="unknown"&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=nr({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!t;this._forEachGamepad(n=>{const r=this._inputDevices[n.index];if(!r)return;const o=this._latestUpdate[n.index],a=Eh(r),c=s||rM(a);o&&(o.timestamp===n.timestamp||!o.active&&c||nM(o.state,a))||this._emitGamepadEvent(n,a,!c)})}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const n=t[s];this._validate(n)&&e(n)}}_emitGamepadEvent(e,t,s){const n=this._latestUpdate[e.index],r=n&&n.active;if(!r&&!s)return;const o=!r&&s?"start":r&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}};const $h=St("edge"),lM=St("chrome"),cM=St("ff"),dM=St("safari"),Lh="esri-view-surface",fn={touchNone:`${Lh}--touch-none`,touchPan:`${Lh}--touch-pan`};let mg=class gg{constructor(e,t){this._input=t,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new aM(e,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=nt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const s=this._active[t];this._element.removeEventListener(Fl[t],s),delete this._active[t]}e&&e.forEach(t=>{if(!this._active[t]&&Fl[t]){const s=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(Fl[t],s),this._active[t]=s}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?fn.touchNone:fn.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?fn.touchPan:fn.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(fn.touchNone),this._element.classList.remove(fn.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,t){const s=Qm(this._element,e);return gg.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),t.x=s.x,t.y=s.y,t}_handleKey(e,t){const s=C0(t);s&&e==="key-up"&&this._keyDownState.delete(s);const n={native:t,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,t){const s=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,s)}_handlePointerPreventDefault(e,t){const s=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,s)}_handleMouseWheel(e,t){let s=t.deltaY;switch(t.deltaMode){case 0:$h&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}$h?s*=.7:lM||dM?s*=.6:cM&&(s*=1.375);const n=100,r=Math.abs(s);r>n&&(s=s/r*200/(1+Math.exp(-.02*(r-n))));const o=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:s});this._callback(e,o)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const s={native:t};t.preventDefault(),this._callback(e,s)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};mg.test={disableSubpixelCoordinates:!1};const Fl={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let uM=class extends it{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function $d(i,e){return Math.abs(e.x-i.x)+Math.abs(e.y-i.y)}function hM(i,e){const t=e.x-i.x,s=e.y-i.y;return Math.sqrt(t*t+s*s)}function pM(i,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ct()},i.length===0)return e;if(i.length===1)return e.center.x=i[0].x,e.center.y=i[0].y,e;if(i.length===2){const[M,S]=i,[x,A]=[S.x-M.x,S.y-M.y];return e.radius=Math.sqrt(x*x+A*A)/2,e.center.x=(M.x+S.x)/2,e.center.y=(M.y+S.y)/2,e}let t=0,s=0;for(let M=0;M<i.length;M++)t+=i[M].x,s+=i[M].y;t/=i.length,s/=i.length;const n=i.map(M=>M.x-t),r=i.map(M=>M.y-s);let o=0,a=0,c=0,u=0,h=0,p=0,g=0;for(let M=0;M<n.length;M++){const S=n[M],x=r[M],A=S*S,k=x*x;o+=A,a+=k,c+=S*x,u+=A*S,h+=k*x,p+=S*k,g+=x*A}const f=.5*(u+p),y=.5*(h+g),_=o*a-c*c,v=(f*a-y*c)/_,w=(o*y-c*f)/_,b=Ct(v+t,w+s);return{radius:Math.sqrt(v*v+w*w+(o+a)/i.length),center:b}}function ln(i){const{native:e}=i,{pointerId:t,button:s,pointerType:n}=e;return n==="mouse"?`${t}:${s}`:`${n}`}const Xt={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let mM=class extends it{constructor(e=Xt.maximumDoubleClickDelay,t=Xt.maximumDoubleClickDistance,s=Xt.maximumDoubleTouchDelay,n=Xt.maximumDoubleTouchDistance,r=Va){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=r,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Mi(e.doubleClickTimer))}get hasPendingInputs(){return Na(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,t){const s=this._pointerState.get(e);s&&(s.doubleClickTimer=Mi(s.doubleClickTimer),t&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);t.pointerDownCount===1&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:t,pointerType:s,button:n}=e.native;return s==="mouse"?`${t}:${n}`:`${s}`}_handleImmediateClick(e){const t=e.data,{pointerType:s}=t.native,n=this._getPointerId(t);if(!this._pointerState.has(n))return void this._startClick(e);const r=this._pointerState.get(n),{data:o,modifiers:a}=r.event,c=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;$d(o,t)>c?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),r.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const t=ln(e.data),s=this._pointerState.get(t);s&&(s.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:s}}=t,n=ln(t),r=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),r),a=1;this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}},gM=class extends it{constructor(e=Xt.maximumDoubleClickDelay,t=Xt.maximumDoubleClickDistance,s=Xt.maximumDoubleTouchDelay,n=Xt.maximumDoubleTouchDistance,r=Va){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ct(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new il({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Mi(e.doubleTapTimeout)})}get hasPendingInputs(){return Na(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout=Mi(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,s){const{button:n,buttons:r,pointer:o,pointers:a,pointerType:c,timestamp:u}=s;return{action:e,delta:t,button:n,buttons:r,pointer:o,pointers:a,pointerType:c,timestamp:u}}_dragStart(e,t){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:n}=t,{center:r}=s;this._dragStartCenter=r;const o=this._createDoubleTapDragData("begin",Ct(0,0),s);this._doubleTapDrag.emit(o,void 0,n),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:s}=e,{center:n}=t,r=Ct(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",r,t);this._doubleTapDrag.emit(o,void 0,s),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:s}=e,{center:n}=t,r=Ct(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",r,t);this._doubleTapDrag.emit(o,void 0,s),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,s=ln(t),n=this._pointerState.get(s),{pointerType:r}=t.native;if(n){const o=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),$d(n.event.data,t)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:t}=e,{pointerType:s}=t.native,n=ln(t),r=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),r);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},fM=class extends it{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,s,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:n,pointers:yM(this._activePointerMap),pointer:t,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(e){const t=e.native.pointerId,s=ko(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,n);const r=sa(n,fg(this._activePointerMap));n.initialAngle=r,n.lastAngle=r,this._updatePointerAngles(s)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const t=e.native.pointerId,s=this._activePointerMap.get(t);s?s.event=e:this._addPointer(e)}_removePointer(e){const t=ko(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=ko(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=sa(s,t)-e,s.lastAngle=sa(s,t)-e})}_emitEvent(e,t,s){const n=ko(this._activePointerMap);this._drag.emit(this._createPayload(e,t,n,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,s=ol(e.timestamp);this._activePointerMap.get(t)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,ol(e.timestamp))))}_handlePointerDrag(e){const t=e.data,s=t.currentEvent,n=ol(e.timestamp);switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,n)):(this._addPointer(s),this._emitEvent("added",s,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function fg(i){const e=[];return i.forEach(t=>{e.push(Ct(t.event.x,t.event.y))}),pM(e)}function ko(i){const e=fg(i);let t=0;return i.forEach(s=>{let n=sa(s,e),r=n-s.lastAngle;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;n=s.lastAngle+r,s.lastAngle=n;const o=n-s.initialAngle;t+=o}),t/=i.size||1,{angle:t,radius:e.radius,center:e.center}}function yM(i){const e=new Map;return i.forEach((t,s)=>e.set(s,t.event)),e}function sa(i,e){const t=i.event,s=t.x-e.center.x,n=t.y-e.center.y;return Math.atan2(n,s)}var Th;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right",i[i.Back=3]="Back",i[i.Forward=4]="Forward",i[i.Undefined=-1]="Undefined"})(Th||(Th={}));let vM=class extends it{constructor(e=Xt.maximumDoubleClickDelay,t=Xt.maximumDoubleClickDistance,s=Xt.maximumDoubleTouchDelay,n=Xt.maximumDoubleTouchDistance,r=Va){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=r,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const t=e.data,s=ln(t);if(!this._pointerState.has(s)){const n={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(s,n),this.startCapturingPointer(t.native)}}_handlePointerUp(e){const t=e.data,s=ln(t),n=this._pointerState.get(s);if(n&&n.downButton===t.native.button){const r=n.immediateDoubleClick;if(r){r.timeoutHandle.remove();const o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;$d(r,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,r.modifiers),this._removeState(t))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,t){const s=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),s)}}_removeState(e){const t=ln(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const Lr={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let _M=class extends it{constructor(e=Lr.maximumClickDelay,t=Lr.movementUntilMouseDrag,s=Lr.movementUntilPenDrag,n=Lr.movementUntilTouchDrag,r=Lr.holdDelay,o=Va){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=t,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=n,this._holdDelay=r,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Mi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const t=e.data,s=t.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(s);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const r={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(s,r),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,s){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:s}}_handlePointerMove(e){const t=e.data,s=t.native.pointerId,n=this._pointerState.get(s);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,t),void 0,n.modifiers):hM(t,n.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),n.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const t=e.data,s=t.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,s===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,t)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,t){const s=e.data,n=s.native.pointerId,r=this._pointerState.get(n);r&&(r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",r,t==="pointer-up"?s:r.previousEvent),void 0,r.modifiers):t==="pointer-up"&&r.downButton===s.native.button&&e.timestamp-r.startTimestamp<=this._maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(n),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Ro={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Zs=class extends K{constructor(){super(...arguments),this._handles=new Ke}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([Ut(()=>!e(),()=>this._disconnect()),Ut(e,()=>this._connect())])}destroy(){this._handles=nt(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=nt(this._inputManager)}_connect(){const e=this.view.surface,t=new mg(e,this.view.input),s=[new vM,new _M,new mM,new fM(this.view.navigation),new gM],n=new pi({eventSource:t,recognizers:s});n.installHandlers("prevent-context-menu",[new uM],As.INTERNAL),n.installHandlers("navigation",[new sM(this.view),new ZI(this.view),new iM(this.view),new xh(this.view),new xh(this.view,[Ro.counter]),new qI(this.view,"primary"),new XI(this.view,Ro.pan),new eM(this.view,Ro.zoom),new JI(this.view,Ro.rotate),new UI(this.view,"secondary"),new HI(this.view,"touch")],As.INTERNAL),this.view.viewEvents.connect(n),this._source=t,this._inputManager=n,I(()=>{var r,o;return(o=(r=this.view)==null?void 0:r.navigation)==null?void 0:o.browserTouchPanEnabled},r=>{this._source&&(this._source.browserTouchPanningEnabled=!r)},B)}get test(){return{inputManager:this._inputManager}}};l([d()],Zs.prototype,"view",void 0),l([d()],Zs.prototype,"latestPointerType",null),l([d()],Zs.prototype,"latestPointerLocation",null),l([d()],Zs.prototype,"multiTouchActive",null),Zs=l([$("esri.views.2d.input.MapViewInputManager")],Zs);const wM=Zs;let Ks=class extends K{constructor(){super(...arguments),this.color=new Ie([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};l([d({type:Ie})],Ks.prototype,"color",void 0),l([d({type:Ie})],Ks.prototype,"haloColor",void 0),l([d()],Ks.prototype,"haloOpacity",void 0),l([d()],Ks.prototype,"fillOpacity",void 0),Ks=l([$("esri.views.2d.support.HighlightOptions")],Ks);const yg=Ks,bM=i=>i.includes("Brush");let vg=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),bM(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function IM(i,e,t,s,n,r,o,a){i.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let c=null;i.width!=null&&i.height!=null?c=[i.width,i.height]:i.width==null&&i.height!=null?c=[i.height,i.height]:i.width!=null&&i.height==null?c=[i.width,i.width]:i.width==null&&i.height==null&&(c=null);const u=t[0]-(s.left+s.right),h=t[1]-(s.top+s.bottom);let p,g,f=i.area||{x:0,y:0,width:u,height:h};if(c){const y=u/h,_=c[0]/c[1];if(_>y){const v=f.width/_;f={x:f.x,y:Math.round(f.y+(f.height-v)/2),width:f.width,height:Math.round(v)}}else{const v=f.height*_;f={x:Math.round(f.x+(f.width-v)/2),y:f.y,width:Math.round(v),height:f.height}}}else c=[f.width,f.height];return c[0]>f.width?(p=Math.min(c[0]/f.width,e),g=c[0]/f.width/p):(p=1,g=c[0]/f.width),{resolutionScale:p,cropArea:{x:Math.round((f.x+s.left)*p),y:Math.round((f.y+s.top)*p),width:Math.round(f.width*p),height:Math.round(f.height*p)},outputScale:g,format:n,quality:r,children:o,rotation:a}}function MM(i,e,t){const{ctx:s,canvas:n}=_g(i,t),r=s.getImageData(0,0,i.width,i.height),o=xM(n,e);return wg(n),{dataUrl:o,data:r}}function SM(i,e){const{ctx:t,canvas:s}=_g(i,e),n=t.getImageData(0,0,i.width,i.height);return wg(s),n}function _g(i,e){const t=CM();e.premultipliedAlpha&&AM(i),t.width=i.width,t.height=i.height;const s=t.getContext("2d",{willReadFrequently:!0});return s.putImageData(i,0,0),e.flipY&&TM(s),{ctx:s,canvas:t}}function wg(i){i.width=0,i.height=0}function CM(){return O(Ol)&&(Ol=document.createElement("canvas")),Ol}let Ol=null;function xM(i,e){const t=kM[e.format],s=e.quality/100;return i.toDataURL(t,s)}function EM(i,e){const t=LM(i),s=PM[t];return{format:t,quality:dr(e??s,0,100)}}function $M(i,e){return e/Math.max(i[0],i[1])}function $k(i,e,t,s=0,n=0,r=i.width-s,o=i.height-n,a=!1){const{data:c}=i,{width:u,height:h,data:p}=e,g=r/u,f=o/h,y=Math.ceil(g/2),_=Math.ceil(f/2),v=i.width;for(let w=0;w<h;w++)for(let b=0;b<u;b++){const M=4*(b+(a?h-w-1:w)*u);let S=0,x=0,A=0,k=0,te=0,U=0;const J=(w+.5)*f;for(let oe=Math.floor(w*f);oe<(w+1)*f;oe++){const Le=Math.abs(J-(oe+.5))/_,Re=(b+.5)*g,_e=Le*Le;for(let Qe=Math.floor(b*g);Qe<(b+1)*g;Qe++){const Ye=Math.abs(Re-(Qe+.5))/y,Be=Math.sqrt(_e+Ye*Ye);if(Be>=1)continue;let Se=2*Be*Be*Be-3*Be*Be+1;const kt=4*(s+Qe+(n+oe)*v);U+=Se*c[kt+3],x+=Se,!t&&c[kt+3]<255&&(Se=Se*c[kt+3]/255),A+=Se*c[kt],k+=Se*c[kt+1],te+=Se*c[kt+2],S+=Se}}p[M]=A/S,p[M+1]=k/S,p[M+2]=te/S,p[M+3]=U/x}return e}function LM(i){switch(i){case"png":case"jpg":case"jpeg":return i;default:return RM}}function TM(i){i.save(),i.globalCompositeOperation="copy",i.scale(1,-1),i.translate(0,-i.canvas.height),i.drawImage(i.canvas,0,0),i.restore()}function AM(i){const e=i.data,t=e.length;for(let s=0;s<t;s+=4){const n=e[s+3];if(n!==255&&n>0){const r=255/n;e[s+0]=e[s+0]*r,e[s+1]=e[s+1]*r,e[s+2]=e[s+2]*r}}}const kM={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Ah=98,RM="png",PM={png:100,jpg:Ah,jpeg:Ah};function FM(i){const e=t_(i);if(!e.available)return new L("webgl:required","WebGL is required but not supported.");if(i==="3d"&&e.majorPerformanceCaveat)return new L("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new L("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new L("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===i_.WEBGL1){if(!e.supportsElementIndexUint)return new L("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new L("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new L("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function OM(i){return i&&"nodeType"in i}function DM(i){return i&&typeof i.render=="function"}const kh={component:"esri-component"};let Qs=class extends K{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(kh.component),t&&t.classList.remove(kh.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||OM(e)?(this._set("widget",null),Lp(e)):(DM(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([d({dependsOn:[]})],Qs.prototype,"id",null),l([d()],Qs.prototype,"node",null),l([rt("node")],Qs.prototype,"castNode",null),l([d({readOnly:!0})],Qs.prototype,"widget",void 0),Qs=l([$("esri.views.ui.Component")],Qs);const na=Qs,VM={left:0,top:0,bottom:0,right:0},bg={bottom:30,top:15,right:15,left:15},Dl="manual",Ti="esri-ui",vt={ui:Ti,corner:`${Ti}-corner`,innerContainer:`${Ti}-inner-container`,manualContainer:`${Ti}-manual-container`,cornerContainer:`${Ti}-corner-container`,topLeft:`${Ti}-top-left`,topRight:`${Ti}-top-right`,bottomLeft:`${Ti}-bottom-left`,bottomRight:`${Ti}-bottom-right`};function NM(i){return i&&!i._started&&typeof i.postMixInProperties=="function"&&typeof i.buildRendering=="function"&&typeof i.postCreate=="function"&&typeof i.startup=="function"}function Vl(i){const e=i,t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?i:null}function Nl(i,{top:e,bottom:t,left:s,right:n}){i.style.top=e,i.style.bottom=t,i.style.left=s,i.style.right=n}let gi=class extends gr.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=qp(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&Nl(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&Nl(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([I(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,B),I(()=>this.padding,this._applyUIPadding,B),I(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},B),Xc(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(vt.ui),ww(e),this._attachContainers(e)),t&&(t.classList.remove(vt.ui),Nl(t,{top:"",bottom:"",left:"",right:""}),Tp(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),s=t.top+t.bottom;return Math.max(e-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...bg,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),s=t.left+t.right;return Math.max(e-s,0)}add(e,t){let s,n;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const r=Vl(e);r&&({index:s,position:t,component:e,key:n}=r),t&&typeof t=="object"&&({index:s,key:n,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,s,n)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,t));const s=this._find(e);if(s){const n=this._componentToKey;if(n.has(e)&&n.get(e)!==t)return;const r=this._components.indexOf(s);return s.node.parentNode&&s.node.parentNode.removeChild(s.node),this._componentToKey.delete(e),this._components.splice(r,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,s)=>t.concat(s)):(e=e||Dl)===Dl?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(vt.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let s;const n=Vl(e)||Vl(t);if(n&&(s=n.index,t=n.position,e=n.component||e),t&&!this._isValidPosition(t))return;const r=this.remove(e);r&&this.add(r,{position:t,index:s})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,s,n){e instanceof na||(e=new na({node:e})),this._place({component:e,position:t,index:s}),this._components.push(e),n&&this._componentToKey.set(e,n)}_find(e){return e?e instanceof na?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||VM}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(vt.innerContainer),e.classList.add(vt.cornerContainer);const t=document.createElement("div");t.classList.add(vt.innerContainer),t.classList.add(vt.manualContainer);const s=document.createElement("div");s.classList.add(vt.topLeft),s.classList.add(vt.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(vt.topRight),n.classList.add(vt.corner),e.appendChild(n);const r=document.createElement("div");r.classList.add(vt.bottomLeft),r.classList.add(vt.corner),e.appendChild(r);const o=document.createElement("div");o.classList.add(vt.bottomRight),o.classList.add(vt.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const a=qt();this._cornerNameToContainerLookup={"top-left":s,"top-right":n,"bottom-left":r,"bottom-right":o,"top-leading":a?n:s,"top-trailing":a?s:n,"bottom-leading":a?o:r,"bottom-trailing":a?r:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,s=e.position||Dl,n=e.index,r=this._positionNameToContainerLookup[s],o=n!=null&&n>-1;if(NM(t.widget)&&t.widget.startup(),!o)return void r.appendChild(t.node);const a=Array.prototype.slice.call(r.children);if(n===0)return void(r.firstChild?iu(t.node,r.firstChild):r.appendChild(t.node));n>=a.length?r.appendChild(t.node):iu(t.node,a[n])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,s=null;return this._components.some(n=>(t=n===e,t&&(s=n),t)),s}_findById(e){let t,s=null;return this._components.some(n=>(t=n.id===e,t&&(s=n),t)),s}_findByNode(e){let t,s=null;return this._components.some(n=>(t=n.node===e,t&&(s=n),t)),s}};l([d()],gi.prototype,"_locale",void 0),l([d()],gi.prototype,"container",null),l([d()],gi.prototype,"height",null),l([d({value:bg})],gi.prototype,"padding",null),l([rt("padding")],gi.prototype,"castPadding",null),l([d()],gi.prototype,"view",void 0),l([d()],gi.prototype,"width",null),gi=l([$("esri.views.ui.UI")],gi);const zM=gi;function Rh(i,e){return i&&"copyright"in i&&(!e||typeof i.originOf=="function"&&i.originOf("copyright")==="user")}function BM(i,e){return i.length!==e.length||i.some((t,s)=>t.text!==e[s].text)}function Po(i,e,t){!t||!e||i.find(s=>s.layerView===e&&s.text===t)||i.push({text:t,layerView:e})}function HM(i){return i.type==="bing-maps"}const ss=[];let kn=class extends kp{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ee,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const s=this.get("view.allLayerViews");s&&this.handles.add(s.map(n=>I(()=>{var r;return[n.suspended,(r=n.layer)==null?void 0:r.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([We(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ut(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;ss.length=0,e&&t?(t.forEach(s=>{var o;if(s.suspended||!((o=s.layer)!=null&&o.attributionVisible))return;const n=s.layer;if(Rh(n,"user"))return void Po(ss,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const a=this._fetchedAttributionData.get(s);return void(a?Po(ss,s,this._getDynamicAttribution(a,e,n)):Rh(n)&&Po(ss,s,n.copyright))}return void this._fetchAttributionData(s)}const r=n.get("portalItem.accessInformation");Po(ss,s,r||n.copyright)}),BM(this.items,ss)&&(this.items.removeAll(),this.items.addMany(ss)),ss.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await Vv(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const s=t.ok?this._createContributionIndex(t.value,HM(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,s)}this._updateAttributionItems()}_createContributionIndex(e,t){const s=e.contributors,n={};if(!s)return n;for(let r=0;r<s.length;r++){const o=s[r],a=o.coverageAreas;if(!a)return;for(const c of a){const u=c.bbox,h=c.zoomMin-(t&&c.zoomMin?1:0),p=c.zoomMax-(t&&c.zoomMax?1:0),g={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Yi.WGS84},f={extent:Gc(g),attribution:o.attribution||"",score:c.score!=null?c.score:100,id:r};for(let y=h;y<=p;y++)n[y]=n[y]||[],n[y].push(f)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,t,s){var h;const{extent:n,scale:r}=t;let o=((h=s.tileInfo)==null?void 0:h.scaleToZoom(r))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],c=xy(n.center.clone().normalize(),t.spatialReference),u={};return a?a.filter(p=>{const g=p.id,f=!u[g]&&c&&p.extent&&_p(p.extent,c);return f&&(u[g]=!0),f}).sort((p,g)=>g.score-p.score||p.objectId-g.objectId).map(p=>p.attribution).join(", "):""}};l([d({readOnly:!0,type:ee})],kn.prototype,"items",void 0),l([d({readOnly:!0})],kn.prototype,"state",null),l([d()],kn.prototype,"view",void 0),kn=l([$("esri.widgets.Attribution.AttributionViewModel")],kn);const Ig=kn,yn="esri-attribution",ns={base:`${yn} esri-widget`,poweredBy:`${yn}__powered-by`,sources:`${yn}__sources`,open:`${yn}--open`,sourcesOpen:`${yn}__sources--open`,link:`${yn}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let wt=class extends Me{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(s=>s.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=ns.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Ig}initialize(){this.addHandles(We(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[ns.open]:this._isOpen};return m("div",{bind:this,class:this.classes(ns.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return m("div",{class:ns.poweredBy},"Powered by"," ",m("a",{class:ns.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,s=t?"0":"",{attributionText:n}=this,r={[ns.sourcesOpen]:e,[ns.interactive]:t};return m("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(ns.sources,r),innerHTML:n,tabindex:s})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:s,clientWidth:n,scrollWidth:r}=e,o=r>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(t=!0),this._isOpen){const c=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,c&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([d()],wt.prototype,"_isOpen",void 0),l([d()],wt.prototype,"_isInteractive",null),l([d()],wt.prototype,"_attributionTextOverflowed",void 0),l([d()],wt.prototype,"_prevSourceNodeHeight",void 0),l([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],wt.prototype,"attributionText",null),l([d()],wt.prototype,"iconClass",void 0),l([d()],wt.prototype,"itemDelimiter",void 0),l([d()],wt.prototype,"label",null),l([d(),ge("esri/widgets/Attribution/t9n/Attribution")],wt.prototype,"messages",void 0),l([d()],wt.prototype,"view",null),l([d({type:Ig})],wt.prototype,"viewModel",void 0),l([ke()],wt.prototype,"_toggleState",null),wt=l([$("esri.widgets.Attribution")],wt);const qM=wt,UM="esri.widgets.CompassViewModel";let Ys=class extends bd(K){constructor(e){super(e),this._handles=new Ke,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(I(()=>this.view,this._updateRotationWatcher,B))}destroy(){Mi(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var t;if(!this.get("view.ready"))return;const e={};((t=this.view)==null?void 0:t.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?I(()=>e==null?void 0:e.rotation,this._updateForRotation,B):I(()=>e==null?void 0:e.camera,this._updateForCamera,B))}};l([d({readOnly:!0})],Ys.prototype,"canShowNorth",null),l([d()],Ys.prototype,"orientation",void 0),l([d({readOnly:!0})],Ys.prototype,"state",null),l([d()],Ys.prototype,"view",void 0),Ys=l([$(UM)],Ys);const Mg=Ys,rs={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let fi=class extends Me{constructor(e,t){super(e,t),this.iconClass=rs.widgetIcon,this.messages=null,this.viewModel=new Mg}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,s=t==="disabled",n=(t==="rotation"?"rotation":"compass")=="compass",r=s?-1:0,o={[rs.disabled]:s,[rs.interactive]:!s},a={[rs.northIcon]:n,[rs.rotationIcon]:!n},{messages:c}=this;return m("div",{bind:this,class:this.classes(rs.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:r,"aria-label":c.reset,title:c.reset},m("span",{"aria-hidden":"true",class:this.classes(rs.icon,a),styles:this._toRotationTransform(e)}),m("span",{class:rs.text},c.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};l([d()],fi.prototype,"goToOverride",null),l([d()],fi.prototype,"iconClass",void 0),l([d()],fi.prototype,"label",null),l([d(),ge("esri/widgets/Compass/t9n/Compass")],fi.prototype,"messages",void 0),l([d()],fi.prototype,"view",null),l([d({type:Mg})],fi.prototype,"viewModel",void 0),l([ke()],fi.prototype,"_reset",null),fi=l([$("esri.widgets.Compass")],fi);const jM=fi,vn="esri-navigation-toggle",jt={base:`${vn} esri-widget`,button:`${vn}__button esri-widget--button`,activeButton:`${vn}__button--active`,panButton:`${vn}__button--pan`,rotateButton:`${vn}__button--rotate`,isLayoutHorizontal:`${vn}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Rn=class extends K{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Ut(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};l([d({readOnly:!0})],Rn.prototype,"state",null),l([d()],Rn.prototype,"navigationMode",void 0),l([d()],Rn.prototype,"view",void 0),Rn=l([$("esri.widgets.NavigationToggleViewModel")],Rn);const Sg=Rn;let yi=class extends Me{constructor(e,t){super(e,t),this.iconClass=jt.widgetIcon,this.messages=null,this.viewModel=new Sg}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",s={[jt.disabled]:e,[jt.isLayoutHorizontal]:this.layout==="horizontal"},n={[jt.activeButton]:t},r={[jt.activeButton]:!t},o=e?-1:0,a=this.messages.toggle;return m("div",{bind:this,class:this.classes(jt.base,s),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},m("div",{class:this.classes(jt.button,jt.panButton,n)},m("span",{class:jt.panIcon})),m("div",{class:this.classes(jt.button,jt.rotateButton,r)},m("span",{class:jt.rotationIcon})))}_toggle(){this.toggle()}};l([d()],yi.prototype,"iconClass",void 0),l([d()],yi.prototype,"label",null),l([d({value:"vertical"})],yi.prototype,"layout",null),l([d(),ge("esri/widgets/NavigationToggle/t9n/NavigationToggle")],yi.prototype,"messages",void 0),l([d()],yi.prototype,"view",null),l([d({type:Sg})],yi.prototype,"viewModel",void 0),l([ke()],yi.prototype,"_toggle",null),yi=l([$("esri.widgets.NavigationToggle")],yi);const GM=yi,Tr={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let gs=class extends Me{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Tr.disabled]:!this.enabled,[Tr.interactive]:this.enabled},s={[this.iconClass]:!!this.iconClass};return m("div",{bind:this,class:this.classes(Tr.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},m("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Tr.icon,s)}),m("span",{class:Tr.iconText},this.title))}_triggerAction(){this.action.call(this)}};l([d()],gs.prototype,"action",void 0),l([d()],gs.prototype,"enabled",void 0),l([d()],gs.prototype,"iconClass",void 0),l([d()],gs.prototype,"title",void 0),l([ke()],gs.prototype,"_triggerAction",null),gs=l([$("esri.widgets.IconButton")],gs);const Ph=gs;let Pn=class extends K{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};l([d({readOnly:!0})],Pn.prototype,"canZoomIn",null),l([d({readOnly:!0})],Pn.prototype,"canZoomOut",null),l([d()],Pn.prototype,"view",void 0),Pn=l([$("esri.widgets.Zoom.ZoomConditions2D")],Pn);const WM=Pn;let Fn=class extends K{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([d({readOnly:!0})],Fn.prototype,"canZoomIn",null),l([d({readOnly:!0})],Fn.prototype,"canZoomOut",null),l([d()],Fn.prototype,"view",void 0),Fn=l([$("esri.widgets.Zoom.ZoomConditions3D")],Fn);const ZM=Fn;let fs=class extends K{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return C(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return C(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new WM({view:e}):e.type==="3d"&&(this._zoomConditions=new ZM({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Kr(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Kr(e.goTo({zoomFactor:.5}))}};l([d()],fs.prototype,"_zoomConditions",void 0),l([d()],fs.prototype,"canZoomIn",null),l([d()],fs.prototype,"canZoomOut",null),l([d({readOnly:!0})],fs.prototype,"state",null),l([d()],fs.prototype,"view",null),fs=l([$("esri.widgets.Zoom.ZoomViewModel")],fs);const Cg=fs,Ar={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Hi=class extends Me{constructor(e,t){super(e,t),this.iconClass=Ar.widgetIcon,this.messages=null,this.viewModel=new Cg}initialize(){this._zoomInButton=new Ph({action:this.zoomIn.bind(this),iconClass:Ar.zoomInIcon}),this._zoomOutButton=new Ph({action:this.zoomOut.bind(this),iconClass:Ar.zoomOutIcon})}destroy(){this._zoomInButton=nt(this._zoomInButton),this._zoomOutButton=nt(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[Ar.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:s,canZoomOut:n}=e;this._zoomInButton.enabled=s,this._zoomOutButton.enabled=n;const{zoomIn:r,zoomOut:o}=this.messages;return this._zoomInButton.title=r,this._zoomOutButton.title=o,m("div",{class:this.classes(Ar.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};l([d()],Hi.prototype,"iconClass",void 0),l([d()],Hi.prototype,"label",null),l([d({value:"vertical"})],Hi.prototype,"layout",null),l([d(),ge("esri/widgets/Zoom/t9n/Zoom")],Hi.prototype,"messages",void 0),l([d()],Hi.prototype,"view",null),l([d({type:Cg})],Hi.prototype,"viewModel",void 0),Hi=l([$("esri.widgets.Zoom")],Hi);const KM=Hi;function QM(i){return i&&i.view!==void 0}let ra=class extends zM{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([I(()=>this.components,this._componentsWatcher.bind(this),B),I(()=>this.view,this._updateViewAwareWidgets.bind(this),B)])}_add(e,t,s,n){let r=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;r=this._createComponent(e)}super._add(r,t,s,n)}_removeComponents(e){e.forEach(t=>{const s=this._find(t);s&&(this.remove(s),s.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const s=this._find(t),n=s&&s.widget;QM(n)&&(n.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new na({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new qM({view:this.view})}_createCompass(){return new jM({view:this.view})}_createNavigationToggle(){return new GM({view:this.view})}_createZoom(){return new KM({view:this.view})}};l([d()],ra.prototype,"components",void 0),ra=l([$("esri.views.ui.DefaultUI")],ra);const YM=ra;let oa=class extends YM{constructor(e){super(e),this.components=["attribution","zoom"]}};l([d()],oa.prototype,"components",void 0),oa=l([$("esri.views.ui.2d.DefaultUI2D")],oa);const xg=oa;var Ac;let aa=Ac=class extends ut{constructor(i){super(i),this.color=new Ie([0,0,0,1])}clone(){return new Ac(Qi({color:this.color}))}};l([d({type:Ie,json:{write:!0}})],aa.prototype,"color",void 0),aa=Ac=l([$("esri.webmap.background.ColorBackground")],aa);const XM=aa;let Eg,$g,Lg,Tg,Ag,kg;async function JM(){const[,{GraphicsView2D:i,GraphicContainer:e,LabelManager:t,MapViewNavigation:s,MagnifierView2D:n,Stage:r}]=await Promise.all([T(()=>import("./webglDeps-86f5b5fd.js"),["assets/webglDeps-86f5b5fd.js","assets/VertexArrayObject-d5986ce6.js","assets/Error-d97df89f.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/Texture-8f8edc49.js","assets/mathUtils-b3bee9e7.js","assets/context-util-09fcc133.js","assets/enums-64ab819c.js","assets/ProgramTemplate-802e89ed.js","assets/programUtils-55627473.js","assets/NestedMap-1b5db22e.js"]),T(()=>import("./mapViewDeps-3a90ee8e.js"),["assets/mapViewDeps-3a90ee8e.js","assets/Error-d97df89f.js","assets/string-feb899cf.js","assets/typedArrayUtil-96f93e5b.js","assets/promiseUtils-ac1bd36f.js","assets/JSONSupport-ed372989.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/mat3f32-6c416b1c.js","assets/CIMResourceManager-f2dc3d5c.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/Rasterizer-c0c27c81.js","assets/_commonjsHelpers-2f3e7994.js","assets/mathUtils-b3bee9e7.js","assets/cimAnalyzer-fade93fe.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/fontUtils-95b845d3.js","assets/screenUtils-7afeb41c.js","assets/fieldUtils-66be74eb.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-a7e9efee.js","assets/jsonUtils-dd0891e0.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-1aab1134.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-94b8f776.js","assets/vec2-9030ffc5.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fd85d1bd.js","assets/floatRGBA-bff1e6d8.js","assets/rasterizingUtils-9666244d.js","assets/imageutils-92e8b989.js","assets/Container-b72af0ce.js","assets/EffectView-7a98f2c6.js","assets/parser-a11e786f.js","assets/mat4f32-60a2394b.js","assets/mat4-1ee69bd5.js","assets/Evented-e2ee9722.js","assets/enums-64ab819c.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/BufferPool-0209c612.js","assets/enums-b1d611e3.js","assets/WGLContainer-cd626f28.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-3bbef98f.js","assets/ProgramTemplate-802e89ed.js","assets/MaterialKey-6d0e47b2.js","assets/utils-f79d880b.js","assets/heatmapUtils-16ee21b5.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/reactiveUtils-307e98f9.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-00c47b2e.js","assets/aaBoundingBox-1eda6d1b.js","assets/OptimizedFeature-7af17710.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/programUtils-55627473.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-058f7143.js","assets/pbf-3634de4f.js","assets/Matcher-dde16e7c.js","assets/TileStrategy-0607ccca.js","assets/TileStore-56391591.js","assets/Queue-c92bc561.js","assets/TileKey-555f347f.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-bf719160.js","assets/TimeExtent-d2d7594c.js","assets/enumeration-49e09bda.js","assets/DataLayerSource-71059dc4.js","assets/Field-b17a677d.js","assets/fieldType-b21f2e7f.js","assets/Clonable-5318ec31.js","assets/visualVariablesUtils-7effa371.js","assets/visualVariablesUtils-9549b6c3.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1305d028.js","assets/assets-2c955bed.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-9c365b2a.js","assets/MemCache-7d4aa654.js","assets/ExpandedCIM-04b9ce70.js","assets/devEnvironmentUtils-5002a058.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/locale-30120714.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/persistableUrlUtils-26091271.js","assets/styleUtils-1d3bc535.js","assets/CircularArray-364d163c.js","assets/webgl-debug-b1f7a2c5.js","assets/HandleOwner-4c8d824c.js","assets/FeatureSetReader-f1a46ee8.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-37d6c274.js","assets/FieldsIndex-7c963fe9.js","assets/TimeReference-b6332926.js","assets/centroid-47d0a8f7.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js","assets/RenderingContext-b5a2cb5c.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/mat3-d3027213.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-b31c1259.js","assets/normalizeUtilsSync-6eaa2318.js","assets/normalizeUtilsCommon-155f1aa2.js","assets/projectionSupport-5e649f05.js","assets/projection-d7a5b449.js","assets/SimpleObservable-04055e8d.js","assets/zscale-e06cee6f.js","assets/json-48e3ea08.js","assets/labelingInfo-f7d1c159.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/Collection-d9d92883.js","assets/collectionUtils-e98ed3f0.js","assets/labelUtils-6965a8ca.js","assets/layerUtils-a0871894.js","assets/jsonUtils-7442f08f.js","assets/AttributeStoreView-ba467075.js","assets/TiledDisplayObject-fd49a9f6.js","assets/schemaUtils-5efbd12a.js","assets/serviceCapabilitiesUtils-02cebe9b.js","assets/arcgisLayerUrl-9d6ab56c.js","assets/diffUtils-ac6d6369.js","assets/createSymbolSchema-07e2efee.js","assets/rendererUtils-8077781c.js","assets/capabilities-d3148205.js","assets/FeatureReductionLayer-fd41123b.js","assets/BlendLayer-5cec7349.js","assets/PopupTemplate-63dce4d3.js","assets/number-205e28e0.js","assets/Identifiable-876da2a8.js","assets/UniqueValueRenderer-b6a7d586.js","assets/LegendOptions-8200d5f5.js","assets/colorRamps-fff34da2.js","assets/visualVariableUtils-6f05f98d.js","assets/Graphic-f117754c.js","assets/compilerUtils-8d4f8499.js","assets/jsonUtils-37cc07d7.js","assets/DictionaryLoader-0dadb1e0.js","assets/deprecate-424c57c7.js","assets/OperationalLayer-a420b681.js","assets/ElevationInfo-75e7bf35.js","assets/util-7f828970.js","assets/ComputedAttributeStorage-1b2563c0.js","assets/normalizeUtils-9dc1c489.js","assets/utils-ada6b2ec.js","assets/GraphicContainer-c91358c0.js","assets/BaseGraphicContainer-489a5637.js","assets/FeatureContainer-b1d9c447.js","assets/TileContainer-5d892b13.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-f0fdc8c7.js","assets/requestImageUtils-2eca6bfa.js","assets/Basemap-1b908f31.js","assets/loadAll-f0d5998c.js","assets/PortalItem-a25335a3.js","assets/messages-226fbb40.js","assets/writeUtils-5c3c75bd.js","assets/CollectionFlattener-52a0c7e4.js","assets/TablesMixin-1e04401c.js","assets/Layer-07a07202.js","assets/Cyclical-0205ad3e.js","assets/workers-4f8dfa2f.js","assets/Connection-5e453cc1.js","assets/intl-7c488bb0.js","assets/TileInfo-e107254e.js","assets/widget-945f9e61.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-9750c730.js","assets/AttachmentQuery-c89a8ac2.js","assets/utils-e0744d8b.js","assets/ItemCache-d06df2a7.js","assets/executeForIds-0c62bbcf.js","assets/query-eac603fe.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-bad736cf.js","assets/queryZScale-a0b71b11.js","assets/FeatureSet-00b7d51e.js","assets/RelationshipQuery-a13e27d1.js","assets/TopFeaturesQuery-5bb7c994.js","assets/FeatureLayer-42e1678e.js","assets/MultiOriginJSONSupport-97bf66dd.js","assets/FeatureLayerBase-de1a166f.js","assets/HeightModelInfo-bad6650e.js","assets/editsZScale-b954eebc.js","assets/APIKeyMixin-b93c2049.js","assets/ArcGISService-cca20289.js","assets/CustomParametersMixin-01a04769.js","assets/EditBusLayer-984da402.js","assets/OrderedLayer-9cb8835d.js","assets/PortalLayer-d54f6a39.js","assets/portalItemUtils-72345980.js","assets/RefreshableLayer-672ecb56.js","assets/ScaleRangeLayer-24099455.js","assets/TemporalLayer-c479c738.js","assets/FeatureTemplate-1fd8fac4.js","assets/FeatureType-b736019f.js","assets/fieldProperties-1fb52610.js","assets/versionUtils-aabb6832.js","assets/styleUtils-f45b991d.js","assets/popupUtils-3d5141e6.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-54e19231.js","assets/Scheduler-72fecd6f.js","assets/GraphicsCollection-89010fd9.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/Util-a12911ae.js","assets/MapImageLayer-030c7912.js","assets/scaleUtils-2aca77b2.js","assets/SublayersOwner-3d3675ca.js","assets/Version-bbcb090a.js","assets/QueryTask-809f5bb4.js","assets/imageBitmapUtils-ce029f55.js","assets/pixelRangeUtils-03719dd8.js","assets/commonProperties-da958896.js"])]);$g=i,Lg=e,Tg=t,Ag=s,kg=n,Eg=r}const Fh=160;function eS(i){return i&&i.declaredClass==="esri.Viewpoint"}let G=class extends T_(H0(q0(dI))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new va({getCollections:()=>{var t,s;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new FI(this),this._pePromise=null,this.floors=new ee,this.highlightOptions=new yg,this.inputManager=new wM({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new vg,this.type="2d",this.ui=new xg,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new pg,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([I(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(Fh)},ao),this.on("resize",t=>this._resizeHandler(t)),I(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),Xy()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Jv(this.featuresTilingScheme)}get initialExtentRequired(){var a;const{scale:e,constraints:t,center:s,viewpoint:n,extent:r}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!r&&(t!=null&&t.effectiveLODs||(o=-1),(!s||e===0&&o===-1)&&(!n||!C(n.targetGeometry)||n.targetGeometry.type!=="extent"&&!n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!ur()||(this._pePromise||(this._pePromise=yo().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,s=Ne(e.targetGeometry);return!!go(s.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const s=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(s,s)}get background(){return iS(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new de({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(n){return void q.getLogger(this.declaredClass).error(new L("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const s=this.viewpoint;Sc(s,s,t),this.viewpoint=s}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(I(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},ao),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void q.getLogger(this.declaredClass).error(new L("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(n){return void q.getLogger(this.declaredClass).error(new L("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const s=this.viewpoint;_I(s,s,t,this.size,{constraints:this.constraints}),this.viewpoint=s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;AI(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const s=this._get("extent");return s&&(this._set("extent",null),this._set("center",s.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Ih(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,s,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0));if(St("esri-2d-log-updating")){const r=this.allLayerViews.reduce((o,a)=>({...o,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(r)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,s;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?s=new L("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):O(e.targetGeometry)&&(s=new L("mapview:invalid-viewpoint","geometry not defined"))}catch(r){s=new L("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:r})}if(s)return void q.getLogger(this.declaredClass).error(s);this._scaleBeforeChangingSpatialReference=null;const n=new bi({targetGeometry:new de,scale:0,rotation:0});li(n,t),this.constraints.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this.frameTask.requestFrame(),this._set("viewpoint",n)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const s=this._get("extent");return s&&(this._set("extent",null),this._set("center",s.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;Ih(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),cn(()=>this.ready,t).then(()=>{var r;const s={animate:!0,...t},n=fI(e,this);return(r=this.animation)==null||r.update(n),this._gotoTask={},s.animate?this._gotoAnimated(n,s):this._gotoImmediate(n,s)});q.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const s=yh(e)?fh(this,e):e;if(!this.ready||isNaN(s.x)||isNaN(s.y))return{screenPoint:s,results:[]};let n=new Set,r=!1,o=null,a=null;t!=null&&t.include?Dh(t.include,Oh(this,p=>n.add(p),p=>{o||(o=new Set),o.add(p)},p=>n.add(p),()=>r=!0)):(r=!0,n=new Set(this.allLayerViews)),t!=null&&t.exclude&&Dh(t.exclude,Oh(this,p=>n.delete(p),p=>{a||(a=new Set),a.add(p)}));const c=this.allLayerViews.filter(p=>!p.suspended&&n.has(p)).reverse(),u=this.toMap(s);let h=[...r?this.graphicsView.hitTest(u).map(p=>({type:"graphic",graphic:p,layer:null,mapPoint:u})):[],...await Promise.all(c.map(p=>p.hitTest(u,s)).toArray())].filter(C).flat().filter(C);return o&&(h=h.filter(p=>!("graphic"in p)||!p.graphic||(o==null?void 0:o.has(kc(p.graphic))))),a&&(h=h.filter(p=>!("graphic"in p)||!p.graphic||(a==null?void 0:a.has(kc(p.graphic))))),{screenPoint:s,results:h}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),s=await this._stage.takeScreenshot(t);return MM(s,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),s=await this._stage.takeScreenshot(t);return SM(s,this._pixelFormat)}_createScreenshotPlan(e){e=e??{};const t=this.supersampleScreenshotsEnabled?Math.min(4,$M(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let s;e.layers?(s=[],e.layers.forEach(o=>{const a=this.allLayerViews.find(c=>c.layer.id===o.id);a&&"container"in a&&a.container&&s.push(a.container)})):s=this._stage.children;const{format:n,quality:r}=EM(e.format,e.quality);return IM(e,t,this.size,this.padding,n,r,s,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=yh(e)?fh(this,e):e,s=[0,0],[n,r]=this.state.toMap(s,[t.x,t.y]),o=this.spatialReference;return new de({x:n,y:r,spatialReference:o})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),s=[t.x,t.y];return this.state.toScreen(s,s),Ct(s[0],s[1])}on(e,t,s,n){return this.inputManager&&this.viewEvents.on(e,t,s,n)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,s;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((s=this.defaultsFromMap)==null?void 0:s.spatialReference)||null}hasLayerViewModule(e){return Sh.hasLayerViewModule(e)}importLayerView(e){return Sh.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(q.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=FM(this.type);return St("safari")&&St("safari")<9&&(e=new L("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:St("safari")})),C(e)?(q.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):JM()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Mc),this.animation}_cancellableGoTo(e,t,s){const n=()=>e===this._gotoTask,r=s.then(()=>{n()&&(this.animation=null)}).catch(a=>{throw n()&&(t&&!t.done&&(t.stop(),this.frameTask.animationInProgress=!1),this.animation=null),a}),o=new Promise(a=>a(r));return t.when().catch(()=>{n()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,t){const s=this._gotoTask,n=this.animation,r=e.then(o=>{if(At(t),s!==this._gotoTask)throw new L("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(s,n,r)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<Fh&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var w,b,M,S;const{constraints:e,initialExtent:t,map:s,padding:n,size:r}=this;if(!e)return null;const o=s&&"initialViewProperties"in s?s.initialViewProperties:void 0,a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?a.zoom!==-1&&(a.scale=e.zoomToScale(a.zoom)):a.zoom=-1;let c=null,u=null,h=0;const p=a.viewpoint&&a.viewpoint.rotation,g=a.viewpoint&&a.viewpoint.targetGeometry;C(g)&&(g.type==="extent"?c=g:g.type==="point"&&(u=g,h=a.viewpoint.scale));const f=a.extent||c||((b=Ne((w=o==null?void 0:o.viewpoint)==null?void 0:w.targetGeometry))==null?void 0:b.extent)||t,y=a.center||u||(f==null?void 0:f.center),_=a.scale||h||((M=o==null?void 0:o.viewpoint)==null?void 0:M.scale)||f&&Jr(f,[r[0]-n.left-n.right,r[1]-n.top-n.bottom]),v=a.rotation||p||((S=o==null?void 0:o.viewpoint)==null?void 0:S.rotation)||0;return y&&_?new bi({targetGeometry:y,scale:_,rotation:v}):null}_gotoAnimated(e,t){const s=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const r=e.then(o=>{if(At(t),s!==this._gotoTask)throw new L("view:goto-interrupted","Goto was interrupted");return n.update(o),this.animationManager.animate(n,this.viewpoint,t),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(s,n,r)}_project(e,t){var r;const s=e&&e.targetGeometry||e;if(!t)return e;if(!s)return null;if(t.imageCoordinateSystem||(r=s.spatialReference)!=null&&r.imageCoordinateSystem||cr(t,s.spatialReference))return e;const n=fo(s,t);if(!n)throw new L("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:t});return eS(e)?(e.targetGeometry=n,e):n}_resizeHandler(e){if(!this.ready)return;const t=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],TI(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints.constrain(s,void 0),this.state.viewpoint=s}_startup(){var c,u;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(h){q.getLogger(this.declaredClass).warn(new Ud("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:h})),e.targetGeometry=((c=this.defaultsFromMap.extent)==null?void 0:c.center)||new de({x:0,y:0,spatialReference:this.spatialReference})}(u=this.constraints)==null||u.fit(e),this._set("state",new BI({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const s=new Eg(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=s,this._magnifierView=new kg,this._magnifierView.magnifier=this.magnifier;const n=new Tg({view:this});this._set("labelManager",n);const r=new PI({view:this});this._set("animationManager",r);const o=new Ag({view:this,animationManager:r});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),s.on("post-render",()=>this._set("rendering",s.renderRequested)),s.on("will-render",()=>this._set("rendering",s.renderRequested)),s.on("webgl-error",h=>this.fatalError=h.error),I(()=>this.stationary,h=>s.stationary=h,Ms),I(()=>this.background,h=>{s.background=h,this._magnifierView.background=h},Ms),I(()=>this.magnifier,h=>this._magnifierView.magnifier=h,Ms),I(()=>this.renderingOptions,h=>s.renderingOptions=h,Ms),I(()=>this.highlightOptions,h=>s.highlightOptions=h,Ms),I(()=>this.state.id,()=>s.state=this.state,Ms)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(h=>h(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:s,rotation:n,scale:r}=this.state.paddedViewState,o=new de({x:e,y:t,spatialReference:s});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",r),this._set("spatialReference",s),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new e_(Yr.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new $g({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Lg(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const c of this.allLayerViews)c.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(O(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const c=t.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=c}const s=t.clone(),[n,r]=t.center;let o=null;try{o=this._project(new de({x:n,y:r,spatialReference:t.spatialReference}),e)}catch(c){ur()||q.getLogger(this.declaredClass).warn(new Ud("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:c}))}o||(o=new de({x:0,y:0,spatialReference:e}));const a=Sc(new bi({targetGeometry:new de,scale:0,rotation:0}),t.viewpoint,o);s.viewpoint=a;try{const u=[t.size[0]/2,t.size[1]/2],h=[u[0]+20,u[1]],p=t.toMap([0,0],h),{x:g,y:f}=this._project(new de({x:p[0],y:p[1],spatialReference:t.spatialReference}),e);p[0]=g,p[1]=f,s.toScreen(p,p);const y=$I(u,p,h),_=Math.hypot(p[0]-u[0],p[1]-u[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(a.rotation=0,a.targetGeometry=new de({x:0,y:0,spatialReference:e})):(a.scale*=_,a.scale>St("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(y)?y:0)}catch{}this._get("constraints").constrain(a,void 0),this._get("state").viewpoint=a,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const c of this.allLayerViews)c.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};G.type="2d",l([d({readOnly:!0})],G.prototype,"animationManager",void 0),l([d({constructOnly:!0})],G.prototype,"deactivatedWebGLExtensions",void 0),l([d({constructOnly:!0})],G.prototype,"debugWebGLExtensions",void 0),l([d({readOnly:!0})],G.prototype,"featuresTilingScheme",void 0),l([d({readOnly:!0})],G.prototype,"fullOpacity",void 0),l([d({readOnly:!0})],G.prototype,"graphicsTileStore",null),l([d()],G.prototype,"graphicsView",void 0),l([d({readOnly:!0})],G.prototype,"state",void 0),l([d()],G.prototype,"initialExtentRequired",null),l([d()],G.prototype,"labelManager",void 0),l([d({readOnly:!0})],G.prototype,"resourceManager",null),l([d({readOnly:!0})],G.prototype,"textureManager",null),l([d({readOnly:!0})],G.prototype,"mapViewNavigation",void 0),l([d({constructOnly:!0})],G.prototype,"renderCanvas",void 0),l([d()],G.prototype,"renderingOptions",void 0),l([d({readOnly:!0})],G.prototype,"rendering",void 0),l([d({constructOnly:!0})],G.prototype,"supersampleScreenshotsEnabled",void 0),l([d({readOnly:!0})],G.prototype,"supportsGround",void 0),l([d()],G.prototype,"_stationaryTimer",void 0),l([d()],G.prototype,"_defaultsFromMapSettings",null),l([d()],G.prototype,"_pePromise",void 0),l([d({readOnly:!0})],G.prototype,"typeSpecificPreconditionsReady",null),l([d()],G.prototype,"animation",null),l([d({type:XM})],G.prototype,"background",null),l([d({value:null,type:de,dependsOn:["state.id","ready"]})],G.prototype,"center",null),l([d({type:pg})],G.prototype,"constraints",null),l([d({value:null,type:ai,dependsOn:["state.id","ready"]})],G.prototype,"extent",null),l([d()],G.prototype,"floors",void 0),l([d({type:yg})],G.prototype,"highlightOptions",void 0),l([d({readOnly:!0})],G.prototype,"inputManager",void 0),l([d()],G.prototype,"map",void 0),l([d({value:{top:0,right:0,bottom:0,left:0},cast:i=>({top:0,right:0,bottom:0,left:0,...i})})],G.prototype,"padding",null),l([d()],G.prototype,"resizeAlign",void 0),l([d({readOnly:!0,dependsOn:["state.id"]})],G.prototype,"resolution",null),l([d({value:0,type:Number,dependsOn:["state.id","ready"]})],G.prototype,"rotation",null),l([d({value:0,type:Number,dependsOn:["state.id","ready"]})],G.prototype,"scale",null),l([d({constructOnly:!0})],G.prototype,"spatialReferenceLocked",void 0),l([d()],G.prototype,"stationary",null),l([d({type:vg,readOnly:!0})],G.prototype,"timeline",void 0),l([d({readOnly:!0})],G.prototype,"type",void 0),l([d({readOnly:!0})],G.prototype,"updating",null),l([d({value:null,type:bi,dependsOn:["state.id","ready"]})],G.prototype,"viewpoint",null),l([d({value:-1,dependsOn:["state.id","ready"]})],G.prototype,"zoom",null),l([d({readOnly:!0})],G.prototype,"navigating",null),l([d({type:xg})],G.prototype,"ui",void 0),G=l([$("esri.views.MapView")],G);const tS=G;function kc(i){var t,s;const e=i.getObjectId();return e?`${((t=i.layer)==null?void 0:t.uid)??((s=i.sourceLayer)==null?void 0:s.uid)??"MapView"}/${e}`:`"MapView/${i.uid}`}function Oh(i,e,t,s,n){return r=>{if(r instanceof Si){if(r.layer===i)n==null||n();else{const o=i.allLayerViews.find(a=>a.layer===r.layer);o&&(s==null||s(o))}t(kc(r))}else{const o=i.allLayerViews.find(a=>a.layer===r);o&&e(o)}}}function Dh(i,e){if(i)if(jd(i))for(const t of i)if(jd(t))for(const s of t)e(s);else e(t);else e(i)}function iS(i){return(i==null?void 0:i.declaredClass)==="esri.WebMap"}let sS=class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}},nS=class{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new rS}},rS=class{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}},oS=class{constructor(e,t,s,n){this._workerFunc=e,this._callbackFunc=t,this._maxTotalNumWorkers=s,this._totalNumWorkers=0,this._clients=n.map(r=>new nS(r))}destroy(){this._clients.length=0}hasQuota(e){const t=this._clients[e];return!!t&&(this._totalNumWorkers<this._maxTotalNumWorkers||t.numWorkers+t.tasks.length<t.typeWorkerQuota)}push(e){const t=this._clients[e.client];t&&(this._totalNumWorkers<this._maxTotalNumWorkers?(t.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,(s,n)=>this._taskCallback(s,n))):t.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}_taskFinished(e){const t=this._clients[e.client];this._totalNumWorkers--,t.numWorkers--,t.statistics.requests++,t.statistics.size+=e.size||0,t.statistics.duration+=e.duration||0,t.statistics.speed=t.statistics.duration>0?t.statistics.size/t.statistics.duration:0,Jp(t.numWorkers>=0),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),(t,s)=>this._taskCallback(t,s)))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,t){e._cancelled||(this._callbackFunc(e,t),this._taskFinished(e))}getStatsForType(e){const t=this._clients[e];return t?{quota:t.typeWorkerQuota,workers:t.numWorkers,queueSize:t.tasks.length,requestStats:t.statistics}:null}get test(){const e=this;return{set workerFunc(t){e._workerFunc=t}}}},zl=class extends K{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,s){this._loadQueue=new oS((n,r)=>this._startLoading(n,r),(n,r)=>this._doneLoadingCB(n,r),e,t),s&&(this._frameTask=s.registerTask(Wp.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=Mi(this._frameTask),this._tasks.forEach(e=>ya(e.abortController)),this._loadQueue=nt(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,s,n={}){const r=_y();r.__signal=C(n)?n.signal:null;const o=this._createOrUpdateTask(e,t,s,n,r);return jo(n,()=>this._cancelRequest(o,r)),r.promise}_createTask(e,t,s,n,r,o){const a=new dS(e,t,s,n,r);return this._updateTask(a,o),this._tasks.set(r,a),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(a),a}_cancelRequest(e,t){var s;Ly(e.resolvers,t),t.reject(fa()),e.resolvers.length===0&&(e.status===Qt.DOWNLOADING&&(e.status=Qt.CANCELLED,this._loadQueue.cancel(e),(s=e.abortController)==null||s.abort(),e.request=null,e.abortController=null),e.status=Qt.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,s,n,r){const o=uS(C(n)&&n.uid||e,t,s),a=this._tasks.get(o);return a?(this._updateTask(a,r),a):this._createTask(e,n,t,s,o,r)}_doneLoadingCB(e,t){this._loadQueue&&(Jp(e.status===Qt.DOWNLOADING),e.status=Qt.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();At(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==Qt.DOWNLOADED&&(t.err=t.err||fa()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!lr(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let s=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const n of e.resolvers)if(t)lr(t)?n.reject(t):n.reject(new L("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--s;const r=s<=0?e.result:Qi(e.result);n.resolve(r)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,t){if(e.status===Qt.CANCELLED)return!1;let s,n;switch(e.startTime=performance.now(),e.status=Qt.DOWNLOADING,e.docType){case"binary":n="array-buffer",s=0;break;case"image":n="image";break;case"image+type":n="array-buffer";break;default:n="json"}e.abortController=new AbortController;const r=e.abortController.signal;e.request=ri(e.url,{...e.options,responseType:n,timeout:s,signal:r});let o=()=>{};const a=u=>{e.duration=performance.now()-e.startTime,e.size=u instanceof ArrayBuffer?u.byteLength:e.size||0,e.result=u,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},c=u=>{e.status===Qt.DOWNLOADING&&t(e,u),o()};return e.docType!=="image+type"?(e.request.then(u=>a(u.data),c),!0):(e.request.then(u=>{const h=u.data,p=lS(h);if(n="image",e.size=h.byteLength,p==="unknown")return e.request=ri(e.url,{responseType:n,timeout:s,signal:r}),void e.request.then(y=>a(y.data),c);const g=new Blob([h],{type:p}),f=window.URL.createObjectURL(g);o=()=>window.URL.revokeObjectURL(f),e.request=ri(f,{responseType:n,timeout:s,signal:r}),e.request.then(y=>a(new cS(y.data,p,o)),c)},c),!0)}get test(){return{loadQueue:this._loadQueue}}};l([d({readOnly:!0})],zl.prototype,"updating",void 0),zl=l([$("esri.views.3d.support.StreamDataLoader")],zl);const aS={numRetries:0};function lS(i){if(i.byteLength<2)return"unknown";const e=new Uint8Array(i,0,i.byteLength);return e[0]===137&&e[1]===80?"image/png":e[0]===71&&e[1]===73?"image/gif":e[0]===66&&e[1]===77?"image/bmp":e[0]===255&&e[1]===216?"image/jpeg":"unknown"}let cS=class{constructor(e,t,s){this.image=e,this.type=t,this.release=s}get isOpaque(){return this.type==="image/jpeg"}},dS=class extends sS{constructor(e,t,s,n,r){super(n),this.url=e,this.options=t,this.docType=s,this.key=r,this.result=null,this.status=Qt.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=aS.numRetries}};function uS(i,e,t){return`${i}:${e}:${t}`}var Qt;(function(i){i[i.QUEUED=1]="QUEUED",i[i.DOWNLOADING=2]="DOWNLOADING",i[i.DOWNLOADED=3]="DOWNLOADED",i[i.CANCELLED=4]="CANCELLED"})(Qt||(Qt={}));var Vh,Nh,wi,zh,Bh,Hh,qh;(function(i){i[i.INNER=0]="INNER",i[i.OUTER=1]="OUTER"})(Vh||(Vh={})),function(i){i[i.REGULAR=0]="REGULAR",i[i.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",i[i.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",i[i.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(Nh||(Nh={})),function(i){i[i.NORTH=0]="NORTH",i[i.NORTH_EAST=1]="NORTH_EAST",i[i.EAST=2]="EAST",i[i.SOUTH_EAST=3]="SOUTH_EAST",i[i.SOUTH=4]="SOUTH",i[i.SOUTH_WEST=5]="SOUTH_WEST",i[i.WEST=6]="WEST",i[i.NORTH_WEST=7]="NORTH_WEST"}(wi||(wi={})),function(i){i[i.OFF=0]="OFF",i[i.ON=1]="ON"}(zh||(zh={})),function(i){i[i.Color=0]="Color",i[i.ColorNoRasterImage=1]="ColorNoRasterImage",i[i.Highlight=2]="Highlight",i[i.Water=3]="Water",i[i.Occluded=4]="Occluded",i[i.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}(Bh||(Bh={})),function(i){i[i.FADING=0]="FADING",i[i.IMMEDIATE=1]="IMMEDIATE",i[i.UNFADED=2]="UNFADED"}(Hh||(Hh={})),function(i){i[i.INSIDE=0]="INSIDE",i[i.INTERSECTS=1]="INTERSECTS",i[i.OUTSIDE=2]="OUTSIDE"}(qh||(qh={}));const hS=12;let Zi=class bt{constructor(e){const t=bt.checkUnsupported(e);if(C(t))throw t;const s=Ne(e);this.spatialReference=s.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=Zc(this.spatialReference)||wp(this.spatialReference)||bp(this.spatialReference),this.origin=[s.origin.x,s.origin.y],this.pixelSize=s.size[0],this.dpi=s.dpi;const n=s.lods.reduce((u,h,p)=>(h.level<u.min&&(u.min=h.level,u.minIndex=p),u.max=Math.max(u.max,h.level),u),{min:1/0,minIndex:0,max:-1/0}),r=s.lods[n.minIndex],o=2**r.level;let a=r.resolution*o,c=r.scale*o;this.levels=new Array(n.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:c,tileSize:[a*s.size[0],a*s.size[1]]},a/=2,c/=2}clone(){return new bt(this.toTileInfo())}toTileInfo(){return new Yr({dpi:this.dpi,origin:new de({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,t)=>new Qr({level:t,scale:e.scale,resolution:e.resolution}))})}getExtent(e,t,s,n){const r=this.levels[e],o=r.tileSize[0],a=r.tileSize[1];n[0]=this.origin[0]+s*o,n[2]=this.origin[0]+(s+1)*o,n[3]=this.origin[1]-t*a,n[1]=this.origin[1]-(t+1)*a}convertExtentToRadians(e,t){this._isWebMercator?(t[0]=Zd(e[0]),t[1]=Kd(e[1]),t[2]=Zd(e[2]),t[3]=Kd(e[3])):this._isGCS&&(t[0]=Eo(e[0]),t[1]=Eo(e[1]),t[2]=Eo(e[2]),t[3]=Eo(e[3]))}getExtentGeometry(e,t,s,n=new ai){return this.getExtent(e,t,s,ci),n.spatialReference=this.spatialReference,n.xmin=ci[0],n.ymin=ci[1],n.xmax=ci[2],n.ymax=ci[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(e){if(e==null)return!1;let t=!1;for(;this.levels.length<=e;){const s=this.levels[this.levels.length-1],n=s.resolution/2;this.levels.push({resolution:n,scale:s.scale/2,tileSize:[n*this.pixelSize,n*this.pixelSize]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof bt)){if(bt.checkUnsupported(e))return!1;e=new bt(e)}if(!e.spatialReference.equals(this.spatialReference)||e.pixelSize!==this.pixelSize)return!1;const t=Math.min(this.levels.length,e.levels.length)-1,s=this.levels[t].resolution;let n=.5*s;return!al(e.origin[0],this.origin[0],n)||!al(e.origin[1],this.origin[1],n)?!1:(n=.5*s/2**t/this.pixelSize*hS,al(s,e.levels[t].resolution,n))}rootTilesInExtent(e,t=null,s=1/0){const n=new Array,r=this.levels[0].tileSize;if(O(e)||r[0]===0||r[1]===0)return n;bt.computeRowColExtent(e,r,this.origin,ci);let o=ci[1],a=ci[3],c=ci[0],u=ci[2];const h=u-c,p=a-o;if(h*p>s){const g=Math.floor(Math.sqrt(s));p>g&&(o=o+Math.floor(.5*p)-Math.floor(.5*g),a=o+g),h>g&&(c=c+Math.floor(.5*h)-Math.floor(.5*g),u=c+g)}for(let g=o;g<a;g++)for(let f=c;f<u;f++)n.push([0,g,f]);return C(t)&&(t[0]=this.origin[0]+c*r[0],t[1]=this.origin[1]-a*r[1],t[2]=this.origin[0]+u*r[0],t[3]=this.origin[1]-o*r[1]),n}static computeRowColExtent(e,t,s,n){const r=.001*(e[2]-e[0]+(e[3]-e[1]));n[0]=Math.max(0,Math.floor((e[0]+r-s[0])/t[0])),n[2]=Math.max(0,Math.ceil((e[2]-r-s[0])/t[0])),n[1]=Math.max(0,Math.floor((s[1]-e[3]+r)/t[1])),n[3]=Math.max(0,Math.ceil((s[1]-e[1]-r)/t[1]))}static isPowerOfTwo(e){const t=e.lods,s=t[0].resolution*2**t[0].level;return!t.some(n=>!Uy(n.resolution,s/2**n.level))}static hasGapInLevels(e){const t=e.lods.map(s=>s.level);t.sort((s,n)=>s-n);for(let s=1;s<t.length;s++)if(t[s]!==t[0]+s)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&(t&t-1)==0&&t>=128&&t<=512}static hasOriginPerLODs(e){const t=e.origin;return e.lods.some(s=>s.origin!=null&&(s.origin[0]!==t.x||s.origin[1]!==t.y))}static getMissingTileInfoError(){return new L("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return O(e)?Ld():e.lods.length<1?new L("tilingscheme:generic","Tiling scheme must have at least one level"):bt.isPowerOfTwo(e)?bt.hasGapInLevels(e)?new L("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):bt.tileSizeSupported(e)?bt.hasOriginPerLODs(e)?new L("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new L("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new L("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,t){const s=e[2]-e[0],n=e[3]-e[1],r=Wc(t),o=1.2*Math.max(s,n),a=256,c=96,u=.0254,h=new bt(new Yr({size:[a,a],origin:new de({x:e[0]-.5*(o-s),y:e[3]+.5*(o-n)}),lods:[new Qr({level:0,resolution:o/a,scale:1/(a/c*u/(o*r))})],spatialReference:t}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(e){const t=new bt(bt.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e,t=256,s=16){const n=256/t,r=new bt(new Yr({size:[t,t],origin:new de({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new Qr({level:0,resolution:.703125*n,scale:295497598570834e-6*n})]}));return r.ensureMaxLod(s),r}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}};function Ld(){return new L("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Zi.WebMercatorAuxiliarySphereTileInfo=new Yr({size:[256,256],origin:new de({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Yi.WebMercator}),spatialReference:Yi.WebMercator,lods:[new Qr({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),Zi.WebMercatorAuxiliarySphere=Zi.makeWebMercatorAuxiliarySphere(19);const ci=Wa(),Uh=64;jy(Gy/10);const pS=Wa();Zi.WebMercatorAuxiliarySphere.getExtent(0,0,0,pS);Wa([-180,-90,180,90]);const _n=Ha(),mS=Ha(),Ai=Ha(),ki=Ha();function gS(i,e,t=0){const s=i.extent;if(O(s))return!1;if(t===0)return s_(s,e);const n=Math.min(s[2]-s[0],s[3]-s[1]);return n_(s,e,t*n)}function Fo(i,e,t,s){Wy(_n,t),_n[s]=e[s];const n=ll(_n,_n,e),r=ll(mS,i,e),o=Jd(r,n),a=Jd(n,n);let c;c=o<=0?e:a<=o?t:Zy(_n,e,Cp(n,n,o/a));const u=ll(_n,i,c);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function fS(i,e,t){const s=i.extent;if(O(s))return 0;Ai[0]=s[0],Ai[1]=s[1],Ai[2]=t,ki[0]=s[2],ki[1]=s[3],ki[2]=t;let n=1/0,r=1/0;return e[0]<Ai[0]?n=Fo(e,Ai,ki,0):e[0]>ki[0]&&(n=Fo(e,ki,Ai,0)),e[1]<Ai[1]?r=Fo(e,Ai,ki,1):e[1]>ki[1]&&(r=Fo(e,ki,Ai,1)),Math.min(n,r)}function yS(i,e,t){if(O(i))return Ld();if(i.spatialReference.isGeographic&&!Zc(i.spatialReference))return new L("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const s=Zi.checkUnsupported(i);if(C(s))return s;if(O(t))return new L("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const n=vS(i,t);if(n)return n;const r=i.spatialReference;return C(e)&&!(r.equals(e)||e.isWGS84&&r.isWebMercator)?new L("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function vS(i,e){const t=i.lods,s=t[0].resolution*2**t[0].level,n=[s*i.size[0],s*i.size[1]],r=[i.origin.x,i.origin.y],o=r_(e),a=Wa();Zi.computeRowColExtent(o,n,r,a);const c=(a[2]-a[0])*(a[3]-a[1]);if(c>Uh){const u=t[0].scale*2**t[0].level;let h=Math.max((o[3]-o[1])/i.size[1],(o[2]-o[0])/i.size[0])*u/s;const p=Math.floor(Math.log(h)/Math.log(10));return h=Math.ceil(h/10**p)*10**p,new L("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:h,requiredNumRootTiles:c,allowedNumRootTiles:Uh})}return null}const _S=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:yS,isInsideExtent:gS,tiltToExtentEdge:fS},Symbol.toStringTag,{value:"Module"}));function wS(){return!0}function bS(){return 0}function IS(i,e){if(O(i))return Ld();const t=i.lods.length-1,s=i.spatialReference,n=Zc(s)||wp(s)||bp(s);if(s.isWebMercator){if(!Zi.makeWebMercatorAuxiliarySphere(t).compatibleWith(i))return new L("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new L("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Zi.makeGCSWithTileSize(i.spatialReference,i.size[0],t).compatibleWith(i))return i.spatialReference.isWGS84?new L("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new L("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return C(e)&&!i.spatialReference.equals(e)?new L("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const MS=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:IS,isInsideExtent:wS,tiltToExtentEdge:bS},Symbol.toStringTag,{value:"Module"})),SS={[pr.Global]:MS,[pr.Local]:_S};function Rc(i,e,t,s){return SS[s].checkIfTileInfoSupportedForViewSR(i,t,e)}function CS(i,e,t){const s=Py(i);if(C(s)){if(!ee.isCollection(s))return{tileInfo:s.tileInfo,fullExtent:s.fullExtent};{const n=s.find(r=>Rc(r.tileInfo,r.fullExtent,e,t)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}wi.NORTH,wi.EAST,wi.SOUTH,wi.WEST;wi.NORTH_EAST,wi.SOUTH_EAST,wi.SOUTH_WEST,wi.NORTH_WEST;function xS(i,e){return i!=null&&(e==null||(e===pr.Local?!i.isGeographic||i.isWGS84||i.wkid===br.CGCS2000:i.isWebMercator||i.isWGS84||i.wkid===br.CGCS2000||i.wkid===br.GCSMARS2000||i.wkid===br.GCSMARS2000_SPHERE||i.wkid===br.GCSMOON2000))}async function ES(i,e={}){await LS(i,e),At(e)}async function $S(i,e={}){var o;const{basemap:t,view:s}=i;if(At(e),"spatialReferenceLocked"in s&&!s.spatialReferenceLocked||(await t.load(e),At(e),t.baseLayers.length===0))return;const n=t.baseLayers.getItemAt(0);if(!Fy(n))return;if(t.spatialReference){if(s.spatialReference.equals(t.spatialReference))return;jh()}await n.load(e),At(e);const r=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?(o=n.tileInfo)==null?void 0:o.spatialReference:null]).filter(C);r.length!==0&&r.every(a=>!s.spatialReference.equals(a))&&jh()}function jh(){throw new L("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function LS(i,e){const{basemap:t,view:s}=i;if(await t.load(e),t.baseLayers.length===0)return;const n=t.baseLayers.concat(t.referenceLayers).toArray().filter(o=>!Yd(o)).map(o=>new L("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:o,operationalLayerType:o.operationalLayerType||"unknown"}));if(n.length)throw n[0];const r=t.baseLayers.getItemAt(0);if(Yd(r)){try{await r.load(e)}catch(o){const a="basemap-compatibility:unknown-error",c="Unknown basemap compatibility error",{name:u=a,message:h=c,details:p}=o;throw new L(u,h,p)}TS(r,s)}}function TS(i,e){const t=e.state.viewingMode;if(!t)return;let s,n;if((i==null?void 0:i.type)==="wmts"){const c=CS(i,e.spatialReference,t);if(O(c.tileInfo))throw new L("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");s=c.tileInfo,n=c.fullExtent}else s=i.tileInfo,n=i.fullExtent;if(O(s))return;if(!xS(s.spatialReference,t))throw new L(`basemapgalleryitem:spatial-reference-unsupported-${lu(t)}`,`Basemap spatial reference is unsupported in ${lu(t)} mode`);const r=s.spatialReference.isGeographic,o=(i==null?void 0:i.type)==="vector-tile"?s.getOrCreateCompatible(256,r?1:2):null;if(t===pr.Global){let c=Rc(s,n,null,t);if(c&&(i==null?void 0:i.type)==="vector-tile"&&C(n)&&o&&!Rc(o,n,null,t)&&(c=null),c){const u=s.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new L(`basemapgalleryitem:tiling-scheme-unsupported-${u}-global`,"Basemap tiling scheme is unsupported in global mode",{error:c})}}else if(Zi.checkUnsupported(s))throw new L("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=e.get("basemapTerrain.tilingScheme");if(a&&!a.compatibleWith(s)&&((i==null?void 0:i.type)!=="vector-tile"||!o||!a.compatibleWith(o)))throw new L("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let vi=class extends yr(dn(K)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([I(()=>{var t;return(t=this.basemap)==null?void 0:t.loadStatus},e),I(()=>this.compatibilityFunction,e),I(()=>{var t;return this.view&&"basemapTerrain"in this.view&&((t=this.view.basemapTerrain)==null?void 0:t.tilingScheme)},e),I(()=>{var t;return(t=this.view)==null?void 0:t.ready},e),I(()=>{var t;return(t=this.view)==null?void 0:t.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return b_(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var n;this._cancelRefresh(),this._set("state","loading");const e=(n=this.basemap)==null?void 0:n.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:s}=t;this.compatibilityFunction(this,{signal:s}).then(()=>cn(()=>!this._spatialReferenceTask.updating,s)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(r=>{lr(r)||(this._set("state","error"),this._set("error",r))}),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};l([d({readOnly:!0})],vi.prototype,"_spatialReferenceTask",null),l([d()],vi.prototype,"basemap",null),l([d()],vi.prototype,"compatibilityFunction",void 0),l([d({readOnly:!0})],vi.prototype,"error",void 0),l([d({readOnly:!0})],vi.prototype,"spatialReference",null),l([d({readOnly:!0})],vi.prototype,"state",void 0),l([d()],vi.prototype,"view",void 0),vi=l([$("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],vi);const Rg=vi,Pg=ee.ofType(rr);let Ur=class extends K{constructor(e){super(e),this.basemaps=new Pg}get state(){return"ready"}refresh(){}};l([d({type:Pg})],Ur.prototype,"basemaps",void 0),l([d({readOnly:!0})],Ur.prototype,"state",null),Ur=l([$("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],Ur);const Fg=Ur,Og=ee.ofType(rr);let qi=class extends ar.LoadableMixin(Kp(Fg)){constructor(e){super(e),this._handles=new Ke,this.basemaps=new Og,this.filterFunction=null,this.portal=wo.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([I(()=>{var e,t;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(t=this.portal)==null?void 0:t.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),B)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const s=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(s)}catch(s){if(lr(s))throw s;q.getLogger(this.declaredClass).warn(new L("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:s})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};l([d({readOnly:!0,type:Og})],qi.prototype,"basemaps",void 0),l([d()],qi.prototype,"filterFunction",void 0),l([d({type:wo})],qi.prototype,"portal",void 0),l([d()],qi.prototype,"query",void 0),l([d({readOnly:!0})],qi.prototype,"state",null),l([d()],qi.prototype,"updateBasemapsCallback",void 0),qi=l([$("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],qi);const la=qi,Dg=ee.ofType(Rg);function AS(i){return i&&i.declaredClass==="esri.portal.Portal"}function kS(i){return i&&!(i instanceof la)&&(!!i.portal||!!i.query)}function RS(i){return i&&"basemaps"in i&&"state"in i&&"refresh"in i}let Wt=class extends dn(ar){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new Dg,this.source=new la,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([I(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),We(()=>{var t;return(t=this.source)==null?void 0:t.basemaps},"change",e,{onListenerAdd:e})])}get activeBasemap(){var e,t;return((t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)??null}set activeBasemap(e){var n,r;if(!this.view.map)return;const t=typeof e=="string"?rr.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const s=t.spatialReference||((r=(n=this.items)==null?void 0:n.find(o=>this.basemapEquals(t,o.basemap)))==null?void 0:r.spatialReference);if(s&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const o=this.view.spatialReference;if(C(s)&&!cr(o,s)&&!go(this.view.spatialReference,s)&&!ur())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void yo().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=s,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=t,this._clearOverride("activeBasemap"),C(s)&&!cr(this.view.spatialReference,s)&&(this.view.spatialReference=s)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,items:t,activeBasemap:s}=this;if(e!=="ready")return-1;const n=t.findIndex(r=>r.basemap===s);return n===-1?t.findIndex(r=>this.basemapEquals(r.basemap,s)):n}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?ES:$S}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||ee.isCollection(e)?new Fg({basemaps:e}):AS(e)?new la({portal:e}):kS(e)?new la(e):RS(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return w_(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(ar.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){var n;const e=(n=this.source)==null?void 0:n.basemaps,{view:t,compatibilityFunction:s}=this;this.items.removeAll().forEach(r=>r.destroy()),e&&this.items.addMany(e.map(r=>new Rg({basemap:r,compatibilityFunction:s,view:t})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};l([d()],Wt.prototype,"_loadingProjectionEngine",void 0),l([d()],Wt.prototype,"activeBasemap",null),l([d({readOnly:!0})],Wt.prototype,"activeBasemapIndex",null),l([d()],Wt.prototype,"compatibilityFunction",null),l([d({readOnly:!0,type:Dg})],Wt.prototype,"items",void 0),l([d()],Wt.prototype,"source",void 0),l([rt("source")],Wt.prototype,"castSource",null),l([d({readOnly:!0})],Wt.prototype,"state",null),l([d()],Wt.prototype,"view",void 0),Wt=l([$("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Wt);const PS=Wt,Ri="esri-basemap-gallery",Pt={base:`${Ri} esri-widget esri-widget--panel-height-only`,sourceLoading:`${Ri}--source-loading`,loader:`${Ri}__loader`,item:`${Ri}__item`,itemContainer:`${Ri}__item-container`,itemTitle:`${Ri}__item-title`,itemThumbnail:`${Ri}__item-thumbnail`,selectedItem:`${Ri}__item--selected`,itemError:`${Ri}__item--error`,emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let Vt=class extends Me{constructor(e,t){super(e,t),this._handles=new Ke,this._focusBasemapItemEnabled=!1,this.disabled=!1,this.headingLevel=2,this.iconClass=Pt.widgetIcon,this.messages=null,this.viewModel=new PS}initialize(){const e=this._handles;this.addHandles([We(()=>this.viewModel.items,"change",t=>{const s="basemap-gallery-item-changes",{added:n,moved:r}=t;e.remove(s),e.add([...n,...r].map(o=>I(()=>o.state,()=>this.scheduleRender())),s),this.scheduleRender()}),Ut(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return T(()=>import("./calcite-scrim-34ad65ed.js"),["assets/calcite-scrim-34ad65ed.js","assets/scrim-cf105b6c.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/t9n-6475eb95.js","assets/observers-ec23deda.js","assets/loader-cc767927.js","assets/guid-51402ee7.js"])}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",t=this.disabled||this.viewModel.state==="disabled",s=this.viewModel.items.map((a,c)=>this._renderBasemapGalleryItem(a,c)).toArray(),n={[Pt.sourceLoading]:e,[Pt.disabled]:t},r=e?m("div",{class:Pt.loader,key:"esri-basemap-gallery__loader"}):null,o=e?null:s.length>0?m("ul",{bind:this,"aria-disabled":this.disabled,"aria-label":this.label,class:Pt.itemContainer,key:"esri-basemap-gallery__item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},s):m("div",{class:Pt.emptyMessage,key:"esri-basemap-gallery__empty-message"},m(Ls,{level:this.headingLevel},this.messages.noBasemaps));return m("div",{class:this.classes(Pt.base,n)},r,o)}_getRoundRobinIndex(e,t){return(e+t)%t}_handleKeyDown(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t))return;e.preventDefault();const{items:s,activeBasemapIndex:n}=this.viewModel,r=t==="ArrowUp"||t==="ArrowLeft"?this._getRoundRobinIndex(Math.max(n-1,-1),s.length):this._getRoundRobinIndex(n+1,s.length),o=s.getItemAt(r);(o==null?void 0:o.state)==="ready"&&(this.viewModel.activeBasemap=o.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const t=e.currentTarget["data-item"];t.state==="ready"&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e,t){var _,v;const s=e.basemap.thumbnailUrl||_o("esri/themes/base/images/basemap-toggle-64.svg"),n=e.basemap.title,r=(_=e.basemap.portalItem)==null?void 0:_.snippet,o=((v=e.error)==null?void 0:v.message)||r||n,{viewModel:{state:a,activeBasemapIndex:c}}=this,u=this.disabled||a==="disabled",h=c===t,p=h||c===-1&&t===0?0:-1,g=a==="loading",f={[Pt.selectedItem]:h,[Pt.itemError]:e.state==="error"},y=`basemapgallery-item-${e.uid}`;return m("li",{"aria-checked":h.toString(),"aria-disabled":u.toString(),"aria-labelledby":y,bind:this,class:this.classes(Pt.item,f),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"radio",tabIndex:p,afterUpdate:this._focusBasemapItem,title:o},m("img",{alt:"",class:Pt.itemThumbnail,src:s}),m("div",{id:y,class:Pt.itemTitle},n),e.state==="loading"||h&&g?m("calcite-scrim",null,m("span",{"aria-hidden":"true",role:"presentation",class:Pt.loaderAnimation})):null)}};l([d()],Vt.prototype,"activeBasemap",null),l([d()],Vt.prototype,"disabled",void 0),l([d()],Vt.prototype,"headingLevel",void 0),l([d()],Vt.prototype,"iconClass",void 0),l([d()],Vt.prototype,"label",null),l([d(),ge("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Vt.prototype,"messages",void 0),l([d()],Vt.prototype,"source",null),l([d()],Vt.prototype,"view",null),l([d()],Vt.prototype,"viewModel",void 0),l([ke()],Vt.prototype,"_handleClick",null),Vt=l([$("esri.widgets.BasemapGallery")],Vt);const FS=Vt;let ys=class extends K{constructor(e){super(e),this._viewpointHandle=null,this._handles=new Ke,this.group=null}initialize(){this._handles.add(We(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const s=this.get("view.ui");s&&s.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&Ut(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?Ut(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:s}=this;if(s&&t){const n=Qy(()=>s.type==="3d"?s.camera:s.viewpoint,()=>this._collapse());this._handles.add(n,e),this._viewpointHandle=n}}_collapse(){this.expanded=!1}};l([d({value:!1})],ys.prototype,"autoCollapse",null),l([d({value:!1})],ys.prototype,"expanded",null),l([d()],ys.prototype,"group",void 0),l([d({readOnly:!0})],ys.prototype,"state",null),l([d({value:null})],ys.prototype,"view",null),ys=l([$("esri.widgets.Expand.ExpandViewModel")],ys);const Vg=ys,xt="esri-expand",He={base:`${xt} esri-widget`,modeAuto:`${xt}--auto`,modeDrawer:`${xt}--drawer`,modeFloating:`${xt}--floating`,container:`${xt}__container`,containerExpanded:`${xt}__container--expanded`,panel:`${xt}__panel`,button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:`${xt}__icon--expanded`,iconNumber:`${xt}__icon-number`,iconNumberExpanded:`${xt}__icon-number--expanded`,expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:`${xt}__content`,contentExpanded:`${xt}__content--expanded`,expandMask:`${xt}__mask`,expandMaskExpanded:`${xt}__mask--expanded`};let Fe=class extends Me{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new Vg,this._handleKeyDown=s=>{const{closeOnEsc:n,_toggleButtonEl:r,expanded:o}=this;!o||!n||s.target===r||s.key!=="Escape"||(typeof n=="function"?n(s):n)&&(this.expanded=!1,r==null||r.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:s,expandTooltip:n}=this;return e?s||t.collapse:n||t.expand}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return He.collapseIcon}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return hr(this.content)?this.content.iconClass:He.expandIcon}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={[He.modeAuto]:e==="auto",[He.modeDrawer]:e==="drawer",[He.modeFloating]:e==="floating"};return m("div",{class:this.classes(He.base,t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={[He.containerExpanded]:e};return m("div",{class:this.classes(He.container,t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={[He.expandMaskExpanded]:e};return m("div",{bind:this,onclick:this._toggle,class:this.classes(He.expandMask,t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?m("span",{key:"expand__icon-number",class:He.iconNumber},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?m("span",{key:"expand__expand-icon-number",class:this.classes(He.iconNumber,He.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:s}=this,n={[He.iconExpanded]:s,[e]:s,[t]:!s};return e===t&&(n[e]=!0),m("span",{"aria-hidden":"true",class:this.classes(He.icon,n)})}renderTitle(){return m("span",{class:He.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:s}=this;return m("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":s,"aria-expanded":e?"true":"false",bind:this,class:He.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return m("div",{class:He.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t,content:s}=this,n={[He.contentExpanded]:e},r={id:t,role:"region",class:this.classes(He.content,n)};return typeof s=="string"?m("div",{key:"content__string",innerHTML:s,...r}):hr(s)?m("div",{key:"content__widget",...r},s.render()):s instanceof HTMLElement?m("div",{key:"content__html-element",bind:s,afterCreate:this._attachToNode,...r}):$p(s)?m("div",{key:"content__node",bind:s.domNode,afterCreate:this._attachToNode,...r}):null}_toggle(){this.toggle()}_attachToNode(e){const t=this;e.appendChild(t)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};l([d({readOnly:!0})],Fe.prototype,"contentId",null),l([d({readOnly:!0})],Fe.prototype,"expandTitle",null),l([d()],Fe.prototype,"autoCollapse",null),l([d()],Fe.prototype,"closeOnEsc",void 0),l([d()],Fe.prototype,"collapseIconClass",null),l([d()],Fe.prototype,"collapseTooltip",void 0),l([d()],Fe.prototype,"content",void 0),l([d()],Fe.prototype,"expanded",null),l([d()],Fe.prototype,"expandIconClass",null),l([d()],Fe.prototype,"expandTooltip",void 0),l([d()],Fe.prototype,"group",null),l([d()],Fe.prototype,"iconNumber",void 0),l([d()],Fe.prototype,"label",null),l([d(),ge("esri/widgets/Expand/t9n/Expand")],Fe.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],Fe.prototype,"messagesCommon",void 0),l([d()],Fe.prototype,"mode",void 0),l([d()],Fe.prototype,"view",null),l([d({type:Vg})],Fe.prototype,"viewModel",void 0),l([ke()],Fe.prototype,"_toggle",null),Fe=l([$("esri.widgets.Expand")],Fe);const Ng=Fe;var Pc;let vs=Pc=class extends Kc{constructor(i){super(i),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new Pc({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};l([d()],vs.prototype,"displayValueEnabled",void 0),l([d()],vs.prototype,"max",void 0),l([d()],vs.prototype,"min",void 0),l([d()],vs.prototype,"step",void 0),l([d()],vs.prototype,"value",void 0),vs=Pc=l([$("esri.support.Action.ActionSlider")],vs);const OS=vs,zg={hide:"hide",hideChildren:"hide-children"};function La(i){if(i)return i.listMode!=null?i.listMode:void 0}function DS(i){if(i)return i.minScale!=null?i.minScale:void 0}function VS(i){if(i)return i.maxScale!=null?i.maxScale:void 0}function NS(i){if(!i)return"inherited";const e=i.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const t=i.get("capabilities.exportMap.supportsSublayerVisibility");return typeof t=="boolean"?t?"independent":"inherited":i.visibilityMode!=null?i.visibilityMode:"independent"}function Bg(i){if(i&&(!("type"in i)||i.type!=="wmts")&&i.listMode!==zg.hideChildren)return"sublayers"in i?"sublayers":"layers"in i?"layers":void 0}function zS(i){const e=i&&(i.get("layer.layer")||i.layer);if(!e)return!1;const t=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof t!="boolean"||t}function BS(i){return La(i)!==zg.hide}function HS(i,e){if(!i||isNaN(e))return!1;const t=DS(i),s=VS(i),n=!isNaN(t)&&t>0&&e>t,r=!isNaN(s)&&s>0&&e<s;return n||r}function Hg(i,e){i&&i.sort((t,s)=>{const n=e.indexOf(t.uid),r=e.indexOf(s.uid);return n>r?-1:n<r?1:0})}function qS(i,e){const t=i==null?void 0:i.layer;if(!t)return;const s=Bg(t);s&&Hg(t.get(s),e)}function Gh(i){const e=i==null?void 0:i.layer;return e&&"layers"in e?e.layers:null}function Bl(i,e){var s;const t=(s=i.layer)==null?void 0:s.uid;return t&&e.find(n=>{var r;return((r=n.layer)==null?void 0:r.uid)===t})}function US(i){const e=jS(i)?i:null,t=i==null?void 0:i.parent,s=(t==null?void 0:t.type)==="map-image"&&e.source,n="";return s&&t?{layer:t,title:n,sublayerIds:[s.mapLayerId]}:{layer:i,title:n}}function jS(i){return!!(i!=null&&i.layer)}const qg="esri-layer-list-panel",kr=`${qg}__content`,Pi={base:qg,content:kr,contentLegend:`${kr}--legend`,contentString:`${kr}--string`,contentElement:`${kr}--html-element`,contentWidget:`${kr}--widget`},GS="legends";let Zt=class extends yr(Me){constructor(e,t){super(e,t),this._legend=null,this._handles=new Ke,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(I(()=>this.content,e=>this._createLegend(e),B))}destroy(){const{_legend:e}=this;e&&e.destroy(),this._legend=null}get className(){const{image:e}=this,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""}set className(e){this._override("className",e)}get disabled(){var n;const{listItem:e,_legend:t,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!t&&(!((n=t.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||e?e.label:""}set title(e){this._override("title",e)}render(){return m("div",{class:Pi.base},this._renderContents())}_renderContent(e){const{_legend:t,disabled:s}=this;return!e||s?null:e==="legend"&&t?m("div",{class:this.classes(Pi.content,Pi.contentLegend),key:t},t.render()):typeof e=="string"?m("div",{class:this.classes(Pi.content,Pi.contentString),key:e,innerHTML:e}):hr(e)?m("div",{class:this.classes(Pi.content,Pi.contentWidget),key:e},e.render()):e instanceof HTMLElement?m("div",{class:this.classes(Pi.content,Pi.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._renderContent(t)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:t,view:s}=e;return t&&s?{view:s,layerInfos:[US(t)]}:{}}_createLegend(e){this._hasLegend(e)&&!this._legend&&T(()=>Promise.resolve().then(()=>Lx),void 0).then(({default:t})=>{const{_handles:s,listItem:n}=this,r=new t(this._getLegendOptions());this._legend=r,this.notifyChange("className"),this.notifyChange("title");const o=I(()=>{var a,c;return[n==null?void 0:n.view,n==null?void 0:n.layer,(a=n==null?void 0:n.layer)==null?void 0:a.source,(c=n==null?void 0:n.layer)==null?void 0:c.parent]},()=>this._updateLegend(r),B);s.add(o,GS),this.scheduleRender()})}_hasLegend(e){const t="legend";return e===t||!!Array.isArray(e)&&e.includes(t)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:hr(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let t=null;return e.some(s=>{const n=this._getWidget(s);return n&&(t=n),!!n}),t}return this._getWidget(e)}};l([d()],Zt.prototype,"_legend",void 0),l([d()],Zt.prototype,"className",null),l([d()],Zt.prototype,"content",void 0),l([d()],Zt.prototype,"disabled",null),l([d()],Zt.prototype,"image",void 0),l([d()],Zt.prototype,"listItem",void 0),l([d()],Zt.prototype,"title",null),l([d()],Zt.prototype,"open",void 0),l([d()],Zt.prototype,"visible",void 0),Zt=l([$("esri.widgets.LayerList.ListItemPanel")],Zt);const Ug=Zt;var jr;const WS=ee.ofType({key:"type",defaultKeyValue:"button",base:Kc,typeMap:{button:fr,toggle:Dp,slider:OS}}),jg=ee.ofType(WS),Oo="layer",Hl="child-list-mode",ZS="hide",KS="esri.widgets.LayerList.ListItem";let fe=jr=class extends yr(dn(K)){constructor(i){super(i),this.actionsSections=new jg,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ee.ofType(jr)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([I(()=>this.layer,i=>this._watchLayerProperties(i),B),I(()=>this.checkPublishStatusEnabled,i=>this._updateChildrenPublishing(i),B),I(()=>this.view,i=>this._updateChildrenView(i),B),I(()=>this.panel,i=>this._setListItemOnPanel(i),B),I(()=>[this.layer,this.view],()=>this._getLayerView(),B)]),typeof this.listItemCreatedFunction=="function"){const i={item:this};this.listItemCreatedFunction.call(null,i)}}destroy(){this.view=null}get connectionStatus(){const{layerView:i,publishing:e}=this;if(!e&&i&&"connectionStatus"in i)return i.connectionStatus}get error(){var i;return(i=this.layer)==null?void 0:i.loadError}get incompatible(){const{layerView:i}=this;return!(!i||!("spatialReferenceSupported"in i))&&!i.spatialReferenceSupported}castPanel(i){return this.get("panel.open")&&!i.hasOwnProperty("open")&&(i.open=!0),i?new Ug(i):null}get title(){const i=this.get("layer.layer");return(!i||i&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(i){this._override("title",i)}get publishing(){var t;const{layer:i,checkPublishStatusEnabled:e}=this;return e&&i&&"publishingInfo"in i&&((t=i.publishingInfo)==null?void 0:t.status)==="publishing"}get updating(){const{layerView:i,connectionStatus:e,layer:t,publishing:s}=this;return!s&&!e&&(i?i.updating:(t==null?void 0:t.loadStatus)==="loading"||!1)}get visible(){var i;return(i=this.layer)==null?void 0:i.visible}set visible(i){const e=this.layer;e&&(e.visible=i)}get visibleAtCurrentScale(){return!HS(this.layer,this.get("view.scale"))}get visibilityMode(){return NS(this.layer)}clone(){return new jr({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(i){i&&(i.listItem=this)}_updateChildrenPublishing(i){const e=this.children;e&&e.forEach(t=>t.checkPublishStatusEnabled=i)}_updateChildrenView(i){const e=this.children;e&&e.forEach(t=>t.view=i)}_addChildren(i){if(this.handles.remove(Hl),this.children.removeAll(),!i)return;i.forEach(t=>{this.handles.add(I(()=>t.listMode,()=>this._addChildren(i)),Hl)});const e=i.filter(t=>La(t)!==ZS);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(i){i&&this.handles.add(i.on("change",()=>{this._addChildren(i)}),Oo)}_initializeChildLayers(i){this._addChildren(i),this._watchSublayerChanges(i)}_makeChildren(i){return i.map(e=>BS(e)?new jr({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(C).reverse()}_watchLayerProperties(i){if(!this.handles||(this.handles.remove(Oo),this.handles.remove(Hl),!i))return;if(this.handles.add(I(()=>i.listMode,()=>this._watchLayerProperties(i)),Oo),La(i)==="hide-children")return void this.children.removeAll();const e=Bg(i);e&&this.handles.add(I(()=>i[e],()=>{i.hasOwnProperty(e)&&this._initializeChildLayers(i[e])},B),Oo)}async _getLayerView(){const{layer:i,view:e}=this;if(i&&e)try{const t=await e.whenLayerView(i);if(t.layer!==this.layer)return;this._set("layerView",t)}catch{}}};l([d({type:jg})],fe.prototype,"actionsSections",void 0),l([d()],fe.prototype,"actionsOpen",void 0),l([d()],fe.prototype,"checkPublishStatusEnabled",void 0),l([d({type:ee})],fe.prototype,"children",void 0),l([d()],fe.prototype,"childrenSortable",void 0),l([d({readOnly:!0})],fe.prototype,"connectionStatus",null),l([d({readOnly:!0})],fe.prototype,"error",null),l([d()],fe.prototype,"hidden",void 0),l([d({readOnly:!0})],fe.prototype,"incompatible",null),l([d()],fe.prototype,"layer",void 0),l([d({readOnly:!0})],fe.prototype,"layerView",void 0),l([d()],fe.prototype,"listItemCreatedFunction",void 0),l([d()],fe.prototype,"open",void 0),l([d({type:Ug})],fe.prototype,"panel",void 0),l([rt("panel")],fe.prototype,"castPanel",null),l([d()],fe.prototype,"parent",void 0),l([d()],fe.prototype,"sortable",void 0),l([d()],fe.prototype,"title",null),l([d({readOnly:!0})],fe.prototype,"publishing",null),l([d({readOnly:!0})],fe.prototype,"updating",null),l([d()],fe.prototype,"view",void 0),l([d()],fe.prototype,"visible",null),l([d({readOnly:!0})],fe.prototype,"visibleAtCurrentScale",null),l([d({readOnly:!0})],fe.prototype,"visibilityMode",null),fe=jr=l([$(KS)],fe);const Td=fe,Ft={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode",children:"children"},QS="hide",Gg=ee.ofType(Td);let _s=class extends gr.EventedAccessor{constructor(e){super(e),this._handles=new Ke,this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new Gg,this.view=null}initialize(){this._handles.add([I(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),B),I(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],Ft.view)}destroy(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,s,n){var f,y;const r=e==null?void 0:e.layer;if(!r)return;const o=(y=(f=this.view)==null?void 0:f.map)==null?void 0:y.layers,a=t?Gh(t):o,c=s?Gh(s):o;if(!a||!c)return;const{operationalItems:u}=this,h=(t==null?void 0:t.children)||u,p=(s==null?void 0:s.children)||u,g=c.length-n;e.parent=s||null,h.includes(e)&&h.remove(e),a.includes(r)&&a.remove(r),p.includes(e)||p.add(e,g),c.includes(r)||c.add(r,g)}_createLayerViewHandles(e){const{_handles:t}=this;t.remove(Ft.layerViews),this._compileList(),e&&t.add(e.on("change",()=>this._compileList()),Ft.layerViews)}_createMapLayerHandles(e){const{_handles:t}=this;t.remove(Ft.mapLayers),this._compileList(),e&&t.add(e.on("change",()=>this._compileList()),Ft.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:s,checkPublishStatusEnabled:n}=this;return new Td({checkPublishStatusEnabled:n,layer:e,listItemCreatedFunction:s,view:t})}_removeAllItems(){const{_handles:e,operationalItems:t}=this;t.forEach(s=>{e.remove(`${Ft.children}-${s.uid}`)}),t.removeAll()}_getViewableLayers(e){if(e)return e.filter(t=>La(t)!==QS)}_watchLayersListMode(e){const{_handles:t}=this;t.remove(Ft.layerListMode),e&&e.forEach(s=>{"listMode"in s&&t.add(I(()=>s.listMode,()=>this._compileList()),Ft.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(s=>{t.find(n=>n.layer===s)||t.add(this._createListItem(s))})}_removeItems(e){const{_handles:t,operationalItems:s}=this,n=[];s.forEach(r=>{r&&e&&e.includes(r.layer)||(t.remove(`${Ft.children}-${r.uid}`),n.push(r))}),s.removeMany(n)}_sortItems(e){const{operationalItems:t}=this;t.sort((s,n)=>{const r=e.indexOf(s.layer),o=e.indexOf(n.layer);return r>o?-1:r<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{_handles:e,view:t}=this;e.remove([Ft.mapLayers,Ft.layerViews,Ft.viewLayers]),this._compileList(),t&&t.ready&&e.add([I(()=>{var s,n;return(n=(s=this.view)==null?void 0:s.map)==null?void 0:n.allLayers},s=>this._createMapLayerHandles(s),B),I(()=>{var s;return(s=this.view)==null?void 0:s.allLayerViews},s=>this._createLayerViewHandles(s),B)],Ft.viewLayers)}};l([d()],_s.prototype,"checkPublishStatusEnabled",void 0),l([d()],_s.prototype,"listItemCreatedFunction",void 0),l([d({type:Gg})],_s.prototype,"operationalItems",void 0),l([d({readOnly:!0})],_s.prototype,"state",null),l([d()],_s.prototype,"view",void 0),_s=l([$("esri.widgets.LayerList.LayerListViewModel")],_s);const Wg=_s;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Wh(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,s)}return t}function Ci(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wh(Object(t),!0).forEach(function(s){YS(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Wh(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function ca(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ca=function(e){return typeof e}:ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(i)}function YS(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ji(){return Ji=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Ji.apply(this,arguments)}function XS(i,e){if(i==null)return{};var t={},s=Object.keys(i),n,r;for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}function JS(i,e){if(i==null)return{};var t=XS(i,e),s,n;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(n=0;n<r.length;n++)s=r[n],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(t[s]=i[s])}return t}var eC="1.15.0";function Ki(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var es=Ki(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Mo=Ki(/Edge/i),Zh=Ki(/firefox/i),eo=Ki(/safari/i)&&!Ki(/chrome/i)&&!Ki(/android/i),Zg=Ki(/iP(ad|od|hone)/i),Kg=Ki(/chrome/i)&&Ki(/android/i),Qg={capture:!1,passive:!1};function ce(i,e,t){i.addEventListener(e,t,!es&&Qg)}function re(i,e,t){i.removeEventListener(e,t,!es&&Qg)}function Ta(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function tC(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function _i(i,e,t,s){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&Ta(i,e):Ta(i,e))||s&&i===t)return i;if(i===t)break}while(i=tC(i))}return null}var Kh=/\s+/g;function Nt(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var s=(" "+i.className+" ").replace(Kh," ").replace(" "+e+" "," ");i.className=(s+(t?" "+e:"")).replace(Kh," ")}}function W(i,e,t){var s=i&&i.style;if(s){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=t+(typeof t=="string"?"":"px")}}function Jn(i,e){var t="";if(typeof i=="string")t=i;else do{var s=W(i,"transform");s&&s!=="none"&&(t=s+" "+t)}while(!e&&(i=i.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function Yg(i,e,t){if(i){var s=i.getElementsByTagName(e),n=0,r=s.length;if(t)for(;n<r;n++)t(s[n],n);return s}return[]}function Ii(){var i=document.scrollingElement;return i||document.documentElement}function et(i,e,t,s,n){if(!(!i.getBoundingClientRect&&i!==window)){var r,o,a,c,u,h,p;if(i!==window&&i.parentNode&&i!==Ii()?(r=i.getBoundingClientRect(),o=r.top,a=r.left,c=r.bottom,u=r.right,h=r.height,p=r.width):(o=0,a=0,c=window.innerHeight,u=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||t)&&i!==window&&(n=n||i.parentNode,!es))do if(n&&n.getBoundingClientRect&&(W(n,"transform")!=="none"||t&&W(n,"position")!=="static")){var g=n.getBoundingClientRect();o-=g.top+parseInt(W(n,"border-top-width")),a-=g.left+parseInt(W(n,"border-left-width")),c=o+r.height,u=a+r.width;break}while(n=n.parentNode);if(s&&i!==window){var f=Jn(n||i),y=f&&f.a,_=f&&f.d;f&&(o/=_,a/=y,p/=y,h/=_,c=o+h,u=a+p)}return{top:o,left:a,bottom:c,right:u,width:p,height:h}}}function Qh(i,e,t){for(var s=$s(i,!0),n=et(i)[e];s;){var r=et(s)[t],o=void 0;if(t==="top"||t==="left"?o=n>=r:o=n<=r,!o)return s;if(s===Ii())break;s=$s(s,!1)}return!1}function mr(i,e,t,s){for(var n=0,r=0,o=i.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==Z.ghost&&(s||o[r]!==Z.dragged)&&_i(o[r],t.draggable,i,!1)){if(n===e)return o[r];n++}r++}return null}function Ad(i,e){for(var t=i.lastElementChild;t&&(t===Z.ghost||W(t,"display")==="none"||e&&!Ta(t,e));)t=t.previousElementSibling;return t||null}function Yt(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==Z.clone&&(!e||Ta(i,e))&&t++;return t}function Yh(i){var e=0,t=0,s=Ii();if(i)do{var n=Jn(i),r=n.a,o=n.d;e+=i.scrollLeft*r,t+=i.scrollTop*o}while(i!==s&&(i=i.parentNode));return[e,t]}function iC(i,e){for(var t in i)if(i.hasOwnProperty(t)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===i[t][s])return Number(t)}return-1}function $s(i,e){if(!i||!i.getBoundingClientRect)return Ii();var t=i,s=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=W(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ii();if(s||e)return t;s=!0}}while(t=t.parentNode);return Ii()}function sC(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function ql(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var to;function Xg(i,e){return function(){if(!to){var t=arguments,s=this;t.length===1?i.call(s,t[0]):i.apply(s,t),to=setTimeout(function(){to=void 0},e)}}}function nC(){clearTimeout(to),to=void 0}function Jg(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function ef(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}var Ht="Sortable"+new Date().getTime();function rC(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(n){if(!(W(n,"display")==="none"||n===Z.ghost)){i.push({target:n,rect:et(n)});var r=Ci({},i[i.length-1].rect);if(n.thisAnimationDuration){var o=Jn(n,!0);o&&(r.top-=o.f,r.left-=o.e)}n.fromRect=r}})}},addAnimationState:function(s){i.push(s)},removeAnimationState:function(s){i.splice(iC(i,{target:s}),1)},animateAll:function(s){var n=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var r=!1,o=0;i.forEach(function(a){var c=0,u=a.target,h=u.fromRect,p=et(u),g=u.prevFromRect,f=u.prevToRect,y=a.rect,_=Jn(u,!0);_&&(p.top-=_.f,p.left-=_.e),u.toRect=p,u.thisAnimationDuration&&ql(g,p)&&!ql(h,p)&&(y.top-p.top)/(y.left-p.left)===(h.top-p.top)/(h.left-p.left)&&(c=aC(y,g,f,n.options)),ql(p,h)||(u.prevFromRect=h,u.prevToRect=p,c||(c=n.options.animation),n.animate(u,y,p,c)),c&&(r=!0,o=Math.max(o,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(e),r?e=setTimeout(function(){typeof s=="function"&&s()},o):typeof s=="function"&&s(),i=[]},animate:function(s,n,r,o){if(o){W(s,"transition",""),W(s,"transform","");var a=Jn(this.el),c=a&&a.a,u=a&&a.d,h=(n.left-r.left)/(c||1),p=(n.top-r.top)/(u||1);s.animatingX=!!h,s.animatingY=!!p,W(s,"transform","translate3d("+h+"px,"+p+"px,0)"),this.forRepaintDummy=oC(s),W(s,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),W(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){W(s,"transition",""),W(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},o)}}}}function oC(i){return i.offsetWidth}function aC(i,e,t,s){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*s.animation}var wn=[],Ul={initializeByDefault:!0},So={mount:function(e){for(var t in Ul)Ul.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ul[t]);wn.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),wn.push(e)},pluginEvent:function(e,t,s){var n=this;this.eventCanceled=!1,s.cancel=function(){n.eventCanceled=!0};var r=e+"Global";wn.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](Ci({sortable:t},s)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Ci({sortable:t},s)))})},initializePlugins:function(e,t,s,n){wn.forEach(function(a){var c=a.pluginName;if(!(!e.options[c]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[c]=u,Ji(s,u.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);typeof o<"u"&&(e.options[r]=o)}},getEventProperties:function(e,t){var s={};return wn.forEach(function(n){typeof n.eventProperties=="function"&&Ji(s,n.eventProperties.call(t[n.pluginName],e))}),s},modifyOption:function(e,t,s){var n;return wn.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(n=r.optionListeners[t].call(e[r.pluginName],s))}),n}};function lC(i){var e=i.sortable,t=i.rootEl,s=i.name,n=i.targetEl,r=i.cloneEl,o=i.toEl,a=i.fromEl,c=i.oldIndex,u=i.newIndex,h=i.oldDraggableIndex,p=i.newDraggableIndex,g=i.originalEvent,f=i.putSortable,y=i.extraEventProperties;if(e=e||t&&t[Ht],!!e){var _,v=e.options,w="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!es&&!Mo?_=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(s,!0,!0)),_.to=o||t,_.from=a||t,_.item=n||t,_.clone=r,_.oldIndex=c,_.newIndex=u,_.oldDraggableIndex=h,_.newDraggableIndex=p,_.originalEvent=g,_.pullMode=f?f.lastPutMode:void 0;var b=Ci(Ci({},y),So.getEventProperties(s,e));for(var M in b)_[M]=b[M];t&&t.dispatchEvent(_),v[w]&&v[w].call(e,_)}}var cC=["evt"],Et=function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.evt,r=JS(s,cC);So.pluginEvent.bind(Z)(e,t,Ci({dragEl:P,parentEl:Oe,ghostEl:X,rootEl:xe,nextEl:Xs,lastDownEl:da,cloneEl:Ae,cloneHidden:xs,dragStarted:Gr,putSortable:lt,activeSortable:Z.active,originalEvent:n,oldIndex:Zn,oldDraggableIndex:io,newIndex:Bt,newDraggableIndex:Cs,hideGhostForTarget:rf,unhideGhostForTarget:of,cloneNowHidden:function(){xs=!0},cloneNowShown:function(){xs=!1},dispatchSortableEvent:function(a){It({sortable:t,name:a,originalEvent:n})}},r))};function It(i){lC(Ci({putSortable:lt,cloneEl:Ae,targetEl:P,rootEl:xe,oldIndex:Zn,oldDraggableIndex:io,newIndex:Bt,newDraggableIndex:Cs},i))}var P,Oe,X,xe,Xs,da,Ae,xs,Zn,Bt,io,Cs,Do,lt,On=!1,Aa=!1,ka=[],Vs,ei,jl,Gl,Xh,Jh,Gr,bn,so,no=!1,Vo=!1,ua,ht,Wl=[],Fc=!1,Ra=[],sl=typeof document<"u",No=Zg,ep=Mo||es?"cssFloat":"float",dC=sl&&!Kg&&!Zg&&"draggable"in document.createElement("div"),tf=function(){if(sl){if(es)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),sf=function(e,t){var s=W(e),n=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),r=mr(e,0,t),o=mr(e,1,t),a=r&&W(r),c=o&&W(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+et(r).width,h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+et(o).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(c.clear==="both"||c.clear===p)?"vertical":"horizontal"}return r&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=n&&s[ep]==="none"||o&&s[ep]==="none"&&u+h>n)?"vertical":"horizontal"},uC=function(e,t,s){var n=s?e.left:e.top,r=s?e.right:e.bottom,o=s?e.width:e.height,a=s?t.left:t.top,c=s?t.right:t.bottom,u=s?t.width:t.height;return n===a||r===c||n+o/2===a+u/2},hC=function(e,t){var s;return ka.some(function(n){var r=n[Ht].options.emptyInsertThreshold;if(!(!r||Ad(n))){var o=et(n),a=e>=o.left-r&&e<=o.right+r,c=t>=o.top-r&&t<=o.bottom+r;if(a&&c)return s=n}}),s},nf=function(e){function t(r,o){return function(a,c,u,h){var p=a.options.group.name&&c.options.group.name&&a.options.group.name===c.options.group.name;if(r==null&&(o||p))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return t(r(a,c,u,h),o)(a,c,u,h);var g=(o?a:c).options.group.name;return r===!0||typeof r=="string"&&r===g||r.join&&r.indexOf(g)>-1}}var s={},n=e.group;(!n||ca(n)!="object")&&(n={name:n}),s.name=n.name,s.checkPull=t(n.pull,!0),s.checkPut=t(n.put),s.revertClone=n.revertClone,e.group=s},rf=function(){!tf&&X&&W(X,"display","none")},of=function(){!tf&&X&&W(X,"display","")};sl&&!Kg&&document.addEventListener("click",function(i){if(Aa)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Aa=!1,!1},!0);var Ns=function(e){if(P){e=e.touches?e.touches[0]:e;var t=hC(e.clientX,e.clientY);if(t){var s={};for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);s.target=s.rootEl=t,s.preventDefault=void 0,s.stopPropagation=void 0,t[Ht]._onDragOver(s)}}},pC=function(e){P&&P.parentNode[Ht]._isOutsideThisEl(e.target)};function Z(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=Ji({},e),i[Ht]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return sf(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Z.supportPointer!==!1&&"PointerEvent"in window&&!eo,emptyInsertThreshold:5};So.initializePlugins(this,i,t);for(var s in t)!(s in e)&&(e[s]=t[s]);nf(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:dC,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ce(i,"pointerdown",this._onTapStart):(ce(i,"mousedown",this._onTapStart),ce(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(ce(i,"dragover",this),ce(i,"dragenter",this)),ka.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ji(this,rC())}Z.prototype={constructor:Z,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(bn=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,P):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,s=this.el,n=this.options,r=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,h=n.filter;if(bC(s),!P&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&eo&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=_i(c,n.draggable,s,!1),!(c&&c.animated)&&da!==c)){if(Zn=Yt(c),io=Yt(c,n.draggable),typeof h=="function"){if(h.call(this,e,c,this)){It({sortable:t,rootEl:u,name:"filter",targetEl:c,toEl:s,fromEl:s}),Et("filter",t,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(p){if(p=_i(u,p.trim(),s,!1),p)return It({sortable:t,rootEl:p,name:"filter",targetEl:c,fromEl:s,toEl:s}),Et("filter",t,{evt:e}),!0}),h)){r&&e.cancelable&&e.preventDefault();return}n.handle&&!_i(u,n.handle,s,!1)||this._prepareDragStart(e,a,c)}}},_prepareDragStart:function(e,t,s){var n=this,r=n.el,o=n.options,a=r.ownerDocument,c;if(s&&!P&&s.parentNode===r){var u=et(s);if(xe=r,P=s,Oe=P.parentNode,Xs=P.nextSibling,da=s,Do=o.group,Z.dragged=P,Vs={target:P,clientX:(t||e).clientX,clientY:(t||e).clientY},Xh=Vs.clientX-u.left,Jh=Vs.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,P.style["will-change"]="all",c=function(){if(Et("delayEnded",n,{evt:e}),Z.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Zh&&n.nativeDraggable&&(P.draggable=!0),n._triggerDragStart(e,t),It({sortable:n,name:"choose",originalEvent:e}),Nt(P,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){Yg(P,h.trim(),Zl)}),ce(a,"dragover",Ns),ce(a,"mousemove",Ns),ce(a,"touchmove",Ns),ce(a,"mouseup",n._onDrop),ce(a,"touchend",n._onDrop),ce(a,"touchcancel",n._onDrop),Zh&&this.nativeDraggable&&(this.options.touchStartThreshold=4,P.draggable=!0),Et("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Mo||es))){if(Z.eventCanceled){this._onDrop();return}ce(a,"mouseup",n._disableDelayedDrag),ce(a,"touchend",n._disableDelayedDrag),ce(a,"touchcancel",n._disableDelayedDrag),ce(a,"mousemove",n._delayedDragTouchMoveHandler),ce(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&ce(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(c,o.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){P&&Zl(P),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;re(e,"mouseup",this._disableDelayedDrag),re(e,"touchend",this._disableDelayedDrag),re(e,"touchcancel",this._disableDelayedDrag),re(e,"mousemove",this._delayedDragTouchMoveHandler),re(e,"touchmove",this._delayedDragTouchMoveHandler),re(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?ce(document,"pointermove",this._onTouchMove):t?ce(document,"touchmove",this._onTouchMove):ce(document,"mousemove",this._onTouchMove):(ce(P,"dragend",this),ce(xe,"dragstart",this._onDragStart));try{document.selection?ha(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(On=!1,xe&&P){Et("dragStarted",this,{evt:t}),this.nativeDraggable&&ce(document,"dragover",pC);var s=this.options;!e&&Nt(P,s.dragClass,!1),Nt(P,s.ghostClass,!0),Z.active=this,e&&this._appendGhost(),It({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ei){this._lastX=ei.clientX,this._lastY=ei.clientY,rf();for(var e=document.elementFromPoint(ei.clientX,ei.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ei.clientX,ei.clientY),e!==t);)t=e;if(P.parentNode[Ht]._isOutsideThisEl(e),t)do{if(t[Ht]){var s=void 0;if(s=t[Ht]._onDragOver({clientX:ei.clientX,clientY:ei.clientY,target:e,rootEl:t}),s&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);of()}},_onTouchMove:function(e){if(Vs){var t=this.options,s=t.fallbackTolerance,n=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=X&&Jn(X,!0),a=X&&o&&o.a,c=X&&o&&o.d,u=No&&ht&&Yh(ht),h=(r.clientX-Vs.clientX+n.x)/(a||1)+(u?u[0]-Wl[0]:0)/(a||1),p=(r.clientY-Vs.clientY+n.y)/(c||1)+(u?u[1]-Wl[1]:0)/(c||1);if(!Z.active&&!On){if(s&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(X){o?(o.e+=h-(jl||0),o.f+=p-(Gl||0)):o={a:1,b:0,c:0,d:1,e:h,f:p};var g="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");W(X,"webkitTransform",g),W(X,"mozTransform",g),W(X,"msTransform",g),W(X,"transform",g),jl=h,Gl=p,ei=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!X){var e=this.options.fallbackOnBody?document.body:xe,t=et(P,!0,No,!0,e),s=this.options;if(No){for(ht=e;W(ht,"position")==="static"&&W(ht,"transform")==="none"&&ht!==document;)ht=ht.parentNode;ht!==document.body&&ht!==document.documentElement?(ht===document&&(ht=Ii()),t.top+=ht.scrollTop,t.left+=ht.scrollLeft):ht=Ii(),Wl=Yh(ht)}X=P.cloneNode(!0),Nt(X,s.ghostClass,!1),Nt(X,s.fallbackClass,!0),Nt(X,s.dragClass,!0),W(X,"transition",""),W(X,"transform",""),W(X,"box-sizing","border-box"),W(X,"margin",0),W(X,"top",t.top),W(X,"left",t.left),W(X,"width",t.width),W(X,"height",t.height),W(X,"opacity","0.8"),W(X,"position",No?"absolute":"fixed"),W(X,"zIndex","100000"),W(X,"pointerEvents","none"),Z.ghost=X,e.appendChild(X),W(X,"transform-origin",Xh/parseInt(X.style.width)*100+"% "+Jh/parseInt(X.style.height)*100+"%")}},_onDragStart:function(e,t){var s=this,n=e.dataTransfer,r=s.options;if(Et("dragStart",this,{evt:e}),Z.eventCanceled){this._onDrop();return}Et("setupClone",this),Z.eventCanceled||(Ae=ef(P),Ae.removeAttribute("id"),Ae.draggable=!1,Ae.style["will-change"]="",this._hideClone(),Nt(Ae,this.options.chosenClass,!1),Z.clone=Ae),s.cloneId=ha(function(){Et("clone",s),!Z.eventCanceled&&(s.options.removeCloneOnHide||xe.insertBefore(Ae,P),s._hideClone(),It({sortable:s,name:"clone"}))}),!t&&Nt(P,r.dragClass,!0),t?(Aa=!0,s._loopId=setInterval(s._emulateDragOver,50)):(re(document,"mouseup",s._onDrop),re(document,"touchend",s._onDrop),re(document,"touchcancel",s._onDrop),n&&(n.effectAllowed="move",r.setData&&r.setData.call(s,n,P)),ce(document,"drop",s),W(P,"transform","translateZ(0)")),On=!0,s._dragStartId=ha(s._dragStarted.bind(s,t,e)),ce(document,"selectstart",s),Gr=!0,eo&&W(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,s=e.target,n,r,o,a=this.options,c=a.group,u=Z.active,h=Do===c,p=a.sort,g=lt||u,f,y=this,_=!1;if(Fc)return;function v(Se,kt){Et(Se,y,Ci({evt:e,isOwner:h,axis:f?"vertical":"horizontal",revert:o,dragRect:n,targetRect:r,canSort:p,fromSortable:g,target:s,completed:b,onMove:function(_r,Fs){return zo(xe,t,P,n,_r,et(_r),e,Fs)},changed:M},kt))}function w(){v("dragOverAnimationCapture"),y.captureAnimationState(),y!==g&&g.captureAnimationState()}function b(Se){return v("dragOverCompleted",{insertion:Se}),Se&&(h?u._hideClone():u._showClone(y),y!==g&&(Nt(P,lt?lt.options.ghostClass:u.options.ghostClass,!1),Nt(P,a.ghostClass,!0)),lt!==y&&y!==Z.active?lt=y:y===Z.active&&lt&&(lt=null),g===y&&(y._ignoreWhileAnimating=s),y.animateAll(function(){v("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(s===P&&!P.animated||s===t&&!s.animated)&&(bn=null),!a.dragoverBubble&&!e.rootEl&&s!==document&&(P.parentNode[Ht]._isOutsideThisEl(e.target),!Se&&Ns(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),_=!0}function M(){Bt=Yt(P),Cs=Yt(P,a.draggable),It({sortable:y,name:"change",toEl:t,newIndex:Bt,newDraggableIndex:Cs,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=_i(s,a.draggable,t,!0),v("dragOver"),Z.eventCanceled)return _;if(P.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||y._ignoreWhileAnimating===s)return b(!1);if(Aa=!1,u&&!a.disabled&&(h?p||(o=Oe!==xe):lt===this||(this.lastPutMode=Do.checkPull(this,u,P,e))&&c.checkPut(this,u,P,e))){if(f=this._getDirection(e,s)==="vertical",n=et(P),v("dragOverValid"),Z.eventCanceled)return _;if(o)return Oe=xe,w(),this._hideClone(),v("revert"),Z.eventCanceled||(Xs?xe.insertBefore(P,Xs):xe.appendChild(P)),b(!0);var S=Ad(t,a.draggable);if(!S||yC(e,f,this)&&!S.animated){if(S===P)return b(!1);if(S&&t===e.target&&(s=S),s&&(r=et(s)),zo(xe,t,P,n,s,r,e,!!s)!==!1)return w(),S&&S.nextSibling?t.insertBefore(P,S.nextSibling):t.appendChild(P),Oe=t,M(),b(!0)}else if(S&&fC(e,f,this)){var x=mr(t,0,a,!0);if(x===P)return b(!1);if(s=x,r=et(s),zo(xe,t,P,n,s,r,e,!1)!==!1)return w(),t.insertBefore(P,x),Oe=t,M(),b(!0)}else if(s.parentNode===t){r=et(s);var A=0,k,te=P.parentNode!==t,U=!uC(P.animated&&P.toRect||n,s.animated&&s.toRect||r,f),J=f?"top":"left",oe=Qh(s,"top","top")||Qh(P,"top","top"),Le=oe?oe.scrollTop:void 0;bn!==s&&(k=r[J],no=!1,Vo=!U&&a.invertSwap||te),A=vC(e,s,r,f,U?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Vo,bn===s);var Re;if(A!==0){var _e=Yt(P);do _e-=A,Re=Oe.children[_e];while(Re&&(W(Re,"display")==="none"||Re===X))}if(A===0||Re===s)return b(!1);bn=s,so=A;var Qe=s.nextElementSibling,Ye=!1;Ye=A===1;var Be=zo(xe,t,P,n,s,r,e,Ye);if(Be!==!1)return(Be===1||Be===-1)&&(Ye=Be===1),Fc=!0,setTimeout(gC,30),w(),Ye&&!Qe?t.appendChild(P):s.parentNode.insertBefore(P,Ye?Qe:s),oe&&Jg(oe,0,Le-oe.scrollTop),Oe=P.parentNode,k!==void 0&&!Vo&&(ua=Math.abs(k-et(s)[J])),M(),b(!0)}if(t.contains(P))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){re(document,"mousemove",this._onTouchMove),re(document,"touchmove",this._onTouchMove),re(document,"pointermove",this._onTouchMove),re(document,"dragover",Ns),re(document,"mousemove",Ns),re(document,"touchmove",Ns)},_offUpEvents:function(){var e=this.el.ownerDocument;re(e,"mouseup",this._onDrop),re(e,"touchend",this._onDrop),re(e,"pointerup",this._onDrop),re(e,"touchcancel",this._onDrop),re(document,"selectstart",this)},_onDrop:function(e){var t=this.el,s=this.options;if(Bt=Yt(P),Cs=Yt(P,s.draggable),Et("drop",this,{evt:e}),Oe=P&&P.parentNode,Bt=Yt(P),Cs=Yt(P,s.draggable),Z.eventCanceled){this._nulling();return}On=!1,Vo=!1,no=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Oc(this.cloneId),Oc(this._dragStartId),this.nativeDraggable&&(re(document,"drop",this),re(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),eo&&W(document.body,"user-select",""),W(P,"transform",""),e&&(Gr&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),X&&X.parentNode&&X.parentNode.removeChild(X),(xe===Oe||lt&&lt.lastPutMode!=="clone")&&Ae&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),P&&(this.nativeDraggable&&re(P,"dragend",this),Zl(P),P.style["will-change"]="",Gr&&!On&&Nt(P,lt?lt.options.ghostClass:this.options.ghostClass,!1),Nt(P,this.options.chosenClass,!1),It({sortable:this,name:"unchoose",toEl:Oe,newIndex:null,newDraggableIndex:null,originalEvent:e}),xe!==Oe?(Bt>=0&&(It({rootEl:Oe,name:"add",toEl:Oe,fromEl:xe,originalEvent:e}),It({sortable:this,name:"remove",toEl:Oe,originalEvent:e}),It({rootEl:Oe,name:"sort",toEl:Oe,fromEl:xe,originalEvent:e}),It({sortable:this,name:"sort",toEl:Oe,originalEvent:e})),lt&&lt.save()):Bt!==Zn&&Bt>=0&&(It({sortable:this,name:"update",toEl:Oe,originalEvent:e}),It({sortable:this,name:"sort",toEl:Oe,originalEvent:e})),Z.active&&((Bt==null||Bt===-1)&&(Bt=Zn,Cs=io),It({sortable:this,name:"end",toEl:Oe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Et("nulling",this),xe=P=Oe=X=Xs=Ae=da=xs=Vs=ei=Gr=Bt=Cs=Zn=io=bn=so=lt=Do=Z.dragged=Z.ghost=Z.clone=Z.active=null,Ra.forEach(function(e){e.checked=!0}),Ra.length=jl=Gl=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":P&&(this._onDragOver(e),mC(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,s=this.el.children,n=0,r=s.length,o=this.options;n<r;n++)t=s[n],_i(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||wC(t));return e},sort:function(e,t){var s={},n=this.el;this.toArray().forEach(function(r,o){var a=n.children[o];_i(a,this.options.draggable,n,!1)&&(s[r]=a)},this),t&&this.captureAnimationState(),e.forEach(function(r){s[r]&&(n.removeChild(s[r]),n.appendChild(s[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _i(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var s=this.options;if(t===void 0)return s[e];var n=So.modifyOption(this,e,t);typeof n<"u"?s[e]=n:s[e]=t,e==="group"&&nf(s)},destroy:function(){Et("destroy",this);var e=this.el;e[Ht]=null,re(e,"mousedown",this._onTapStart),re(e,"touchstart",this._onTapStart),re(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(re(e,"dragover",this),re(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ka.splice(ka.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xs){if(Et("hideClone",this),Z.eventCanceled)return;W(Ae,"display","none"),this.options.removeCloneOnHide&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),xs=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(xs){if(Et("showClone",this),Z.eventCanceled)return;P.parentNode==xe&&!this.options.group.revertClone?xe.insertBefore(Ae,P):Xs?xe.insertBefore(Ae,Xs):xe.appendChild(Ae),this.options.group.revertClone&&this.animate(P,Ae),W(Ae,"display",""),xs=!1}}};function mC(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function zo(i,e,t,s,n,r,o,a){var c,u=i[Ht],h=u.options.onMove,p;return window.CustomEvent&&!es&&!Mo?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=i,c.dragged=t,c.draggedRect=s,c.related=n||e,c.relatedRect=r||et(e),c.willInsertAfter=a,c.originalEvent=o,i.dispatchEvent(c),h&&(p=h.call(u,c,o)),p}function Zl(i){i.draggable=!1}function gC(){Fc=!1}function fC(i,e,t){var s=et(mr(t.el,0,t.options,!0)),n=10;return e?i.clientX<s.left-n||i.clientY<s.top&&i.clientX<s.right:i.clientY<s.top-n||i.clientY<s.bottom&&i.clientX<s.left}function yC(i,e,t){var s=et(Ad(t.el,t.options.draggable)),n=10;return e?i.clientX>s.right+n||i.clientX<=s.right&&i.clientY>s.bottom&&i.clientX>=s.left:i.clientX>s.right&&i.clientY>s.top||i.clientX<=s.right&&i.clientY>s.bottom+n}function vC(i,e,t,s,n,r,o,a){var c=s?i.clientY:i.clientX,u=s?t.height:t.width,h=s?t.top:t.left,p=s?t.bottom:t.right,g=!1;if(!o){if(a&&ua<u*n){if(!no&&(so===1?c>h+u*r/2:c<p-u*r/2)&&(no=!0),no)g=!0;else if(so===1?c<h+ua:c>p-ua)return-so}else if(c>h+u*(1-n)/2&&c<p-u*(1-n)/2)return _C(e)}return g=g||o,g&&(c<h+u*r/2||c>p-u*r/2)?c>h+u/2?1:-1:0}function _C(i){return Yt(P)<Yt(i)?1:-1}function wC(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,s=0;t--;)s+=e.charCodeAt(t);return s.toString(36)}function bC(i){Ra.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var s=e[t];s.checked&&Ra.push(s)}}function ha(i){return setTimeout(i,0)}function Oc(i){return clearTimeout(i)}sl&&ce(document,"touchmove",function(i){(Z.active||On)&&i.cancelable&&i.preventDefault()});Z.utils={on:ce,off:re,css:W,find:Yg,is:function(e,t){return!!_i(e,t,e,!1)},extend:sC,throttle:Xg,closest:_i,toggleClass:Nt,clone:ef,index:Yt,nextTick:ha,cancelNextTick:Oc,detectDirection:sf,getChild:mr};Z.get=function(i){return i[Ht]};Z.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Z.utils=Ci(Ci({},Z.utils),s.utils)),So.mount(s)})};Z.create=function(i,e){return new Z(i,e)};Z.version=eC;var je=[],Wr,Dc,Vc=!1,Kl,Ql,Pa,Zr;function IC(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var s=t.originalEvent;this.sortable.nativeDraggable?ce(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ce(document,"pointermove",this._handleFallbackAutoScroll):s.touches?ce(document,"touchmove",this._handleFallbackAutoScroll):ce(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var s=t.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?re(document,"dragover",this._handleAutoScroll):(re(document,"pointermove",this._handleFallbackAutoScroll),re(document,"touchmove",this._handleFallbackAutoScroll),re(document,"mousemove",this._handleFallbackAutoScroll)),tp(),pa(),nC()},nulling:function(){Pa=Dc=Wr=Vc=Zr=Kl=Ql=null,je.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,s){var n=this,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(r,o);if(Pa=t,s||this.options.forceAutoScrollFallback||Mo||es||eo){Yl(t,this.options,a,s);var c=$s(a,!0);Vc&&(!Zr||r!==Kl||o!==Ql)&&(Zr&&tp(),Zr=setInterval(function(){var u=$s(document.elementFromPoint(r,o),!0);u!==c&&(c=u,pa()),Yl(t,n.options,u,s)},10),Kl=r,Ql=o)}else{if(!this.options.bubbleScroll||$s(a,!0)===Ii()){pa();return}Yl(t,this.options,$s(a,!1),!1)}}},Ji(i,{pluginName:"scroll",initializeByDefault:!0})}function pa(){je.forEach(function(i){clearInterval(i.pid)}),je=[]}function tp(){clearInterval(Zr)}var Yl=Xg(function(i,e,t,s){if(e.scroll){var n=(i.touches?i.touches[0]:i).clientX,r=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,c=Ii(),u=!1,h;Dc!==t&&(Dc=t,pa(),Wr=e.scroll,h=e.scrollFn,Wr===!0&&(Wr=$s(t,!0)));var p=0,g=Wr;do{var f=g,y=et(f),_=y.top,v=y.bottom,w=y.left,b=y.right,M=y.width,S=y.height,x=void 0,A=void 0,k=f.scrollWidth,te=f.scrollHeight,U=W(f),J=f.scrollLeft,oe=f.scrollTop;f===c?(x=M<k&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),A=S<te&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(x=M<k&&(U.overflowX==="auto"||U.overflowX==="scroll"),A=S<te&&(U.overflowY==="auto"||U.overflowY==="scroll"));var Le=x&&(Math.abs(b-n)<=o&&J+M<k)-(Math.abs(w-n)<=o&&!!J),Re=A&&(Math.abs(v-r)<=o&&oe+S<te)-(Math.abs(_-r)<=o&&!!oe);if(!je[p])for(var _e=0;_e<=p;_e++)je[_e]||(je[_e]={});(je[p].vx!=Le||je[p].vy!=Re||je[p].el!==f)&&(je[p].el=f,je[p].vx=Le,je[p].vy=Re,clearInterval(je[p].pid),(Le!=0||Re!=0)&&(u=!0,je[p].pid=setInterval(function(){s&&this.layer===0&&Z.active._onTouchMove(Pa);var Qe=je[this.layer].vy?je[this.layer].vy*a:0,Ye=je[this.layer].vx?je[this.layer].vx*a:0;typeof h=="function"&&h.call(Z.dragged.parentNode[Ht],Ye,Qe,i,Pa,je[this.layer].el)!=="continue"||Jg(je[this.layer].el,Ye,Qe)}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&g!==c&&(g=$s(g,!1)));Vc=u}},30),af=function(e){var t=e.originalEvent,s=e.putSortable,n=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(t){var u=s||r;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(h.clientX,h.clientY);c(),u&&!u.el.contains(p)&&(o("spill"),this.onSpill({dragEl:n,putSortable:s}))}};function kd(){}kd.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var n=mr(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),s&&s.animateAll()},drop:af};Ji(kd,{pluginName:"revertOnSpill"});function Rd(){}Rd.prototype={onSpill:function(e){var t=e.dragEl,s=e.putSortable,n=s||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:af};Ji(Rd,{pluginName:"removeOnSpill"});Z.mount(new IC);Z.mount(Rd,kd);function ip(i,e,t){i.splice(t,0,i.splice(e,1)[0])}const MC="esri-layerlist-new-ui",SC=ee.ofType(Td),sp="data-sort-filter",np="data-layer-uid",CC="layerUid",De="esri-layer-list",Ce=`${De}__item`,F={base:`${De} esri-widget esri-widget--panel`,newUI:`${De}--new-ui`,noItems:`${De}__no-items`,list:`${De}__list`,listRoot:`${De}__list--root`,listExclusive:`${De}__list--exclusive`,listInherited:`${De}__list--inherited`,listIndependent:`${De}__list--independent`,item:Ce,itemContent:`${Ce}-content`,itemMessage:`${Ce}--has-message`,itemInvisible:`${Ce}--invisible`,itemInvisibleAtScale:`${Ce}--invisible-at-scale`,itemChildren:`${Ce}--has-children`,itemSelectable:`${Ce}--selectable`,itemContainer:`${Ce}-container`,actionsMenu:`${Ce}-actions-menu`,actionsMenuItem:`${Ce}-actions-menu-item`,actionsMenuItemActive:`${Ce}-actions-menu-item--active`,actions:`${Ce}-actions`,actionsList:`${Ce}-actions-list`,action:`${Ce}-action`,actionIcon:`${Ce}-action-icon`,actionImage:`${Ce}-action-image`,actionTitle:`${Ce}-action-title`,actionToggle:`${De}__action-toggle`,actionToggleOn:`${De}__action-toggle--on`,label:`${Ce}-label`,message:`${Ce}-message`,title:`${Ce}-title`,statusIndicator:`${De}__status-indicator`,publishing:`${De}__publishing`,updating:`${De}__updating`,connectionStatus:`${De}__connection-status`,connectionStatusConnected:`${De}__connection-status--connected`,toggleVisible:`${Ce}-toggle`,toggleVisibleIcon:`${Ce}-toggle-icon`,toggleIcon:`${Ce}-toggle-icon`,radioIcon:`${Ce}-radio-icon`,childToggle:`${De}__child-toggle`,childToggleOpen:`${De}__child-toggle--open`,childOpened:`${De}__child-toggle-icon--opened`,childClosed:`${De}__child-toggle-icon--closed`,childClosed_RTL:`${De}__child-toggle-icon--closed-rtl`,sortableChosen:`${De}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},Xl={actions:"actions",actionSection:"action-section",items:"items"},Rr={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function lf(i){const{actionsOpen:e,children:t}=i;e&&(i.actionsOpen=!1),t.forEach(s=>lf(s))}const Jl="root",rp={statusIndicators:!0,errors:!1};let be=class extends Me{constructor(e,t){super(e,t),this._handles=new Ke,this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=St(MC),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=F.widgetIcon,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new SC,this.viewModel=new Wg,this.visibleElements={...rp},this._onSortableSort=({to:s,from:n,item:r,newIndex:o})=>{n&&s&&(n===s?this._sortLayers(this._sortableMap.get(n.dataset.group)):this._moveLayerFromChildList({to:s,from:n,item:r,newIndex:o}))},this._sortableCanSort=(s,n)=>!(!s.el.dataset.group||!n.el.dataset.group),this._sortableCanPull=(s,n,r)=>{const{listItemCanGiveFunction:o}=this,a={selected:r["data-item"],from:n.el["data-item"],to:s.el["data-item"]};return!this._sortableCanSort(s,n)||typeof o!="function"||o.call(null,a)},this._sortableCanPut=(s,n,r)=>{const{listItemCanReceiveFunction:o}=this,a={selected:r["data-item"],from:n.el["data-item"],to:s.el["data-item"]};return!this._sortableCanSort(s,n)||typeof o!="function"||o.call(null,a)},this._onSortableEnd=({oldIndex:s,from:n,to:r,item:o})=>{n!==r&&n.insertBefore(o,n.children[s])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([We(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),I(()=>this.visibleElements,()=>this._itemsChanged(e)),I(()=>this.selectionEnabled,()=>this._toggleAllSorting(),B)])}loadDependencies(){return Promise.all([T(()=>import("./calcite-icon-ea91723d.js"),["assets/calcite-icon-ea91723d.js","assets/icon-e372469c.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/observers-ec23deda.js"]),T(()=>import("./calcite-tooltip-b8e8a825.js"),["assets/calcite-tooltip-b8e8a825.js","assets/tooltip-f4ab6b43.js","assets/widget-945f9e61.js","assets/JSONSupport-ed372989.js","assets/typedArrayUtil-96f93e5b.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/intl-7c488bb0.js","assets/number-205e28e0.js","assets/cast-73cfc253.js","assets/locale-30120714.js","assets/messages-226fbb40.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/assets-2c955bed.js","assets/Evented-e2ee9722.js","assets/Promise-34cff6d6.js","assets/reactiveUtils-307e98f9.js","assets/uuid-73213768.js","assets/debounce-d5abe404.js","assets/guid-51402ee7.js"])])}destroy(){this._destroySortables(),this._tooltipReferenceMap.clear(),this._handles.destroy(),this._handles=null}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...rp,...e}}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){var a;const{visibleItems:e,_newUI:t}=this,s=(a=this.viewModel)==null?void 0:a.state,n={[F.newUI]:t,[F.hidden]:s==="loading",[F.disabled]:s==="disabled"},r=this.renderItemTooltips(),o=this.renderItems();return m("div",{class:this.classes(F.base,n)},e!=null&&e.length?[r,o]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:t,messages:s}=this;return e?m("calcite-tooltip",{label:s.layerIncompatible,referenceElement:t.get(e.uid)},s.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:t,children:s}=e;return[t?this.renderItemTooltip(e):null,...t?[]:s==null?void 0:s.toArray().map(n=>this.renderItemTooltipNodes(n))]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))}renderNoItems(){return m("div",{class:F.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:t,messages:s}=this;return m("ul",{"aria-label":s.widgetLabel,role:t?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Jl,bind:this,class:this.classes(F.list,F.listRoot,F.listIndependent)},e==null?void 0:e.map(n=>this.renderItem(n,null)).toArray())}renderActionsMenuIcon(e,t){const{messagesCommon:s}=this,n={[F.actionsMenuItemActive]:e.actionsOpen};return m("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(F.actionsMenuItem,n),tabindex:"0",role:"button","aria-controls":t,"aria-label":s.options,title:s.options},m("span",{"aria-hidden":"true",class:F.iconEllipses}))}renderActionsMenu(e,t,s,n){const{panel:r}=e,o=r&&r.visible?this.renderPanelButton(r):null,a=s===1&&this._getSingleActionButton(t),c=a?this.renderAction({item:e,action:a,singleAction:!0}):null,u=!a&&s?this.renderActionsMenuIcon(e,n):null;return u||o||a?m("div",{key:"actions-menu",class:F.actionsMenu},o,c,u):null}renderChildList(e,t){var p;const{selectionEnabled:s}=this,{visibilityMode:n,children:r}=e,o=this._hasChildren(e),a=!o&&s&&((p=e.layer)==null?void 0:p.type)==="group",{exclusive:c,inherited:u}=Rr,h={[F.listExclusive]:n===c,[F.listInherited]:n===u,[F.listIndependent]:n!==u&&n!==c};return o||a?m("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(F.list,h),"aria-expanded":e.open?"true":"false",role:s?"listbox":n===c?"radiogroup":"group",hidden:!e.open&&!a||null},r==null?void 0:r.map(g=>this.renderItem(g,e)).toArray()):null}renderChildrenToggle(e,t){const{messagesCommon:s}=this,n=this._hasChildren(e),r={[F.childToggleOpen]:e.open},o=e.open?s.collapse:s.expand;return n?m("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(F.childToggle,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":o,title:o},m("span",{"aria-hidden":"true",class:this.classes(F.childClosed,F.iconRightArrow)}),m("span",{"aria-hidden":"true",class:this.classes(F.childOpened,F.iconDownArrow)}),m("span",{"aria-hidden":"true",class:this.classes(F.childClosed_RTL,F.iconLeftArrow)})):null}renderItemMessage(e){return e.error?m("div",{key:"esri-layer-list__error",class:F.message,role:"alert"},m("span",{"aria-hidden":"true",class:F.iconNoticeTriangle}),this.messages.layerError):e.incompatible?m("div",{key:"esri-layer-list__incompatible",class:F.message,role:"alert"},m("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:F.iconNoticeTriangle,afterCreate:t=>this._setTooltipReference(t,e)}),this.messages.layerIncompatible):null}renderItemContent(e,t,s){const{id:n}=this,r=`${n}_${e.uid}`,o=`${r}_actions`,a=`${r}__list`,{panel:c}=e,u=this._filterActions(e.actionsSections),h=this._countActions(u);return[m("div",{key:"list-item-container",class:F.itemContainer},this.renderChildrenToggle(e,a),this.renderLabel(e,t,s),this.renderActionsMenu(e,u,h,o)),this.renderItemMessage(e),h?this.renderActionsSections(e,u,o):null,c&&c.open&&!c.disabled?c.render():null,this.renderChildList(e,a)]}renderItem(e,t){var p;const{_newUI:s,id:n,selectionEnabled:r,selectedItems:o}=this,a=`${`${n}_${e.uid}`}__title`,c=this._hasMessage(e),u=this._hasChildren(e),h={[F.itemChildren]:u,[F.itemMessage]:!!c,[F.itemInvisible]:s&&!e.visible,[F.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[F.itemSelectable]:r};if(r){const g={[np]:(p=e.layer)==null?void 0:p.uid,[sp]:(!e.sortable).toString()};return m("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(F.item,h),"aria-labelledby":a,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:Jl,tabIndex:0,"aria-selected":Bl(e,o)?"true":"false",role:"option",...g},this.renderItemContent(e,t,a))}return m("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(F.item,h),"aria-labelledby":a},this.renderItemContent(e,t,a))}renderConnectionIcon(e){const{connectionStatus:t}=e;return C(t)?m("calcite-icon",{icon:t==="connected"?"check-circle":"offline",scale:"s"}):null}renderItemStatus(e,t){const{visibleElements:s}=this;if(!s.statusIndicators)return null;const{connectionStatus:n,publishing:r,updating:o}=e,a=o&&!t,c=!!n;return m("span",{class:this.classes({[F.statusIndicator]:!0,[F.publishing]:r,[F.updating]:a,[F.connectionStatus]:c,[F.connectionStatusConnected]:c&&n==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,t){const{messages:s}=this;if(!e)return null;const n=e.title||s.untitledLayer,r=e.visibleAtCurrentScale?n:`${n} (${s.layerInvisibleAtScale})`;return m("span",{key:"layer-title-container",id:t,title:r,"aria-label":r,class:F.title},n)}renderItemToggleIcon(e,t){const{_newUI:s}=this,{exclusive:n}=Rr,r=t&&t.visibilityMode,o={[F.toggleVisibleIcon]:s,[F.toggleIcon]:s&&r!==n,[F.radioIcon]:s&&r===n,[F.iconRadioSelected]:r===n&&e.visible,[F.iconRadioUnselected]:r===n&&!e.visible,[F.iconVisible]:r!==n&&e.visible,[F.iconInvisible]:r!==n&&!e.visible};return m("span",{key:"item-toggle-icon",class:this.classes(o),"aria-hidden":"true"})}renderItemToggle(e,t,s){const{selectionEnabled:n,messages:r}=this,{exclusive:o}=Rr,a=t&&t.visibilityMode,c=a===o?"radio":"switch";return m("span",n?{key:"item-toggle-selection-enabled",class:F.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":a,tabIndex:0,title:e.visible?r.hideLayer:r.showLayer,"aria-checked":e.visible?"true":"false",role:c,"aria-labelledby":s}:{key:"item-toggle",class:F.toggleVisible},this.renderItemToggleIcon(e,t))}renderLabel(e,t,s){const{selectionEnabled:n,_newUI:r,messages:o}=this,{inherited:a,exclusive:c}=Rr,u=t==null?void 0:t.visibilityMode,h=u===c?"radio":"switch",p=r?[this.renderItemTitle(e,s),this.renderItemStatus(e,t),this.renderItemToggle(e,t,s)]:[this.renderItemToggle(e,t,s),this.renderItemTitle(e,s),this.renderItemStatus(e,t)],g=m("div",n?{key:`item-label-no-selection-${e.uid}`,class:F.label}:{key:`item-label-with-selection-${e.uid}`,class:F.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":u,tabIndex:0,"aria-checked":e.visible?"true":"false",title:e.visible?o.hideLayer:o.showLayer,role:h,"aria-labelledby":s},p);return u===a||e.error?m("div",{key:`item-label-container-${e.uid}`,class:F.label},this.renderItemTitle(e,s),this.renderItemStatus(e,t)):g}renderPanelButton(e){const{className:t,open:s,title:n,image:r}=e,o=r||t?t:F.iconDefaultAction,a=this._getIconImageStyles(e),c={[F.actionsMenuItemActive]:s},u={[F.actionImage]:!!a["background-image"],[F.disabledElement]:e.disabled};return o&&(u[o]=!!o),m("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(F.actionsMenuItem,c),role:"button",tabindex:e.disabled?null:0,title:n,"aria-label":n},m("span",{class:this.classes(u),styles:a}))}renderActionsSections(e,t,s){const n=t.toArray().map((r,o)=>m("ul",{key:`${e}-action-section-${o}`,class:F.actionsList},this.renderActionSection(e,r)));return m("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:s,class:F.actions,hidden:!e.actionsOpen||null},n)}renderActionSection(e,t){return(t&&t.toArray()).map(s=>this.renderAction({item:e,action:s}))}renderActionIcon(e){const{active:t,className:s}=e,n=this._getIconImageStyles(e),r=e.type!=="button"||e.image||s?s:F.iconDefaultAction,o={[F.actionImage]:!t&&!!n["background-image"],[F.iconLoading]:t,[F.rotating]:t};return r&&!t&&(o[r]=!0),m("span",{key:"action-icon","aria-hidden":"true",class:this.classes(F.actionIcon,o),styles:n})}renderActionTitle(e,t){return t?null:m("span",{key:"action-title",class:F.actionTitle},e)}renderAction(e){const{item:t,action:s,singleAction:n}=e,{active:r,disabled:o,title:a}=s,c={[F.actionsMenuItem]:n&&s.type==="button",[F.action]:r||!n&&s.type!=="toggle",[F.actionToggle]:!r&&s.type==="toggle",[F.actionToggleOn]:!r&&s.type==="toggle"&&s.value,[F.disabledElement]:o},u=[this.renderActionIcon(s),this.renderActionTitle(a,n)];return n?m("div",{bind:this,"data-item":t,"data-action":s,role:"button",key:`single-action-${s.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:c,tabindex:"0",title:a,"aria-label":a},u):m("li",{bind:this,"data-item":t,"data-action":s,key:`action-${s.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:c,tabindex:"0",role:"button",title:a,"aria-label":a},u)}_setTooltipReference(e,t){this._tooltipReferenceMap.set(t.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:t}=this,s=e.dataset.group,n=t.get(s);n&&n.destroy(),t.delete(s)}_destroySortables(){const{_sortableMap:e,_sortableNodes:t}=this;e.forEach(s=>s&&s.destroy()),e.clear(),t.clear()}_moveLayerFromChildList({to:e,from:t,item:s,newIndex:n}){const r=s["data-item"],o=e["data-item"],a=t["data-item"];this.viewModel.moveListItem(r,a,o,n)}_sortLayers(e){var n,r;if(!e)return;const t=e.el["data-item"],s=e.toArray();t?qS(t,s):Hg((r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers,s)}_toggleSorting(e,t){const{_sortableMap:s,selectionEnabled:n}=this,r=s.get(t),o=e["data-item"],a=(t===Jl||o.childrenSortable&&zS(o))&&n;if(r)r.option("disabled",!a);else if(a){const c=Z.create(e,{dataIdAttr:np,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${sp}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:F.sortableChosen});s.set(t,c)}}_toggleAllSorting(){this._sortableNodes.forEach((e,t)=>this._toggleSorting(e,t))}_sortNodeCreated(e){const t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}_setVisibleItems(e){this.visibleItems=e==null?void 0:e.filter(t=>!t.hidden&&(this.visibleElements.errors||!t.error))}_getSingleActionButton(e){return e.reduce(t=>t).filter(t=>t&&t.type==="button").getItemAt(0)}_focusListItem(e){var s;const{_focusSortUid:t}=this;!e||!t||((s=e["data-item"].layer)==null?void 0:s.uid)===t&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e,t){const s=Xl.actionSection+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),s),e.forEach(n=>this._renderOnActionChanges(n,t))}_renderOnActionChanges(e,t){const s=Xl.actions+t;e.type!=="toggle"?e.type!=="slider"?this._handles.add(I(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),B),s):this._handles.add(I(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),B),s):this._handles.add(I(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),B),s)}_renderOnItemChanges(e){const t=e.uid,s=Xl.items+t;this._handles.add([I(()=>{var n,r,o;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(n=e==null?void 0:e.panel)==null?void 0:n.title,(r=e==null?void 0:e.panel)==null?void 0:r.content,(o=e==null?void 0:e.panel)==null?void 0:o.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),Ms),I(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],s),e.children.forEach(n=>this._renderOnItemChanges(n)),e.actionsSections.forEach(n=>this._watchActionSectionChanges(n,t))}_itemsChanged(e){this._handles.removeAll(),e.forEach(t=>this._renderOnItemChanges(t)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(t=>t.filter(s=>s.visible))}_countActions(e){return e.reduce((t,s)=>t+s.length,0)}_getIconImageStyles(e){const t=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":t?`url("${t}")`:null}}_selectionKeydown(e){var y,_,v,w;const t=["ArrowDown","ArrowUp"],s=ni(e);if(!t.includes(s))return void this._toggleSelection(e);e.stopPropagation();const n=e.currentTarget,r=n["data-item"],{_sortableMap:o,selectedItems:a}=this,c=n.dataset.group,u=o.get(c);if(!u)return;const h=Bl(r,a),p=u.toArray(),g=e.target,f=p.indexOf(g.dataset[CC]);if(f!==-1){if(s==="ArrowDown"){const b=f+1;if(b>=p.length)return;h?(ip(p,f,b),u.sort(p),this._sortLayers(u),this._focusSortUid=(y=r.layer)==null?void 0:y.uid):(this._focusSortUid=(_=r.layer)==null?void 0:_.uid,this.scheduleRender())}if(s==="ArrowUp"){const b=f-1;if(b<=-1)return;h?(ip(p,f,b),u.sort(p),this._sortLayers(u),this._focusSortUid=(v=r.layer)==null?void 0:v.uid):(this._focusSortUid=(w=r.layer)==null?void 0:w.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const t=e.currentTarget["data-item"],{actionsOpen:s}=t,n=!s;n&&this.operationalItems.forEach(r=>lf(r)),t.actionsOpen=n,e.stopPropagation()}_triggerPanel(e){const t=e.currentTarget["data-panel"];e.stopPropagation(),t&&!t.disabled&&(t.open=!t.open)}_triggerAction(e){const t=e.currentTarget,s=t["data-action"],n=t["data-item"];s.type==="toggle"&&(s.value=!s.value),this.triggerAction(s,n),e.stopPropagation()}_toggleVisibility(e){const t=e.currentTarget,s=t.getAttribute("data-parent-visibility"),n=t["data-item"];s===Rr.exclusive&&n.visible||(n.visible=!n.visible),e.stopPropagation()}_toggleChildrenClick(e){const t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}_toggleSelection(e){var a,c;e.stopPropagation();const{multipleSelectionEnabled:t,selectedItems:s}=this,n=e.currentTarget["data-item"],r=Bl(n,s),{length:o}=s;if(!t)return o&&!(r&&o===1)?(s.removeAll(),void s.add(n)):void(r?(a=s.remove)==null?void 0:a.call(s,r):s.add(n));r?(c=s.remove)==null||c.call(s,r):s.add(n)}};l([d()],be.prototype,"visibleItems",void 0),l([d()],be.prototype,"iconClass",void 0),l([d()],be.prototype,"label",null),l([d()],be.prototype,"listItemCanGiveFunction",void 0),l([d()],be.prototype,"listItemCanReceiveFunction",void 0),l([d()],be.prototype,"listItemCreatedFunction",null),l([d(),ge("esri/widgets/LayerList/t9n/LayerList")],be.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],be.prototype,"messagesCommon",void 0),l([d()],be.prototype,"multipleSelectionEnabled",void 0),l([d()],be.prototype,"operationalItems",null),l([d()],be.prototype,"selectionEnabled",void 0),l([d()],be.prototype,"selectedItems",void 0),l([d()],be.prototype,"view",null),l([ud("trigger-action"),d({type:Wg})],be.prototype,"viewModel",void 0),l([d()],be.prototype,"visibleElements",void 0),l([rt("visibleElements")],be.prototype,"castVisibleElements",null),l([ke()],be.prototype,"_toggleActionsOpen",null),l([ke()],be.prototype,"_triggerPanel",null),l([ke()],be.prototype,"_triggerAction",null),l([ke()],be.prototype,"_toggleVisibility",null),l([ke()],be.prototype,"_toggleChildrenClick",null),l([ke()],be.prototype,"_toggleSelection",null),be=l([$("esri.widgets.LayerList")],be);const xC=be;function EC(i){return O(i)||i.type==="simple"||i.type==="unique-value"||i.type==="class-breaks"||i.type==="dictionary"||i.type==="heatmap"}const $C=(i,e)=>{const t=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level;return e!=null&&e.levels?e.levels[t]:null};function LC(i,e){if(!i||!("visualVariables"in i)||!i.visualVariables)return null;const t=i.visualVariables.find(n=>n.type==="size"),s=$C(e,t);return s?new d_({field:t.field,minSize:s[2].size,minDataValue:s[2].value,maxSize:s[3].size,maxDataValue:s[3].value}):null}const Nc=30,zc=12,cf=[255,255,255],df=[200,200,200],Kn=[128,128,128],TC=20,AC=5;function kC(i){return i.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function RC(i){return i.declaredClass==="esri.symbols.PictureMarkerSymbol"}function PC(i){return i.declaredClass==="esri.symbols.SimpleLineSymbol"}function FC(i){return i.declaredClass==="esri.symbols.TextSymbol"}function OC(i,e){const t=i.length-1;return i.map((s,n)=>vm(s,n,t,e))}async function DC(i,e,t,s,n,r,o){const a=e.legendOptions,c=a&&a.customValues,u=o||await zC(i,t),h=!!u,p=!!c,g=e.minSize!=null&&e.maxSize!=null,f=e.stops&&e.stops.length>1,y=!!e.target;if(!h||!p&&!(g||f&&!y))return;const _=qa(u);let v=null,w=null,b=null;w=_&&!f?Ca([e.minDataValue,e.maxDataValue]):c||await HC(e,u,s,n);const M=i==null?void 0:i.authoringInfo,S=(M==null?void 0:M.type)==="univariate-color-size",x=S&&(M==null?void 0:M.univariateTheme)==="above-and-below";if(!w&&f&&(w=e.stops.map(U=>U.value),v=e.stops.some(U=>!!U.label),i.type==="flow"&&(w=Ca(w)),v&&(b=e.stops.map(U=>U.label))),_&&(w==null?void 0:w.length)>2&&!x&&(w=[w[0],w[w.length-1]]),!w)return null;S&&(w==null?void 0:w.length)!==5&&(w=pf({minSize:w[0],maxSize:w[w.length-1]}));const A=_?VC(i,w):null,k=wv(u),te=v?null:OC(w,r);return(await Promise.all(w.map(async(U,J)=>{const oe=_?A[J]:await Dn(e,u,U,s,n);return{value:U,symbol:jC(x&&i.type==="class-breaks"?NC(i,J):u,oe),label:v?b[J]:te[J],size:oe,outlineSize:k}}))).reverse()}function VC(i,e){const t=i==null?void 0:i.authoringInfo,s=(t==null?void 0:t.type)==="univariate-color-size";let n=[zc,Nc];if(s){const r=e[0],o=e[e.length-1],a=zc,c=Nc;n=e.map(u=>a+(u-r)/(o-r)*(c-a))}return s&&(t==null?void 0:t.univariateTheme)==="below"&&n.reverse(),n}function NC(i,e){const t=i.classBreakInfos,s=t.length,n=s<2||!(e>=2)?t[0].symbol.clone():t[s-1].symbol.clone();return i.visualVariables.some(r=>r.type==="color")&&(n.type.includes("3d")?uf(n):hf(n)),n}async function zC(i,e){var n;if(i.type==="flow")return _m(i,e);if(i.type==="pie-chart")return new Yn({color:null,outline:(n=i.outline)!=null&&n.width?i.outline:new Qc});let t=null,s=null;if(i.type==="simple")t=i.symbol;else if(i.type==="class-breaks"){const r=i.classBreakInfos;t=r&&r[0]&&r[0].symbol,s=r.length>1}else if(i.type==="unique-value"){const r=i.uniqueValueInfos;t=r&&r[0]&&r[0].symbol,s=r.length>1}return!t||BC(t)?null:(t=t.clone(),(e||s)&&(t.type.includes("3d")?uf(t):hf(t)),t)}function BC(i){return i?Bp(i)?!!i.symbolLayers&&i.symbolLayers.some(e=>e&&e.type==="fill"):i.type.includes("fill"):!1}function uf(i){i.type==="line-3d"?i.symbolLayers.forEach(e=>{e.material={color:Kn}}):i.symbolLayers.forEach(e=>{e.type!=="icon"||e.resource&&e.resource.href?e.material={color:df}:(e.material={color:cf},e.outline={color:Kn,size:1.5})})}function hf(i){var t,s;const e=po();i.type==="cim"?zp(i,new Ie(df)):i.type.includes("line")?i.color=Kn:(i.color=e?Kn:cf,i.type==="simple-marker"&&(i.outline?((s=(t=i.outline)==null?void 0:t.color)==null?void 0:s.toHex())==="#ffffff"&&(i.outline.color=Kn):i.outline={color:Kn,width:1.5}))}async function HC(i,e,t,s){const n=(await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"])).getSizeRangeAtScale(i,t,s),r=n&&pf(n);if(!n&&!r)return;let o=r.map(a=>qC(a,i,n));o=Ca(o);for(let a=1;a<o.length-1;a++){const c=await UC(i,e,o[a],o[a-1],t,s);c&&(o[a]=c[0],r[a]=c[1])}return o}function pf(i){const e=i.minSize,t=i.maxSize,s=AC,n=(t-e)/(s-1),r=[];for(let o=0;o<s;o++)r.push(e+n*o);return r}function qC(i,e,t){const s=t.minSize,n=t.maxSize,r=e.minDataValue,o=e.maxDataValue;let a=null;return i<=s?a=r:i>=n?a=o:a=(i-s)/(n-s)*(o-r)+r,a}async function UC(i,e,t,s,n,r){const o=await Dn(i,e,t,n,r),a=await Dn(i,e,s,n,r),c=Sa(t),u=c.fractional,h=TC;let p=c.integer,g=null,f=null;t>0&&t<1&&(g=10**u,p=Sa(t*=g).integer);for(let y=p-1;y>=0;y--){const _=10**y;let v=Math.floor(t/_)*_,w=Math.ceil(t/_)*_;g!=null&&(v/=g,w/=g);let b=(v+w)/2;[,b]=Ca([v,b,w],{indexes:[1]});const M=await Dn(i,e,v,n,r),S=await Dn(i,e,w,n,r),x=await Dn(i,e,b,n,r),A=Ko(o,M,a,null),k=Ko(o,S,a,null),te=Ko(o,x,a,null);let U=A.previous<=h,J=k.previous<=h;if(U&&J&&(A.previous<=k.previous?(U=!0,J=!1):(J=!0,U=!1)),U?f=[v,M]:J?f=[w,S]:te.previous<=h&&(f=[b,x]),f)break}return f}async function Dn(i,e,t,s,n){const{getSize:r}=await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"]);return r(i,t,{scale:s,view:n,shape:e.type==="simple-marker"?e.style:null})}function jC(i,e){const t=i.clone();if(Bp(t))qa(t)||t.symbolLayers.forEach(s=>{s.type!=="fill"&&(s.size=e)});else if(kC(t))t.size=e;else if(RC(t)){const s=t.width,n=t.height;t.height=e,t.width=e*(s/n)}else PC(t)?t.width=e:FC(t)&&t.font&&(t.font.size=e);return t}function GC(i){const t=Math.floor(Math.log10(Math.abs(i)))+1,s=t<4||t>6?4:t,n=1e6,r=Math.abs(i)>=n?"compact":"standard";return vo(i,{notation:r,minimumSignificantDigits:2,maximumSignificantDigits:s})}const WC="https://utility.arcgis.com/sharing/tools/legend",ZC="esri.layers.ImageryLayer",KC="esri.layers.ImageryTileLayer",QC="esri.layers.WCSLayer",Bo=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,YC=new Rs({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ho=new Yn({size:6,outline:{color:[128,128,128,.5],width:.5}}),XC=new Ua({style:"solid"});function Bc(i){return i.type==="flow"}function mf(i){return i.type==="vector-field"}function gf(i){return i.type==="raster-colormap"}function ff(i){return i.type==="raster-stretch"}function yf(i){return i.type==="raster-shaded-relief"}function Vn(i){return i.declaredClass==="esri.renderers.SimpleRenderer"}function Nn(i){return i.declaredClass==="esri.renderers.ClassBreaksRenderer"}function ma(i){return i.declaredClass==="esri.renderers.UniqueValueRenderer"}function vf(i){return i.declaredClass==="esri.renderers.HeatmapRenderer"}function JC(i){return Pd(i)||Fd(i)||Od(i)||ex(i)}function ex(i){return i.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function Pd(i){return i.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function Fd(i){return i.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function Od(i){return i.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function _f(i){return i.declaredClass==="esri.renderers.DotDensityRenderer"}function wf(i){return i.declaredClass==="esri.renderers.PieChartRenderer"}function tx(i,e){return Vn(i)||Nn(i)||ma(i)||vf(i)||_f(i)||wf(i)?e.type==="2d"||EC(i):ff(i)||gf(i)||yf(i)||Pd(i)||Fd(i)||Od(i)||mf(i)||Bc(i)}function ix(i){return i.declaredClass==="esri.layers.BuildingSceneLayer"}function op(i){return i.declaredClass==="esri.layers.SubtypeGroupLayer"}function sx(i){return i.declaredClass==="esri.layers.VoxelLayer"}function nx(i){return i.declaredClass==="esri.layers.WMSLayer"}function rx(i){return i.declaredClass==="esri.layers.WMTSLayer"}function ap(i){return i.declaredClass==="esri.layers.MapImageLayer"}function ox(i){return i.declaredClass==="esri.layers.TileLayer"}function ax(i){return i.declaredClass==="esri.layers.FeatureLayer"}function In(i){return i.declaredClass===ZC}function qo(i){return i.declaredClass===KC}function lx(i){return i.declaredClass===QC}function cx(i){return i.type==="stretch-ramp"}function dx(i){var e;return((e="authoringInfo"in i&&(i==null?void 0:i.authoringInfo))==null?void 0:e.type)==="univariate-color-size"}function ux(i){const e="authoringInfo"in i&&(i==null?void 0:i.authoringInfo);return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}const hx=new Yn({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Mn={},Ue=class extends K{constructor(i){super(i),this._handles=new Ke,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new ee,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const i=()=>this.notifyChange("ready");this._handles.add([We(()=>this.children,"change",e=>{const{added:t,removed:s}=e,n=this._handles;t.forEach(r=>{const o=`activeLayerInfo-ready-watcher-${r.layer.uid}`;n.add(I(()=>r.ready,i,B),o)}),s.forEach(r=>n.remove(r.layer.uid)),i()})]),this.keepCacheOnDestroy||(Mn={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Mn=null)}get effectList(){const i=this.layer;let e=null;return"effect"in i&&i.effect&&(e=new o_,e.effect=i.effect,e.endTransitions(),e.scale=this.scale),e}get opacity(){var n;const i=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,t=this.layer.parent,s=t&&"uid"in t?this._getParentLayerOpacity(t):null;return e!=null?e*i:s!=null?s*i:i}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const i=this.layer;if(i===null)return!1;if("effect"in i&&i.effect&&Array.isArray(i.effect))return!0;if("featureReduction"in i&&i.featureReduction){if(i.featureReduction.type==="cluster")return!0;if(i.featureReduction.type==="binning"&&"renderer"in i.featureReduction&&i.featureReduction.renderer)return this._isRendererScaleDriven(i.featureReduction.renderer)}return"renderer"in i&&i.renderer?this._isRendererScaleDriven(i.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(i){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(i,t=>{if(ax(t))return this._getRendererLegendElements(t.renderer,{title:t.title});if(t.featureSet&&t.featureSet.features.length){const s=t.layerDefinition,n=s&&s.drawingInfo,r=n&&xv(n.renderer),o=YC.read(s.geometryType);return r?this._getRendererLegendElements(r,{title:t.name,geometryType:o}):(q.getLogger(this.declaredClass).warn("drawingInfo not available!"),null)}return null});try{const t=[];await Ge(e).then(s=>{s.forEach(({value:n})=>n&&t.push(...n))}),this.legendElements=t,this.notifyChange("ready")}catch(t){q.getLogger(this.declaredClass).warn("error while building legend for layer!",t)}}async buildLegendElementsForRenderer(i){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(i):[],this.notifyChange("ready")}catch(e){q.getLogger(this.declaredClass).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(i){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(i):[],this.notifyChange("ready")}catch(e){q.getLogger(this.declaredClass).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,t;const i=this.layer;if(sx(i))this._constructLegendElementsForVoxellayer();else if(rx(i))this._constructLegendElementsForWMTSlayer();else if(nx(i))await this._constructLegendElementsForWMSSublayers();else if(ix(i))await this._constructLegendElementsForBuildingSceneLayer();else if(ap(i)||ox(i)||op(i))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let s="default";In(i)&&(s=(((e=i==null?void 0:i.renderingRule)==null?void 0:e.functionName)||"default")+"_"+((t=i.bandIds)!=null&&t.length?i.bandIds.join(""):"###")),await this._getLegendLayers(`${i.uid}-${s}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const r=n.map(async o=>{if(In(i)||qo(i)){const c=I(()=>["renderingRule"in i&&i.renderingRule,i.bandIds],()=>wy(async()=>{Mn.default=null,i.renderer?await this.buildLegendElementsForRenderer(i.renderer):await this.buildLegendElementsForTools()})());this._handles.add(c,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a&&a.infos.length&&(In(i)&&(a.title=i.title),this.legendElements.push(a)),this.notifyChange("ready")});await Ge(r)}).catch(n=>{q.getLogger(this.declaredClass).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const i=this.layer,e=this.layerView,t=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!t&&!(e&&"createQuery"in i&&"queryFeatureCount"in i))return!0;await cn(()=>!e.updating);const s=t?"createQuery"in e&&e.createQuery():"createQuery"in i&&i.createQuery();return s.geometry=this.view.extent,(t?"queryFeatureCount"in e&&await e.queryFeatureCount(s):"queryFeatureCount"in i&&await i.queryFeatureCount(s))!==0}_getParentLayerOpacity(i){let e=1;const t=i.parent;return t&&"uid"in t&&(e=this._getParentLayerOpacity(t)),i.opacity*e}_isGroupActive(){const i=this.children;return!!i.length&&i.some(e=>e.ready)}_isRendererScaleDriven(i){if(i.type==="dot-density")return!0;const e="valueExpression"in i&&i.valueExpression;if(Bo.test(e))return!0;const t="visualVariables"in i&&i.visualVariables;return!!t&&t.some(s=>this._isScaleDrivenSizeVariable(s))}_isScaleDrivenSizeVariable(i){if(i&&i.type!=="size")return!1;const e=i,t=e.minSize,s=e.maxSize;return typeof t=="object"&&t?this._isScaleDrivenSizeVariable(t):typeof s=="object"&&s?this._isScaleDrivenSizeVariable(s):!!e.expression||Bo.test(e.valueExpression)}_isLayerScaleDriven(i){if("minScale"in i&&i.minScale>0||"maxScale"in i&&i.maxScale>0)return!0;if("sublayers"in i&&i.sublayers)return i.sublayers.some(t=>this._isLayerScaleDriven(t));const e=i.parent;if(i.loaded===!1&&e&&ap(e)&&"source"in i&&i.source&&i.source.type==="map-layer"){for(const t of e.sourceJSON.layers)if(t.id===i.source.mapLayerId&&(t.minScale>0||t.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxellayer(){var r;this.legendElements=[],this._handles.remove("voxel-style-watcher"),this._handles.remove("voxel-current-variable");const i=this.layer;this._handles.add(I(()=>i.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-current-variable"),this._handles.add(I(()=>i.getVariableStyles(),()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const e=Ne(i.getVariableStyle(null)),t=[];if(e){if((r=e.uniqueValues)!=null&&r.length){const o=[];e.uniqueValues.forEach(a=>{a.enabled&&o.push({label:a.label||`${a.value}`,value:a.value,symbol:new Ua({color:a.color,outline:null})})}),o.length&&t.push({type:"symbol-table",title:e.label,infos:o})}else if(e.transferFunction){const{colorStops:o,stretchRange:a}=e.transferFunction,c=o.toArray().reverse(),u=a.map((p,g)=>`${g===0?fm:ym} ${GC(p)}`).reverse(),h=c.map(p=>({color:p.color,value:null,label:null}));h[0].label=u[0],h[h.length-1].label=u[1],t.push({type:"color-ramp",title:e.label,infos:h,preview:Gs(c.map(p=>p.color))})}}const s=i.opacity,n=t.reduce((o,a)=>o.concat(this._getAllInfos(a)),[]).filter(o=>!!(o!=null&&o.symbol)).map(o=>this._getSymbolPreview(o,s));await Ge(n),this.legendElements=t,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const i=this.layer.activeLayer;if(this._handles.add(I(()=>{const{layer:e}=this;return e&&"activeLayer"in e&&e.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),i.styleId&&i.styles){let e=null;i.styles.some(t=>i.styleId===t.id&&(e=t.legendUrl,!0)),e&&(this.legendElements=[{type:"symbol-table",title:i.title,infos:[{src:e,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const i=this.layer;let e=null;(i.customParameters||i.customLayerParameters)&&(e={...i.customParameters,...i.customLayerParameters}),this._handles.add(I(()=>{const{layer:t}=this;return t&&"sublayers"in t&&t.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(i.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(i,e){const t=[];this._handles.add(i.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const s=i.toArray();for(const n of s){const r=I(()=>[n.title,n.visible,n.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this._handles.add(r,"wms-sublayers-watcher"),!this.respectLayerVisibility||n.visible&&n.legendEnabled){const o=await this._generateSymbolTableElementForWMSSublayer(n,e);o&&o.infos.length&&t.unshift(o)}}return t}async _generateSymbolTableElementForWMSSublayer(i,e){if(!i.legendUrl&&i.sublayers){const t=(await this._generateLegendElementsForWMSSublayers(i.sublayers,e)).filter(s=>s);return{type:"symbol-table",title:i.title,infos:t}}return this._generateSymbolTableElementForLegendUrl(i,e)}async _generateSymbolTableElementForLegendUrl(i,e){var o;let t=i.legendUrl;if(!t)return;const s={type:"symbol-table",title:i.title||i.name||i.id&&i.id+"",infos:[]};e&&(t=Dy(t,e));let n=null;const r=(o=i.layer)==null?void 0:o.opacity;try{n=(await ri(t,{responseType:"image"})).data,n&&(n.style.opacity=r)}catch{}return s.infos.push({src:t,preview:n,opacity:r}),s}_getLegendLayers(i,e){const t=Mn&&Mn[i];return t?Promise.resolve(t):this._legendRequest(e).then(s=>{const n=s.layers;return Mn[i]=n,n})}_legendRequest(i){const e=this.layer;let t={f:"json",dynamicLayers:i};if(In(e)){const n=e.exportImageServiceParameters.renderingRule;if(n&&(t.renderingRule=JSON.stringify(n.rasterFunctionDefinition||n.toJSON())),e.bandIds&&(t.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:r,viewId:o,customParameters:a}=e;t={raster:r,viewId:o,...t,...a}}}let s=e.url.replace(/(\/)+$/,"");if("version"in e&&e.version>=10.01){const n=s.indexOf("?");n>-1?s=s.substring(0,n)+"/legend"+s.substring(n):s+="/legend"}else{const n=s.toLowerCase().indexOf("/rest/"),r=s.substring(0,n)+s.substring(n+5,s.length);s=WC+"?soapUrl="+encodeURI(r)+"&returnbytes=true"}return ri(s,{query:t}).then(n=>n.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const i=this.layer;this._handles.add(I(()=>i.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(i.sublayers,this.opacity),this.notifyChange("ready")}catch(e){q.getLogger(this.declaredClass).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(i,e){let t=[];this._handles.add(i.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const s=i.toArray();for(const n of s){const r=I(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this._handles.add(r,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=n&&n.opacity!=null?n.opacity:null,a=o!=null?o*e:e;if(n.type==="building-group"){const c={type:"symbol-table",title:n.title,infos:[]},u=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);c.infos.push(...u),t=[c,...t]}else n.renderer&&(t=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...t])}}return t.filter(n=>!!n&&(!("infos"in n)||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const i=this.layer;this._handles.add(I(()=>i.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(i.sublayers,this.opacity),this.notifyChange("ready")}catch(e){q.getLogger(this.declaredClass).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForSublayers(i,e,t){const s=this.layer;let n=[];this._handles.add(i.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let r=i.toArray();!t&&this.sublayerIds&&this.sublayerIds.length&&(r=this.sublayerIds.map(o=>s.findSublayerById(o)).filter(Boolean));for(const o of r){const a=I(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const c=o&&o.opacity!=null?o.opacity:null,u=c!=null?c*e:e,h=!!op(s)||o.originIdOf("renderer")>wr.SERVICE;if(o.renderer&&!o.sublayers&&h)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:u,sublayer:o}),...n];else{const p=await this._generateSymbolTableElementForSublayer(o,u,t);p&&n.unshift(p)}}}return n.filter(o=>!!o&&(!("infos"in o)||o.infos.length>0))}async _generateSymbolTableElementForSublayer(i,e,t){if(!t){t=new Map;const n=this.layer,r=i.source;let o=null;if(!(!r||r.type==="map-layer"&&r.mapLayerId===i.id&&(!r.gdbVersion||r.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||i.originIdOf("renderer")>wr.SERVICE||i.originIdOf("labelingInfo")>wr.SERVICE||i.originIdOf("labelsVisible")>wr.SERVICE){const c=new l_({layer:this.layer});o=c.hasDynamicLayers?c.dynamicLayers:null,c.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach(c=>t.set(c.layerId,c))}const s=t.get(i.id);if((!s||s!=null&&s.subLayerIds&&s.defaultVisibility)&&i.sublayers){const n=await this._generateLegendElementsForSublayers(i.sublayers,e,t);return{type:"symbol-table",title:i.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(s,i,e)}_generateSymbolTableElementForLegendLayer(i,e,t){var a;if(!i||!i.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(i,e))return null;const s=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||i.layerName;if(s&&(!e||(e==null?void 0:e.originIdOf("renderer"))>wr.SERVICE)){const c=(e==null?void 0:e.title)||this._getRendererTitle(s,e);c&&(n&&typeof c!="string"&&"title"in c&&(c.title=n),n=c)}const r={type:"symbol-table",title:n,legendType:i.legendType?i.legendType:null,infos:[]},o=e?this._sanitizeLegendForSublayer(i.legend.slice(),e):i.legend;return((a=i.legendGroups)==null?void 0:a.length)>0?i.legendGroups.forEach(c=>{var h;const u={type:"symbol-table",title:c.heading,legendType:i.legendType?i.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(p=>p.groupId===c.id),i.layerId,t)};((h=u.infos)==null?void 0:h.length)>0&&r.infos.push(u)}):r.infos=this._generateSymbolTableElementInfosForLegendLayer(o,i.layerId,t),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(i,e,t){return i.map(s=>{let n=s.url;if(s.imageData&&s.imageData.length>0)n=`data:image/png;base64,${s.imageData}`;else{if(n.indexOf("http")===0)return null;n=Vy(`${this.layer.url}/${e}/images/${n}`)}return{label:s.label,src:n,opacity:t??this.opacity,width:s.width,height:s.height}}).filter(s=>!!s)}_isSublayerInScale(i){const e=i.minScale||0,t=i.maxScale||0;return!(e>0&&e<this.scale||t>this.scale)}_isLegendLayerInScale(i,e){const t=e||this.layer;let s=null,n=null,r=!0;return!t.minScale&&t.minScale!==0||!t.maxScale&&t.maxScale!==0?(i.minScale===0&&t.tileInfo&&(s=t.tileInfo.lods[0].scale),i.maxScale===0&&t.tileInfo&&(n=t.tileInfo.lods[t.tileInfo.lods.length-1].scale)):(s=Math.min(t.minScale,i.minScale)||t.minScale||i.minScale,n=Math.max(t.maxScale,i.maxScale)),(s>0&&s<this.scale||n>this.scale)&&(r=!1),r}_sanitizeLegendForSublayer(i,e){if("version"in this.layer&&this.layer.version<10.1||i.length===0)return i;const t=e.renderer,s=i.some(o=>o.values);let n=null,r=null;return s&&i.some((o,a)=>(o.values||(n=a,r=o,r.label||(r.label="others")),r!=null)),t?t.type==="unique-value"?r&&(i.splice(n,1),i.push(r)):t.type==="class-breaks"&&(r&&i.splice(n,1),i.reverse(),r&&i.push(r)):r&&(i.splice(n,1),i.push(r)),i}async _getRendererLegendElements(i,e={}){if(!tx(i,this.view))return q.getLogger(this.declaredClass).warn(`Renderer of type '${i.type}' not supported!`),[];if(JC(i))return this._constructPointCloudRendererLegendElements(i,e);if(_f(i))return this._constructDotDensityRendererLegendElements(i);const t=await this._loadRenderer(i);return wf(t)?this._constructPieChartRendererLegendElements(t):this._constructRendererLegendElements(t,e)}async _getLegendElementsForFeatureReduction(i){let e=null;return i.type==="binning"?e=i.renderer:i.type==="cluster"&&(e=this._getClusterRenderer(i)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(i){return i.legendOptions&&i.legendOptions.title||i.field}_constructPointCloudRendererLegendElements(i,e={}){const t=e.title,s=[];let n=null,r=null;if(Pd(i))n={type:"symbol-table",title:t||this._getPointCloudRendererTitle(i),infos:[]},i.colorClassBreakInfos.forEach(a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(Ho,a.color)})});else if(Fd(i)){const a=i.stops;let c=null;if(a.length&&(a.length===1&&(c=a[0].color),!c)){const h=a[0].value,p=a[a.length-1].value;h!=null&&p!=null&&(c=bm(h+(p-h)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Ho,c||Ho.color)}]};const u=Fw(i.stops);r={type:"color-ramp",title:t||this._getPointCloudRendererTitle(i),infos:u,preview:Gs(u.map(h=>h.color))}}else Od(i)&&(n={type:"symbol-table",title:t||this._getPointCloudRendererTitle(i),infos:[]},i.colorUniqueValueInfos.forEach(a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(Ho,a.color)})}));n&&n.infos.length&&s.push(n),r&&r.infos.length&&s.push(r);const o=s.reduce((a,c)=>a.concat(c.infos),[]).filter(a=>!!a.symbol).map(a=>this._getSymbolPreview(a,this.opacity,{symbolConfig:{applyColorModulation:!!i.colorModulation}}));return Ge(o).then(()=>s)}_getElementInfoForDotDensity(i,e){var g;const{backgroundColor:t,outline:s,dotSize:n}=i,r=(g=this.effectList)==null?void 0:g.effects.map(f=>f.toJSON()),o=a_(r),a=n+"-"+e+"-"+t+"-"+(s&&JSON.stringify(s.toJSON()))+"-"+o,c=this._dotDensityUrlCache,u=c.has(a)?c.get(a):_0(i,e);c.set(a,u);const h={shape:{type:"image",x:0,y:0,width:u.width,height:u.height,src:u.src},fill:null,stroke:null,offset:[0,0]},p=Io([[h]],[u.width,u.height],{effectView:this.effectList});return{opacity:1,src:u.src,preview:p,width:u.width,height:u.height}}_constructDotDensityRendererLegendElements(i){const e=i.calculateDotValue(this.view.scale),t=i.legendOptions&&i.legendOptions.unit,s={type:"symbol-table",title:{value:e&&Math.round(e),unit:t||""},infos:[]};return i.attributes.forEach(n=>{const r=this._getElementInfoForDotDensity(i,n.color);r.label=n.label||n.valueExpressionTitle||n.field,s.infos.push(r)}),Promise.resolve([s])}async _constructPieChartRendererLegendElements(i){var c,u,h,p;const e=this.layer.opacity,t=[];let s=null;const n=i.outline;i.attributes.forEach(g=>{const f=new Yn({color:g.color,outline:n}),y=g.label||g.valueExpressionTitle||g.field;t.push({label:y,symbol:f})});const r=t.length?[...t]:[];if((c=i.othersCategory)!=null&&c.color&&((u=i.othersCategory)==null?void 0:u.threshold)!==0){const g=new Yn({color:i.othersCategory.color,outline:n});s=i.othersCategory.label||"Other",t.push({label:s,symbol:g})}if((h=i.defaultColor)!=null&&h.a){const g=new Yn({color:i.defaultColor,outline:n});t.push({label:i.defaultLabel,symbol:g})}const o=await this._getVisualVariableLegendElements(i,this.layer)||[];if(t.length){o.unshift({type:"symbol-table",title:null,infos:t});const g=r.filter(y=>y.label!==s).map(y=>y.symbol.color).filter(Boolean),f=w0(g,{holePercentage:i.holePercentage,backgroundColor:(p=i.backgroundFillSymbol)==null?void 0:p.color,effectList:this.effectList,outline:n});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(i,this.layer),infos:t,preview:f})}const a=o.reduce((g,f)=>g.concat(this._getAllInfos(f)),[]).filter(g=>!!(g!=null&&g.symbol)&&!(g!=null&&g.preview)).map(g=>this._getSymbolPreview(g,e,{effectList:this.effectList}));return await Ge(a),o}async _constructRendererLegendElements(i,e={}){var _;const{title:t,sublayer:s}=e,n=s||this.layer;this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const r=await this._getVisualVariableLegendElements(i,n)||[],o={type:"symbol-table",title:t||this._getRendererTitle(i,n),infos:[]};let a=null,c=!1;const u=new Set;if(Bc(i)&&!this._hasSizeRamp){const v=await _m(i);o.infos.push({label:null,symbol:v})}else if(dx(i)){let v=t;const w=ux(i)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",b=r.findIndex(k=>k.type==="color-ramp"),M=b!==-1?r.splice(b,1)[0]:null,S=r.findIndex(k=>k.type==="size-ramp"),x=S!==-1?r.splice(S,1)[0]:null,A=[];M&&(v=M.title,A.push(M)),x&&(v=x.title,A.push(x)),A.length>0&&r.push({type:w,title:v,infos:A})}else if(vf(i)){const v=Im(i);r.push({type:"heatmap-ramp",title:t||this._getRendererTitle(i,n),infos:v,preview:Gs(v.map(w=>w.color),{effectList:this.effectList})})}else if(ma(i)){const v=i&&i.authoringInfo;if(v&&v.type==="relationship"){const{focus:w,numClasses:b,field1:M,field2:S}=v;if(b&&M&&S){const x=[M,S];let A=Hm(w)||0;for(const te of x){const{field:U,normalizationField:J,label:oe}=te,Le=oe||{field:this._getFieldAlias(U,n),normField:J&&this._getFieldAlias(J,n)},Re=hx.clone();Re.angle=A,o.infos.push({label:Le,symbol:Re}),u.add(Re),A+=90}const k=v0({focus:w,numClasses:b,infos:i.uniqueValueInfos});r.unshift(k)}}else if(In(this.layer)||qo(this.layer))i.uniqueValueInfos.forEach(w=>{w.symbol&&o.infos.push({label:w.label||w.value,value:w.value,symbol:w.symbol})});else{const{field:w,field2:b,field3:M,fieldDelimiter:S,valueExpression:x,defaultSymbol:A}=i,k=!(!w&&!x||!b&&!M),te=[];if(i.uniqueValueGroups.forEach(U=>{const J={type:"symbol-table",title:U.heading,infos:[]};U.classes.forEach(oe=>{const{symbol:Le,values:Re}=oe;if(Le){const _e=[],Qe=[];for(const Se of Re){const{value:kt,value2:rl,value3:_r}=Se,Fs=[],Co=[];(w||x)&&(Fs.push(kt),Co.push(this._getDomainName(w,kt,n))),b&&(Fs.push(rl),Co.push(this._getDomainName(b,rl,n))),M&&(Fs.push(_r),Co.push(this._getDomainName(M,_r,n))),_e.push(k?Fs.join(S||""):Fs[0]),Qe.push(Co.join(" - "))}const Ye=_e.join(", ");let Be=oe.label;if(!Be){const Se=Qe.filter(Boolean);Be=Se.length?Se.join(", "):Ye}J.infos.push({label:Be,value:Ye,symbol:Le})}}),J.infos.length&&te.push(J)}),te.length){const U=te[0];te.length===1&&"title"in U&&!U.title?o.infos.push(...U.infos):(A&&(te.push({type:"symbol-table",infos:[{label:i.defaultLabel||"others",symbol:A}]}),c=!0),o.infos.push(...te)),t||i.legendOptions&&i.legendOptions.title||i.valueExpressionTitle||(o.title=null)}}i.defaultSymbol&&!c&&(o.infos.push({label:i.defaultLabel||"others",symbol:i.defaultSymbol}),c=!0)}else if(Nn(i))a=this._isUnclassedRenderer(i),(!a||!this._hasSizeRamp)&&(i.classBreakInfos.forEach(v=>{v.symbol&&o.infos.unshift({label:v.label||(a?null:v.minValue+" - "+v.maxValue),value:[v.minValue,v.maxValue],symbol:v.symbol})}),a&&(o.title=null),this._updateInfosforClassedSizeRenderer(i,o.infos)),i.defaultSymbol&&!a&&(o.infos.push({label:i.defaultLabel||"others",symbol:i.defaultSymbol}),c=!0);else if(ff(i))if(qo(this.layer)||lx(this.layer)){const v=this._constructTileImageryStretchRendererElements(i);cx(v)?r.push(v):o.infos=v}else{const v=this.layer;let w,b;i.statistics&&i.statistics.length&&(w=i.statistics[0].min!=null?i.statistics[0].min:i.statistics[0][0],b=i.statistics[0].max!=null?i.statistics[0].max:i.statistics[0][1]);let M=[];const S=Ne(v.renderingRule?await v.generateRasterInfo(v.renderingRule):v.serviceRasterInfo),x=S.keyProperties.BandProperties,A=pu(S.pixelType);if(S.bandCount===1){const k=((_=v.bandIds)==null?void 0:_[0])||0;w=w??(S.statistics?S.statistics[k].min:A[0]),b=b??(S.statistics?S.statistics[k].max:A[1]),w||b?r.push(this._getStretchLegendElements(i,{min:w,max:b})):this._getServerSideLegend()}else v.bandIds&&v.bandIds.length===1?(w=w??(S.statistics?S.statistics[v.bandIds[0]].min:A[0]),b=b??(S.statistics?S.statistics[v.bandIds[0]].max:A[1]),w||b?r.push(this._getStretchLegendElements(i,{min:w,max:b})):this._getServerSideLegend()):S.bandCount>=3?x&&x.length>=S.bandCount?v.bandIds&&v.bandIds.length===3?(M=v.bandIds.map(k=>x[k].BandName),o.infos=this._createSymbolTableElementMultiBand(M)):v.format==="lerc"?(M=[0,1,2].map(k=>x[k].BandName),o.infos=this._createSymbolTableElementMultiBand(M)):this._getServerSideLegend():v.format==="lerc"?(M=["band1","band2","band3"],o.infos=this._createSymbolTableElementMultiBand(M)):this._getServerSideLegend():this._getServerSideLegend()}else if(gf(i))i.colormapInfos.forEach(v=>{o.infos.push({label:v.label,value:v.value,symbol:this._getAppliedCloneSymbol(XC,v.color)})});else if(Vn(i)){let v=i.symbol;switch(e.geometryType){case"point":v="pointSymbol"in n&&n.pointSymbol;break;case"polyline":v="lineSymbol"in n&&n.lineSymbol;break;case"polygon":v="polygonSymbol"in n&&n.polygonSymbol}const w=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;i.symbol&&w&&o.infos.push({label:i.label,symbol:v})}else if(mf(i)){i.outputUnit&&(this.title="("+i.toJSON().outputUnit+")"),o.title=i.attributeField;const v=i.getClassBreakInfos();v!=null&&v.length?v.forEach(w=>{o.infos.push({label:w.minValue+" - "+w.maxValue,symbol:w.symbol})}):o.infos.push({label:i.attributeField,symbol:i.getDefaultSymbol()})}else yf(i)&&r.push(this._getStretchLegendElements(i,{min:0,max:255}));const h=i.defaultSymbol;!h||c||Vn(i)||a&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||r.push({type:"symbol-table",infos:[{label:i.defaultLabel||"others",symbol:h}]}),o.infos.length&&r.unshift(o);const p=e.opacity==null?this.opacity:e.opacity,g=this._isTallSymbol("visualVariables"in i&&i.visualVariables),f=In(this.layer)||qo(this.layer),y=r.reduce((v,w)=>v.concat(this._getAllInfos(w)),[]).filter(v=>!!(v!=null&&v.symbol)).map(v=>this._getSymbolPreview(v,p,{isDefault:v.symbol===h,applyScaleDrivenSize:!u.has(v.symbol),symbolConfig:{isTall:g,isSquareFill:f},effectList:u.has(v.symbol)?null:this.effectList}));return i=null,await Ge(y),r}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(i){const e=i==null?void 0:i.infos;return e?e.reduce((t,s)=>t.concat(this._getAllInfos(s)),[]):[i]}_constructTileImageryStretchRendererElements(i){var h,p;const e=this.layer,{rasterInfo:t}=e.raster,s=t.bandCount||i.statistics.length;let n,r,o=[];const a=t.keyProperties&&t.keyProperties.BandProperties,c=(h=i==null?void 0:i.statistics)!=null&&h.length?i.statistics:t==null?void 0:t.statistics;if(c)n=c[0].min!==void 0?c[0].min:c[0][0],r=c[0].max||c[0][1];else{const g=pu(t.pixelType);n=g[0],r=g[1]}if(e.hasStandardTime()&&(n=e.getStandardTimeValue(n),r=e.getStandardTimeValue(r)),t.bandCount===1||((p=e.bandIds)==null?void 0:p.length)===1)return this._getStretchLegendElements(i,{min:n,max:r});function u(g){var y;const f=((y=e==null?void 0:e.bandIds)!=null&&y.length?e.bandIds:Array.from(Array(Math.min(t.bandCount,3)).keys())).map(_=>g&&g[_]&&g[_].BandName||"band"+(_+1));return f.length<3?f.push(f[1]):f.length>3&&f.splice(3),f}return o=a&&a.length>=s?u(a):u(),this._createSymbolTableElementMultiBand(o)}_getStretchLegendElements(i,e){const t=i.colorRamp,s=Dw(t,e);return{type:"stretch-ramp",title:"",infos:s,preview:Gs(s.map(n=>n.color))}}_getClusterSymbol(){var s;const i=this.layer,e="featureReduction"in i&&i.featureReduction,t=e&&"symbol"in e&&e.renderer;return t&&((s=t==null?void 0:t.authoringInfo)==null?void 0:s.isAutoGenerated)!==!0?null:e&&"symbol"in e&&e.symbol}async _getSizeLegendElement(i,e,t,s){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):i,infos:await DC(t,e,await pc(t),this.scale,this.view.type,s,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(i){const e=[],t=["red","green","blue"];return i.forEach((s,n)=>{e.push({label:{colorName:t[n],bandName:s},src:kw[n],opacity:this.opacity??1})}),e}_updateInfosforClassedSizeRenderer(i,e){const t=i.authoringInfo&&i.authoringInfo.type==="class-breaks-size",s=i.classBreakInfos.some(n=>qa(n.symbol));if(t&&s){const n=Nc,r=zc,o=i.classBreakInfos.length,a=(n-r)/(o>1?o-1:o);e.forEach((c,u)=>{c.size=n-a*u})}}_isTallSymbol(i){let e=!1,t=!1;if(i)for(let s=0;s<i.length&&(!e||!t);s++){const n=i[s];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(t=!0))}return e&&t}async _getSymbolPreview(i,e,t){let s=!(t!=null&&t.isDefault)&&i.size==null&&this._hasSizeRamp?Yy(Ze.size):i.size;if(this._scaleDrivenSizeVariable&&(t!=null&&t.applyScaleDrivenSize)){const{getSize:n}=await T(()=>import("./visualVariableUtils-6f05f98d.js"),["assets/visualVariableUtils-6f05f98d.js","assets/Color-9f46ece8.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b3bee9e7.js","assets/typedArrayUtil-96f93e5b.js","assets/ensureType-348c3d61.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/Graphic-f117754c.js","assets/JSONSupport-ed372989.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/geometry-d89d4a34.js","assets/Extent-fd3ac910.js","assets/cast-73cfc253.js","assets/Polyline-9d44200b.js","assets/typeUtils-2ccaf90d.js","assets/PopupTemplate-63dce4d3.js","assets/Clonable-5318ec31.js","assets/Collection-d9d92883.js","assets/Evented-e2ee9722.js","assets/SimpleObservable-04055e8d.js","assets/fieldUtils-66be74eb.js","assets/preload-helper-f8378b50.js","assets/enumeration-49e09bda.js","assets/number-205e28e0.js","assets/locale-30120714.js","assets/Identifiable-876da2a8.js","assets/symbols-946d4e11.js","assets/CIMSymbol-0fa077f5.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-cc413a8c.js","assets/symbolLayerUtils3D-0c6ed99a.js","assets/aaBoundingBox-1eda6d1b.js","assets/request-7c0a9d4c.js","assets/persistableUrlUtils-26091271.js","assets/collectionUtils-e98ed3f0.js","assets/Portal-172924b2.js","assets/Loadable-c96deb83.js","assets/Promise-34cff6d6.js","assets/PortalGroup-751b527f.js","assets/PortalUser-7f979a04.js","assets/jsonUtils-dd0891e0.js","assets/compilerUtils-8d4f8499.js","assets/lengthUtils-bc8879ed.js","assets/sizeVariableUtils-d4870b0d.js"]);s=n(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:i.symbol.type==="simple-marker"?i.symbol.style:null})}return qm(i.symbol,{size:s,opacity:e,scale:!1,symbolConfig:t==null?void 0:t.symbolConfig,effectView:t==null?void 0:t.effectList}).then(n=>(i.preview=n,i)).catch(()=>(i.preview=null,i))}_getClusterRenderer(i){var n,r;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer&&this.layer.renderer,t=((n=i.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),s=Ne(LC(this.layerView._effectiveRenderer,this.view));if(s&&"visualVariables"in t&&!((r=t.visualVariables)==null?void 0:r.some(a=>a.type==="size"&&a.target!=="outline"&&!Bo.test(a.valueExpression)))){if("clusterMinSize"in i&&"clusterMaxSize"in i){const{clusterMinSize:c,clusterMaxSize:u}=i;s.legendOptions=new u_({showLegend:c!==u})}const a=t.visualVariables||[];t.visualVariables=a.concat([s]),this._hasClusterSizeVariable=!0}return t}async _loadRenderer(i){const e=[],t=i.clone(),s=await pc(t);if(Nn(t)||ma(t)){const n=(t.classBreakInfos||t.uniqueValueInfos).map(r=>this._fetchSymbol(r.symbol,s).then(o=>{r.symbol=o}).catch(()=>{r.symbol=null}));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(t.symbol||t.defaultSymbol,t.defaultSymbol?null:s).then(n=>{this._applySymbolToRenderer(t,n,Vn(t))}).catch(()=>{this._applySymbolToRenderer(t,null,Vn(t))})),Ge(e).then(()=>t)}_applySymbolToRenderer(i,e,t){t?i.symbol=e:i.defaultSymbol=e}async _fetchSymbol(i,e){if(!i)throw new Error;if(i.type==="web-style"){const t=this._webStyleSymbolCache;try{const s=await(this.view.type==="2d"?i.fetchCIMSymbol({cache:t}):i.fetchSymbol({cache:t}));return this._getAppliedCloneSymbol(s,e)}catch{throw q.getLogger(this.declaredClass).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(i,e)}_getAppliedCloneSymbol(i,e){if(!i||!e)return i;const t=i.clone(),s=e&&e.toRgba();return t.type.includes("3d")?this._applyColorTo3dSymbol(t,s):t.type==="cim"?zp(t,e):t.color&&(t.color=new Ie(s||t.color)),t}_applyColorTo3dSymbol(i,e){e&&i.symbolLayers.forEach(t=>{t&&(t.material||(t.material={}),t.material.color=new Ie(e))})}async _getVisualVariableLegendElements(i,e){if(!("visualVariables"in i)||!i.visualVariables||i.type==="vector-field")return null;const t=i.visualVariables,s=[],n=[],r=[];for(const h of t)h.type==="color"?s.push(h):h.type==="size"?n.push(h):h.type==="opacity"&&r.push(h);const o=[...s,...n,...r];let a,c;if(s.length===0&&Nn(i)&&i.classBreakInfos&&i.classBreakInfos.length===1){const h=i.classBreakInfos[0];a=h&&h.symbol}if(s.length===0&&Vn(i)&&(a=i.symbol),a)if(a.type.includes("3d")){const h=a.symbolLayers.getItemAt(0);h.type==="water"?C(h.color)&&(c=h.color):C(h.material)&&C(h.material.color)&&(c=h.material.color)}else a.url||(c=a.color);const u=this.effectList;return(await Promise.all(o.map(async h=>{if(!h.legendOptions||h.legendOptions.showLegend!==!1){const p=Bc(i)?h.field:this._getRampTitle(h,e);let g=null;const f="getField"in e&&e.getField&&e.getField(h.field),y=f&&ov(f);if(h.type==="color"){const _=await mc(h,null,y);g={type:"color-ramp",title:p,infos:_,preview:Gs(_.map(v=>v.color),{effectList:u})},this._hasColorRamp||(this._hasColorRamp=!(g.infos==null||!g.infos.length))}else if(h.type==="size"&&h.target!=="outline")Bo.test(h.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=h):(g=await this._getSizeLegendElement(p,h,i,y),this._hasSizeRamp||(this._hasSizeRamp=!(g.infos==null||!g.infos.length)));else if(h.type==="opacity"){const _=await mc(h,c,y);g={type:"opacity-ramp",title:p,infos:_,preview:Gs(_.map(v=>v.color),{effectList:u})},this._hasOpacityRamp||(this._hasOpacityRamp=!(g.infos==null||!g.infos.length))}return g&&g.infos?g:null}}))).filter(h=>!!h)}_getDomainName(i,e,t){if(i&&typeof i!="function"){const s="getField"in t&&t.getField&&t.getField(i),n=s&&"getFieldDomain"in t&&t.getFieldDomain?t.getFieldDomain(s.name):null;return n&&n.type==="coded-value"?n.getName(e):null}return null}_getClusterTitle(i){const e=this.layer,t=i.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const s=e.featureReduction,n="popupTemplate"in s&&s.popupTemplate,r=n&&n.fieldInfos;if(r){for(const o of r)if(o.fieldName===t)return t==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(i,e){let t=i.field,s=i.normalizationField,n=!1,r=!1,o=!1,a=null;t=typeof t=="function"?null:t,s=typeof s=="function"?null:s;const c=i.legendOptions&&i.legendOptions.title;if(c!=null)a=c;else if(i.valueExpressionTitle)a=i.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&e.renderer.authoringInfo&&e.renderer.authoringInfo.visualVariables){const u=e.renderer.authoringInfo.visualVariables;for(let h=0;h<u.length;h++){const p=u[h];if(p.type==="color"){if(p.style==="ratio"){n=!0;break}if(p.style==="percent"){r=!0;break}if(p.style==="percent-of-total"){o=!0;break}}}}a={field:t&&this._getFieldAlias(t,e),normField:s&&this._getFieldAlias(s,e),ratio:n,ratioPercent:r,ratioPercentTotal:o}}return a}_getRendererTitle(i,e){const t=i;if(t.legendOptions&&t.legendOptions.title)return t.legendOptions.title;if(t.valueExpressionTitle)return t.valueExpressionTitle;let s=t.field,n=null,r=null;if(Nn(t)&&(n=t.normalizationField,r=t.normalizationType==="percent-of-total"),s=typeof s=="function"?null:s,n=typeof n=="function"?null:n,ma(t)){const{field2:a,field3:c,fieldDelimiter:u}=t;let h=s&&this._getFieldAlias(s,e);return a&&(h=`<${h}>${u}<${this._getFieldAlias(a,e)}>`,c&&(h=`${h}${u}<${this._getFieldAlias(c,e)}>`)),h}let o=null;return(s||n)&&(o={field:s&&this._getFieldAlias(s,e),normField:n&&this._getFieldAlias(n,e),normByPct:r}),o}_getFieldAlias(i,e){const t="popupTemplate"in e&&e.popupTemplate,s=t&&t.fieldInfos;let n=null;s&&s.some(h=>i===h.fieldName&&(n=h,!0));let r=null;"getField"in e&&e.getField?r=e.getField(i):"fieldsIndex"in e&&e.fieldsIndex&&(r=e.fieldsIndex.get(i));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(!n&&"popupTemplate"in a&&a.popupTemplate&&a.popupTemplate.fieldInfos&&a.popupTemplate.fieldInfos.some(h=>{var p;return(i==null?void 0:i.toLowerCase())===((p=h.fieldName)==null?void 0:p.toLowerCase())&&(n=h,!0)}),"fields"in a&&a.fields&&(o=a.fields.find(h=>{var p;return((p=h.name)==null?void 0:p.toLowerCase())===(i==null?void 0:i.toLowerCase())})));const c=n||r||o;let u=null;return c&&(u=(n==null?void 0:n.label)||(r==null?void 0:r.alias)||(o==null?void 0:o.alias)||"name"in c&&c.name||"fieldName"in c&&c.fieldName),u}_isUnclassedRenderer(i){const e=i.visualVariables;let t=!1;return Nn(i)&&i.classBreakInfos&&i.classBreakInfos.length===1&&e&&(t=i.field?e.some(s=>!(!s||i.field!==s.field||(i.normalizationField||s.normalizationField)&&i.normalizationField!==s.normalizationField)):!!e.length),t}};l([d()],Ue.prototype,"children",void 0),l([d({readOnly:!0})],Ue.prototype,"effectList",null),l([d()],Ue.prototype,"layerView",void 0),l([d()],Ue.prototype,"layer",void 0),l([d()],Ue.prototype,"legendElements",void 0),l([d({readOnly:!0})],Ue.prototype,"opacity",null),l([d()],Ue.prototype,"parent",void 0),l([d({readOnly:!0,dependsOn:[]})],Ue.prototype,"ready",null),l([d()],Ue.prototype,"hideLayersNotInCurrentView",void 0),l([d()],Ue.prototype,"keepCacheOnDestroy",void 0),l([d()],Ue.prototype,"respectLayerVisibility",void 0),l([d({readOnly:!0})],Ue.prototype,"scale",null),l([d()],Ue.prototype,"sublayerIds",void 0),l([d({readOnly:!0})],Ue.prototype,"isScaleDriven",null),l([d()],Ue.prototype,"title",void 0),l([d({readOnly:!0,dependsOn:["ready"],value:0})],Ue.prototype,"version",null),l([d()],Ue.prototype,"view",void 0),Ue=l([$("esri.widgets.Legend.support.ActiveLayerInfo")],Ue);const bf=Ue,zs={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},If=ee.ofType(bf),px=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.knowledgeGraph.KnowledgeGraphSubLayer"],Mf="view.basemapView.baseLayerViews",Sf="view.groundView.layerViews",Cf="view.basemapView.referenceLayerViews",mx=[Mf,Sf,"view.layerViews",Cf];let Kt=class extends K{constructor(e){super(e),this._handles=new Ke,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new ee,this.activeLayerInfos=new If,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(I(()=>this.view,()=>this._viewHandles(),B),zs.view),this._handles.add(Xc(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(zs.state),this.view&&this._handles.add(I(()=>this.state,()=>this._stateHandles(),B),zs.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([zs.allLayerViews,zs.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",t=>this._allLayerViewsChangeHandle(t)),zs.allLayerViews),this._handles.add(I(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),zs.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach(t=>this._destroyViewActiveLayerInfo(t.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const t=[];e.forEach(n=>{if(!n.parent){const r=n.layer.parent,o=r&&"uid"in r&&this._layerViewByLayerId[r.uid],a=o&&this._activeLayerInfosByLayerViewId[o.uid];a&&e.includes(a)&&(t.push(n),n.parent=a,a.children.add(n),this._sortActiveLayerInfos(a.children))}}),e.removeMany(t);const s={};this.view.allLayerViews.forEach((n,r)=>s[n.layer.uid]=r),e.sort((n,r)=>{const o=s[n.layer.uid]||0;return(s[r.layer.uid]||0)-o})}_generateLayerViews(){const e=[];return mx.filter(this._filterLayerViews,this).map(this.get,this).filter(t=>t!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const t=!this.basemapLegendVisible&&(e===Mf||e===Cf),s=!this.groundLegendVisible&&e===Sf;return!t&&!s}_collectLayerViews(e,t){const s=n=>(n&&n.forEach(r=>{t.push(r),s(r[e])}),t);return s}_filterLayerViewsByLayerInfos(e){const t=this.layerInfos;return!t||!t.length||t.some(s=>this._hasLayerInfo(s,e))}_hasLayerInfo(e,t){const s=this._isLayerUIDMatching(e.layer,t.layer.uid);return s&&(this._layerInfosByLayerViewId[t.uid]=e),s}_isLayerUIDMatching(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}_hasLayerUID(e,t){return e&&e.some(s=>this._isLayerUIDMatching(s,t))}_isLayerViewSupported(e){return!!px.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(I(()=>{var t;return[e.legendEnabled,(t=e.layer)==null?void 0:t.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var a;const t=e.layer,s=e.uid,n=this._layerInfosByLayerViewId[s];let r=this._activeLayerInfosByLayerViewId[s];if(!r){const c=n&&n.title!==void 0&&n.layer.uid===t.uid;r=new bf({layer:t,layerView:e,title:c?n.title:t.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n&&n.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[s]=r}const o=t.parent&&"uid"in t.parent&&this._layerViewByLayerId[(a=t.parent)==null?void 0:a.uid];if(r.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this._handles.has(s)){const c=[I(()=>t.title,u=>this._titleHandle(u,r)),I(()=>[t.opacity,"renderer"in t&&t.renderer,"pointSymbol"in t&&t.pointSymbol,"lineSymbol"in t&&t.lineSymbol,"polygonSymbol"in t&&t.polygonSymbol],()=>this._constructLegendElements(r)),Ut(()=>{var u;return((u=this.view)==null?void 0:u.stationary)===!0},()=>this._scaleHandle(r),B),I(()=>e._effectiveRenderer,()=>this._constructLegendElements(r)),I(()=>"effect"in t&&t.effect,()=>this._constructLegendElements(r))];if(this.respectLayerVisibility){const u=I(()=>e.legendEnabled,p=>this._legendEnabledHandle(p,r)),h=I(()=>t.legendEnabled,p=>this._legendEnabledHandle(p,r));c.push(u,h)}this._handles.add(c,s)}r.isScaleDriven||this._constructLegendElements(r),this._addActiveLayerInfo(r)}_titleHandle(e,t){t.title=e,this._constructLegendElements(t)}_legendEnabledHandle(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:t,layer:s}=e;if(this._isLayerActive(t)&&!this.activeLayerInfos.includes(e)){const r=e.parent;if(r)r.children.includes(e)||r.children.push(e),this._sortActiveLayerInfos(r.children);else{const o=(n=this.layerInfos)==null?void 0:n.some(a=>a.layer.uid===s.uid);s.parent&&"uid"in s.parent&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach(a=>{const c=a.layer.parent,u=c&&"uid"in c&&this._layerViewByLayerId[c==null?void 0:c.uid],h=this._activeLayerInfosByLayerViewId[u==null?void 0:u.uid];h&&(o.push(a),a.parent=h)}),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const t=e.layer;"featureCollections"in t&&t.featureCollections?e.buildLegendElementsForFeatureCollections(t.featureCollections):"featureReduction"in t&&t.featureReduction&&"renderer"in t.featureReduction&&(t.featureReduction.type==="binning"||t.featureReduction.type==="cluster")?e.buildLegendElementsForFeatureReduction(t.featureReduction):"renderer"in t&&t.renderer&&!("sublayers"in t)?e.buildLegendElementsForRenderer(t.renderer):"url"in t&&t.url?e.buildLegendElementsForTools():e.children.forEach(s=>this._constructLegendElements(s))}};l([d({type:If})],Kt.prototype,"activeLayerInfos",void 0),l([d()],Kt.prototype,"basemapLegendVisible",void 0),l([d()],Kt.prototype,"groundLegendVisible",void 0),l([d()],Kt.prototype,"hideLayersNotInCurrentView",void 0),l([d()],Kt.prototype,"keepCacheOnDestroy",void 0),l([d()],Kt.prototype,"respectLayerVisibility",void 0),l([d()],Kt.prototype,"layerInfos",void 0),l([d({readOnly:!0})],Kt.prototype,"state",null),l([d()],Kt.prototype,"view",void 0),Kt=l([$("esri.widgets.Legend.LegendViewModel")],Kt);const gx=Kt,ne="esri-legend--card",Sn="esri-legend",D={activated:`${ne}__carousel-indicator--activated`,base:ne,stacked:`${Sn}--stacked`,carouselTitle:`${ne}__carousel-title`,indicator:`${ne}__carousel-indicator`,intervalSeparator:`${ne}__interval-separator`,imageryLayerStretchedImage:`${ne}__imagery-layer-image--stretched`,imageLabel:`${ne}__image-label`,layerCaption:`${ne}__layer-caption`,labelElement:`${ne}__label-element`,layerRow:`${ne}__layer-row`,labelCell:`${ne}__label-cell`,message:`${ne}__message`,rampLabel:`${ne}__ramp-label`,section:`${ne}__section`,relationshipSection:`${ne}__relationship-section`,serviceCaptionText:`${ne}__service-caption-text`,serviceContent:`${ne}__service-content`,service:`${ne}__service`,groupLayer:`${ne}__group-layer`,groupLayerChild:`${ne}__group-layer-child`,symbol:`${ne}__symbol`,sizeRampRow:`${ne}__size-ramp-row`,symbolRow:`${ne}__symbol-row`,symbolCell:`${ne}__symbol-cell`,indicatorContainer:`${ne}__carousel-indicator-container`,intervalSeparatorsContainer:`${ne}__interval-separators-container`,relationshipLabelContainer:`${ne}__relationship-label-container`,labelContainer:`${ne}__label-container`,serviceCaptionContainer:`${ne}__service-caption-container`,symbolContainer:`${ne}__symbol-container`,sizeRampContainer:`${ne}__size-ramp-container`,sizeRampPreview:`${ne}__size-ramp-preview`,pieChartRampPreview:`${ne}__pie-chart-ramp-preview`,rampContainer:`${Sn}__ramps`,sizeRampHorizontal:`${Sn}__size-ramp--horizontal`,rampLabelsContainer:`${Sn}__ramp-labels`,layerInfo:`${Sn}__layer-cell ${Sn}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},fx=_a(),xf=10,Dd=20,nl=10,Vd=20,Nd={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function yx(i="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return i==="vertical"?m("svg",{height:"4",width:"10"},m("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:e})):m("svg",{height:"10",width:"10"},m("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:e}))}function vx(i,e="vertical"){const t=document.createElement("div");return t.style.height=`${Dd}px`,t.className=Nd.univariateAboveAndBelowSymbol,i!=null&&(t.style.opacity=i.toString()),fx.append(t,yx.bind(null,e)),t}function Ef(i,e,t="vertical",s){i.infos.forEach((n,r)=>{if(s&&r===2)n.preview=vx(e,t);else{const o=dt(n.size)+(t==="horizontal"?Vd:nl),a=n.preview.tagName.toLowerCase()==="div",c=a?n.preview:document.createElement("div");c.className=Nd.univariateAboveAndBelowSymbol,t==="horizontal"?c.style.width=`${o}px`:c.style.height=`${o}px`,a||c.appendChild(n.preview),n.preview=c}})}function Fa(i,e="classic"){const t=i.infos;return e==="classic"?(dt(t[0].size)+nl)/2:(dt(t[0].size)-dt(t[t.length-1].size))/2}function er(i,e){if(!i)return null;const t=i.infos.map(n=>n.color),s=Gs(e.type==="full"?t:e.type==="above"?t.slice(0,3):t.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList});return s.className=Nd.colorRamp,e.opacity!=null&&(s.style.opacity=e.opacity.toString()),s}function Hc(i,e,t,s="vertical"){let n=0;const r=i.infos,o=Math.floor(r.length/2),a=e==="full"||e==="above"?0:o,c=e==="full"||e==="below"?r.length-1:o;for(let u=a;u<=c;u++)t&&u===o?n+=s==="horizontal"?xf:Dd:n+=dt(r[u].size)+(s==="horizontal"?Vd:nl);return Math.round(n)}function tr(i,e,t,s="vertical"){const n=Hc(i,e,t,s),r=i.infos,o=Math.floor(r.length/2),a=e==="full"||e==="above"?0:o,c=e==="full"||e==="below"?r.length-1:o,u=e==="full"?r[a].size+r[c].size:e==="above"?r[a].size:r[c].size,h=t?s==="vertical"?Dd:xf:0,p=s==="vertical"?nl*(e==="full"?2:1):Vd*(e==="full"?2:1);return Math.round(n-(dt(u)/2+h/2+p/2))}function $f(i,e,t="vertical"){const s=i.infos;let n=s.find(({type:o})=>o==="size-ramp"),r=s.find(({type:o})=>o==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],Ef(n,e,t,!0)),r&&(r={...r},r.infos=[...r.infos]),t==="horizontal"&&(n==null||n.infos.reverse(),r==null||r.infos.reverse()),{sizeRampElement:n,colorRampElement:r}}function Lf(i,e="vertical"){const t=i.infos;let s=t.find(({type:r})=>r==="size-ramp"),n=t.find(({type:r})=>r==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],Ef(s,null,e,!1)),n&&(n={...n},n.infos=[...n.infos]),e==="horizontal"&&(s==null||s.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:s,colorRampElement:n}}function _x(i,e){return e}function Je(i){const e=this;i.appendChild(e)}function ir(i,e,t){if(!e)return;if(typeof e=="string"||typeof e=="number")return e;if("value"in e||"unit"in e)return Mt(i.dotValue,e);if("colorName"in e&&"bandName"in e)return i[e.colorName]+": "+(i[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?i.clusterCountTitle:null;let s=null;return _x(e,t)?s=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:Tf(e,t)&&(s=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),s?Mt(s==="showField"?"{field}":i[s],{field:e.field,normField:e.normField}):null}function Tf(i,e){return!e}function Af(i,e){return!!(e&&e==="Stretched"&&i.version>=10.3&&i.declaredClass==="esri.layers.ImageryLayer")}const wx=25,bx=25,Ix=768,Mx=100;var ro;(function(i){i.Auto="auto",i.Stack="stack",i.SideBySide="side-by-side"})(ro||(ro={}));const Sx="#ddd",Cn=window.devicePixelRatio;function Cx(i){if(i){if(i.type.includes("3d")){const e=i.symbolLayers&&i.symbolLayers.length;if(!e)return;const t=i.symbolLayers.getItemAt(e-1),s=t.resource&&t.resource.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}{const e=i.style;return e==="circle"||e==="diamond"||e==="cross"}}}function xx(i){if(i){if(i.type.includes("3d")){const e=i.symbolLayers&&i.symbolLayers.length;if(!e)return;const t=i.symbolLayers.getItemAt(e-1).get("resource.primitive");return t==="triangle"||t==="cone"||t==="tetrahedron"}return i.style==="triangle"}}let ii=class extends Me{constructor(e,t){super(e,t),this._handles=new Ke,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=ro.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles(I(()=>this.activeLayerInfos,e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=this.layout===ro.Auto&&this.view.container.clientWidth<=Ix||this.layout===ro.Stack;const e=this.activeLayerInfos,t=e&&e.toArray().map(c=>this._renderLegendForLayer(c)).filter(c=>!!c);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const s=this._sectionNames.length,n=this._sectionNames.map((c,u)=>{const h=Mt(this.messagesCommon.pagination.pageText,{index:u+1,total:s});return m("div",{key:c,role:"tab",id:c,"aria-label":h,"aria-controls":`${c}-panel`,"aria-selected":(this._selectedSectionName===c).toString(),tabIndex:this._selectedSectionName===c?0:-1,title:h,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(D.indicator,{[D.activated]:this._selectedSectionName===c}),"data-section-name":c})}),r=this._hasIndicators&&s>1?m("div",{class:D.indicatorContainer,key:"carousel-navigation",role:"tablist"},n):null,o=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,a={[D.stacked]:this._hasIndicators};return m("div",{class:this.classes(D.base,a)},o||m("div",{class:D.message},this.messages.noLegend),r)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,s=t==="ArrowLeft"?-1:1,n=e.target.getAttribute("data-section-name"),r=this._sectionNames.indexOf(n),o=this._sectionNames;let a=null;r!==-1&&(o[r+s]?a=document.getElementById(o[r+s]):t==="ArrowLeft"?a=document.getElementById(o[o.length-1]):t==="ArrowRight"&&(a=document.getElementById(o[0])),a&&a.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(s=>{const n=`activeLayerInfo-${s.layer.uid}-version-change`;this._handles.remove(n),this._watchForSectionChanges(s.children),this._handles.add(I(()=>s.version,()=>this._generateSectionNames()),n)});const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",()=>this._watchForSectionChanges(e)),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,s){return`${this.id}${e.uid}-type-${t.type}-${s}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((t,s)=>{this._sectionNames.push(this._getSectionName(e.layer,t,s))})}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map(s=>this._renderLegendForLayer(s)).toArray();return m("div",{key:e.layer.uid,class:this.classes(D.service,D.groupLayer)},m("div",{class:D.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const s=t.some(o=>o.type==="relationship-ramp"),n=t.map((o,a)=>this._renderLegendForElement(o,e,a,s)).filter(o=>!!o);if(!n.length)return null;const r={[D.groupLayerChild]:!!e.parent};return m("div",{key:e.layer.uid,class:this.classes(D.service,r)},m("div",{class:D.serviceCaptionContainer},m("div",{class:D.serviceCaptionText},e.title)),m("div",{class:D.serviceContent},n))}}_renderLegendForElement(e,t,s,n=!1,r=!1){const o=e.type==="color-ramp",a=e.type==="opacity-ramp",c=e.type==="size-ramp",u=t.layer;let h=null;if(typeof e.title=="string")h=e.title;else if(e.title){const v=e.title,w=ir(this.messages,v,o||a);h=v.title?`${v.title} (${w})`:w}const p=this._getSectionName(u,e,s),g=this._hasIndicators&&!r?m("div",null,m(Ls,{level:this.headingLevel,class:D.carouselTitle},t.title),m(Ls,{level:hw(this.headingLevel),class:D.layerCaption},h)):h?m(Ls,{level:this.headingLevel,class:D.layerCaption},h):null,f=t.effectList;let y=null;if(e.type==="symbol-table"){const v=e.infos.map((w,b)=>this._renderLegendForElementInfo(w,t,e.legendType,b)).filter(w=>!!w);if(v.length){const w=v[0].properties.classes&&v[0].properties.classes[D.symbolRow],b={[D.labelContainer]:!w&&!n,[D.relationshipLabelContainer]:n};y=m("div",{class:this.classes(b)},v)}}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"?y=this._renderLegendForRamp(e,u.opacity,f):c?y=this._renderSizeRamp(e,u.opacity):e.type==="pie-chart-ramp"?y=this._renderPieChartRamp(e):e.type==="relationship-ramp"?y=Nm(e,this.id,u.opacity,f):e.type==="univariate-above-and-below-ramp"?y=this._renderUnivariateAboveAndBelowRamp(e,u.opacity,f):e.type==="univariate-color-size-ramp"&&(y=this._renderUnivariateColorSizeRamp(e,u.opacity,f));if(!y)return null;const _=m("div",{key:p,class:D.section,id:`${p}-panel`,role:"tabpanel","aria-labelledby":p,tabIndex:0},[g,y]);return r||this._sectionMap.set(p,_),_}_renderPieChartRamp(e){return m("div",{class:D.pieChartRampPreview,bind:e.preview,afterCreate:Je})}_renderUnivariateAboveAndBelowRamp(e,t,s){const{sizeRampElement:n,colorRampElement:r}=$f(e,t,"horizontal");if(!n)return null;const o=Hc(n,"full",!0,"horizontal"),a=tr(n,"above",!0,"horizontal"),c=tr(n,"below",!0,"horizontal"),u=12,h=er(r,{width:a,height:u,rampAlignment:"horizontal",opacity:t,type:"above",effectList:s}),p=er(r,{width:c,height:u,rampAlignment:"horizontal",opacity:t,type:"below",effectList:s}),g=Fa(n,"card"),f=n.infos.map(S=>S.label),y=f.length-1,_=f.map((S,x)=>x===0||x===y?m("div",{key:x},S):null),v={display:"flex",flexDirection:"column"},w={display:"flex",flexDirection:"row"},b={marginTop:"3px",display:"flex"};qt(this.container)?b.marginRight=`${g}px`:b.marginLeft=`${g}px`;const M={width:`${o}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return m("div",{class:D.layerRow,key:"size-ramp-preview",styles:v},m("div",{class:this.classes(D.symbolContainer,D.sizeRampHorizontal),styles:w},n.infos.map((S,x)=>m("div",{key:x,class:D.symbol,bind:S.preview,afterCreate:Je}))),h?m("div",{class:D.univariateAboveAndBelowColorRamp,styles:b,key:"color-ramp-preview"},m("div",{bind:h,afterCreate:Je}),m("div",{bind:p,afterCreate:Je})):null,m("div",{class:D.layerInfo},m("div",{class:D.rampLabelsContainer,styles:M},_)))}_renderUnivariateColorSizeRamp(e,t,s){const{sizeRampElement:n,colorRampElement:r}=Lf(e,"horizontal");if(!n)return null;const o=Hc(n,"full",!1,"horizontal"),a=tr(n,"full",!1,"horizontal"),c=er(r,{width:a,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:s}),u=Fa(n,"card"),h=n.infos.length-1,p=n.infos.map((v,w)=>w===0||w===h?m("div",{key:w},v.label):null),g={display:"flex",flexDirection:"column"},f={display:"flex",flexDirection:"row"},y={marginTop:"3px",display:"flex"};qt(this.container)?y.marginRight=`${u}px`:y.marginLeft=`${u}px`;const _={width:`${o}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return m("div",{class:D.layerRow,key:"size-ramp-preview",styles:g},m("div",{class:this.classes(D.symbolContainer,D.sizeRampHorizontal),styles:f},n.infos.map((v,w)=>m("div",{key:w,class:D.symbol,bind:v.preview,afterCreate:Je}))),m("div",{class:D.univariateAboveAndBelowColorRamp,styles:y,key:"color-ramp-preview"},m("div",{bind:c,afterCreate:Je})),m("div",{class:D.layerInfo},m("div",{class:D.rampLabelsContainer,styles:_},p)))}_renderLegendForElementInfo(e,t,s,n){var a;const r=t.layer;if(e.type)return this._renderLegendForElement(e,t,n,!1,!0);const o=Af(r,s);if(e.preview){if(!e.symbol||!e.symbol.type.includes("simple-fill")){if(!e.label)return m("div",{key:n,bind:e.preview,afterCreate:Je});const x={[D.symbolCell]:this._hasIndicators};return m("div",{key:n,class:this.classes(D.layerRow,{[D.symbolRow]:this._hasIndicators})},m("div",{class:this.classes(x),bind:e.preview,afterCreate:Je}),m("div",{class:this.classes(D.imageLabel,{[D.labelCell]:this._hasIndicators})},ir(this.messages,e.label,!1)||""))}let c=255,u=255,h=255,p=0,g=255,f=255,y=255,_=0;const v=e.symbol.color&&e.symbol.color.a,w=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;v&&(c=e.symbol.color.r,u=e.symbol.color.g,h=e.symbol.color.b,p=e.symbol.color.a*r.opacity),w&&(g=e.symbol.outline.color.r,f=e.symbol.outline.color.g,y=e.symbol.outline.color.b,_=e.symbol.outline.color.a*r.opacity);const b=((a=e.symbol.color)==null?void 0:a.isBright)??!0,M=b?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",S={background:v?`rgba(${c}, ${u}, ${h}, ${p})`:"none",color:b?"black":"white",textShadow:`-1px -1px 0 ${M},
                                              1px -1px 0 ${M},
                                              -1px 1px 0 ${M},
                                              1px 1px 0 ${M}`,border:w?`1px solid rgba(${g}, ${f}, ${y}, ${_})`:"none",filter:co(t.effectList)};return m("div",{key:n,class:D.layerRow},m("div",{class:D.labelElement,styles:S}," ",e.label," "))}if(e.src){const c=this._renderImage(e,r,o);return m("div",{key:n,class:D.layerRow},c,m("div",{class:D.imageLabel},e.label||""))}}_renderImage(e,t,s){const{label:n,src:r,opacity:o}=e,a={[D.imageryLayerStretchedImage]:s,[D.symbol]:!s},c={opacity:`${o??t.opacity}`};return m("img",{alt:ir(this.messages,n,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(a),styles:c})}_renderSizeRampLines(e){const t=e.infos,s=t[0],n=t[t.length-1],r=s.symbol,o=this._hasIndicators,a=dt(s.size+s.outlineSize)*Cn,c=dt(n.size+n.outlineSize)*Cn,u=o?a:a+50*Cn,h=o?a/2+50*Cn:a,p=xx(r),g=Cx(r),f=document.createElement("canvas");f.width=u,f.height=h,f.style.width=f.width/Cn+"px",f.style.height=f.height/Cn+"px";const y=f.getContext("2d");if(o){y.beginPath();const _=0,v=0,w=u/2-c/2,b=h;y.moveTo(_,v),y.lineTo(w,b);const M=u,S=0,x=u/2+c/2,A=h;y.moveTo(M,S),y.lineTo(x,A)}else{y.beginPath();const _=0,v=h/2-c/2,w=u,b=0;y.moveTo(_,v),y.lineTo(w,b);const M=0,S=h/2+c/2,x=u,A=h;y.moveTo(M,S),y.lineTo(x,A)}return y.strokeStyle=Sx,y.stroke(),m("div",{bind:f,afterCreate:Je,styles:o?{display:"flex",marginTop:`-${p?0:g?a/2:0}px`,marginBottom:`-${p?c:g?c/2:0}px`}:{display:"flex",marginRight:`-${p?0:g?a/2:0}px`,marginLeft:`-${p?0:g?c/2:0}px`}})}_renderSizeRamp(e,t){const s=e.infos,n=s[0].label,r=s[s.length-1].label;let o=s[0].preview,a=s[s.length-1].preview;const c=this._hasIndicators,u={"flex-direction":c?"column":"row-reverse"};o&&(o=o.cloneNode(!0),o.style.display="flex"),a&&(a=a.cloneNode(!0),a.style.display="flex");const h={opacity:t!=null?`${t}`:""};return m("div",{class:this.classes(D.layerRow,{[D.sizeRampRow]:c})},m("div",{class:D.rampLabel},c?n:r),m("div",{class:D.sizeRampContainer,styles:u},m("div",{bind:o,afterCreate:Je,class:D.sizeRampPreview,styles:h}),this._renderSizeRampLines(e),m("div",{bind:a,afterCreate:Je,class:D.sizeRampContainer,styles:h})),m("div",{class:D.rampLabel},c?r:n))}_renderLegendForRamp(e,t,s){const n=e.infos,r=e.type==="heatmap-ramp",o=n.length-1,a=bx,c=o>2&&!r?wx*o:Mx,u=c+20,h=10,p=n.slice(0).reverse();p.forEach((A,k)=>{A.offset=r?A.ratio:k/o});const g=p.length-1,f=p.length%2!=0&&p[p.length/2|0],y=f&&m("div",{class:D.intervalSeparatorsContainer},m("div",{class:D.intervalSeparator},"|"),m("div",{class:D.rampLabel},f.label)),_=n[n.length-1].label,v=n[0].label,w=[[{shape:{type:"path",path:`M0 ${a/2} L${h} 0 L${h} ${a} Z`},fill:p[0].color,stroke:{width:0}},{shape:{type:"rect",x:h,y:0,width:c,height:a},fill:{type:"linear",x1:h,y1:0,x2:c+h,y2:0,colors:p},stroke:{width:0}},{shape:{type:"path",path:`M${c+h} 0 L${u} ${a/2} L${c+h} ${a} Z`},fill:p[g].color,stroke:{width:0}}]],b=Dm(w,u,a),{messages:M}=this,S={filter:co(s),opacity:t==null?null:`${t}`},x={justifyContent:"center"};return m("div",{class:D.layerRow,styles:x},m("div",{class:D.rampLabel},r?M[_]:_),m("div",{class:D.symbolContainer},m("div",{styles:S},b),y),m("div",{class:D.rampLabel},r?M[v]:v))}};l([d()],ii.prototype,"activeLayerInfos",void 0),l([d()],ii.prototype,"headingLevel",void 0),l([d()],ii.prototype,"layout",void 0),l([d(),ge("esri/widgets/Legend/t9n/Legend")],ii.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],ii.prototype,"messagesCommon",void 0),l([d({readOnly:!0})],ii.prototype,"type",void 0),l([d()],ii.prototype,"view",void 0),l([ke()],ii.prototype,"_selectSection",null),ii=l([$("esri.widgets.Legend.styles.Card")],ii);const ec=ii,le="esri-legend",j={service:`${le}__service`,label:`${le}__service-label`,layer:`${le}__layer`,groupLayer:`${le}__group-layer`,groupLayerChild:`${le}__group-layer-child`,layerTable:`${le}__layer-table`,layerTableSizeRamp:`${le}__layer-table--size-ramp`,layerChildTable:`${le}__layer-child-table`,layerCaption:`${le}__layer-caption`,layerBody:`${le}__layer-body`,layerRow:`${le}__layer-row`,layerCell:`${le}__layer-cell`,layerInfo:`${le}__layer-cell ${le}__layer-cell--info`,imageryLayerStretchedImage:`${le}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${le}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${le}__imagery-layer-info--stretched`,symbolContainer:`${le}__layer-cell esri-legend__layer-cell--symbols`,symbol:`${le}__symbol`,rampContainer:`${le}__ramps`,sizeRamp:`${le}__size-ramp`,colorRamp:`${le}__color-ramp`,opacityRamp:`${le}__opacity-ramp`,borderlessRamp:`${le}__borderless-ramp`,rampTick:`${le}__ramp-tick`,rampFirstTick:`${le}__ramp-tick-first`,rampLastTick:`${le}__ramp-tick-last`,rampLabelsContainer:`${le}__ramp-labels`,rampLabel:`${le}__ramp-label`,univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:`${le}__message`,header:"esri-widget__heading",hidden:"esri-hidden"},Ex=`${le}__`,$x=24,lp={display:"flex",alignItems:"flex-start"},tc={marginLeft:"3px"},xn={display:"table-cell",verticalAlign:"middle"};let Js=class extends Me{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e&&e.toArray().map(s=>this._renderLegendForLayer(s)).filter(s=>!!s);return m("div",null,t&&t.length?t:m("div",{class:j.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const t=!!e.children.length,s=`${Ex}${e.layer.uid}-version-${e.version}`,n=e.title?Ls({level:this.headingLevel,class:this.classes(j.header,j.label)},e.title):null;if(t){const r=e.children.map(o=>this._renderLegendForLayer(o)).toArray();return m("div",{key:s,class:this.classes(j.service,j.groupLayer)},n,r)}{const r=e.legendElements;if(r&&!r.length)return null;const o=r.map(c=>this._renderLegendForElement(c,e.layer,e.effectList)).filter(c=>!!c);if(!o.length)return null;const a={[j.groupLayerChild]:!!e.parent};return m("div",{key:s,class:this.classes(j.service,a),tabIndex:0},n,m("div",{class:j.layer},o))}}_renderLegendForElement(e,t,s,n){const r=e.type==="color-ramp",o=e.type==="opacity-ramp",a=e.type==="size-ramp";let c=null;if(e.type==="symbol-table"||a){const y=e.infos.map(_=>this._renderLegendForElementInfo(_,t,s,a,e.legendType)).filter(_=>!!_);y.length&&(c=m("div",{class:j.layerBody},y))}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"||e.type==="stretch-ramp"?c=this._renderLegendForRamp(e,t.opacity):e.type==="relationship-ramp"?c=Nm(e,this.id,t.opacity,s):e.type==="pie-chart-ramp"?c=this._renderPieChartRamp(e):e.type==="univariate-above-and-below-ramp"?c=this._renderUnivariateAboveAndBelowRamp(e,t.opacity,s):e.type==="univariate-color-size-ramp"&&(c=this._renderUnivariateColorSizeRamp(e,t.opacity,s));if(!c)return null;const u=e.title;let h=null;if(typeof u=="string")h=u;else if(u){const y=ir(this.messages,u,r||o);h=Tf(u,r||o)&&u.title?`${u.title} (${y})`:y}const p=n?j.layerChildTable:j.layerTable,g=h?m("div",{class:j.layerCaption},h):null,f={[j.layerTableSizeRamp]:a||!n};return m("div",{class:this.classes(p,f)},g,c)}_renderPieChartRamp(e){return m("div",{bind:e.preview,afterCreate:Je})}_renderUnivariateAboveAndBelowRamp(e,t,s){const{sizeRampElement:n,colorRampElement:r}=$f(e,t);if(!n)return null;const o=tr(n,"above",!0),a=tr(n,"below",!0),c=12,u=er(r,{width:c,height:o,rampAlignment:"vertical",opacity:t,type:"above",effectList:s}),h=er(r,{width:c,height:a,rampAlignment:"vertical",opacity:t,type:"below",effectList:s}),p=Fa(n),g=n.infos.map(x=>x.label),f=g.map((x,A)=>A===0?m("div",{key:A,class:x?u?j.univariateAboveAndBelowLabel:j.rampLabel:null},x):A===2?m("div",null):null),y=g.length-1,_=Math.floor(g.length/2),v=g.map((x,A)=>A===_||A===y?m("div",{key:A,class:x?u?j.univariateAboveAndBelowLabel:j.rampLabel:null},x):null),w={display:"table-cell",verticalAlign:"middle"},b={marginTop:`${p}px`},M={height:`${o}px`},S={height:`${a}px`};return m("div",{key:"univariate-above-and-below-ramp-preview",styles:lp},m("div",{class:j.layerBody},n.infos.map((x,A)=>m("div",{class:this.classes(j.layerRow,j.sizeRamp)},m("div",{class:j.symbol,styles:w,bind:x.preview,afterCreate:Je}),u||A%2!=0?null:m("div",{class:j.layerInfo},g[A])))),u?m("div",{styles:b,key:"color-ramp-preview"},m("div",{styles:tc},m("div",{styles:xn},m("div",{class:j.rampContainer,bind:u,afterCreate:Je})),m("div",{styles:xn},m("div",{class:j.rampLabelsContainer,styles:M},f))),m("div",{styles:tc},m("div",{styles:xn},m("div",{class:j.rampContainer,bind:h,afterCreate:Je})),m("div",{styles:xn},m("div",{class:j.rampLabelsContainer,styles:S},v)))):null)}_renderUnivariateColorSizeRamp(e,t,s){const{sizeRampElement:n,colorRampElement:r}=Lf(e);if(!n)return null;const o=Fa(n),a=12,c=tr(n,"full",!1),u=er(r,{width:a,height:c,rampAlignment:"vertical",opacity:t,type:"full",effectList:s}),h=n.infos.length-1,p=n.infos.map((_,v)=>v===0||v===h?m("div",{key:v,class:_.label?r?j.univariateAboveAndBelowLabel:j.rampLabel:null},_.label):null),g={display:"table-cell",verticalAlign:"middle"},f={marginTop:`${o}px`},y={height:`${c}px`};return m("div",{key:"univariate-above-and-below-ramp-preview",styles:lp},m("div",{class:j.layerBody},n.infos.map(_=>m("div",{class:this.classes(j.layerRow,j.sizeRamp)},m("div",{class:j.symbol,styles:g,bind:_.preview,afterCreate:Je})))),m("div",{styles:f,key:"color-ramp-preview"},m("div",{styles:tc},m("div",{styles:xn},m("div",{class:j.rampContainer,bind:u,afterCreate:Je})),m("div",{styles:xn},m("div",{class:j.rampLabelsContainer,styles:y},p)))))}_renderLegendForRamp(e,t){const s=e.infos,n=e.type==="opacity-ramp",r=e.type==="heatmap-ramp",o=e.type==="stretch-ramp",a=e.preview,c=n?j.opacityRamp:"";a.className=`${j.colorRamp} ${c}`,t!=null&&(a.style.opacity=t.toString());const u=s.map(g=>m("div",{class:g.label?j.rampLabel:null},r?this.messages[g.label]||g.label:o?this._getStretchStopLabel(g):g.label)),h={width:`${$x}px`},p={height:a.style.height};return m("div",{class:j.layerRow},m("div",{class:j.symbolContainer,styles:h},m("div",{class:j.rampContainer,bind:a,afterCreate:Je})),m("div",{class:j.layerInfo},m("div",{class:j.rampLabelsContainer,styles:p},u)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+(typeof e.value=="string"?e.value:vo(e.value,{style:"decimal",notation:e.value.toString().includes("e")?"scientific":"standard"})):""}_renderLegendForElementInfo(e,t,s,n,r){if(e.type)return this._renderLegendForElement(e,t,s,!0);let o=null;const a=Af(t,r);if(e.preview?o=m("div",{class:j.symbol,bind:e.preview,afterCreate:Je}):e.src&&(o=this._renderImage(e,t,a)),!o)return null;const c={[j.imageryLayerInfoStretched]:a},u={[j.imageryLayerInfoStretched]:a,[j.sizeRamp]:!a&&n};return m("div",{class:j.layerRow},m("div",{class:this.classes(j.symbolContainer,u)},o),m("div",{class:this.classes(j.layerInfo,c)},ir(this.messages,e.label,!1)||""))}_renderImage(e,t,s){const{label:n,src:r,opacity:o}=e,a={[j.imageryLayerStretchedImage]:s,[j.symbol]:!s},c={opacity:`${o??t.opacity}`};return m("img",{alt:ir(this.messages,n,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(a),styles:c})}};l([d()],Js.prototype,"activeLayerInfos",void 0),l([d()],Js.prototype,"headingLevel",void 0),l([d(),ge("esri/widgets/Legend/t9n/Legend")],Js.prototype,"messages",void 0),l([d({readOnly:!0})],Js.prototype,"type",void 0),Js=l([$("esri.widgets.Legend.styles.Classic")],Js);const En=Js,Uo={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let st=class extends Me{constructor(e,t){super(e,t),this._handles=new Ke,this.headingLevel=3,this.iconClass=Uo.widgetIcon,this.messages=null,this.style=new En,this.viewModel=new gx}initialize(){this.addHandles([We(()=>this.view,"resize",()=>this.scheduleRender()),We(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),I(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),I(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},B)])}destroy(){this._handles=nt(this._handles)}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof ec||e instanceof En)return e;if(typeof e=="string")return e==="card"?new ec:new En;if(e&&typeof e.type=="string"){const t={...e};return delete t.type,new(e.type==="card"?ec:En)(t)}return new En}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return m("div",{class:this.classes(Uo.base,Uo.widget,this.style instanceof En?Uo.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach(t=>this._renderOnActiveLayerInfoChange(t)),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=I(()=>e.version,()=>this.scheduleRender());this._handles.add(t,`version_${e.layer.uid}`);const s=We(()=>e.children,"change",()=>e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)),B);this._handles.add(s,`children_${e.layer.uid}`),e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}};l([d()],st.prototype,"activeLayerInfos",null),l([d()],st.prototype,"basemapLegendVisible",null),l([d()],st.prototype,"groundLegendVisible",null),l([d()],st.prototype,"headingLevel",void 0),l([d()],st.prototype,"hideLayersNotInCurrentView",null),l([d()],st.prototype,"keepCacheOnDestroy",null),l([d()],st.prototype,"respectLayerVisibility",null),l([d()],st.prototype,"iconClass",void 0),l([d()],st.prototype,"label",null),l([d()],st.prototype,"layerInfos",null),l([d(),ge("esri/widgets/Legend/t9n/Legend")],st.prototype,"messages",void 0),l([d()],st.prototype,"style",void 0),l([rt("style")],st.prototype,"castStyle",null),l([d()],st.prototype,"view",null),l([d()],st.prototype,"viewModel",void 0),st=l([$("esri.widgets.Legend")],st);const kf=st,Lx=Object.freeze(Object.defineProperty({__proto__:null,default:kf},Symbol.toStringTag,{value:"Module"})),we="esri-search",V={base:`${we} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${we}--multiple-sources`,isLoading:`${we}--loading`,isSearching:`${we}--searching`,showSuggestions:`${we}--show-suggestions`,showSources:`${we}--sources`,showWarning:`${we}--warning`,container:`${we}__container`,input:`${we}__input`,inputContainer:`${we}__input-container`,form:`${we}__form`,submitButton:`${we}__submit-button`,sourcesButton:`${we}__sources-button`,clearButton:`${we}__clear-button`,sourceName:`${we}__source-name`,suggestionsMenu:`${we}__suggestions-menu`,suggestionList:`${we}__suggestions-list`,suggestionListCurrentLocation:`${we}__suggestions-list--current-location`,sourcesMenu:`${we}__sources-menu`,source:`${we}__source`,warningMenu:`${we}__warning-menu`,warningMenuBody:`${we}__warning-body`,warningMenuHeader:`${we}__warning-header`,warningMenuText:`${we}__warning-text`,noValueText:`${we}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},Bs="esri-search-result-renderer",Fi={base:`${Bs} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${Bs}__more-results--show-more-results`,moreResults:`${Bs}__more-results`,moreResultsList:`${Bs}__more-results-list`,moreResultsHeader:`${Bs}__more-results-header`,moreResultsItem:`${Bs}__more-results-item`,moreResultsListHeader:`${Bs}__more-results-list-header`};let ze=class extends yr(ut){constructor(i){super(i),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};l([d()],ze.prototype,"autoNavigate",void 0),l([d()],ze.prototype,"filter",void 0),l([d()],ze.prototype,"getResults",void 0),l([d()],ze.prototype,"getSuggestions",void 0),l([d()],ze.prototype,"maxResults",void 0),l([d()],ze.prototype,"maxSuggestions",void 0),l([d()],ze.prototype,"minSuggestCharacters",void 0),l([d()],ze.prototype,"outFields",void 0),l([d()],ze.prototype,"placeholder",void 0),l([d()],ze.prototype,"popupEnabled",void 0),l([d()],ze.prototype,"popupTemplate",void 0),l([d()],ze.prototype,"prefix",void 0),l([d()],ze.prototype,"resultGraphicEnabled",void 0),l([d()],ze.prototype,"resultSymbol",void 0),l([d()],ze.prototype,"suggestionsEnabled",void 0),l([d()],ze.prototype,"suffix",void 0),l([d()],ze.prototype,"withinViewEnabled",void 0),l([d()],ze.prototype,"zoomScale",void 0),ze=l([$("esri.widgets.Search.SearchSource")],ze);const zd=ze,cp=q.getLogger("esri.widgets.Search.support.geometryUtils");function Tx(i,e){var s,n;if(!e)return cp.error("missing-parameter: view is missing."),Promise.reject(new L("searchgeometryutils:missing-parameter","view is missing."));if(!i)return cp.error("missing-parameter: point is missing."),Promise.reject(new L("searchgeometryutils:missing-parameter","point is missing."));if(i.hasZ||e.type==="2d")return Promise.resolve(i);const t=(s=e==null?void 0:e.map)==null?void 0:s.ground;return t&&t.layers.length?t.queryElevation(i,{cache:(n=e.basemapTerrain)==null?void 0:n.elevationQueryCache}).then(r=>r.geometry):Promise.resolve(i)}function dp(i){if(O(i))return null;switch(i.type){case"point":return i;case"extent":return i.center;case"polygon":return i.centroid;case"multipoint":return i.getPoint(0);case"polyline":return i.getPoint(0,0)}return null}function Bd(i,e,t){return O(i)?null:i.type==="extent"?i:i.type==="multipoint"||i.type==="polygon"||i.type==="polyline"?i.extent:i.type==="point"?Rf(i,e,t):void 0}function qc(i,e,t){return O(i)||O(e)?null:Rf(i.center,e,t)}function Rf(i,e,t){const s=i.hasZ?i.z:void 0;return e&&e.map?(t?p_(e,t):e.extent).clone().centerAt(i).set({zmax:s,zmin:s}):new ai({xmin:i.x-.25,ymin:i.y-.25,xmax:i.x+.25,ymax:i.y+.25,spatialReference:i.spatialReference,zmin:s,zmax:s})}const Ax=/https?:\/\/services.*\.arcgis\.com/i,kx=/(?:\{([^}]+)\})/g,sr=q.getLogger("esri.widgets.Search.support.layerSearchUtils");function Rx(i,e){const{exactMatch:t=!1,location:s,maxResults:n,spatialReference:r,source:o,sourceIndex:a,suggestResult:c,view:u}=i,{layer:h,filter:p,zoomScale:g}=o,f=u&&u.scale,y=Pf(o,u),_=e&&e.signal;return Of(h).then(()=>{const v=h.popupTemplate;return v?v.getRequiredFields(h.fieldsIndex):null}).then(v=>{var oe,Le,Re;const{objectIdField:w,returnZ:b}=h,M=Hf(o);if(!Hd(h,M))throw sr.error("invalid-field: displayField is invalid."),new L("getResults():invalid-field","displayField is invalid.");const S=v&&v.length?v:[M],x=o.outFields||S,A=Ff(x);if(x.includes(w)||A||x.push(w),(oe=h.floorInfo)!=null&&oe.floorField&&x.push(h.floorInfo.floorField),!(A||Oa(h,x)))throw sr.error("invalid-field: outField is invalid."),new L("getResults():invalid-field","outField is invalid.");const k=h.createQuery(),{orderByFields:te}=o;if(te&&(k.orderByFields=te),r){k.outSpatialReference=r;const _e=1/Wc(r);_e&&(k.maxAllowableOffset=_e)}const U=h.geometryType==="mesh"||h.geometryType==="multipatch",J=((Re=(Le=h.capabilities)==null?void 0:Le.data)==null?void 0:Re.supportsZ)&&!U;if(k.returnZ=J&&b!==!1,k.returnGeometry=!0,k.multipatchOption=U?"xyFootprint":null,x&&(k.outFields=x),s)k.geometry=s;else if(c.key)k.objectIds=[c.key];else{const _e=o.searchFields||[M];if(!Oa(h,_e))throw sr.error("invalid-field: search field is invalid."),new L("getResults():invalid-field","search field is invalid.");if(Bf(h)&&(k.num=n),y&&(k.geometry=y),!c.text.trim())return[];const Qe=c.text,{prefix:Ye="",suffix:Be=""}=o,Se=qf(`${Ye}${Qe}${Be}`);zf(h)&&Vf(h,_e)&&!t&&Qe&&(k.fullText=Nf({text:Qe,searchFields:_e}));const kt=Uf({searchTerm:Se,layer:h,searchFields:_e,filter:p,exactMatch:t,query:k,type:"search"});if(k.where=kt,!Df(k))return[]}return h.queryFeatures(k,{signal:_}).then(_e=>jx(_e,u,o,a,M,f,g))})}function Px(i,e){const{source:t,spatialReference:s,view:n,suggestTerm:r,maxSuggestions:o,sourceIndex:a,exactMatch:c}=i,{layer:u,filter:h}=t,p=e&&e.signal,g=Pf(t,n);return Of(u).then(()=>{if(!Bf(u))return[];const f=Hf(t),y=t.searchFields||[f],_=[];t.suggestionTemplate?t.suggestionTemplate.replace(kx,(J,oe)=>(_.push(oe),J)):_.push(f);const v=Ff(_);_.includes(u.objectIdField)||v||_.push(u.objectIdField);const w=Hd(u,f),b=v||Oa(u,_),M=Oa(u,y);if(!w)throw sr.error("invalid-field: displayField is invalid."),new L("getSuggestions():invalid-field","displayField is invalid.");if(!b)throw sr.error("invalid-field: outField is invalid."),new L("getSuggestions():invalid-field","outField is invalid.");if(!M)throw sr.error("invalid-field: search field is invalid."),new L("getSuggestions():invalid-field","search field is invalid.");const S=u.createQuery(),{orderByFields:x}=t;if(x&&(S.orderByFields=x),S.outSpatialReference=s,S.returnGeometry=!1,S.num=o,S.outFields=_,g&&(S.geometry=g),!r.trim())return[];const{prefix:A="",suffix:k=""}=t,te=qf(`${A}${r}${k}`);zf(u)&&Vf(u,y)&&!c&&r&&(S.fullText=Nf({text:r,searchFields:y}));const U=Uf({searchTerm:te,layer:u,searchFields:y,filter:h,exactMatch:c,query:S,type:"suggest"});return S.where=U,Df(S)?u.queryFeatures(S,{signal:p}).then(J=>qx(J,t,a,f)):[]})}function Pf(i,e){const{filter:t,withinViewEnabled:s}=i,n=e&&e.extent;return t&&t.geometry||(s&&n?n:void 0)}function Ff(i){return i&&i.includes("*")}async function Of(i){i&&await i.load()}function Df(i){return!(!i.fullText&&!i.where)}function Vf(i,e){const t=i==null?void 0:i.indexes;return!t||!(e!=null&&e.length)?!1:t.filter(s=>s.indexType==="FullText").some(s=>{var r;const n=((r=s.fields)==null?void 0:r.split(",").map(o=>o.trim().toLowerCase()))||[];return e.every(o=>n.includes(o.toLowerCase()))})}function Nf({text:i,searchFields:e}){return i.trim().split(" ").filter(t=>!!t.trim()).map(t=>new Tv({onFields:e,searchTerm:t,searchType:"prefix"}))}function zf(i){var e,t;return((t=(e=i==null?void 0:i.capabilities)==null?void 0:e.query)==null?void 0:t.supportsFullTextSearch)??!1}function Bf(i){var e,t;return((t=(e=i==null?void 0:i.capabilities)==null?void 0:e.query)==null?void 0:t.supportsPagination)??!1}function Fx(i){var e,t,s;return((s=(t=(e=i==null?void 0:i.fieldsIndex)==null?void 0:e.fields)==null?void 0:t.find(n=>n.type==="string"))==null?void 0:s.name)??""}function Hf(i){return i.displayField||i.layer.displayField||Fx(i.layer)}function Oa(i,e){return!(!i||!(e!=null&&e.length))&&e.every(t=>Hd(i,t))}function Hd(i,e){return!!i.getField(e)}function Ox(i){for(let e=0;e<i.length;e++)if(i.charCodeAt(e)>255)return!0;return!1}function Dx(i,e,t){let s=null;const{codedValues:n}=i;return n&&n.some(r=>{const o=r.name,a=t?o:o.toLowerCase();return(t?e:e.toLowerCase())===a&&(s=r.code.toString(),!0)}),s}function qf(i){return i.replace(/\'/g,"''")}function Pr(i,e){const t=e&&e.where;return t?`(${i}) AND (${t})`:i}function Vx({currentTerm:i,field:e,filter:t,exactMatch:s,url:n,type:r}){const o=e.type,a=e.name;if(o==="string"||o==="date"||o==="global-id"){const c=Ax.test(n),u=c&&Ox(i)?"N":"";return Pr(s&&r==="search"?`${a} = ${u}'${i}'`:c?`${a} LIKE ${u}${`'${i}%'`}`:`${`LOWER(${a})`} LIKE ${u}${`'${i.toLowerCase()}%'`}`,t)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const c=Number(i);return isNaN(c)?null:Pr(`${a} = ${c}`,t)}return Pr(`${a} = ${i}`,t)}function Nx(i,e){return i?` OR (${e})`:`(${e})`}function Uf({searchTerm:i,layer:e,searchFields:t,filter:s,exactMatch:n,query:r,type:o}){const{definitionExpression:a,url:c}=e;let u="";return!r.fullText&&i&&t&&t.forEach(h=>{const p=e.getField(h),g=typeof e.getFieldDomain=="function"&&e.getFieldDomain(h),f=(g&&g.type==="coded-value"?Dx(g,i,n):null)||i||null;if(f!==null){const y=Vx({currentTerm:f,field:p,filter:s,exactMatch:n,url:c,type:o});y&&(u+=Nx(u,y))}}),a&&u?`(${a}) AND (${u})`:a||u}function zx(i,e){let t=null;const{codedValues:s}=i;return s&&s.length&&s.some(n=>n.code===e&&(t=n.name,!0)),t}function Bx(i,e){return i[Object.keys(i).find(t=>t.toLowerCase()===e.toLowerCase())]}function jf(i,e,t){const s=i.sourceLayer,{attributes:n}=i,r=typeof s.getFieldDomain=="function"&&s.getFieldDomain(t);if(e)return Mt(e,n);if(t&&n){const o=s.getField(t),a=Bx(n,t);return a==null?"":r&&r.type==="coded-value"?zx(r,a):(o==null?void 0:o.type)==="date"?lo(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function Hx(i,e,t,s){const n=i.sourceLayer,{attributes:r}=i,{objectIdField:o}=n,a=r[o];return{text:jf(i,e.suggestionTemplate,s),key:a,sourceIndex:t}}function qx(i,e,t,s){return i.features.map(n=>Hx(n,e,t,s))}function Ux(i,e,t,s,n,r,o){const a=i.clone(),c=i.sourceLayer,u=c&&c.objectIdField,h=u&&i.attributes[u],p=jf(i,t.searchTemplate,n),g=Bd(a.geometry,e,r),f=typeof o=="number"?qc(Qi(g),e,o):g,y=i.clone();return C(f)&&(y.geometry=Yc.fromExtent(f)),{extent:f,target:y,feature:a,key:h,name:p,sourceIndex:s}}function jx(i,e,t,s,n,r,o){return i.features.map(a=>Ux(a,e,t,s,n,r,o))}var Uc;let si=Uc=class extends zd{constructor(i){super(i),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>Rx({source:this,...e},t),this.getSuggestions=(e,t)=>Px({source:this,...e},t)}set layer(i){this._set("layer",i),i&&i.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(i){this._overrideIfSome("name",i)}clone(){return new Uc({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Qi(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?Qi(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var i;return((i=this.layer.fieldsIndex.fields.find(e=>e.type==="string"))==null?void 0:i.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:i,searchFields:e}=this;return i.loaded?`: ${(e||[this._getDisplayField()]).map(t=>{const s=i.getField(t);return s&&s.alias||t}).join(", ")}`:""}_getLayerTitle(){const{layer:i}=this;if(!i)return;const{title:e}=i;return e?`${e}${this._getSearchFieldsString()}`:void 0}};l([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],si.prototype,"displayField",void 0),l([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],si.prototype,"exactMatch",void 0),l([d({value:null})],si.prototype,"layer",null),l([d()],si.prototype,"name",null),l([d({type:[String],json:{write:!0}})],si.prototype,"orderByFields",void 0),l([d()],si.prototype,"searchFields",void 0),l([d()],si.prototype,"searchTemplate",void 0),l([d()],si.prototype,"suggestionTemplate",void 0),si=Uc=l([$("esri.widgets.Search.LayerSearchSource")],si);const zn=si;function Gx(i){return!!i&&typeof i.x=="number"&&typeof i.y=="number"}function Wx(i){return i&&typeof i.xmin=="number"&&typeof i.ymin=="number"&&typeof i.xmax=="number"&&typeof i.ymax=="number"}let ws=class extends ut{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};l([d({type:String,json:{write:!0}})],ws.prototype,"address",void 0),l([d({type:Object,json:{write:!0}})],ws.prototype,"attributes",void 0),l([d({type:ai,json:{write:!0}})],ws.prototype,"extent",void 0),l([d({type:de,json:{write:!0}})],ws.prototype,"location",void 0),l([d({type:Number,json:{write:!0}})],ws.prototype,"score",void 0),ws=l([$("esri.rest.support.AddressCandidate")],ws);const Gf=ws;let at=class extends ut{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};l([d({type:Object,json:{write:!0}})],at.prototype,"address",void 0),l([d(rd)],at.prototype,"apiKey",void 0),l([d({type:[String],json:{read:{source:"category",reader:i=>i?i.split(","):null},write:{target:"category",writer:(i,e)=>{e.category=i?i.join(","):null}}}})],at.prototype,"categories",void 0),l([d({type:String,json:{write:!0}})],at.prototype,"countryCode",void 0),l([d({type:Boolean,json:{write:!0}})],at.prototype,"forStorage",void 0),l([d({type:de,json:{write:{writer:(i,e)=>{e.location=i?i.clone().normalize():null}}}})],at.prototype,"location",void 0),l([d({type:String,json:{write:!0}})],at.prototype,"locationType",void 0),l([d({type:String,json:{write:!0}})],at.prototype,"magicKey",void 0),l([d({type:Number,json:{write:!0}})],at.prototype,"maxLocations",void 0),l([d({type:[String],json:{write:{writer:(i,e)=>{e.outFields=i?i.join(","):null}}}})],at.prototype,"outFields",void 0),l([d({type:Yi,json:{read:{source:"outSR"},write:{target:"outSR"}}})],at.prototype,"outSpatialReference",void 0),l([d({type:ai,json:{write:{writer:(i,e)=>{const t=i?i.shiftCentralMeridian():null;e.searchExtent=t}}}})],at.prototype,"searchExtent",void 0),at=l([$("esri.rest.support.AddressToLocationsParameters")],at),at.from=oi(at);const Wf=at;async function Zx(i,e,t){e=Wf.from(e);const s=Za(i),{address:n,...r}=e.toJSON(),o={...n,...r,f:"json"},a=nd({...s.query,...o}),c=Ka(a,t),u=`${s.path}/findAddressCandidates`;return ri(u,c).then(Kx)}function Kx({data:i}){if(!i)return[];const{candidates:e,spatialReference:t}=i;return e?e.map(s=>{if(!s)return;const{extent:n,location:r}=s,o=!n||Wx(n);return Gx(r)&&o?(n&&(n.spatialReference=t),r&&(r.spatialReference=t),Gf.fromJSON(s)):void 0}):[]}let Ui=class extends ut{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};l([d(rd)],Ui.prototype,"apiKey",void 0),l([d({type:de,json:{write:{writer:(i,e)=>{const t=i?i.clone().normalize():null,s=t!==void 0;e.location=s?t:null}}}})],Ui.prototype,"location",void 0),l([d({type:String,json:{write:!0}})],Ui.prototype,"locationType",void 0),l([d({type:Yi,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ui.prototype,"outSpatialReference",void 0),Ui=l([$("esri.rest.support.LocationToAddressParameters")],Ui),Ui.from=oi(Ui);const Zf=Ui;async function Qx(i,e,t){e=Zf.from(e);const s=Za(i),n={...e.toJSON(),f:"json"},r=nd({...s.query,...n}),o=Ka(r,t),a=`${s.path}/reverseGeocode`;return ri(a,o).then(Yx)}function Yx({data:i}){if(!i)return;const{address:e,location:t}=i,s=e&&e.Match_addr||"";return Gf.fromJSON({address:s,attributes:e||{},location:t,score:100})}let Bn=class extends ut{constructor(i){super(i),this.isCollection=null,this.magicKey=null,this.text=null}};l([d({type:Boolean,json:{write:!0}})],Bn.prototype,"isCollection",void 0),l([d({type:String,json:{write:!0}})],Bn.prototype,"magicKey",void 0),l([d({type:String,json:{write:!0}})],Bn.prototype,"text",void 0),Bn=l([$("esri.rest.support.SuggestionCandidate")],Bn);const Xx=Bn;let zt=class extends ut{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};l([d(rd)],zt.prototype,"apiKey",void 0),l([d({type:[String],json:{read:{source:"category",reader:i=>i?i.split(","):null},write:{target:"category",writer:(i,e)=>{e.category=i?i.join(","):null}}}})],zt.prototype,"categories",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"countryCode",void 0),l([d({type:de,json:{write:{writer:(i,e)=>{e.location=i?i.clone().normalize():null}}}})],zt.prototype,"location",void 0),l([d({type:Number,json:{write:!0}})],zt.prototype,"maxSuggestions",void 0),l([d({type:Yi,json:{read:{source:"outSR"},write:{target:"outSR"}}})],zt.prototype,"outSpatialReference",void 0),l([d({type:ai,json:{write:{writer:(i,e)=>{const t=i?i.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(t)}}}})],zt.prototype,"searchExtent",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"text",void 0),zt=l([$("esri.rest.support.SuggestLocationsParameters")],zt),zt.from=oi(zt);const Kf=zt;async function Jx(i,e,t){const s=Za(i),n={...(e=Kf.from(e)).toJSON(),f:"json"},r=nd({...s.query,...n}),o=Ka(r,t),a=`${s.path}/suggest`;return ri(a,o).then(eE)}function eE(i){const{data:e}=i;if(!e)return[];const{suggestions:t}=e;return t?t.map(s=>new Xx(s)):[]}const tE="Single Line Input",iE=3e5;function sE(i,e){return i.location?lE(i,e):cE(i,e)}function Qf(i,e){if(e.localSearchDisabled)return null;const t=i==null?void 0:i.scale;return typeof t=="number"&&t<=iE?i.get("extent.center"):null}function nE(i,e){const{source:t,spatialReference:s,view:n,suggestTerm:r,maxSuggestions:o,sourceIndex:a}=i,c=new Kf,{apiKey:u,url:h}=t,p=Yf(t,n),g=e&&e.signal;if(!h)return Promise.resolve(null);u&&(c.apiKey=u),t.categories&&(c.categories=t.categories),s&&(c.outSpatialReference=s);const f=Qf(n,t);if(f&&(c.location=f),!r.trim())return Promise.resolve(null);const{prefix:y="",suffix:_=""}=t,v=`${y}${r}${_}`;return c.text=v,p&&(c.searchExtent=Ne(p)),c.maxSuggestions=o,t.countryCode&&(c.countryCode=t.countryCode),Jx(h,c,{signal:g}).then(w=>uE(w,a))}function rE(i){return!!i&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(i)}function oE(i){return!!i&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(i)}function up(i){return!!i&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(i)}const aE="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function lE(i,e){const{source:t,spatialReference:s,location:n,sourceIndex:r,view:o}=i,{apiKey:a,url:c,zoomScale:u,defaultZoomScale:h}=t,p=o&&o.scale,g=e&&e.signal,f=new Zf;return f.location=n,a&&(f.apiKey=a),s&&(f.outSpatialReference=s),Qx(c,f,{signal:g}).then(y=>Xf([y],{sourceIndex:r,scale:p,view:o,zoomScale:u,defaultZoomScale:h})).catch(()=>[])}function Yf(i,e){const{filter:t,withinViewEnabled:s}=i,n=e&&e.scale,r=e&&e.extent,o=t&&t.geometry;return Bd(o,e,n)||(s&&r?r:void 0)}function cE(i,e){const{source:t,suggestResult:s,spatialReference:n,view:r,maxResults:o,sourceIndex:a}=i,c=t&&t.zoomScale,u=t&&t.defaultZoomScale;if(!s.text.trim())return Promise.resolve(null);const h=!s.key&&t.prefix?t.prefix:"",p=!s.key&&t.suffix?t.suffix:"",g=`${h}${s.text}${p}`,f=new Wf,{apiKey:y,url:_}=t,v=r&&r.scale,w=Yf(t,r),b=e&&e.signal;if(y&&(f.apiKey=y),!_)return Promise.resolve(null);t.categories&&(f.categories=t.categories),t.locationType&&(f.locationType=t.locationType),n&&(f.outSpatialReference=n);const M=Qf(r,t);M&&(f.location=M),f.maxLocations=o,w&&(f.searchExtent=Ne(w)),t.countryCode&&(f.countryCode=t.countryCode);const{key:S}=s,x=`${S}`;return S&&(f.magicKey=x),f.address={},f.address[t.singleLineFieldName||tE]=g,t.outFields&&(f.outFields=t.outFields),Zx(_,f,{signal:b}).then(A=>Xf(A,{key:x,scale:v,sourceIndex:a,view:r,zoomScale:c,defaultZoomScale:u}))}function dE(i,e){return{text:i.text,key:i.magicKey,sourceIndex:e}}function uE(i,e){return i.map(t=>dE(t,e))}function hE(i,e){const{key:t,scale:s,sourceIndex:n,view:r,zoomScale:o,defaultZoomScale:a}=e,{attributes:c,extent:u,location:h,address:p}=i,g=new Si({geometry:h,attributes:c}),f=u||h,y=Bd(f,r,s),_=typeof o=="number"?qc(y,r,o):typeof a=="number"&&f.type==="point"?qc(y,r,a):y,v=h?`${h.x},${h.y}`:"",w=p||v,b=g.clone();return C(_)&&(b.geometry=Yc.fromExtent(_)),{extent:_,feature:g,target:b,key:t,name:w,sourceIndex:n}}function Xf(i,e){return i.filter(Boolean).map(t=>hE(t,e))}var jc;const pE="esri.widgets.Search.LocatorSearchSource";let gt=jc=class extends zd{constructor(i){super(i),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,t)=>sE({source:this,...e},t),this.getSuggestions=(e,t)=>nE({source:this,...e},t)}clone(){return new jc({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Qi(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?Qi(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};l([d()],gt.prototype,"apiKey",void 0),l([d()],gt.prototype,"categories",void 0),l([d()],gt.prototype,"countryCode",void 0),l([d({json:{write:!0}})],gt.prototype,"defaultZoomScale",void 0),l([d()],gt.prototype,"localSearchDisabled",void 0),l([d()],gt.prototype,"locationType",void 0),l([d({json:{write:!0}})],gt.prototype,"name",void 0),l([d({json:{write:!0}})],gt.prototype,"placeholder",void 0),l([d()],gt.prototype,"searchTemplate",void 0),l([d({json:{write:!0}})],gt.prototype,"singleLineFieldName",void 0),l([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],gt.prototype,"suggestionsEnabled",void 0),l([d({json:{write:!0}})],gt.prototype,"url",void 0),l([d({json:{write:!0}})],gt.prototype,"zoomScale",void 0),gt=jc=l([$(pE)],gt);const Jf=gt;new Rs({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Rs({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let Hs=class extends ut{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};l([d({type:String,json:{write:!0}})],Hs.prototype,"deviationUnit",void 0),l([d({json:{read:{reader:i=>i?i.map(e=>Xi(e)).filter(C):null},write:{writer:(i,e)=>{e.geometries=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],Hs.prototype,"geometries",void 0),l([d({type:Number,json:{write:!0}})],Hs.prototype,"maxDeviation",void 0),Hs=l([$("esri.rest.support.GeneralizeParameters")],Hs),Hs.from=oi(Hs);new Rs({preserveShape:"preserve-shape"});let os=class extends ut{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};l([d({type:String,json:{write:!0}})],os.prototype,"calculationType",void 0),l([d({type:Boolean,json:{write:!0}})],os.prototype,"geodesic",void 0),l([d({json:{write:!0}})],os.prototype,"lengthUnit",void 0),l([d({type:[Hp],json:{read:{reader:i=>i?i.map(e=>Xi(e)):null},write:{writer:(i,e)=>{e.polylines=i.map(t=>t.toJSON())}}}})],os.prototype,"polylines",void 0),os=l([$("esri.rest.support.LengthsParameters")],os),os.from=oi(os);new Rs({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Rs({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let Oi=class extends ut{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};l([d({type:Number,json:{write:!0}})],Oi.prototype,"bevelRatio",void 0),l([d({json:{read:{reader:i=>i?i.map(e=>Xi(e)).filter(C):null},write:{writer:(i,e)=>{e.geometries=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],Oi.prototype,"geometries",void 0),l([d({type:Number,json:{write:!0}})],Oi.prototype,"offsetDistance",void 0),l([d({type:String,json:{write:!0}})],Oi.prototype,"offsetHow",void 0),l([d({type:String,json:{write:!0}})],Oi.prototype,"offsetUnit",void 0),Oi=l([$("esri.rest.support.OffsetParameters")],Oi),Oi.from=oi(Oi);let en=class extends ut{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),t=this.geometries[0],s={};return s.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),s.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),s.geometries=JSON.stringify({geometryType:xp(t),geometries:e}),this.transformation&&(s.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(s.transformForward=this.transformForward),s}};l([d()],en.prototype,"geometries",void 0),l([d({json:{read:{source:"outSR"}}})],en.prototype,"outSpatialReference",void 0),l([d()],en.prototype,"transformation",void 0),l([d()],en.prototype,"transformForward",void 0),en=l([$("esri.rest.support.ProjectParameters")],en);const ey=en,mE=oi(ey);async function gE(i,e,t){e=mE(e);const s=Za(i),n={...s.query,f:"json",...e.toJSON()},r=e.outSpatialReference,o=xp(e.geometries[0]),a=Ka(n,t);return ri(s.path+"/project",a).then(({data:{geometries:c}})=>$v(c,o,r))}new Rs({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let as=class extends ut{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};l([d({json:{read:{reader:i=>i?i.map(e=>Xi(e)).filter(C):null},write:{writer:(i,e)=>{e.geometries1=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],as.prototype,"geometries1",void 0),l([d({json:{read:{reader:i=>i?i.map(e=>Xi(e)).filter(C):null},write:{writer:(i,e)=>{e.geometries2=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],as.prototype,"geometries2",void 0),l([d({type:String,json:{write:!0}})],as.prototype,"relation",void 0),l([d({type:String,json:{write:!0}})],as.prototype,"relationParameter",void 0),as=l([$("esri.rest.support.RelationParameters")],as),as.from=oi(as);new Rs({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let qs=class extends ut{constructor(i){super(i),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};l([d({type:String,json:{write:!0}})],qs.prototype,"extendHow",void 0),l([d({type:[Hp],json:{read:{reader:i=>i?i.map(e=>Xi(e)):null},write:{writer:(i,e)=>{e.polylines=i.map(t=>t.toJSON())}}}})],qs.prototype,"polylines",void 0),l([d({json:{read:{reader:i=>i?Xi(i):null},write:{writer:(i,e)=>{e.trimExtendTo=i.toJSON()}}}})],qs.prototype,"trimExtendTo",void 0),qs=l([$("esri.rest.support.TrimExtendParameters")],qs),qs.from=oi(qs);const ty=q.getLogger("esri.widgets.support.geolocationUtils"),fE={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function yE(){const i=St("esri-geolocation");return i||ty.warn("geolocation-unsupported","Geolocation unsupported."),i}function vE(){const i=window.isSecureContext;return i||ty.warn("insecure-context","Geolocation requires a secure origin."),i}function hp(){return yE()&&vE()}function _E(i){return i||(i=fE),new Promise((t,s)=>{setTimeout(()=>s(new L("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(t,s,i)})}function wE(i,e){var r;const{position:t,view:s}=i,n=(r=bE(t))==null?void 0:r.coords;if(!n)throw new L("geometry-service:no-coords","Geolocation has no coordinates");return ME(IE(n),s,e)}function bE(i){const e=i&&i.coords||{},t={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return i&&{coords:t,timestamp:i.timestamp}}function IE({longitude:i,latitude:e,altitude:t}){return new de({longitude:i,latitude:e,z:t||void 0,spatialReference:{wkid:4326}})}function ME(i,e,t){if(!e)return Promise.resolve(i);const s=e.spatialReference;return s.isWGS84?Promise.resolve(i):s.isWebMercator?Promise.resolve(Gc(i)):SE(t).then(n=>{if(!n)throw new L("geometry-service:missing-url","Geometry service URL is missing");const r=new ey({geometries:[i],outSpatialReference:s});return gE(n,r,t).then(o=>o[0])})}function SE(i){if(oo.geometryServiceUrl)return Promise.resolve(oo.geometryServiceUrl);const e=wo.getDefault();return e.load(i).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}function pt(i,e){return i.hasOwnProperty(e)&&i[e]!=null&&i[e]!==""}const CE=()=>h_("esri/widgets/Search/t9n/Search"),iy="esri.widgets.Search.SearchViewModel",Di=q.getLogger(iy),pp="highlight",ga=ee.ofType({key:i=>i.layer?"layer":"locator",base:zd,typeMap:{layer:zn,locator:Jf}}),mp=Yi.WGS84,xE="esri/images/search/search-symbol-32.png",EE=/<(?:.|\s)*?>/g,Hn=-1;let Q=class extends bd(gr.EventedMixin(K)){constructor(i){super(i),this._handles=new Ke,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new ga,this.defaultSymbols={point:new Mv({url:_o(xE),size:24,width:24,height:24}),polyline:new Qc({color:[130,130,130,1],width:2}),polygon:new Ua({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=wo.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new ga,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const i=async()=>{const e=await CE();this.messages=e,this.defaultPopupTemplate=new Vp({title:e.searchResult,content:"{Match_addr}"})};i(),this._handles.add([I(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),B),Xc(i)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:Hn}set activeSourceIndex(i){this._overrideIfSome("activeSourceIndex",i)}get allPlaceholder(){var i;return(i=this.messages)==null?void 0:i.allPlaceholder}set allPlaceholder(i){this._overrideIfSome("allPlaceholder",i)}get allSources(){const{sources:i,defaultSources:e,includeDefaultSources:t}=this,s=typeof t=="function"?t.call(null,{sources:i,defaultSources:e}):t?e.concat(i):i,n=this._get("allSources")||new ga;return n.removeAll(),n.addMany(s.filter(Boolean)),n}get locationEnabled(){return this._get("locationEnabled")||hp()}set locationEnabled(i){if(i===void 0)return void this._clearOverride("locationEnabled");const e=hp();if(i&&!e){const t=new L("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Di.error(t)}this._override("locationEnabled",!!i&&e)}get placeholder(){const{allSources:i,activeSourceIndex:e,allPlaceholder:t}=this;if(e===Hn)return t;const s=i.at(e);return s?s.placeholder:""}set searchTerm(i){this._set("searchTerm",i||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==i&&this._set("selectedSuggestion",null),i===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(i,e){this.emit("search-start"),this.clearGraphics();const t=this._createSuggestionForSearch(i),s=this.when().then(()=>this._getResultsFromSources(t,e).then(n=>{var c;if((c=Ne(e==null?void 0:e.signal))!=null&&c.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:t.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(r,n,t);const o=this._getFirstResult(r.results),a=(t.location&&o?o.name:t.text).replace(EE,"");return this._set("searchTerm",a),(t.key&&typeof t.sourceIndex=="number"||t.location)&&this._set("selectedSuggestion",t),this._set("results",r.results),this._set("resultCount",r.results.reduce((u,h)=>u+h.results.length,0)),this.emit("search-complete",r),this._selectFirstResult(o).then(()=>r)})).then(n=>(this._clearSearching(),n),n=>{throw this._clearSearching(),n});return this._searching=s,s}searchNearby(i){if(!this.locationEnabled){const t=new L("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Di.error(t),Promise.reject(t)}const e=_E().then(t=>wE({position:t,view:this.view},i)).then(t=>this.search(t,i));return this._searching=e,e.catch(()=>{}).then(()=>this._clearSearching()),e}select(i){if(this.clearGraphics(),!i){const w=new L("select:missing-parameter","Cannot select without a searchResult.",{searchResult:i});return Di.error(w),Promise.reject(w)}const{view:e}=this,t=pt(i,"sourceIndex")?i.sourceIndex:this._getSourceIndexOfResult(i),s=this.allSources.at(t);if(!s){const w=new L("select:missing-source","Cannot select without a source.",{source:s});return Di.error(w),Promise.reject(w)}const n=s instanceof zn?this._getLayerSourcePopupTemplate(s):s.popupTemplate,r=s.resultSymbol||this._getDefaultSymbol(i),o=pt(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,a=pt(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,c=pt(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,u=c?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=i;if(!h){const w=new L("select:missing-feature","Cannot select without a feature.",{feature:h});return Di.error(w),Promise.reject(w)}const{attributes:p,geometry:g,layer:f,sourceLayer:y}=h,_=dp(g),v={layerViewQuery:this._getLayerView(h),elevationQuery:e&&C(_)?Tx(_,e).catch(()=>_):Promise.resolve(_)};return Ge(v).then(w=>{const b=w.layerViewQuery.value,M=w.elevationQuery.value;r instanceof Sv&&(r.text=i.name);const S=e&&a?i.target||i.extent:null;return(C(S)?this._goToSearchResult(S):Promise.resolve()).then(()=>{var te;const x=b?h:new Si({geometry:g,symbol:r,attributes:p,layer:f,sourceLayer:y,popupTemplate:u}),A=c&&((te=this.view)==null?void 0:te.popup),k=A&&x.getEffectivePopupTemplate(A.defaultPopupTemplateEnabled);return k&&e.popup.open({features:[x],location:M}),b&&wc(b)&&!k&&this._highlightFeature({graphic:x,layerView:b}),!b&&o&&e&&e.graphics.push(x),this._setResultFloor(i),this._set("selectedResult",i),this._set("resultGraphic",x),this.emit("select-result",{result:i,source:s,sourceIndex:t}),i})})}suggest(i,e,t){const s=i||this.searchTerm;return this.emit("suggest-start",{searchTerm:s}),this._suggestTimer(e,t).then(()=>this._suggestImmediate(s,t).then(n=>(this._set("suggestions",n.results),this._set("suggestionCount",n.results.reduce((r,o)=>r+o.results.length,0)),this.emit("suggest-complete",n),n)))}async when(){await cn(()=>!this.updating)}async _update(){const{portal:i,view:e}=this;if(this.includeDefaultSources){const t=this._updatingPromise=Ge([i==null?void 0:i.load(),e==null?void 0:e.when()]);if(this.destroyed||(await t,t!==this._updatingPromise))return}await cn(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var e,t;const i=(t=(e=this.portal)==null?void 0:e.helperServices)==null?void 0:t.geocode;return i?i.map(s=>{if(s.placefinding===!1)return;const n=oo.apiKey&&up(s.url)?{url:aE}:null,r=Jf.fromJSON({...s,...n}),o=r.url;if(up(o)||oE(o)||rE(o)){const a=r.outFields||["Addr_type","Match_addr","StAddr","City"],c=r.placeholder||this.messages.placeholder,u=typeof r.defaultZoomScale=="number"?r.defaultZoomScale:2500;r.set({singleLineFieldName:"SingleLine",outFields:a,placeholder:c,defaultZoomScale:u})}return r.singleLineFieldName?r:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(i=>i==null?void 0:i.destroy()),this._createdFeatureLayers=[]}_getLayerSources(i,e){var s;const t=(s=this.view)==null?void 0:s.map;return i.map(n=>{const r=t.findLayerById(n.id);if(!r)return;const o=this._getLayerJSON(n),a=zn.fromJSON(o);return a.placeholder=e,this._getLayer(r,o).then(c=>{a.layer=c}),a}).filter(Boolean).toArray()}_getTableSources(i,e){var s;const t=(s=this.view)==null?void 0:s.map;return i.map(n=>{const r=t.findTableById(n.id);if(!r)return;const o=this._getLayerJSON(n),a=zn.fromJSON(o);return a.placeholder=e,this._getLayer(r,o).then(c=>{a.layer=c}),a}).filter(Boolean).toArray()}_convertApplicationProperties(){var o,a,c;const i=(o=this.view)==null?void 0:o.map,e=(c=(a=i==null?void 0:i.applicationProperties)==null?void 0:a.viewing)==null?void 0:c.search;if(!e)return[];const{enabled:t,hintText:s,layers:n,tables:r}=e;return t?[...this._getLayerSources(n,s),...this._getTableSources(r,s)]:[]}async _getSubLayer(i,e){if(await i.load(),!i.allSublayers)throw new Error;const t=i.allSublayers.find(n=>n.id===e.subLayer);if(!t)throw new Error;const s=await t.createFeatureLayer();return this._createdFeatureLayers.push(s),s}async _getBuildingSubLayer(i,e){await i.load();const t=i.allSublayers.find(s=>s.id===e.subLayer);if((t==null?void 0:t.type)!=="building-component")throw new Error;if(await t.load(),t.associatedLayer==null)throw new Error;return await t.associatedLayer.load(),t}_getLayer(i,e){return i.type==="feature"||i.type==="scene"||i.type==="csv"||i.type==="geojson"||i.type==="ogc-feature"?Promise.resolve(i):i.type==="map-image"?this._getSubLayer(i,e).catch(()=>{const t=new L("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:i});return Di.error(t),null}):i.type==="building-scene"?this._getBuildingSubLayer(i,e):Promise.resolve(null)}_getLayerJSON(i){return typeof i.toJSON=="function"?i.toJSON():i}_updateDefaultSources(){const{defaultSources:i,includeDefaultSources:e}=this;this._destroyFeatureLayers(),i.removeAll(),e&&i.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var s;const i=(s=this.view)==null?void 0:s.popup,{resultGraphic:e}=this;if(!i||!e)return;const{selectedFeature:t}=i;t&&t===e&&i.close()}_suggestTimer(i,e){const t=i??this.suggestionDelay;return Da(t,null,e&&e.signal)}_createLocationForSearch(i){return i instanceof Si?dp(i.geometry):i instanceof de?i:Array.isArray(i)&&i.length===2?new de({longitude:i[0],latitude:i[1]}):null}_createSuggestionForSearch(i){if(i&&pt(i,"key")&&pt(i,"text")&&pt(i,"sourceIndex"))return i;const e=this._createLocationForSearch(i),t=typeof i=="string"?i:this.searchTerm,{selectedSuggestion:s,selectedResult:n}=this,r=!i&&s&&n,o=r&&s.key===n.key&&s.sourceIndex===n.sourceIndex,a=r&&s.location;return o||a?s:{location:Ne(e),text:e?"":t,sourceIndex:null,key:null}}_getFirstResult(i){let e=null;return i&&i.some(t=>{const{results:s}=t,n=s[0],r=!!n;return r&&(e=n),r}),e}_selectFirstResult(i){return this.autoSelect&&i?this.select(i):Promise.resolve(null)}_suggestImmediate(i,e){return this.when().then(()=>this._getSuggestionsFromSources(i,e)).then(t=>{var n;if((n=Ne(e==null?void 0:e.signal))!=null&&n.aborted)return null;const s={activeSourceIndex:this.activeSourceIndex,searchTerm:i,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(s,t),s})}_formatSourceResponse(i,e,t){const s=e&&e.value||[],n=e&&e.error,r=this.allSources.at(t);if(n){const o={sourceIndex:t,source:r,error:n};i.errors.push(o),Di.error(n),i.numErrors++}else{const o={sourceIndex:t,source:r,results:s};i.results.push(o),i.numResults+=s.length}}_formatResponse(i,e,t){if(e)if(i.activeSourceIndex===Hn){const s=t&&pt(t,"sourceIndex")&&t.sourceIndex!==-1?t.sourceIndex:void 0;e.forEach((n,r)=>{const o=s!==void 0?s:r;this._formatSourceResponse(i,n,o)})}else this._formatSourceResponse(i,e[0],i.activeSourceIndex)}_getResultsFromSources(i,e){const{allSources:t}=this,s=!i.location&&pt(i,"sourceIndex")?i.sourceIndex:this.activeSourceIndex,n=[];if(!t.length){const r=new L("search:no-sources-defined","At least one source is required.",{allSources:t});return Di.error(r),Promise.reject(r)}return s===Hn?t.forEach((r,o)=>{n.push(this._getResultsFromSource(i,o,e))}):n.push(this._getResultsFromSource(i,s,e)),Ge(n)}_getSuggestionsFromSources(i,e){const{allSources:t,activeSourceIndex:s}=this,n=[];if(!t.length){const r=new L("suggest:no-sources-defined","At least one source is required.",{allSources:t});return Di.error(r),Promise.reject(r)}return s===Hn?t.forEach((r,o)=>{n.push(this._getSuggestionsFromSource(i,o,e))}):n.push(this._getSuggestionsFromSource(i,s,e)),Ge(n)}_getResultsFromSource(i,e,t){var u;const s=this.allSources.at(e),{location:n=null}=i,r=((u=this.view)==null?void 0:u.spatialReference)||mp,o=pt(s,"maxResults")?s.maxResults:this.maxResults,a=!!(s instanceof zn&&pt(s,"exactMatch"))&&s.exactMatch,{view:c}=this;return s.getResults({view:c,sourceIndex:e,location:n,suggestResult:i,spatialReference:r,exactMatch:a,maxResults:o},t)}_getSuggestionsFromSource(i,e,t){var a;const s=this.allSources.at(e),n=pt(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,r=i.length,o=pt(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(n&&i.trim()&&r>=o){const c=((a=this.view)==null?void 0:a.spatialReference)||mp,u=pt(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:h}=this,p=!!(s instanceof zn&&pt(s,"exactMatch"))&&s.exactMatch;return s.getSuggestions({view:h,sourceIndex:e,suggestTerm:i,spatialReference:c,maxSuggestions:u,exactMatch:p},t)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(i){const{layer:e}=i;if(e)return pt(i,"popupTemplate")?i.popupTemplate:e.popupTemplate}_getSourceIndexOfResult(i){const e=this.results;let t=null;return e.some(s=>s.results.some(n=>n===i&&(t=s.sourceIndex,!0))),t}async _goToSearchResult(i){const e=!!i;this._abortGoTo();const t=new AbortController;this._gotoController=t;const s={target:{target:i},options:{animate:e,signal:t.signal}};await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(i){var s;const{defaultSymbols:e}=this,t=(s=i.feature)==null?void 0:s.geometry;if(O(t))return null;switch(t.type){case"point":case"multipoint":return e.point;case"polyline":return e.polyline;case"extent":case"polygon":return e.polygon;default:return null}}_removeHighlight(){this._handles.remove(pp)}async _getLayerView(i){const{view:e}=this;if(!i||!e||i.layer.type==="building-component"||i.layer.type==="subtype-sublayer")return null;const{layer:t}=i;return await e.when(),e.whenLayerView(t)}_highlightFeature(i){const{graphic:e,layerView:t}=i,{attributes:s,layer:n}=e,{objectIdField:r}=n,o=s&&s[r],a=t.highlight(o||e);this._handles.add(a,pp)}_setResultFloor(i){var n,r,o;const{view:e}=this,t=(n=i.feature)==null?void 0:n.attributes,s=(r=i.feature)==null?void 0:r.sourceLayer;if(s&&"floorInfo"in s&&((o=s==null?void 0:s.floorInfo)!=null&&o.floorField)&&t){const a=t[s.floorInfo.floorField];e==null||e.emit("select-result-floor",a)}}};Q.ALL_INDEX=Hn,l([d()],Q.prototype,"_searching",void 0),l([d()],Q.prototype,"_updatingPromise",void 0),l([d({readOnly:!0,value:null})],Q.prototype,"activeSource",null),l([d()],Q.prototype,"activeSourceIndex",null),l([d()],Q.prototype,"allPlaceholder",null),l([d({readOnly:!0})],Q.prototype,"allSources",null),l([d()],Q.prototype,"autoNavigate",void 0),l([d()],Q.prototype,"autoSelect",void 0),l([d()],Q.prototype,"defaultPopupTemplate",void 0),l([d({readOnly:!0})],Q.prototype,"defaultSources",void 0),l([d()],Q.prototype,"defaultSymbols",void 0),l([d()],Q.prototype,"includeDefaultSources",void 0),l([d()],Q.prototype,"locationEnabled",null),l([d()],Q.prototype,"maxInputLength",void 0),l([d()],Q.prototype,"maxResults",void 0),l([d()],Q.prototype,"maxSuggestions",void 0),l([d()],Q.prototype,"messages",void 0),l([d()],Q.prototype,"minSuggestCharacters",void 0),l([d({readOnly:!0})],Q.prototype,"placeholder",null),l([d()],Q.prototype,"popupEnabled",void 0),l([d({type:Vp})],Q.prototype,"popupTemplate",void 0),l([d({type:wo})],Q.prototype,"portal",void 0),l([d()],Q.prototype,"resultCount",void 0),l([d()],Q.prototype,"resultGraphicEnabled",void 0),l([d({readOnly:!0})],Q.prototype,"resultGraphic",void 0),l([d({readOnly:!0})],Q.prototype,"results",void 0),l([d({readOnly:!0})],Q.prototype,"selectedSuggestion",void 0),l([d()],Q.prototype,"searchAllEnabled",void 0),l([d({readOnly:!0})],Q.prototype,"selectedResult",void 0),l([d()],Q.prototype,"searchTerm",null),l([d({type:ga})],Q.prototype,"sources",void 0),l([d({readOnly:!0})],Q.prototype,"state",null),l([d()],Q.prototype,"suggestionDelay",void 0),l([d()],Q.prototype,"suggestionCount",void 0),l([d({readOnly:!0})],Q.prototype,"suggestions",void 0),l([d()],Q.prototype,"suggestionsEnabled",void 0),l([d({readOnly:!0})],Q.prototype,"updating",null),l([d()],Q.prototype,"view",void 0),l([d()],Q.prototype,"clear",null),Q=l([$(iy)],Q);const Qn=Q;let bs=class extends Me{constructor(i,e){super(i,e),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const i={[Fi.showMoreResults]:this.showMoreResultsOpen};return m("div",{class:Fi.base},m("div",{key:"esri-search-renderer__container",class:this.classes(Fi.moreResults,i)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return m("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var t;const i=(t=this.viewModel)==null?void 0:t.selectedResult,e=i&&i.name||"";return m("div",{key:"esri-search-renderer__result-name",class:Fi.moreResultsItem},e)}renderMoreResultsLists(){var s;const i=(s=this.viewModel)==null?void 0:s.results,{resultCount:e}=this.viewModel;if(e<2)return null;const t=i.map(n=>this.renderMoreResultsList(n));return m("div",{key:"esri-search-renderer__more-results-container",class:Fi.moreResultsList},t)}renderMoreResultsButton(){const{messages:i}=this,{resultCount:e}=this.viewModel;return e<2?null:m("div",{key:"esri-search-renderer__more-results-button",class:Fi.moreResultsItem},m("a",{class:Fi.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?i.hideMoreResults:i.showMoreResults))}renderMoreResultsHeader(i,e){return m("div",{key:`esri-search-result-renderer__header-${e}`,class:Fi.moreResultsListHeader},i)}renderMoreResultsList(i){var h,p;const{results:e}=i,t=e.length,s=!!t,n=(h=this.viewModel)==null?void 0:h.selectedResult,r=t===1&&e[0]===n,o=this._getSourceName(i.source,i.sourceIndex),a=((p=this.viewModel)==null?void 0:p.results.length)>1&&!r?this.renderMoreResultsHeader(o,i.sourceIndex):null,c=s&&e.map((g,f)=>this.renderMoreResultsListItem(g,f)),u=s&&!r?m("ul",{key:`esri-search-result-renderer__list-${i.sourceIndex}`},c):null;return s?m("div",{key:`esri-search-result-renderer__results-${i.sourceIndex}`},a,u):null}renderMoreResultsListItem(i,e){return i!==this.get("viewModel.selectedResult")?m("li",{key:`esri-search-result-renderer__list-item-${e}`},m("a",{class:Fi.anchor,href:"#",tabindex:"0",bind:this,"data-result":i,onclick:this._selectResultClick,onkeydown:this._selectResultClick},i.name)):null}_showMoreResultsClick(i){i.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const e=this.get("viewModel.view.popup");e&&e.reposition()}_selectResultClick(i){i.preventDefault();const e=i.currentTarget["data-result"];this.viewModel&&this.viewModel.select(e)}_getSourceName(i,e){return e===Qn.ALL_INDEX?this.messages.all:i.name}};l([d(),ge("esri/widgets/Search/t9n/Search")],bs.prototype,"messages",void 0),l([d()],bs.prototype,"showMoreResultsOpen",void 0),l([d()],bs.prototype,"viewModel",void 0),l([ke()],bs.prototype,"_showMoreResultsClick",null),l([ke()],bs.prototype,"_selectResultClick",null),bs=l([$("esri.widgets.Search.SearchResultRenderer")],bs);const $E=bs,LE=/<[a-z/][\s\S]*>/i;let Y=class extends Me{constructor(i,e){super(i,e),this._activeMenuItemIndex=-1,this._handles=new Ke,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new $E,this._locateFailed=null,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=V.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new Qn,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=t=>{var n;const s=t.relatedTarget;s&&((n=this._container)!=null&&n.contains(s))||this._clearActiveMenu()},this.addHandles([I(()=>this.searchTerm,t=>{(t&&this.activeMenu==="warning"||!t&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),We(()=>{var t;return(t=this.viewModel)==null?void 0:t.allSources},"change",()=>this._watchSourceChanges()),I(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),B),I(()=>{var t;return(t=this.viewModel)==null?void 0:t.defaultPopupTemplate},t=>{t&&(t.content=this._renderSearchResultsContent.bind(this))},B)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){return this.viewModel.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(i){this.viewModel.activeSourceIndex=i}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(i){this.viewModel.allPlaceholder=i}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(i){this.viewModel.autoNavigate=i}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(i){this.viewModel.autoSelect=i}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(i){this.viewModel.goToOverride=i}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(i){this.viewModel.includeDefaultSources=i}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(i){this.viewModel.locationEnabled=i}get maxResults(){return this.viewModel.maxResults}set maxResults(i){this.viewModel.maxResults=i}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(i){this.viewModel.maxSuggestions=i}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(i){this.viewModel.minSuggestCharacters=i}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(i){this.viewModel.popupEnabled=i}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(i){this.viewModel.popupTemplate=i}get portal(){return this.viewModel.portal}set portal(i){this.viewModel.portal=i}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(i){this.viewModel.resultGraphic=i}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(i){this.viewModel.resultGraphicEnabled=i}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(i){this.viewModel.searchAllEnabled=i}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(i){this.viewModel.searchTerm=i}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(i){this.viewModel.sources=i}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(i){this.viewModel.suggestionsEnabled=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}clear(){this.viewModel.clear()}focus(){var i;(i=this._inputNode)==null||i.focus(),this.emit("search-focus")}blur(){var i;(i=this._inputNode)==null||i.blur(),this.emit("search-blur")}search(i){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;return this._searchController=e,this.viewModel.search(i,{signal:t}).catch(s=>{if(this._searchController===e)return this._clearActiveMenu(),this._searchController=null,s}).then(s=>{if(this._searchController===e)return this.activeMenu=s.numResults?"none":"warning",this._searchController=null,s})}suggest(i){this._cancelSuggest();const e=new AbortController,{signal:t}=e;return this._suggestController=e,this.viewModel.suggest(i,null,{signal:t}).then(s=>{if(this._suggestController===e)return this._suggestController=null,s.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),s}).catch(()=>{if(this._suggestController===e)return this._suggestController=null,null})}render(){const{state:i}=this.viewModel,e={[V.disabled]:i==="disabled",[V.esriWidgetDisabled]:this.disabled};return m("div",{class:this.classes(V.base,e)},i==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:i,disabled:e}=this;return m("button",{"aria-label":i.searchButtonTitle,bind:this,disabled:e,class:this.classes(V.submitButton,V.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:i.searchButtonTitle,type:"button"},m("span",{"aria-hidden":"true",class:V.searchIcon}))}renderWarningMenu(){return m("div",{key:"esri-search__error-menu",class:this.classes(V.menu,V.warningMenu)},m("div",{class:V.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:i,activeMenu:e,sourceMenuId:t,sourceMenuButtonId:s,disabled:n}=this,{activeSourceIndex:r,allSources:o}=this.viewModel;return o.length>1?m("button",{id:s,key:"esri-search__source-menu-button",bind:this,disabled:n,"aria-label":i.searchIn,title:i.searchIn,"aria-haspopup":"true","aria-expanded":(e==="source").toString(),"aria-controls":t,class:this.classes(V.sourcesButton,V.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Es,"data-node-ref":"_sourceMenuButtonNode",type:"button"},m("span",{"aria-hidden":"true",class:V.dropdownIcon}),m("span",{"aria-hidden":"true",class:V.dropupIcon}),m("span",{class:V.sourceName},this._getSourceName(r))):null}renderSourcesList(){const{allSources:i,searchAllEnabled:e}=this.viewModel,{_activeMenuItemIndex:t,activeMenu:s,sourceMenuId:n,sourceMenuButtonId:r}=this,o=s==="source"&&t>-1?this._buildId("source-item",t):null;return i.length>1?m("ul",{"aria-activedescendant":o,"aria-labelledby":r,id:n,role:"menu",bind:this,afterCreate:Es,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:V.menuList,tabIndex:-1},e?this.renderSource(Qn.ALL_INDEX):null,i.map((a,c)=>this.renderSource(c)).toArray()):null}renderSourcesMenu(){const{allSources:i}=this.viewModel;return i.length>1?m("div",{key:"esri-search__source-menu",class:this.classes(V.menu,V.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:i,messagesCommon:e,disabled:t}=this;return m("div",{class:V.loader,key:"base-loader",tabIndex:t?-1:null},m("span",{"aria-hidden":"true",class:V.loaderAnimation}),m("span",{class:V.fallbackText},i.searchButtonTitle),m("span",{class:V.loaderText},e.loading))}renderContainer(){const{allSources:i,state:e}=this.viewModel,{activeMenu:t}=this,s={[V.hasMultipleSources]:i.length>1,[V.isLoading]:e==="loading",[V.isSearching]:e==="searching",[V.showWarning]:t==="warning",[V.showSources]:t==="source",[V.showSuggestions]:t==="suggestion"};return m("div",{tabIndex:-1,afterCreate:n=>{this._container=n,n.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:n=>{n.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(s,V.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?m("button",{bind:this,disabled:this.disabled,class:this.classes(V.clearButton,V.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},m("span",{"aria-hidden":"true",class:V.clearIcon})):null}renderLocationGroup(){const{messages:i,locationEnabled:e,displayedSearchTerm:t}=this,s=e&&!t,n=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return s?m("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(V.menuList,V.suggestionList,V.suggestionListCurrentLocation)},m("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(V.menuItem,n?V.menuItemFocus:null)},m("span",{"aria-hidden":"true",class:V.locate})," ",i.useCurrentLocation)):null}renderInput(){const{activeMenu:i,locationEnabled:e,displayedSearchTerm:t,messages:s,suggestionsMenuId:n,inputId:r,_activeMenuItemIndex:o,disabled:a}=this,{maxInputLength:c,placeholder:u,searchTerm:h,suggestionCount:p}=this.viewModel,g=!(!(e&&!t)&&!p),f=i==="suggestion"&&o>-1?this._buildId("suggestion-item",o):null;return m("input",{"aria-activedescendant":f,"aria-autocomplete":"list","aria-expanded":(g&&i==="suggestion").toString(),"aria-controls":g?n:null,"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,bind:this,disabled:a,placeholder:u,maxlength:c,autocomplete:"off",type:"text",class:this.classes(V.esriInput,V.input),value:h,id:r,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Es,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:h?"":u})}renderForm(){return m("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:V.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(i){const{sourceIndex:e}=i,t=i.results.length,s=i.results;return t?m("ul",{role:"group",key:`esri-search__suggestion-list-${e}`,class:this.classes(V.menuList,V.suggestionList)},s.map(n=>this.renderSuggestion(n,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:i}=this.viewModel;return i?i.map(e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:i,locationEnabled:e,suggestionsMenuId:t,inputId:s}=this,{suggestionCount:n}=this.viewModel,r=e&&!i||n;return this._menuItemCount=0,r?m("div",{id:t,key:"esri-search__suggestions-menu",class:this.classes(V.menu,V.suggestionsMenu),role:"listbox","aria-labelledby":s,bind:this,afterCreate:Es,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return m("div",{key:"esri-search__input-container",class:V.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(i){const{allSources:e,activeSourceIndex:t}=this.viewModel,{sourceIndex:s}=i,n=i.results.length,r=e.length>1&&t===Qn.ALL_INDEX;return n&&r?m("div",{key:`esri-search__suggestion-header-${s}`,class:V.menuHeader},this._getSourceName(s)):null}renderSuggestion(i,e){const{_activeMenuItemIndex:t,messages:s}=this,{searchTerm:n}=this.viewModel;if(n){const{text:r}=i,o=r||s.untitledResult,a=LE.test(o),c=[];if(a)c.push(m("div",{innerHTML:o}));else{const h=this._splitResult(o,n),p=n.toLowerCase();h.forEach((g,f)=>{g&&g.length&&(g.toLowerCase()===p?c.push(m("strong",{key:f},g)):c.push(g))})}const u=this.activeMenu==="suggestion"&&t===e;return m("li",{bind:this,id:this._buildId("suggestion-item",e),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===e).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${e}`,"data-suggestion":i,role:"option",class:this.classes(V.menuItem,u?V.menuItemFocus:null)},c)}}renderSource(i){const{activeSourceIndex:e,searchAllEnabled:t}=this.viewModel,s={[V.menuItemActive]:i===e,[V.menuItemFocus]:this.activeMenu==="source"&&i===(t?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},n=t?i+1:i;return m("li",{bind:this,key:`esri-search__source-${i}`,id:this._buildId("source-item",n),"aria-checked":(i===e).toString(),onclick:this._handleSourceClick,"data-source-index":i,role:"menuitemradio",class:this.classes(V.source,V.menuItem,s)},this._getSourceName(i))}renderNoResultsWarning(i){const{messages:e}=this,t=i?Mt(e.noResultsFoundForValue,{value:`"${i}"`}):e.noResultsFound;return m("div",{key:"esri-search__no_results"},m("div",{class:V.warningMenuHeader},e.noResults),m("div",{class:V.warningMenuText},t))}renderEmptySearchWarning(){const{messages:i}=this;return m("div",{key:"esri-search__empty-search"},m("span",{"aria-hidden":"true",class:V.noticeIcon}),m("span",{class:V.noValueText},i.emptyValue))}renderLocateWarning(){const{messages:i}=this;return m("div",{key:"esri-search__locate-error"},m("span",{"aria-hidden":"true",class:V.noticeIcon}),m("span",{class:V.noValueText},i.locateError))}renderWarning(){var s;const{displayedSearchTerm:i,_locateFailed:e}=this,{viewModel:t}=this;return e?this.renderLocateWarning():(s=t.selectedSuggestion)!=null&&s.location||i?this.renderNoResultsWarning(i):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(i,e){return`${this.id}-${i}${e===void 0?"":`-${e}`}`}_watchSourceChanges(){const{_handles:i,viewModel:{allSources:e}}=this,t="sources";i.remove(t),e.forEach(s=>i.add(I(()=>s.name,()=>this.scheduleRender()),t))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var e;const i=this.activeMenu==="source";this.activeMenu=i?"none":"source",this.renderNow(),this.activeMenu==="source"&&((e=this._sourceListNode)==null||e.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(i){const e=i.currentTarget["data-suggestion"];e&&(this._focus(),this.search(e))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:e}=i;this._searchController=i,this.viewModel.searchNearby({signal:e}).then(t=>{this.activeMenu=t.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(i){this._setSourceFromMenuItem(i.currentTarget)}_setSourceFromMenuItem(i){var t;if(!i)return;const e=i["data-source-index"];this.viewModel.activeSourceIndex=e,this._clearActiveMenu(),(t=this._sourceMenuButtonNode)==null||t.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(i){var n;const e=ni(i);if(i.ctrlKey||i.metaKey||e==="Copy"||e==="ArrowLeft"||e==="ArrowRight"||e==="Shift")return;if(e==="Tab"||e==="Escape"||i.shiftKey&&e==="Tab")return this._cancelSuggest(),void(e==="Escape"&&this._clearActiveMenu());const t=e==="Home"||e==="End"||e==="ArrowUp"||e==="ArrowDown";if(e==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const s=(n=this._suggestionListNode)==null?void 0:n.getElementsByTagName("li");if(s!=null&&s.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),t)return i.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(e,s,this._suggestionListNode);const r=s[this._activeMenuItemIndex];if(e==="Enter"&&r){const o=r["data-suggestion"];return void(o?(this._focus(),this.search(o)):r["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(i,e,t){const s=this._activeMenuItemIndex;i==="Home"&&(this._activeMenuItemIndex=0),i==="End"&&(this._activeMenuItemIndex=e.length-1),i==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?e.length-1:this._activeMenuItemIndex-1),i==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===e.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&ev(e[this._activeMenuItemIndex],t)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(i){const e=i.target;this.viewModel.searchTerm!==e.value&&(this.viewModel.searchTerm=e.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(i){const e=ni(i);if(Ep(e)){i.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t)}else e!=="ArrowUp"&&e!=="ArrowDown"&&e!=="End"&&e!=="Home"||i.preventDefault()}_handleSourceMenuKeyup(i){var n,r;const e=ni(i),t=e==="ArrowUp"||e==="ArrowDown"||e==="End"||e==="Home";if(t&&i.preventDefault(),e==="Escape")return this._clearActiveMenu(),void((n=this._sourceMenuButtonNode)==null?void 0:n.focus());const s=(r=this._sourceListNode)==null?void 0:r.getElementsByTagName("li");return s&&s.length!==0&&t?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(e,s,this._sourceListNode.parentElement)):void 0}_focus(i){this.focus(),i&&(this.activeMenu=i)}_formSubmit(i){i.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(i){const{messages:e}=this,t=this.viewModel,{allSources:s}=t,n=s.getItemAt(i);return i===Qn.ALL_INDEX?e.all:n&&n.name||e.untitledSource}_splitResult(i,e){const t=hy(e);return i.replace(new RegExp(`(^|)(${t})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};l([d()],Y.prototype,"_activeMenuItemIndex",void 0),l([d()],Y.prototype,"displayedSearchTerm",null),l([d({readOnly:!0})],Y.prototype,"inputId",null),l([d({readOnly:!0})],Y.prototype,"suggestionsMenuId",null),l([d({readOnly:!0})],Y.prototype,"sourceMenuId",null),l([d({readOnly:!0})],Y.prototype,"sourceMenuButtonId",null),l([d()],Y.prototype,"activeMenu",void 0),l([d({readOnly:!0})],Y.prototype,"activeSource",null),l([d()],Y.prototype,"activeSourceIndex",null),l([d()],Y.prototype,"allPlaceholder",null),l([d({readOnly:!0})],Y.prototype,"allSources",null),l([d()],Y.prototype,"autoNavigate",null),l([d()],Y.prototype,"autoSelect",null),l([d({readOnly:!0})],Y.prototype,"defaultSources",null),l([d()],Y.prototype,"disabled",void 0),l([d()],Y.prototype,"goToOverride",null),l([d()],Y.prototype,"iconClass",void 0),l([d()],Y.prototype,"includeDefaultSources",null),l([d()],Y.prototype,"label",null),l([d()],Y.prototype,"locationEnabled",null),l([d()],Y.prototype,"maxResults",null),l([d()],Y.prototype,"maxSuggestions",null),l([d(),ge("esri/widgets/Search/t9n/Search")],Y.prototype,"messages",void 0),l([d(),ge("esri/t9n/common")],Y.prototype,"messagesCommon",void 0),l([d()],Y.prototype,"minSuggestCharacters",null),l([d()],Y.prototype,"popupEnabled",null),l([d()],Y.prototype,"popupTemplate",null),l([d()],Y.prototype,"portal",null),l([d()],Y.prototype,"resultGraphic",null),l([d()],Y.prototype,"resultGraphicEnabled",null),l([d({readOnly:!0})],Y.prototype,"results",null),l([d()],Y.prototype,"searchAllEnabled",null),l([d()],Y.prototype,"searchTerm",null),l([d({readOnly:!0})],Y.prototype,"selectedResult",null),l([d()],Y.prototype,"sources",null),l([d({readOnly:!0})],Y.prototype,"suggestions",null),l([d()],Y.prototype,"suggestionsEnabled",null),l([d()],Y.prototype,"view",null),l([ud(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:Qn})],Y.prototype,"viewModel",void 0),Y=l([$("esri.widgets.Search")],Y);const TE=Y,sy=[{title:"WSDOT Basemap",portalItem:{id:"9912b618413b421da251384acb70218f"}},{title:"WSDOT Gray Basemap",portalItem:{id:"c5a4e545ce8f40c9919b4a7b0fc15aa4"}},{portalItem:{id:"86265e5a4bbb4187a59719cf134e0018"}},{portalItem:{id:"200deb0a065d46b895268c43b4823f99"}},{portalItem:{id:"d4d6cd16abb84fe3ac226ae8c9a24092"}},{portalItem:{id:"3105adcfd6c145d6a474b9927df6d189"}},{portalItem:{id:"895f853971634637ae1b7e6aceae8d47"}}],AE=new c_({title:"Political and Administration Boundaries",url:"https://data.wsdot.wa.gov/arcgis/rest/services/Shared/PoliAdminBndryData/MapServer",visible:!1});function kE(i){const e=document.createElement("progress");i.ui.add(e,{index:0,position:"bottom-trailing"}),I(()=>i.updating,(t,s)=>{e.hidden=!t})}const[RE,PE,FE,OE]=[-116.91,45.54,-124.79,49.05],DE={xmin:RE,ymin:PE,xmax:FE,ymax:OE},ny=new tm({basemap:sy[0],layers:[AE],ground:"world-elevation"}),Ps=new tS({container:"viewDiv",extent:DE,map:ny});kE(Ps);const VE=new FS({source:sy,view:Ps,activeBasemap:ny.basemap}),NE=new Ng({content:VE,view:Ps});new TE({container:"searchDiv",view:Ps,includeDefaultSources:!1,sources:[{url:"https://utility.arcgis.com/usrsvcs/servers/a86fa8aeabdd470792022a8ef959afb6/rest/services/World/GeocodeServer",name:"ArcGIS World Geocode Service",locationType:"street",countryCode:"US",suggestionsEnabled:!0,popupEnabled:!0,autoNavigate:!0,resultGraphicEnabled:!0}]});const zE=new kf({view:Ps}),BE=new xC({view:Ps}),HE=new Ng({content:BE});Ps.ui.add(zE,"bottom-left");Ps.ui.add([HE,NE],"top-right");export{yI as $,lg as G,As as P,ik as R,tl as S,Xn as a,tk as b,yg as c,xI as d,vg as e,ey as f,gE as g,fc as h,CA as i,Io as l,$k as m,ag as n,$I as p,Ze as t,bi as u};
