import"./string-75082bc6.js";import{s as M}from"./Error-781981d1.js";function E(t,r){for(const[n,e]of t)if(r(e,n))return!0;return!1}function N(t,r,n){const e=t.get(r);if(e!==void 0)return e;const a=n();return t.set(r,a),a}const f=M.getLogger("esri.core.accessorSupport.ensureTypes");function _(t){return t==null?t:new Date(t)}function B(t){return t==null?t:!!t}function C(t){return t==null?t:t.toString()}function D(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function F(t){return t==null?t:Math.round(parseFloat(t))}function j(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function g(t,r){return r!=null&&t&&!(r instanceof t)}function S(t){return t&&"isCollection"in t}function k(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function I(t,r){if(!r||!r.constructor||!S(r.constructor))return h(t,r)?r:new t(r);const n=k(t.prototype.itemType),e=k(r.constructor.prototype.itemType);return n?e?n===e?r:n.prototype.isPrototypeOf(e.prototype)?new t(r):(h(t,r),r):new t(r):r}function h(t,r){return!!j(r)&&(f.error("Accessor#set","Assigning an instance of '"+(r.declaredClass||"unknown")+"' which is not a subclass of '"+d(t)+"'"),!0)}function O(t,r){return r==null?r:S(t)?I(t,r):g(t,r)?h(t,r)?r:new t(r):r}function d(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const x=new WeakMap;function K(t){switch(t){case Number:return D;case A:return F;case Boolean:return B;case String:return C;case Date:return _;default:return N(x,t,()=>O.bind(null,t))}}function p(t,r){const n=K(t);return arguments.length===1?n:n(r)}function v(t,r,n){return arguments.length===1?v.bind(null,t):r&&(Array.isArray(r)?r.map(e=>t(e,n)):[t(r,n)])}function G(t,r){return arguments.length===1?v(p.bind(null,t)):v(p.bind(null,t),r)}function T(t,r,n){return r!==0&&Array.isArray(n)?n.map(e=>T(t,r-1,e)):t(n)}function b(t,r,n){if(arguments.length===2)return b.bind(null,t,r);if(!n)return n;let e=r,a=n=T(t,r,n);for(;e>0&&Array.isArray(a);)e--,a=a[0];if(a!==void 0)for(let c=0;c<e;c++)n=[n];return n}function H(t,r,n){return arguments.length===2?b(p.bind(null,t),r):b(p.bind(null,t),r,n)}function J(t){return!!Array.isArray(t)&&!t.some(r=>{const n=typeof r;return!(n==="string"||n==="number"||n==="function"&&t.length>1)})}function L(t,r){if(arguments.length===2)return L(t).call(null,r);const n=new Set,e=t.filter(o=>typeof o!="function"),a=t.filter(o=>typeof o=="function");for(const o of t)typeof o!="string"&&typeof o!="number"||n.add(o);let c=null,y=null;return(o,u)=>{if(o==null)return o;const i=typeof o,l=i==="string"||i==="number";return l&&(n.has(o)||a.some(s=>i==="string"&&s===String||i==="number"&&s===Number))||i==="object"&&a.some(s=>!g(o,s))?o:(l&&e.length?(c||(c=e.map(s=>typeof s=="string"?`'${s}'`:`${s}`).join(", ")),f.error("Accessor#set",`'${o}' is not a valid value for this property, only the following values are valid: ${c}`)):typeof o=="object"&&a.length?(y||(y=a.map(s=>d(s)).join(", ")),f.error("Accessor#set",`'${o}' is not a valid value for this property, value must be one of ${y}`)):f.error("Accessor#set",`'${o}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function P(t,r){if(arguments.length===2)return P(t).call(null,r);const n={},e=[],a=[];for(const u in t.typeMap){const i=t.typeMap[u];n[u]=p(i),e.push(d(i)),a.push(u)}const c=()=>`'${e.join("', '")}'`,y=()=>`'${a.join("', '")}'`,o=typeof t.key=="string"?u=>u[t.key]:t.key;return u=>{if(t.base&&!g(t.base,u)||u==null)return u;const i=o(u)||t.defaultKeyValue,l=n[i];if(!l)return f.error("Accessor#set",`Invalid property value, value needs to be one of ${c()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!g(t.typeMap[i],u))return u;if(typeof t.key=="string"&&!j(u)){const s={};for(const m in u)m!==t.key&&(s[m]=u[m]);return l(s)}return l(u)}}class A{}const Q={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function R(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function V(t){switch(t.type){case"native":return p(t.value);case"array":return v(V(t.value));case"one-of":return W(t);default:return null}}function W(t){let r=null;return(n,e)=>$(n,t)?n:(r==null&&(r=w(t)),f.error("Accessor#set",`Invalid property value, value needs to be of type ${r}`),e&&(e.valid=!1),null)}function w(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case A:return"integer";case Date:return"date";default:return d(t.value)}case"array":return`array of ${w(t.value)}`;case"one-of":{const r=t.values.map(n=>w(n));return`one of ${r.slice(0,r.length-1)} or ${r[r.length-1]}`}}return"unknown"}function $(t,r){if(t==null)return!0;switch(r.type){case"native":switch(r.value){case Number:case A:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof r.value;case"array":return!!Array.isArray(t)&&!t.some(n=>!$(n,r.value));case"one-of":return r.values.some(n=>$(t,n))}}export{b as $,V as B,L as M,Q as N,P as S,A as T,R as _,D as a,p as b,H as j,J as k,v as m,E as n,N as r,F as s,C as u,O as v,G as w};
