import{_ as h}from"./preload-helper-f8378b50.js";import{U as d}from"./request-7c0a9d4c.js";import{a as n}from"./Error-d97df89f.js";import{e as b}from"./ItemCache-d06df2a7.js";import{r as a,c as w}from"./typedArrayUtil-96f93e5b.js";import{F as v,a as z}from"./aaBoundingBox-1eda6d1b.js";import{t as _,c as g}from"./symbolLayerUtils3D-0c6ed99a.js";import"./string-feb899cf.js";import"./promiseUtils-ac1bd36f.js";import"./MemCache-7d4aa654.js";import"./JSONSupport-ed372989.js";import"./ensureType-348c3d61.js";import"./nextTick-3ee5a785.js";import"./Extent-fd3ac910.js";import"./cast-73cfc253.js";import"./mathUtils-b3bee9e7.js";let s=m();function m(){return new b(50)}function G(){s=m()}function H(e,r){if(e.type==="icon")return p(e,r);if(e.type==="object")return f(e,r);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function J(e,r){if(e.type==="icon")return j(e,r);if(e.type==="object")return B(e,r);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(e,r){var o,i;if((o=e.resource)!=null&&o.href)return L(e.resource.href).then(t=>[t.width,t.height]);if((i=e.resource)!=null&&i.primitive)return a(r)?[r,r]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(e,r){return p(e,r).then(o=>{if(e.size==null)return o;const i=o[0]/o[1];return i>1?[e.size,e.size/i]:[e.size*i,e.size]})}function L(e){return d(e,{responseType:"image"}).then(r=>r.data)}function f(e,r){return S(e,r).then(o=>v(o))}async function B(e,r){const o=await f(e,r);return _(o,e)}async function S(e,r){var i;if(!e.isPrimitive){const t=w((i=e.resource)==null?void 0:i.href),u=s.get(t);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-cb17cee6.js").then(l=>l.o),["assets/objectResourceUtils-cb17cee6.js","assets/devEnvironmentUtils-5002a058.js","assets/typedArrayUtil-96f93e5b.js","assets/mat3-d3027213.js","assets/mathUtils-b3bee9e7.js","assets/mat3f64-221ce671.js","assets/mat4-1ee69bd5.js","assets/mat4f64-1413b4a7.js","assets/aaBoundingBox-1eda6d1b.js","assets/Extent-fd3ac910.js","assets/JSONSupport-ed372989.js","assets/string-feb899cf.js","assets/Error-d97df89f.js","assets/ensureType-348c3d61.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-ac1bd36f.js","assets/cast-73cfc253.js","assets/BufferView-6e7f315f.js","assets/vec2-9030ffc5.js","assets/vec33-87671de1.js","assets/DefaultMaterial_COLOR_GAMMA-938a8569.js","assets/types-e1c0a5bf.js","assets/request-7c0a9d4c.js","assets/preload-helper-f8378b50.js","assets/asyncUtils-f0fdc8c7.js","assets/enums-64ab819c.js","assets/Version-bbcb090a.js","assets/quat-7a51fb0c.js","assets/quatf64-3363c48e.js","assets/compilerUtils-8d4f8499.js","assets/resourceUtils-71fe9113.js","assets/basicInterfaces-b7051eb1.js","assets/Indices-9f31eb0f.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/byteSizeEstimations-90c5a50d.js","assets/NestedMap-1b5db22e.js","assets/requestImageUtils-2eca6bfa.js","assets/Util-a12911ae.js","assets/vec2f64-22afc56f.js","assets/vec4f64-aa64c7e9.js","assets/sphere-9a91d6e3.js","assets/lineSegment-ec7005a7.js","assets/VertexAttribute-15d1866a.js","assets/Evented-e2ee9722.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/assets-2c955bed.js","assets/Texture-8f8edc49.js","assets/context-util-09fcc133.js","assets/VertexArrayObject-d5986ce6.js","assets/VertexElementDescriptor-2925c6af.js","assets/ViewingMode-915d19cb.js","assets/InterleavedLayout-de0d94f5.js","assets/vec3f32-ad1dc57f.js","assets/mat4f32-60a2394b.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/symbolColorUtils-6e138021.js"]),c=await y.fetch(t,{disableTextures:!0});return s.put(t,c.referenceBoundingBox),c.referenceBoundingBox}let o=null;if(e.resource&&e.resource.primitive&&(o=z(g(e.resource.primitive)),a(r)))for(let t=0;t<o.length;t++)o[t]*=r;return o?Promise.resolve(o):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{G as clearBoundingBoxCache,p as computeIconLayerResourceSize,H as computeLayerResourceSize,J as computeLayerSize,f as computeObjectLayerResourceSize};
