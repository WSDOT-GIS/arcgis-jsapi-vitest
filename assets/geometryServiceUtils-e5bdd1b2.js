import{b as p,a}from"./Error-781981d1.js";import{b as l}from"./Portal-c7b19d88.js";import{a as s,n as c}from"./project-bfd3abf8.js";import"./string-75082bc6.js";import"./typedArrayUtil-74bbfd45.js";import"./preload-helper-fb43855a.js";import"./Accessor-815cb0cf.js";import"./watch-c7facfb0.js";import"./ArrayPool-ae2ef0ab.js";import"./nextTick-3ee5a785.js";import"./promiseUtils-28f2a985.js";import"./ensureType-125d327f.js";import"./request-6e1d5843.js";import"./JSONSupport-2b897629.js";import"./Loadable-6776e4d9.js";import"./Promise-092442f7.js";import"./Extent-8fae2379.js";import"./cast-f7d2a22f.js";import"./locale-30120714.js";import"./PortalGroup-d3a43002.js";import"./PortalUser-a3f3561a.js";import"./jsonUtils-15ca15d7.js";import"./Polyline-40b9e769.js";import"./utils-25aa08c8.js";import"./utils-067ee6bc.js";async function f(r=null,n){var o,t;if(p.geometryServiceUrl)return p.geometryServiceUrl;if(!r)throw new a("internal:geometry-service-url-not-configured");let e;e="portal"in r?r.portal||l.getDefault():r,await e.load({signal:n});const i=(t=(o=e.helperServices)==null?void 0:o.geometry)==null?void 0:t.url;if(!i)throw new a("internal:geometry-service-url-not-configured");return i}async function H(r,n,e=null,i){const o=await f(e,i),t=new s;t.geometries=[r],t.outSpatialReference=n;const m=await c(o,t,{signal:i});if(m&&Array.isArray(m)&&m.length===1)return m[0];throw new a("internal:geometry-service-projection-failed")}export{f as getGeometryServiceURL,H as projectGeometry};
