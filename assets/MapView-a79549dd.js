import{_ as b}from"./preload-helper-fb43855a.js";import{e as a,y as c,a as I,k as yt,v as D,o as ml,g as so,l as no}from"./Accessor-815cb0cf.js";import{g as Vt}from"./Graphic-87396b85.js";import{i as kr}from"./Clonable-6d5134c7.js";import{s as gl}from"./Cyclical-a38bc08c.js";import{l as fs}from"./JSONSupport-2b897629.js";import{a as Ai,b as fl,r as Pr,g as _l}from"./mathUtils-15f63a45.js";import{t as F,r as w,a as re,q as oo,y as wi,h as yl,g as be,p as Xe,w as ln,x as vl}from"./typedArrayUtil-74bbfd45.js";import{s as Ce}from"./cast-f7d2a22f.js";import{a as Y,r as wl,o as bl,R as Ar,E as _s,w as li,f as An,I as Fr,$ as Ml,p as Il,d as Cl,e as Rr,c as Tl,M as xl}from"./Extent-8fae2379.js";import{a as mt,n as ys}from"./ensureType-125d327f.js";import{n as El}from"./geometry-0d19f94b.js";import{v as ro}from"./jsonUtils-15ca15d7.js";import{j as W}from"./Collection-912f4315.js";import{l as Lr}from"./CollectionFlattener-670e79b4.js";import{s as O,a as $}from"./Error-781981d1.js";import{b as ri,a as De,p as $l}from"./string-75082bc6.js";import{y as kl,E as Dt,i as kt,g as $i,U as Fn,j as Sr,b as Pl,L as Al,A as Dr,a as Vr,v as Ps,f as ni,p as Fl,C as Rl,t as vs}from"./promiseUtils-28f2a985.js";import{l as y,h as V,a as Ee,f as Je,U as Fi,j as Rn,w as bt}from"./reactiveUtils-31da19f9.js";import{c as pe}from"./screenUtils-7afeb41c.js";import{c as Ll}from"./workers-79a370d4.js";import{e as Ri,A as ws,r as Vi,t as bs}from"./projection-6de68766.js";import{p as Sl,j as Dl}from"./TileInfo-1aef4d7f.js";import{t as Ui}from"./ArrayPool-ae2ef0ab.js";import{i as ao,e as ae,W as le,n as m,v as cs,h as lo,f as Ve,w as Vl,a as Or,r as co,t as Nr,o as ho}from"./jsxFactory-9e4b8e7b.js";import{t as Ol,y as Nl,x as uo,A as ai,v as zl,n as zr,h as As}from"./watch-c7facfb0.js";import{c as Br,a as Ms,d as qr}from"./HandleOwner-124247b4.js";import{s as Se}from"./intl-71e7974a.js";import{s as po}from"./byteSizeEstimations-90c5a50d.js";import{m as Ur,L as cn,u as Bl,S as ql}from"./number-5e819186.js";import{a as Ul}from"./AttachmentInfo-6ef9e2f8.js";import{c as mo}from"./AttachmentQuery-527f7d40.js";import{x as Hl,i as jl,h as Gl,a as Wl}from"./fieldUtils-85274dd9.js";import{v as Zl}from"./layerUtils-5e9bebc1.js";import{u as Kl,i as Ql,c as Hr,a as Yl,I as Xl,b as jr,d as Jl,e as ec}from"./PopupTemplate-51cd4af1.js";import{a as tc}from"./assets-7bd3ffcf.js";import{n as Ln}from"./Heading-9979860e.js";import{e as Gr,t as ic}from"./widget-30d91dc2.js";import{b as sc,r as dn,R as nc,n as oc}from"./symbolUtils-b6a898f8.js";import{U as rc}from"./request-6e1d5843.js";import"./DataLayerSource-3a7a94c9.js";import{s as Fs}from"./executeQueryJSON-9dcde882.js";import"./featureConversionUtils-55a32b06.js";import{o as ac,v as lc}from"./Polyline-40b9e769.js";import"./normalizeUtils-120a3150.js";import"./pbf-c0fe6550.js";import"./FeatureSet-11704ad2.js";import{m as cc,x as Rs}from"./Query-4c66990d.js";import hn from"./RelationshipQuery-9431dd85.js";import"./TopFeaturesQuery-bceb40dd.js";import{l as Wr,s as dc}from"./locale-30120714.js";import hc from"./FeatureLayer-81642491.js";import{s as Zr,i as Sn}from"./Identifiable-f5397426.js";import{n as Dn}from"./Evented-3dfb26f2.js";import{a as Oi,c as uc,b as pc}from"./ActionToggle-dc9b6fc6.js";import{S as mc}from"./symbols-716c75e3.js";import{b as go}from"./Layer-9c99e5a9.js";import{e as fo}from"./Queue-687500af.js";import{t as gc,R as fc,D as _c}from"./Scheduler-58e89fab.js";import{t as Kr,a as _o}from"./GoTo-a612a338.js";import{t as Me}from"./accessibleHandler-33d234ac.js";import{e as yc}from"./vmEvent-d773b6c5.js";import vc from"./Map-471aba16.js";import{T as wc}from"./TimeExtent-202e4138.js";import{j as Qr,b as bc}from"./asyncUtils-5c97747c.js";import{m as yo}from"./Loadable-6776e4d9.js";import{m as Mc,_ as Ic}from"./Promise-092442f7.js";import{l as Cc,i as Yr,a as vo}from"./GraphicsCollection-0ae219af.js";import{v as Vn}from"./HeightModelInfo-0c04472c.js";import{a as Xr}from"./TimeReference-afe9f4e7.js";import{d as Tc}from"./arcgisLayerUrl-94ca51fa.js";import{l as wo}from"./ViewingMode-915d19cb.js";import{t as un,r as xc}from"./unitBezier-881ac1eb.js";import{h as Ec,c as Jr,f as ea,e as On,i as ds,M as $c,r as ta,n as kc}from"./mat2d-68947564.js";import{o as pn,v as bo,y as Pc,j as Ac,q as Mo,C as ia,l as Is,r as ne,z as Ke,g as Fc,a as hs,s as Rc,m as Lc}from"./vec2-4c517306.js";import{r as Sc,n as ee}from"./vec2f64-22afc56f.js";import{s as Dc,r as Vc,M as Io,h as Oc,i as Nc}from"./mat3-53e5916e.js";import{e as Ls}from"./mat3f32-6c416b1c.js";import{t as Co}from"./vec2f32-eaf29605.js";import"./TileStrategy-56172cce.js";import{d as zc,h as Bc}from"./TileStore-53c9ad86.js";import"./TileKey-e007f54a.js";import{l as Li}from"./Color-5e799d63.js";import{l as qc}from"./capabilities-c77778e7.js";import{r as Uc}from"./context-util-31041918.js";let He=class extends kr(fs){constructor(...e){super(...e),this.position=new Y([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,s,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const o={position:e};return t!=null&&(o.heading=t),s!=null&&(o.tilt=s),n!=null&&(o.fov=n),o}return e}writePosition(e,t,s,n){const o=e.clone();o.x=mt(e.x||0),o.y=mt(e.y||0),o.z=e.hasZ?mt(e.z||0):e.z,t[s]=o.write({},n)}readPosition(e,t){const s=new Y;return s.read(e,t),s.x=mt(s.x||0),s.y=mt(s.y||0),s.z=s.hasZ?mt(s.z||0):s.z,s}equals(e){return!F(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};a([c({type:Y,json:{write:{isRequired:!0}}})],He.prototype,"position",void 0),a([wl("position")],He.prototype,"writePosition",null),a([bl("position")],He.prototype,"readPosition",null),a([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ce(i=>gl.normalize(mt(i)))],He.prototype,"heading",void 0),a([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ce(i=>Ai(mt(i),-180,180))],He.prototype,"tilt",void 0),a([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],He.prototype,"fov",void 0),He=a([I("esri.Camera")],He);const Hc=He;var mn;let ot=mn=class extends fs{constructor(i){super(i),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(i){return(i%=360)<0&&(i+=360),i}clone(){return new mn({rotation:this.rotation,scale:this.scale,targetGeometry:w(this.targetGeometry)?this.targetGeometry.clone():null,camera:w(this.camera)?this.camera.clone():null})}};function Ss(){return{enabled:!this.camera}}a([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ss}}}}})],ot.prototype,"rotation",void 0),a([Ce("rotation")],ot.prototype,"castRotation",null),a([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ss}}}}})],ot.prototype,"scale",void 0),a([c({types:El,json:{read:ro,write:!0,origins:{"web-scene":{read:ro,write:{overridePolicy:Ss}}}}})],ot.prototype,"targetGeometry",void 0),a([c({type:Hc,json:{write:!0}})],ot.prototype,"camera",void 0),ot=mn=a([I("esri.Viewpoint")],ot);const Oe=ot,Qi={widthBreakpoint:{getValue(i){const e=i.viewSize[0],t=i.breakpoints,s=this.values;return e<=t.xsmall?s.xsmall:e<=t.small?s.small:e<=t.medium?s.medium:e<=t.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(i){const e=i.viewSize[1],t=i.breakpoints,s=this.values;return e<=t.xsmall?s.xsmall:e<=t.small?s.small:e<=t.medium?s.medium:e<=t.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(i){const e=i.viewSize,t=e[0],s=e[1],n=this.values;return s>=t?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Ds={xsmall:544,small:768,medium:992,large:1200};function jc(i){const e=i;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Vs(i,e){return e?Qi[i].valueToClassName[e].split(" "):[]}const Gc=i=>{let e=class extends i{constructor(...t){super(...t),this._breakpointsHandles=new yt,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Ds}initialize(){this._breakpointsHandles.add(y(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),V))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=re(this._breakpointsHandles))}set breakpoints(t){if(t===this._get("breakpoints"))return;const s=jc(t);if(!s){const n=JSON.stringify(Ds,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}t=s?t:Ds,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;const t=Ui.acquire(),s=Ui.acquire();let n,o=!1;for(n in Qi){const r=this[n],l=Qi[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==l&&(o=!0,this[n]=l,Vs(n,r).forEach(d=>s.push(d)),Vs(n,l).forEach(d=>t.push(d)))}o&&(this._applyClassNameChanges(t,s),Ui.release(t),Ui.release(s))}_applyClassNameChanges(t,s){const n=this.container;n&&(s.forEach(o=>n.classList.remove(o)),t.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const t=this.container;if(!t)return;let s;for(s in Qi)Vs(s,this[s]).forEach(n=>t.classList.remove(n))}};return a([c()],e.prototype,"breakpoints",null),a([c()],e.prototype,"orientation",void 0),a([c()],e.prototype,"widthBreakpoint",void 0),a([c()],e.prototype,"heightBreakpoint",void 0),e=a([I("esri.views.BreakpointsOwner")],e),e};let rt=class extends D{constructor(){super(...arguments),this.items=new W,this._watchUpdatingTracking=new Br,this._callbacks=new Map,this._projector=ao(),this._hiddenProjector=ao()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const s of t.added){const n=()=>s.render();this._callbacks.set(s,n),this._projector.append(this.surface,n)}for(const s of t.removed){const n=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(n.domNode),this._callbacks.delete(s)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,s=this._hiddenProjector;let n;const o=()=>(n=e.render(),n);s.append(t,o),s.renderNow();const r={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const l=n.domNode.getBoundingClientRect();r.left=l.left,r.top=l.top,r.right=l.right,r.bottom=l.bottom}for(s.detach(o);t.firstChild;)t.removeChild(t.firstChild);return r}overlaps(e,t){const s=this.computeBoundingRect(e),n=this.computeBoundingRect(t);return Math.max(s.left,n.left)<=Math.min(s.right,n.right)&&Math.max(s.top,n.top)<=Math.min(s.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(s=>s.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(s=>{t.save(),s.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};a([c({readOnly:!0})],rt.prototype,"surface",void 0),a([c({readOnly:!0})],rt.prototype,"items",void 0),a([c({readOnly:!0})],rt.prototype,"needsRender",null),a([c({readOnly:!0})],rt.prototype,"_watchUpdatingTracking",void 0),a([c({readOnly:!0})],rt.prototype,"updating",null),rt=a([I("esri.views.overlay.ViewOverlay")],rt);const To=rt;function oi(i,e,t,s){let n=null,o=1e3;typeof e=="number"?(o=e,s=t):(n=e??null,o=t);let r,l=0;const d=()=>{l=0,i.apply(s,r)},h=(...u)=>{n&&n.apply(s,u),r=u,o?l||(l=setTimeout(d,o)):d()};return h.remove=()=>{l&&(clearTimeout(l),l=0)},h.forceUpdate=()=>{l&&(clearTimeout(l),d())},h.hasPendingUpdates=()=>!!l,h}const xo=["B","kB","MB","GB","TB"];function Wc(i,e){let t=e===0?0:Math.floor(Math.log(e)/Math.log(po.KILOBYTES));t=Ai(t,0,xo.length-1);const s=Ur(e/po.KILOBYTES**t,{maximumFractionDigits:2});return ri(i.units.bytes[xo[t]],{fileSize:s})}const Zc="esri.widgets.Feature.support.featureUtils",Eo=O.getLogger(Zc),Kc=/href=(""|'')/gi,Qc=/(\{([^\{\r\n]+)\})/g,Yc=/\'/g,sa=/^\s*expression\//i,Xc=/(\n)/gi,Jc=/[\u00A0-\u9999<>\&]/gim,ed=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,td=/^(?:mailto:|tel:)/,na="relationships/",gn=ql("short-date-short-time");function oa(i){if(!F(i))return i.get("sourceLayer")||i.get("layer")}async function us(i,e){return typeof i=="function"?i.call(null,e):i}function ra(i=""){if(i)return!td.test(i.trim().toLowerCase())}function Nn(i){return!!i&&sa.test(i)}function id(i,e){if(!Nn(e)||!i)return null;const t=e.replace(sa,"").toLowerCase();let s=null;return i.some(n=>n.name.toLowerCase()===t&&(s=n,!0)),s}function aa(i,e){const t=id(e,i==null?void 0:i.fieldName);return t?t.title||null:i?i.label||i.fieldName:null}function sd(i,e){const t=e.get(i.toLowerCase());return`{${t&&t.fieldName||i}}`}function nd(i){return i.replace(Kc,"")}function Si(i,e){const t=zn(e,i);return t?t.name:i}function od(i,e){return i&&i.map(t=>Si(t,e))}function zn(i,e){return i&&typeof i.getField=="function"&&e?i.getField(e)??null:null}function la(i){return`${i}`.trim()}function Ft({attributes:i,globalAttributes:e,layer:t,text:s,expressionAttributes:n,fieldInfoMap:o}){return s?fn({formattedAttributes:e,template:cd(s,{...e,...n,...i},t),fieldInfoMap:o}):""}function fn({formattedAttributes:i,template:e,fieldInfoMap:t}){return la(nd(ri(ri(e,s=>sd(s,t)),i)))}function rd(i,e,t=!1){const s=e[i];if(typeof s=="string"){const n="%27",o=(t?encodeURIComponent(s):s).replace(Yc,n);e[i]=o}}function ad(i,e=!1){const t={...i};return Object.keys(t).forEach(s=>rd(s,t,e)),t}function ld(i,e,t){const s=(e=la(e))&&e[0]!=="{";return ri(i,ad(t,s||!1))}function _n(i,e){return i.replace(Qc,(t,s,n)=>{const o=zn(e,n);return o?`{${o.name}}`:s})}function cd(i,e,t){const s=_n(i,t);return s&&s.replace(ed,(n,o,r)=>ld(n,o||r,e))}function dd(i,e){if(typeof i=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const t=Number(i);if(!isNaN(t))return t}return i}function hd(i){return(i==null?void 0:i.type)==="feature"}function $o(i){return!!(i!=null&&i.layer)}function ud(i){return(i==null?void 0:i.type)==="map-image"}function pd(i,e){var h;const t=e.fieldInfos,s=e.fieldName,n=(h=ca(t,s))==null?void 0:h.clone(),o=e.preventPlacesFormatting,r=e.layer,l=zn(r,s);if(n&&(l==null?void 0:l.type)==="date"){const u=n.format||new Kl;u.dateFormat=u.dateFormat||"short-date-short-time",u.dateTimeFormatOptions=!$o(r)&&hd(r)&&r.datesInUnknownTimezone||$o(r)&&ud(r.layer)&&r.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=u}const d=n&&n.format;return typeof i=="string"&&Gl(s)&&d?d.formatRasterPixelValue(i):typeof(i=dd(i,d))=="string"||i==null||d==null?Ni(i):o?Ur(i,{...Bl(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(i)}function ca(i,e){if(!i||!i.length||!e)return;const t=e.toLowerCase();let s;return i.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==t)&&(s=n,!0)),s}function md({fieldName:i,graphic:e,layer:t}){if(Ye(i)||!t||typeof t.getFeatureType!="function")return null;const{typeIdField:s}=t;if(!s||i!==s)return null;const n=t.getFeatureType(e);return n?n.name:null}function gd({fieldName:i,value:e,graphic:t,layer:s}){if(Ye(i)||!s||typeof s.getFieldDomain!="function")return null;const n=t&&s.getFieldDomain(i,{feature:t});return n&&n.type==="coded-value"?n.getName(e):null}function fd(i,e){const{creatorField:t,creationDateField:s,editorField:n,editDateField:o}=i;if(!e)return;const r=e[o];if(typeof r=="number"){const d=e[n];return{type:"edit",date:cn(r,gn),user:d}}const l=e[s];if(typeof l=="number"){const d=e[t];return{type:"create",date:cn(l,gn),user:d}}return null}function _d(i,e){const t=new Map;return i&&i.forEach(s=>{const n=Si(s.fieldName,e);s.fieldName=n,t.set(n.toLowerCase(),s)}),t}function ko(i){const e=[];if(!i)return e;const{fieldInfos:t,content:s}=i;return t&&e.push(...t),s&&Array.isArray(s)&&s.forEach(n=>{if(n.type==="fields"){const o=n&&n.fieldInfos;o&&e.push(...o)}}),e}function Bn(i){return i.replace(Jc,e=>`&#${e.charCodeAt(0)};`)}function Ni(i){return typeof i=="string"?i.replace(Xc,'<br class="esri-text-new-line" />'):i}function da(i){const{value:e,fieldName:t,fieldInfos:s,fieldInfoMap:n,layer:o,graphic:r}=i;if(e==null)return"";const l=gd({fieldName:t,value:e,graphic:r,layer:o});if(l)return l;const d=md({fieldName:t,graphic:r,layer:o});if(d)return d;if(n.get(t.toLowerCase()))return pd(e,{fieldInfos:s||Array.from(n.values()),fieldName:t,layer:o});const h=o&&o.fieldsIndex;return h&&h.isDateField(t)?cn(e,gn):Ni(e)}function Os({fieldInfos:i,attributes:e,layer:t,graphic:s,fieldInfoMap:n,relatedInfos:o}){const r={};return o==null||o.forEach(l=>bd({attributes:r,relatedInfo:l,fieldInfoMap:n,fieldInfos:i,layer:t})),e&&Object.keys(e).forEach(l=>{const d=e[l];r[l]=da({fieldName:l,fieldInfos:i,fieldInfoMap:n,layer:t,value:d,graphic:s})}),r}async function ha(i,e){var u,p;const{layer:t,graphic:s,outFields:n,objectIds:o,returnGeometry:r,spatialReference:l}=i,d=o[0];if(typeof d!="number"&&typeof d!="string"){const g="Could not query required fields for the specified feature. The feature's ID is invalid.",f={layer:t,graphic:s,objectId:d,requiredFields:n};return Eo.warn(g,f),null}if(!((p=(u=Zl(t))==null?void 0:u.operations)!=null&&p.supportsQuery)){const g="The specified layer cannot be queried. The following fields will not be available.",f={layer:t,graphic:s,requiredFields:n,returnGeometry:r};return Eo.warn(g,f),null}const h=t.createQuery();return h.objectIds=o,h.outFields=n!=null&&n.length?n:[t.objectIdField],h.returnGeometry=!!r,h.returnZ=!!r,h.returnM=!!r,h.outSpatialReference=l,(await t.queryFeatures(h,e)).features[0]}async function yd(i){var s;if(!((s=i.expressionInfos)!=null&&s.length))return!1;const e=await jl(),{arcadeUtils:{hasGeometryFunctions:t}}=e;return t(i)}async function vd({graphic:i,popupTemplate:e,layer:t,spatialReference:s},n){if(!t||!e||(typeof t.load=="function"&&await t.load(n),!i.attributes))return;const o=i.attributes[t.objectIdField];if(o==null)return;const r=[o],l=await e.getRequiredFields(t.fieldsIndex),d=Hl(l,i),h=d?[]:l,u=e.returnGeometry||await yd(e);if(d&&!u)return;const p=await ha({layer:t,graphic:i,outFields:h,objectIds:r,returnGeometry:u,spatialReference:s},n);p&&(p.geometry&&(i.geometry=p.geometry),p.attributes&&(i.attributes={...i.attributes,...p.attributes}))}function Ye(i=""){return!!i&&i.includes(na)}function wd(i){return i?`${na}${i.layerId}/${i.fieldName}`:""}function Po({attributes:i,graphic:e,relatedInfo:t,fieldInfos:s,fieldInfoMap:n,layer:o}){i&&e&&t&&Object.keys(e.attributes).forEach(r=>{const l=wd({layerId:t.relation.id.toString(),fieldName:r}),d=e.attributes[r];i[l]=da({fieldName:l,fieldInfos:s,fieldInfoMap:n,layer:o,value:d,graphic:e})})}function bd({attributes:i,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n}){i&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(o=>Po({attributes:i,graphic:o,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(o=>Po({attributes:i,graphic:o,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n})))}const Ao=i=>{if(!i)return!1;const e=i.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},ua=({layer:i,method:e,query:t,definitionExpression:s})=>{var r,l;if(!((l=(r=i.capabilities)==null?void 0:r.query)!=null&&l.supportsCacheHint)||e==="attachments")return;const n=w(t.where)?t.where:null,o=w(t.geometry)?t.geometry:null;Ao(s)||Ao(n)||(o==null?void 0:o.type)==="extent"||t.resultType==="tile"||(t.cacheHint=!0)},Md=({query:i,layer:e,method:t})=>{ua({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},Id=({queryPayload:i,layer:e,method:t})=>{ua({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function Cd(i,e,t){return i&&e&&t?Fo(i.allLayers,e,t)||Fo(i.allTables,e,t):null}function Fo(i,e,t){return i.find(s=>s!==e&&s.type==="feature"&&s.url===e.url&&s.layerId===t.relatedTableId)}const Ro={editing:!1,operations:{add:!0,update:!0,delete:!0}},pa=W.ofType(Ul);let me=class extends D{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...Ro},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new pa,this.fileInfos=new W,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(y(()=>this.graphic,()=>this._graphicChanged(),V))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...Ro,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&t.capabilities&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new $("invalid-layer","getAttachments(): A valid layer is required.");const s=this._getObjectId(),n=new mo({objectIds:[s],returnMetadata:!0}),o=[],r=e.queryAttachments(n).then(d=>d[s]||o).catch(()=>o);this._getAttachmentsPromise=r,this.notifyChange("state");const l=await r;return t.removeAll(),l.length&&t.addMany(l),this._getAttachmentsPromise=null,this.notifyChange("state"),l}async addAttachment(e,t=this.graphic){var d;const{_attachmentLayer:s,attachmentInfos:n,abilities:o}=this;if(!t)throw new $("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new $("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((d=o.operations)!=null&&d.add))throw new $("invalid-abilities","addAttachment(): add abilities are required.");if(!s||typeof s.addAttachment!="function")throw new $("invalid-layer","addAttachment(): A valid layer is required.");const r=s.addAttachment(t,e).then(h=>this._queryAttachment(h.objectId,t)),l=await r;return n.add(l),l}async deleteAttachment(e){var d;const{_attachmentLayer:t,attachmentInfos:s,graphic:n,abilities:o}=this;if(!e)throw new $("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((d=o.operations)!=null&&d.delete))throw new $("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new $("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new $("invalid-graphic","deleteAttachment(): A graphic is required.");const r=t.deleteAttachments(n,[e.id]).then(()=>e),l=await r;return s.remove(l),l}async updateAttachment(e,t=this.activeAttachmentInfo){var u;const{_attachmentLayer:s,attachmentInfos:n,graphic:o,abilities:r}=this;if(!e)throw new $("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new $("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((u=r.operations)!=null&&u.update))throw new $("invalid-abilities","updateAttachment(): Update abilities are required.");const l=n.findIndex(p=>p===t);if(!s||typeof s.updateAttachment!="function")throw new $("invalid-layer","updateAttachment(): A valid layer is required.");if(!o)throw new $("invalid-graphic","updateAttachment(): A graphic is required.");const d=s.updateAttachment(o,t.id,e).then(p=>this._queryAttachment(p.objectId)),h=await d;return n.splice(l,1,h),h}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const s={file:e,form:t};return this.fileInfos.add(s),s}updateFile(e,t,s=this.activeFileInfo){if(!e||!t||!s)return null;const n=this.fileInfos.findIndex(o=>s===o);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:t}),this.fileInfos.items[n]}deleteFile(e){const t=this.fileInfos.find(s=>s.file===e);return t?(this.fileInfos.remove(t),t):null}async _queryAttachment(e,t){const{_attachmentLayer:s}=this;if(!e||!(s!=null&&s.queryAttachments))throw new $("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(t),o=new mo({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return s.queryAttachments(o).then(r=>r[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=oa(e);this._attachmentLayer=t?t.type==="scene"&&w(t.associatedLayer)?t.associatedLayer:t:null}};a([c()],me.prototype,"abilities",void 0),a([Ce("abilities")],me.prototype,"castAbilities",null),a([c()],me.prototype,"activeAttachmentInfo",void 0),a([c()],me.prototype,"activeFileInfo",void 0),a([c({readOnly:!0,type:pa})],me.prototype,"attachmentInfos",void 0),a([c()],me.prototype,"fileInfos",void 0),a([c({type:Vt})],me.prototype,"graphic",void 0),a([c()],me.prototype,"mode",void 0),a([c({readOnly:!0})],me.prototype,"state",null),a([c()],me.prototype,"filesEnabled",void 0),a([c({readOnly:!0})],me.prototype,"supportsResizeAttachments",null),me=a([I("esri.widgets.Attachments.AttachmentsViewModel")],me);const qn=me;function Lo(i){const e=i.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function Td(i){const e=tc("esri/themes/base/images/files/");return i?i==="text/plain"?`${e}text-32.svg`:i==="application/pdf"?`${e}pdf-32.svg`:i==="text/csv"?`${e}csv-32.svg`:i==="application/gpx+xml"?`${e}gpx-32.svg`:i==="application/x-dwf"?`${e}cad-32.svg`:i==="application/postscript"||i==="application/json"||i==="text/xml"||i==="model/vrml"?`${e}code-32.svg`:i==="application/x-zip-compressed"||i==="application/x-7z-compressed"||i==="application/x-gzip"||i==="application/x-tar"||i==="application/x-gtar"||i==="application/x-bzip2"||i==="application/gzip"||i==="application/x-compress"||i==="application/x-apple-diskimage"||i==="application/x-rar-compressed"||i==="application/zip"?`${e}zip-32.svg`:i.includes("image/")?`${e}image-32.svg`:i.includes("audio/")?`${e}sound-32.svg`:i.includes("video/")?`${e}video-32.svg`:i.includes("msexcel")||i.includes("ms-excel")||i.includes("spreadsheetml")?`${e}excel-32.svg`:i.includes("msword")||i.includes("ms-word")||i.includes("wordprocessingml")?`${e}word-32.svg`:i.includes("powerpoint")||i.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const So={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},S="esri-attachments",vt="esri-button",v={base:S,loaderContainer:`${S}__loader-container`,loader:`${S}__loader`,fadeIn:`${S}--fade-in`,container:`${S}__container`,containerList:`${S}__container--list`,containerPreview:`${S}__container--preview`,actions:`${S}__actions`,deleteButton:`${S}__delete-button`,addAttachmentButton:`${S}__add-attachment-button`,errorMessage:`${S}__error-message`,items:`${S}__items`,item:`${S}__item`,itemButton:`${S}__item-button`,itemMask:`${S}__item-mask`,itemMaskIcon:`${S}__item-mask--icon`,itemImage:`${S}__image`,itemImageResizable:`${S}__image--resizable`,itemLabel:`${S}__label`,itemFilename:`${S}__filename`,itemChevronIcon:`${S}__item-chevron-icon`,itemLink:`${S}__item-link`,itemLinkOverlay:`${S}__item-link-overlay`,itemLinkOverlayIcon:`${S}__item-link-overlay-icon`,itemEditIcon:`${S}__item-edit-icon`,itemAddIcon:`${S}__item-add-icon`,itemAddButton:`${S}__item-add-button`,formNode:`${S}__form-node`,fileFieldset:`${S}__file-fieldset`,fileLabel:`${S}__file-label`,fileName:`${S}__file-name`,fileInput:`${S}__file-input`,metadata:`${S}__metadata`,metadataFieldset:`${S}__metadata-fieldset`,progressBar:`${S}__progress-bar`,esriWidget:"esri-widget",esriButton:vt,buttonDisabled:`${vt}--disabled`,esriButtonSecondary:`${vt}--secondary`,esriButtonTertiary:`${vt}--tertiary`,esriButtonThird:`${vt}--third`,esriButtonSmall:`${vt}--small`,esriButtonHalf:`${vt}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},Ns=window.CSS;let oe=class extends le{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...So},this._supportsImageOrientation=Ns&&Ns.supports&&Ns.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new qn),this.addHandles([Ee(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Ee(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),y(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),V)])}loadDependencies(){return Promise.all([b(()=>import("./calcite-icon-f9a94ef8.js"),["assets/calcite-icon-f9a94ef8.js","assets/icon-840ccd9c.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/observers-90a6df09.js"])])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...So,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(s=>(this._set("submitting",!1),this._set("error",null),t.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new $("attachments:add-attachment",this.messages.addErrorMessage,s)),s})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(s=>(this._set("submitting",!1),this._set("error",null),t.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new $("attachments:delete-attachment",this.messages.deleteErrorMessage,s)),s})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(s=>(this._set("submitting",!1),this._set("error",null),e.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new $("attachments:update-attachment",this.messages.updateErrorMessage,s)),s})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){var s;const t=this.viewModel.deleteFile(e||((s=this.viewModel.activeFileInfo)==null?void 0:s.file));return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:s}=t;return m("div",{class:this.classes(v.base,v.esriWidget)},e?this.renderProgressBar():null,s==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?m("div",{key:"error-message",class:v.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:s}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(s||e):this.renderAttachmentContainer()}renderLoading(){return m("div",{class:v.loaderContainer,key:"loader"},m("div",{class:v.loader}))}renderProgressBar(){return this.visibleElements.progressBar?m("div",{class:v.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,s=e||!t,n=this.visibleElements.cancelAddButton?m("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(v.esriButton,v.esriButtonTertiary,v.esriButtonSmall,v.esriButtonHalf,e&&v.buttonDisabled)},this.messages.cancel):null,o=this.visibleElements.addSubmitButton?m("button",{type:"submit",disabled:s,class:this.classes(v.esriButton,v.esriButtonSecondary,v.esriButtonSmall,v.esriButtonHalf,{[v.buttonDisabled]:s})},this.messages.add):null,r=t?m("span",{key:"file-name",class:v.fileName},t.name):null,l=m("form",{bind:this,afterCreate:cs,afterRemoved:lo,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},m("fieldset",{class:v.fileFieldset},r,m("label",{class:this.classes(v.fileLabel,v.esriButton,v.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,m("input",{class:v.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),o,n);return m("div",{key:"add-form-container",class:v.formNode},l)}renderDetailsForm(e){var H,X,ie;const{visibleElements:t,viewModel:s,selectedFile:n,submitting:o}=this,{abilities:r}=s,l=o||!n;let d,h,u,p;n?(d=n.type,h=n.name,u=n.size):e&&"file"in e?(d=e.file.type,h=e.file.name,u=e.file.size):e&&"contentType"in e&&(d=e.contentType,h=e.name,u=e.size,p=e.url);const g=r.editing&&((H=r.operations)!=null&&H.delete)&&t.deleteButton?m("button",{key:"delete-button",type:"button",disabled:o,bind:this,onclick:q=>this._submitDeleteAttachment(q,e),class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonTertiary,v.deleteButton,{[v.buttonDisabled]:o})},this.messages.delete):void 0,f=r.editing&&((X=r.operations)!=null&&X.update)&&t.updateButton?m("button",{disabled:l,key:"update-button",type:"submit",class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonThird,{[v.buttonDisabled]:l})},this.messages.update):void 0,M=this.visibleElements.cancelUpdateButton?m("button",{disabled:o,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonTertiary,v.esriButtonThird,{[v.buttonDisabled]:o})},this.messages.cancel):void 0,C=r.editing&&((ie=r.operations)!=null&&ie.update)?m("fieldset",{key:"file",class:v.fileFieldset},m("span",{key:"file-name",class:v.fileName},h),m("label",{class:this.classes(v.fileLabel,v.esriButton,v.esriButtonSecondary)},this.messages.changeFile,m("input",{class:v.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,P=m("fieldset",{key:"size",class:v.metadataFieldset},m("label",null,Wc(this.messagesUnits,u??0))),A=m("fieldset",{key:"content-type",class:v.metadataFieldset},m("label",null,d)),N=w(p)?m("a",{class:v.itemLink,href:p,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),m("div",{class:v.itemLinkOverlay},m("span",{class:v.itemLinkOverlayIcon},m("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),L=m("form",{bind:this,afterCreate:cs,afterRemoved:lo,"data-node-ref":"_updateAttachmentForm",onsubmit:q=>this._submitUpdateAttachment(q,e)},m("div",{class:v.metadata},P,A),C,m("div",{class:v.actions},g,M,f));return m("div",{key:"edit-form-container",class:v.formNode},N,L)}renderImageMask(e,t){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t):null}renderGenericImageMask(e,t){const{supportsResizeAttachments:s}=this.viewModel,n=Td(t),o={[v.itemImageResizable]:s};return m("div",{class:this.classes(v.itemMaskIcon,v.itemMask)},m("img",{title:e,alt:e,src:n,class:this.classes(o,v.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:s}=this.viewModel;if(!e)return null;const{contentType:n,name:o,url:r}=e;if(!s||!Lo(n))return this.renderGenericImageMask(o,n);const l=this._getCSSTransform(e),d=l?{transform:l,"image-orientation":"none"}:{},h=`${r}${r!=null&&r.includes("?")?"&":"?"}w=${t}`,u={[v.itemImageResizable]:s};return m("div",{class:this.classes(v.itemMask)},m("img",{styles:d,alt:o,title:o,src:h,class:this.classes(u,v.itemImage)}))}renderFile(e){const{file:t}=e;return m("li",{class:v.item,key:t},m("button",{key:"details-button",bind:this,class:v.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),m("label",{class:v.itemLabel},m("span",{class:v.itemFilename},t.name||this.messages.noTitle),m("span",{"aria-hidden":"true",class:this.classes(v.itemChevronIcon,Ve(this.container)?v.iconLeft:v.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:s,effectiveDisplayType:n}=this,{abilities:o,supportsResizeAttachments:r}=s,{contentType:l,name:d,url:h}=e,u=this.renderImageMask(e,t==="list"?48:400),p=o.editing?m("span",{"aria-hidden":"true",class:this.classes(v.itemChevronIcon,Ve(this.container)?v.iconLeft:v.iconRight)}):null,g=[u,n==="preview"&&r&&Lo(l)?null:m("label",{class:v.itemLabel},m("span",{class:v.itemFilename},d||this.messages.noTitle),p)],f=o.editing?m("button",{key:"details-button",bind:this,class:v.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},g):m("a",{key:"details-link",class:v.itemButton,href:h??void 0,target:"_blank"},g);return m("li",{class:v.item,key:e},f)}renderAttachmentContainer(){var M;const{effectiveDisplayType:e,viewModel:t,visibleElements:s}=this,{attachmentInfos:n,abilities:o,fileInfos:r}=t,l=!!(n!=null&&n.length),d=!!(r!=null&&r.length),h={[v.containerList]:e!=="preview",[v.containerPreview]:e==="preview"},u=o.editing&&((M=o.operations)!=null&&M.add)&&s.addButton?m("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(v.esriButton,v.esriButtonTertiary,v.addAttachmentButton),type:"button"},m("span",{"aria-hidden":"true",class:this.classes(v.itemAddIcon,v.iconPlus)}),this.messages.add):void 0,p=l?m("ul",{key:"attachments-list",class:v.items},n.toArray().map(C=>this.renderAttachmentInfo({attachmentInfo:C,displayType:e}))):void 0,g=d?m("ul",{key:"file-list",class:v.items},r.toArray().map(C=>this.renderFile(C))):void 0,f=d||l?void 0:m("div",{class:v.empty},this.messages.noAttachments);return m("div",{key:"attachments-container",class:this.classes(v.container,h)},p,g,f,u)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,s=t&&t.files&&t.files.item(0);this._set("selectedFile",s)}_submitDeleteAttachment(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};a([c()],oe.prototype,"abilities",null),a([c()],oe.prototype,"displayType",void 0),a([c({readOnly:!0})],oe.prototype,"effectiveDisplayType",null),a([c()],oe.prototype,"graphic",null),a([c()],oe.prototype,"label",null),a([c(),ae("esri/widgets/Attachments/t9n/Attachments")],oe.prototype,"messages",void 0),a([c(),ae("esri/core/t9n/Units")],oe.prototype,"messagesUnits",void 0),a([c({readOnly:!0})],oe.prototype,"selectedFile",void 0),a([c({readOnly:!0})],oe.prototype,"submitting",void 0),a([c({readOnly:!0})],oe.prototype,"error",void 0),a([c({type:qn})],oe.prototype,"viewModel",void 0),a([c()],oe.prototype,"visibleElements",void 0),a([Ce("visibleElements")],oe.prototype,"castVisibleElements",null),oe=a([I("esri.widgets.Attachments")],oe);const xd=oe;let bi=class extends qn{constructor(e){super(e),this.description=null,this.title=null}};a([c()],bi.prototype,"description",void 0),a([c()],bi.prototype,"title",void 0),bi=a([I("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],bi);const Un=bi,zs="esri-feature-element-info",Bs={base:zs,title:`${zs}__title`,description:`${zs}__description`};let Wt=class extends le{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return m("div",{class:Bs.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?m(Ln,{level:this.headingLevel,class:Bs.title},e):null}renderDescription(){const{description:e}=this;return e?m("div",{key:"description",class:Bs.description},e):null}};a([c()],Wt.prototype,"description",void 0),a([c()],Wt.prototype,"headingLevel",void 0),a([c()],Wt.prototype,"title",void 0),Wt=a([I("esri.widgets.Feature.support.FeatureElementInfo")],Wt);const Cs=Wt,Ed={base:"esri-feature-attachments"};let ke=class extends le{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new xd,this.headingLevel=2,this.viewModel=new Un}initialize(){this._featureElementInfo=new Cs,this.addHandles([y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),V),y(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,V)])}destroy(){var e;this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return m("div",{class:Ed.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:t,headingLevel:s}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:t,headingLevel:s})}};a([c({readOnly:!0})],ke.prototype,"attachmentsWidget",void 0),a([c()],ke.prototype,"description",null),a([c()],ke.prototype,"displayType",null),a([c()],ke.prototype,"graphic",null),a([c()],ke.prototype,"headingLevel",void 0),a([c()],ke.prototype,"title",null),a([c({type:Un})],ke.prototype,"viewModel",void 0),ke=a([I("esri.widgets.Feature.FeatureAttachments")],ke);const $d=ke;let at=class extends Ms(D){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(y(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},V))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:s}=this;e&&t&&(us(s,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const t=this.graphic;if(!t||!e)return;const s=us(e,{graphic:t}).catch(()=>null);this._loadingPromise=s,this.notifyChange("state");const n=await s;s===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};a([c({readOnly:!0})],at.prototype,"created",void 0),a([c()],at.prototype,"creator",void 0),a([c()],at.prototype,"destroyer",void 0),a([c({type:Vt})],at.prototype,"graphic",void 0),a([c({readOnly:!0})],at.prototype,"state",null),at=a([I("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],at);const ps=at,qs="esri-feature-content",Us={base:qs,loaderContainer:`${qs}__loader-container`,loader:`${qs}__loader`};let Zt=class extends le{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=s=>{Array.from(s.querySelectorAll("a")).forEach(n=>{ra(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return m("div",{class:Us.loaderContainer,key:"loader"},m("div",{class:Us.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?m("div",{key:e,bind:e,afterCreate:this._attachToNode}):Gr(e)?m("div",{key:e},!e.destroyed&&e.render()):m("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return m("div",{class:Us.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};a([c()],Zt.prototype,"creator",null),a([c()],Zt.prototype,"graphic",null),a([c({type:ps})],Zt.prototype,"viewModel",void 0),Zt=a([I("esri.widgets.Feature.FeatureContent")],Zt);const Yi=Zt;let je=class extends D{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,s=[];return t==null||t.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const o=n.clone();o.label=aa(o,e),s.push(o)}),s}};a([c()],je.prototype,"attributes",void 0),a([c({type:[Ql]})],je.prototype,"expressionInfos",void 0),a([c()],je.prototype,"description",void 0),a([c({type:[Hr]})],je.prototype,"fieldInfos",void 0),a([c({readOnly:!0})],je.prototype,"formattedFieldInfos",null),a([c()],je.prototype,"title",void 0),je=a([I("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],je);const Ts=je,kd=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Pd(i){let e=null;return kd.some(t=>(t.pattern.test(i)&&(e=t),!!e)),e}function Ad(i,e){if(typeof e!="string"||!e)return e;const t=Pd(e);if(!t)return e;const s=e.match(t.pattern),n=s&&s[2],o=ri(ri(t.label,{messages:i,hierPart:n}),{appName:t.appName}),r=t.target?` target="${t.target}"`:"",l=t.target==="_blank"?' rel="noreferrer"':"";return e.replace(t.pattern,`<a${r} href="$1"${l}>${o}</a>`)}const Hi="esri-feature-fields",hi={base:Hi,fieldHeader:`${Hi}__field-header`,fieldData:`${Hi}__field-data`,fieldDataDate:`${Hi}__field-data--date`,esriTable:"esri-widget__table"};let xe=class extends le{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new Ts,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Cs,this.addHandles(y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),V))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:s}=this.viewModel,n=e.fieldName,o=e.label||n,r=s?s[n]==null?"":s[n]:"",l=!(!e.format||!e.format.dateFormat),d=typeof r=="number"&&!l?this._forceLTR(r):Ad(this.messagesURIUtils,r),h={[hi.fieldDataDate]:l};return m("tr",{key:`fields-element-info-row-${n}-${t}`},m("th",{key:`fields-element-info-row-header-${n}-${t}`,class:hi.fieldHeader,innerHTML:o}),m("td",{key:`fields-element-info-row-data-${n}-${t}`,class:this.classes(hi.fieldData,h),innerHTML:d}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?m("table",{class:hi.esriTable,summary:this.messages.fieldsSummary},m("tbody",null,e.map((t,s)=>this.renderFieldInfo(t,s)))):null}render(){var e;return m("div",{class:hi.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var s;const{description:e,title:t}=this;(s=this._featureElementInfo)==null||s.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};a([c()],xe.prototype,"attributes",null),a([c()],xe.prototype,"description",null),a([c()],xe.prototype,"expressionInfos",null),a([c()],xe.prototype,"fieldInfos",null),a([c()],xe.prototype,"title",null),a([c({type:Ts,nonNullable:!0})],xe.prototype,"viewModel",void 0),a([c(),ae("esri/widgets/Feature/t9n/Feature")],xe.prototype,"messages",void 0),a([c(),ae("esri/widgets/support/t9n/uriUtils")],xe.prototype,"messagesURIUtils",void 0),xe=a([I("esri.widgets.Feature.FeatureFields")],xe);const ma=xe,Fd="esri.widgets.Feature.support.relatedFeatureUtils",Do=O.getLogger(Fd),Vo=new Map;function Xi(i){if(!Ye(i))return null;const[e,t]=i.split("/").slice(1);return{layerId:e,fieldName:t}}function Rd(i,e){if(!e.relationships)return null;let t=null;const{relationships:s}=e;return s.some(n=>n.id===parseInt(i,10)&&(t=n,!0)),t}function Ld({originRelationship:i,relationships:e,layerId:t}){let s=null;return e&&e.some(n=>(`${n.relatedTableId}`===t&&n.id===(i==null?void 0:i.id)&&(s=n),!!s)),s}function Sd(i,e){const t=e.toLowerCase();for(const s in i)if(s.toLowerCase()===t)return i[s];return null}function Dd(i,e){const t=Rd(i,e);if(t)return{url:`${e.url}/${t.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:t,relatedFields:[],outStatistics:[]}}function Vd(i,e){if(!e||!i)return;const{features:t,statsFeatures:s}=i,n=t&&t.value;e.relatedFeatures=n?n.features:[];const o=s&&s.value;e.relatedStatsFeatures=o?o.features:[]}function Od(i,e,t,s){var o;const n=new hn;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[i.attributes[t.objectIdField]],((o=t.queryRelatedFeatures)==null?void 0:o.call(t,n,s))??Promise.resolve({})}function Nd(i,e,t){let s=0;const n=[];for(;s<e.length;)n.push(`${i} IN (${e.slice(s,t+s)})`),s+=t;return n.join(" OR ")}async function zd(i,e,t,s){const n=t.layerId.toString(),{layerInfo:o,relation:r,relatedFields:l,outStatistics:d,url:h,sourceSpatialReference:u}=e;if(!o||!r)return null;const p=Ld({originRelationship:r,relationships:o.relationships,layerId:n});if(p!=null&&p.relationshipTableId&&p.keyFieldInRelationshipTable){const f=(await Od(i,p,t,s))[i.attributes[t.objectIdField]];if(!f)return null;const M=f.features.map(C=>C.attributes[o.objectIdField]);if(d!=null&&d.length&&o.supportsStatistics){const C=new Rs;C.where=Nd(o.objectIdField,M,1e3),C.outFields=l,C.outStatistics=d,C.sourceSpatialReference=u;const P={features:Promise.resolve(f),statsFeatures:Fs(h,C)};return Dt(P)}}const g=p==null?void 0:p.keyField;if(g){const f=Wl(jd(o.fields,g)),M=Sd(i.attributes,r.keyField),C=f?`${g}=${M}`:`${g}='${M}'`,P=Fs(h,new Rs({where:C,outFields:e.relatedFields,sourceSpatialReference:u}),s),A=e.outStatistics&&e.outStatistics.length>0&&o.supportsStatistics?Fs(h,new Rs({where:C,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:u}),s):null,N={features:P};return A&&(N.statsFeatures=A),Dt(N)}return null}function Bd(i,e){return rc(i,{query:{f:"json"},signal:e&&e.signal})}function qd({relatedInfos:i,layer:e},t){const s={};return i.forEach((n,o)=>{const{relation:r}=n;if(!r){const p=new $("relation-required","A relation is required on a layer to retrieve related records.");throw Do.error(p),p}const{relatedTableId:l}=r;if(typeof l!="number"){const p=new $("A related table ID is required on a layer to retrieve related records.");throw Do.error(p),p}const d=`${e.url}/${l}`,h=Vo.get(d),u=h||Bd(d);h||Vo.set(d,u),s[o]=u}),kl(Dt(s),t)}function Ud({graphic:i,relatedInfos:e,layer:t},s){const n={};return e.forEach((o,r)=>{o.layerInfo&&(n[r]=zd(i,o,t,s))}),Dt(n)}function Hd({relatedInfo:i,fieldName:e,fieldInfo:t}){var s,n;if((s=i.relatedFields)==null||s.push(e),t.statisticType){const o=new cc({statisticType:t.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=i.outStatistics)==null||n.push(o)}}function jd(i,e){if(i!=null){e=e.toLowerCase();for(const t of i)if(t&&t.name.toLowerCase()===e)return t}return null}const Oo={chartAnimation:!0};let Q=class extends D{constructor(e){super(e),this.abilities={...Oo},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...Oo,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,s=(e+t)%t;this.activeMediaInfoIndex=s}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,s=t+e;this._setContentElementMedia(s)}_formatMediaInfos(){const{mediaInfos:e,layer:t}=this,s=this.attributes??{},n=this.formattedAttributes??{},o=this.expressionAttributes??{},r=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(l=>{const d=l==null?void 0:l.clone();if(!d)return null;if(d.title=Ft({attributes:s,fieldInfoMap:r,globalAttributes:n,expressionAttributes:o,layer:t,text:d.title}),d.caption=Ft({attributes:s,fieldInfoMap:r,globalAttributes:n,expressionAttributes:o,layer:t,text:d.caption}),d.altText=Ft({attributes:s,fieldInfoMap:r,globalAttributes:n,expressionAttributes:o,layer:t,text:d.altText}),d.type==="image"){const{value:h}=d;return this._setImageValue({value:h,formattedAttributes:n,layer:t}),d.value.sourceURL?d:void 0}if(d.type==="pie-chart"||d.type==="line-chart"||d.type==="column-chart"||d.type==="bar-chart"){const{value:h}=d;return this._setChartValue({value:h,chartType:d.type,attributes:s,formattedAttributes:n,layer:t,expressionAttributes:o}),d}return null}).filter(w))??[]}_setImageValue(e){const t=this.fieldInfoMap??new Map,{value:s,formattedAttributes:n,layer:o}=e,{linkURL:r,sourceURL:l}=s;if(l){const d=_n(l,o);s.sourceURL=fn({formattedAttributes:n,template:d,fieldInfoMap:t})}if(r){const d=_n(r,o);s.linkURL=fn({formattedAttributes:n,template:d,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:s,formattedAttributes:n,chartType:o,layer:r,expressionAttributes:l}=e,{popupTemplate:d,relatedInfos:h}=this,{fields:u,normalizeField:p}=t,g=r;if(t.fields=od(u,g),p&&(t.normalizeField=Si(p,g)),!u.some(M=>!!(n[M]!=null||Ye(M)&&(h!=null&&h.size))))return;const f=(d==null?void 0:d.fieldInfos)??[];u.forEach(M=>{if(Ye(M))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:f,fieldName:M,formattedAttributes:n,chartType:o,value:t})]);const C=this._getChartOption({value:t,attributes:s,chartType:o,formattedAttributes:n,expressionAttributes:l,fieldName:M,fieldInfos:f});t.series.push(C)})}_getRelatedChartInfos(e){var f;const{fieldInfos:t,fieldName:s,formattedAttributes:n,chartType:o,value:r}=e,l=[],d=Xi(s),h=d&&((f=this.relatedInfos)==null?void 0:f.get(d.layerId.toString()));if(!h)return l;const{relatedFeatures:u,relation:p}=h;if(!p||!u)return l;const{cardinality:g}=p;return u.forEach(M=>{const{attributes:C}=M;C&&Object.keys(C).forEach(P=>{P===d.fieldName&&l.push(this._getChartOption({value:r,attributes:C,formattedAttributes:n,fieldName:s,chartType:o,relatedFieldName:P,hasMultipleRelatedFeatures:(u==null?void 0:u.length)>1,fieldInfos:t}))})}),g==="one-to-many"||g==="many-to-many"?l:[l[0]]}_getTooltip({label:e,value:t,chartType:s}){return s==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var ie;const{value:t,attributes:s,formattedAttributes:n,expressionAttributes:o,fieldName:r,relatedFieldName:l,fieldInfos:d,chartType:h,hasMultipleRelatedFeatures:u}=e,p=this.layer,g=this.fieldInfoMap??new Map,{normalizeField:f,tooltipField:M}=t,C=f?Ye(f)?s[Xi(f).fieldName]:s[f]:null,P=Nn(r)&&o&&o[r]!==void 0?o[r]:l&&s[l]!==void 0?s[l]:s[r]!==void 0?s[r]:n[r],A=new Yl({fieldName:r,value:P===void 0?null:P&&C?P/C:P});if(Ye(r)){const q=g.get(r.toLowerCase()),Ot=M&&g.get(M.toLowerCase()),zi=(q==null?void 0:q.fieldName)??r,di=u&&M?Xi(M).fieldName:(Ot==null?void 0:Ot.fieldName)??M,Nt=u&&di?s[di]:n[di]??(q==null?void 0:q.label)??(q==null?void 0:q.fieldName)??l,Bi=u&&l?s[l]:n[zi];return A.tooltip=this._getTooltip({label:Nt,value:Bi,chartType:h}),A}const N=ca(d,r),L=Si(r,p),H=M&&n[M]!==void 0?n[M]:aa(N||new Hr({fieldName:L}),(ie=this.popupTemplate)==null?void 0:ie.expressionInfos),X=n[L];return A.tooltip=this._getTooltip({label:H,value:X,chartType:h}),A}};a([c()],Q.prototype,"abilities",void 0),a([Ce("abilities")],Q.prototype,"castAbilities",null),a([c()],Q.prototype,"activeMediaInfoIndex",void 0),a([c({readOnly:!0})],Q.prototype,"activeMediaInfo",null),a([c()],Q.prototype,"attributes",void 0),a([c()],Q.prototype,"description",void 0),a([c()],Q.prototype,"fieldInfoMap",void 0),a([c()],Q.prototype,"formattedAttributes",void 0),a([c()],Q.prototype,"expressionAttributes",void 0),a([c({readOnly:!0})],Q.prototype,"formattedMediaInfos",null),a([c()],Q.prototype,"isAggregate",void 0),a([c()],Q.prototype,"layer",void 0),a([c({readOnly:!0})],Q.prototype,"formattedMediaInfoCount",null),a([c()],Q.prototype,"mediaInfos",void 0),a([c()],Q.prototype,"popupTemplate",void 0),a([c()],Q.prototype,"relatedInfos",void 0),a([c()],Q.prototype,"title",void 0),Q=a([I("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Q);const Rt=Q;var No=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Gd=[].concat(No.slice(30,39),No.slice(28,30).reverse()),Wd=[{name:"default",colors:Gd},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const zo="en-us",Hn=new Map([["ar",()=>b(()=>import("./ar-bb1fe5ab.js"),["assets/ar-bb1fe5ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.a)],["bg-bg",()=>b(()=>import("./bg_BG-184a2bfa.js"),["assets/bg_BG-184a2bfa.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.b)],["bs-ba",()=>b(()=>import("./bs_BA-f32cc344.js"),["assets/bs_BA-f32cc344.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.b)],["ca-es",()=>b(()=>import("./ca_ES-d17ee95b.js"),["assets/ca_ES-d17ee95b.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.c)],["cs-cz",()=>b(()=>import("./cs_CZ-bcd1e782.js"),["assets/cs_CZ-bcd1e782.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.c)],["da-dk",()=>b(()=>import("./da_DK-27b1b06e.js"),["assets/da_DK-27b1b06e.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.d)],["de-de",()=>b(()=>import("./de_DE-c0a1d8dd.js"),["assets/de_DE-c0a1d8dd.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.d)],["de-ch",()=>b(()=>import("./de_CH-be7b4255.js"),["assets/de_CH-be7b4255.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.d)],["el-gr",()=>b(()=>import("./el_GR-05fb9ec0.js"),["assets/el_GR-05fb9ec0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["en-us",()=>b(()=>import("./en_US-170979d8.js"),["assets/en_US-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["en-ca",()=>b(()=>import("./en_CA-170979d8.js"),["assets/en_CA-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["es-es",()=>b(()=>import("./es_ES-d0b66640.js"),["assets/es_ES-d0b66640.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["et-ee",()=>b(()=>import("./et_EE-56dd74d3.js"),["assets/et_EE-56dd74d3.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.e)],["fi-fi",()=>b(()=>import("./fi_FI-91d58cb9.js"),["assets/fi_FI-91d58cb9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.f)],["fr-fr",()=>b(()=>import("./fr_FR-a11503e0.js"),["assets/fr_FR-a11503e0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.f)],["he-il",()=>b(()=>import("./he_IL-90db98c4.js"),["assets/he_IL-90db98c4.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.h)],["hr-hr",()=>b(()=>import("./hr_HR-fac8bb29.js"),["assets/hr_HR-fac8bb29.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.h)],["hu-hu",()=>b(()=>import("./hu_HU-e8803856.js"),["assets/hu_HU-e8803856.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.h)],["id-id",()=>b(()=>import("./id_ID-86e57d06.js"),["assets/id_ID-86e57d06.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.i)],["it-it",()=>b(()=>import("./it_IT-2d4485ba.js"),["assets/it_IT-2d4485ba.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.i)],["ja-jp",()=>b(()=>import("./ja_JP-77c6c16d.js"),["assets/ja_JP-77c6c16d.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.j)],["ko-kr",()=>b(()=>import("./ko_KR-e155b9ab.js"),["assets/ko_KR-e155b9ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.k)],["lt-lt",()=>b(()=>import("./lt_LT-fde47ae9.js"),["assets/lt_LT-fde47ae9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.l)],["lv-lv",()=>b(()=>import("./lv_LV-359be050.js"),["assets/lv_LV-359be050.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.l)],["nb-no",()=>b(()=>import("./nb_NO-30d57c1a.js"),["assets/nb_NO-30d57c1a.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.n)],["nl-nl",()=>b(()=>import("./nl_NL-cb904b48.js"),["assets/nl_NL-cb904b48.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.n)],["pl-pl",()=>b(()=>import("./pl_PL-58c54c9f.js"),["assets/pl_PL-58c54c9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.p)],["pt-br",()=>b(()=>import("./pt_BR-d2e10248.js"),["assets/pt_BR-d2e10248.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.p)],["pt-pt",()=>b(()=>import("./pt_PT-65a41842.js"),["assets/pt_PT-65a41842.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.p)],["ro-ro",()=>b(()=>import("./ro_RO-15e90e9f.js"),["assets/ro_RO-15e90e9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.r)],["ru-ru",()=>b(()=>import("./ru_RU-a74d21e5.js"),["assets/ru_RU-a74d21e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.r)],["sk-sk",()=>b(()=>import("./sk_SK-a928dbd1.js"),["assets/sk_SK-a928dbd1.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["sl-sl",()=>b(()=>import("./sl_SL-1a3c3078.js"),["assets/sl_SL-1a3c3078.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["sr-rs",()=>b(()=>import("./sr_RS-0b18b911.js"),["assets/sr_RS-0b18b911.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["sv-se",()=>b(()=>import("./sv_SE-ce7e3f84.js"),["assets/sv_SE-ce7e3f84.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.s)],["th-th",()=>b(()=>import("./th_TH-1448f333.js"),["assets/th_TH-1448f333.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.t)],["tr-tr",()=>b(()=>import("./tr_TR-dd92f630.js"),["assets/tr_TR-dd92f630.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.t)],["uk-ua",()=>b(()=>import("./uk_UA-fe4434ed.js"),["assets/uk_UA-fe4434ed.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.u)],["vi-vn",()=>b(()=>import("./vi_VN-41938633.js"),["assets/vi_VN-41938633.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.v)],["zh-cn",()=>b(()=>import("./zh_Hans-524a1291.js"),["assets/zh_Hans-524a1291.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.z)],["zh-hk",()=>b(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.z)],["zh-tw",()=>b(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(i=>i.z)]]);function Zd(i){const e=i.split("-")[0].toLowerCase();let t=null;for(const s of Hn.keys())if(s.startsWith(e)){t=s;break}return t}function Kd(i){return i?Hn.has(i.toLowerCase())?i.toLowerCase():Zd(i)||zo:zo}let qt=null,ui=null;async function Qd(i=Wr()){if(i=Kd(i),qt&&i===ui)return qt;qt=b(()=>import("./index-a70dd312.js"),["assets/index-a70dd312.js","assets/_commonjsHelpers-2f3e7994.js"]).then(e=>e.i),ui=i;try{const[e,t]=await Promise.all([qt,Hn.get(ui)()]);ui===i&&(e.am4core.options.defaultLocale=t.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return qt=null,ui=null,null}return qt}function Yd(i,e="default"){const t=Wd.find(s=>s.name===e);return t?t.colors.map(s=>i.color(s)):null}const ce="esri-feature-media",G={base:ce,mediaContainer:`${ce}__container`,mediaItemContainer:`${ce}__item-container`,mediaItem:`${ce}__item`,mediaItemTitle:`${ce}__item-title`,mediaItemCaption:`${ce}__item-caption`,mediaPrevious:`${ce}__previous`,mediaPreviousIconLTR:`${ce}__previous-icon`,mediaPreviousIconRTL:`${ce}__previous-icon--rtl`,mediaNext:`${ce}__next`,mediaNextIconLTR:`${ce}__next-icon`,mediaNextIconRTL:`${ce}__next-icon--rtl`,mediaChart:`${ce}__chart`,mediaButton:`${ce}__button`,mediaIcon:`${ce}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},Hs=.05,js=.95,Gs=15,Ne="color",tt="tooltip",pi="value",Bo="default-line-value";let ge=class extends le{constructor(i,e){super(i,e),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new Rt,this.messages=null,this._getChartDependencies=async t=>{const s=await Qd(),{destroyed:n,viewModel:o}=this;if(n||!o||!t)return;const{activeMediaInfo:r}=o,l=await this._getRendererColors(s);this._renderChart({chartDiv:t,mediaInfo:r,chartsModule:s,colorMap:l})}}initialize(){this._featureElementInfo=new Cs,this.addHandles([y(()=>{var i,e;return[(i=this.viewModel)==null?void 0:i.activeMediaInfo,(e=this.viewModel)==null?void 0:e.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),V),y(()=>{var i,e;return[(i=this.viewModel)==null?void 0:i.description,(e=this.viewModel)==null?void 0:e.title]},()=>this._setupFeatureElementInfo(),V)])}destroy(){var i;this._clearMediaRefreshTimer(),(i=this._featureElementInfo)==null||i.destroy()}get attributes(){return this.viewModel.attributes}set attributes(i){this.viewModel.attributes=i}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(i){this.viewModel.activeMediaInfoIndex=i}get description(){return this.viewModel.description}set description(i){this.viewModel.description=i}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(i){this.viewModel.fieldInfoMap=i}get layer(){return this.viewModel.layer}set layer(i){this.viewModel.layer=i}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(i){this.viewModel.mediaInfos=i}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(i){this.viewModel.popupTemplate=i}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(i){this.viewModel.relatedInfos=i}get title(){return this.viewModel.title}set title(i){this.viewModel.title=i}render(){var i;return m("div",{bind:this,class:G.base,onkeyup:this._handleMediaKeyup},(i=this._featureElementInfo)==null?void 0:i.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:i}=this.viewModel;return i?m("div",{key:"media-element-container",class:G.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(i){const{_refreshIntervalInfo:e}=this,{activeMediaInfoIndex:t,formattedMediaInfoCount:s}=this.viewModel,{value:n,refreshInterval:o,altText:r,title:l,type:d}=i,{sourceURL:h,linkURL:u}=n,p=ra(u??void 0)?"_blank":"_self",g=p==="_blank"?"noreferrer":"",f=o?e:null,M=f?f.timestamp:0,C=f?f.sourceURL:h,P=m("img",{alt:r||l,key:`media-${d}-${t}-${s}-${M}`,src:C??void 0});return(u?m("a",{title:l,href:u,rel:g,target:p},P):null)||P}renderChartMediaInfo(i){const{activeMediaInfoIndex:e,formattedMediaInfoCount:t}=this.viewModel;return m("div",{key:`media-${i.type}-${e}-${t}`,bind:this,class:G.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:i}=this.viewModel;return i?i.type==="image"?this.renderImageMediaInfo(i):i.type.includes("chart")?this.renderChartMediaInfo(i):null:null}renderMediaInfo(){const{activeMediaInfo:i}=this.viewModel;if(!i)return null;const e=i.title?m("div",{key:"media-title",class:G.mediaItemTitle,innerHTML:i.title}):null,t=i.caption?m("div",{key:"media-caption",class:G.mediaItemCaption,innerHTML:i.caption}):null;return m("div",{key:"media-container",class:G.mediaItemContainer},m("div",{key:"media-item-container",class:G.mediaItem},this.renderMediaInfoType()),e,t)}renderMediaPageButton(i){if(this.viewModel.formattedMediaInfoCount<2)return null;const e=i==="previous",t=e?this.messages.previous:this.messages.next,s=e?this.classes(G.mediaButton,G.mediaPrevious):this.classes(G.mediaButton,G.mediaNext),n=e?this.classes(G.mediaIcon,G.mediaPreviousIconLTR,G.iconLeftTriangleArrow):this.classes(G.mediaIcon,G.mediaNextIconLTR,G.iconRightTriangleArrow),o=e?this.classes(G.mediaIcon,G.mediaPreviousIconRTL,G.iconRightTriangleArrow):this.classes(G.mediaIcon,G.mediaNextIconRTL,G.iconLeftTriangleArrow),r=e?"media-previous":"media-next",l=e?this._previous:this._next;return m("button",{type:"button",key:r,title:t,"aria-label":t,tabIndex:0,class:s,bind:this,onclick:l},m("span",{"aria-hidden":"true",class:n}),m("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){var t;const{description:i,title:e}=this;(t=this._featureElementInfo)==null||t.set({description:i,title:e})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:i,layer:e}=this.viewModel;return i&&(e!=null&&e.featureReduction)&&"renderer"in e.featureReduction?e.featureReduction.renderer:e==null?void 0:e.renderer}async _getRendererColors(i){const{am4core:e}=i,t=new Map,s=this._getRenderer(),n="default";if(!s)return t;const o=await sc(s);return o.delete(n),Array.from(o.values()).every(r=>(r==null?void 0:r.length)===1)&&(t.set(Bo,e.color({r:50,g:50,b:50,a:1})),Array.from(o.keys()).forEach(r=>{var l;r&&t.set(r,e.color((l=o.get(r))==null?void 0:l[0].toCss(!0)))})),t}_handleMediaKeyup(i){const e=kt(i);e==="ArrowLeft"&&(i.stopPropagation(),this.viewModel.previous()),e==="ArrowRight"&&(i.stopPropagation(),this.viewModel.next())}_renderChart(i){const{abilities:e}=this.viewModel,{chartsModule:t,chartDiv:s,mediaInfo:n,colorMap:o}=i,{value:r,type:l}=n,{am4core:d}=t,h=Yd(d);function u(f){f instanceof d.ColorSet&&h&&(f.list=h)}dn()&&d.useTheme(t.am4themes_dark);const p=window.matchMedia("(prefers-reduced-motion: reduce)");e.chartAnimation&&!p.matches?d.useTheme(t.am4themes_animated):d.unuseTheme(t.am4themes_animated),d.useTheme(u);const g=l==="pie-chart"?this._createPieChart(i):this._createXYChart(i);s.setAttribute("aria-label",n.altText||n.title),g.data=r.series.map(f=>({[tt]:f.tooltip,[pi]:f.value,[Ne]:o.get(f.fieldName)})).filter(f=>l!=="pie-chart"||f.value!=null&&f.value>0)}_customizeChartTooltip(i,e){i&&(i.label.wrap=!0,i.label.maxWidth=200,i.autoTextColor=!1,i.getFillFromObject=!1,i.label.fill=e.color("#ffffff"),i.background.fill=e.color({r:0,g:0,b:0,a:.7}))}_createPieChart(i){const{chartDiv:e,chartsModule:t}=i,{am4core:s,am4charts:n}=t,o=s.create(e,n.PieChart);o.rtl=Ve(this.container);const r=o.series.push(new n.PieSeries);return r.labels.template.disabled=!0,r.ticks.template.disabled=!0,r.dataFields.value=pi,r.dataFields.category=tt,this._customizeChartTooltip(r.tooltip,s),r.slices.template.propertyFields.fill=Ne,r.slices.template.propertyFields.stroke=Ne,o}_getMinSeriesValue(i){let e=0;return i.forEach(t=>e=Math.min(t.value,e)),e}_createColumnChart(i,e){const{chartsModule:t,mediaInfo:s}=e,{value:n}=s,{am4core:o,am4charts:r}=t,l=i.xAxes.push(new r.CategoryAxis);l.dataFields.category=tt,l.renderer.labels.template.disabled=!0;const d=l.tooltip;this._customizeChartTooltip(d,o),d.events.on("sizechanged",()=>{d.dy=-d.contentHeight});const h=i.yAxes.push(new r.ValueAxis),u=h.renderer.labels.template;h.renderer.minLabelPosition=Hs,h.renderer.maxLabelPosition=js,h.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(h.tooltip,o),u.wrap=!0;const p=i.series.push(new r.ColumnSeries);p.dataFields.valueY=pi,p.dataFields.categoryX=tt,p.columns.template.propertyFields.fill=Ne,p.columns.template.propertyFields.stroke=Ne,i.cursor=new r.XYCursor,n.series.length>Gs&&(i.scrollbarX=new o.Scrollbar)}_createBarChart(i,e){const{chartsModule:t,mediaInfo:s}=e,{value:n}=s,{am4core:o,am4charts:r}=t,l=i.yAxes.push(new r.CategoryAxis);l.dataFields.category=tt,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0;const d=l.tooltip;this._customizeChartTooltip(d,o),d.events.on("sizechanged",()=>{d.dx=d.contentWidth});const h=i.xAxes.push(new r.ValueAxis),u=h.renderer.labels.template;h.renderer.minLabelPosition=Hs,h.renderer.maxLabelPosition=js,h.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(h.tooltip,o),u.wrap=!0;const p=i.series.push(new r.ColumnSeries);p.dataFields.valueX=pi,p.dataFields.categoryY=tt,p.columns.template.propertyFields.fill=Ne,p.columns.template.propertyFields.stroke=Ne,i.cursor=new r.XYCursor,n.series.length>Gs&&(i.scrollbarY=new o.Scrollbar)}_createLineChart(i,e){const{chartsModule:t,mediaInfo:s,colorMap:n}=e,{value:o}=s,{am4core:r,am4charts:l}=t,d=i.xAxes.push(new l.CategoryAxis);d.dataFields.category=tt,d.renderer.labels.template.disabled=!0;const h=d.tooltip;this._customizeChartTooltip(h,r),h.events.on("sizechanged",()=>{h.dy=-h.contentHeight});const u=i.yAxes.push(new l.ValueAxis),p=u.renderer.labels.template;u.renderer.minLabelPosition=Hs,u.renderer.maxLabelPosition=js,u.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(u.tooltip,r),p.wrap=!0;const g=i.series.push(new l.LineSeries);g.dataFields.categoryX=tt,g.dataFields.valueY=pi,g.strokeWidth=1;const f=n.get(Bo);f&&(g.stroke=f);const M=g.bullets.push(new l.CircleBullet);M.propertyFields.fill=Ne,M.propertyFields.stroke=Ne,i.cursor=new l.XYCursor,o.series.length>Gs&&(i.scrollbarX=new r.Scrollbar)}_createXYChart(i){const{chartDiv:e,chartsModule:t,mediaInfo:s}=i,{type:n}=s,{am4core:o,am4charts:r}=t,l=o.create(e,r.XYChart);return l.rtl=Ve(this.container),n==="column-chart"&&this._createColumnChart(l,i),n==="bar-chart"&&this._createBarChart(l,i),n==="line-chart"&&this._createLineChart(l,i),l}_clearMediaRefreshTimer(){const{_refreshTimer:i}=this;i&&(clearTimeout(i),this._refreshTimer=null)}_updateMediaInfoTimestamp(i){const e=Date.now();this._refreshIntervalInfo={timestamp:e,sourceURL:i&&this._getImageSource(i,e)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:i}=this.viewModel;i&&i.type==="image"&&i.refreshInterval&&this._setRefreshTimeout(i)}_setRefreshTimeout(i){const{refreshInterval:e,value:t}=i;if(!e)return;const s=6e4*e;this._updateMediaInfoTimestamp(t.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(t.sourceURL)},s);this._refreshTimer=n}_getImageSource(i,e){const t=i.includes("?")?"&":"?",[s,n=""]=i.split("#");return`${s}${t}timestamp=${e}${n?"#":""}${n}`}};a([c()],ge.prototype,"attributes",null),a([c()],ge.prototype,"activeMediaInfoIndex",null),a([c()],ge.prototype,"description",null),a([c()],ge.prototype,"fieldInfoMap",null),a([c()],ge.prototype,"layer",null),a([c()],ge.prototype,"mediaInfos",null),a([c()],ge.prototype,"popupTemplate",null),a([c()],ge.prototype,"relatedInfos",null),a([c()],ge.prototype,"title",null),a([c({type:Rt})],ge.prototype,"viewModel",void 0),a([c(),ae("esri/widgets/Feature/t9n/Feature")],ge.prototype,"messages",void 0),ge=a([I("esri.widgets.Feature.FeatureMedia")],ge);const ga=ge,Xd=["$datastore","$map","$layer","$aggregatedfeatures"],Jd="esri.widgets.Feature.support.arcadeFeatureUtils",eh=O.getLogger(Jd);function th(i){return typeof i=="string"?Ni(Bn(i)):Array.isArray(i)?ih(i):(i==null?void 0:i.declaredClass)==="esri.arcade.Dictionary"?sh(i):i}function ih(i){return`<ul class="esri-widget__list">${i.map(e=>`<li>${typeof e=="string"?Ni(Bn(e)):e}</li>`).join("")}</ul>`}function sh(i){return`<table class="esri-widget__table">${i.keys().map(e=>{const t=i.field(e);return`<tr><th>${e}</th><td>${typeof t=="string"?Ni(Bn(t)):t}</td></tr>`}).join("")}</table>`}function nh({aggregatedFeatures:i,arcadeUtils:e,featureSetVars:t,context:s,viewInfo:n,map:o,graphic:r,interceptor:l}){t.forEach(d=>{const h=d.toLowerCase(),u=n.sr,p={map:o,spatialReference:u,interceptor:l};if(h==="$map"&&(s.vars[h]=e.convertMapToFeatureSetCollection(p)),h==="$layer"&&(s.vars[h]=e.convertFeatureLayerToFeatureSet({layer:r.sourceLayer,spatialReference:u,interceptor:l})),h==="$datastore"&&(s.vars[h]=e.convertServiceUrlToWorkspace({url:r.sourceLayer.url,spatialReference:u,interceptor:l})),h==="$aggregatedfeatures"){const g=r.layer,{fields:f,objectIdField:M,geometryType:C,spatialReference:P,displayField:A}=g,N=new hc({fields:f,objectIdField:M,geometryType:C,spatialReference:P,displayField:A,...g.type==="feature"?{templates:g.templates,typeIdField:g.typeIdField,types:g.types}:null,source:i});s.vars[h]=e.convertFeatureLayerToFeatureSet({layer:N,spatialReference:P,interceptor:l})}})}function fa(){return b(()=>import("./arcadeUtils-756a0eab.js").then(i=>i.ax),["assets/arcadeUtils-756a0eab.js","assets/geometry-0d19f94b.js","assets/ensureType-125d327f.js","assets/string-75082bc6.js","assets/typedArrayUtil-74bbfd45.js","assets/Error-781981d1.js","assets/Extent-8fae2379.js","assets/Accessor-815cb0cf.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/preload-helper-fb43855a.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/number-def30271.js","assets/locale-30120714.js","assets/Field-7770b57d.js","assets/enumeration-94b1319d.js","assets/fieldType-e429d020.js","assets/jsonUtils-15ca15d7.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/mathUtils-15f63a45.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/request-6e1d5843.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/sizeVariableUtils-d4870b0d.js"])}function oh(i){return"createQuery"in i&&"queryFeatures"in i}async function rh({graphic:i,view:e}){const{isAggregate:t,layer:s}=i;if(!t||!s||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(s);if(!oh(n))return[];const o=n.createQuery(),r=i.getObjectId();o.aggregateIds=r!=null?[r]:[];const{features:l}=await n.queryFeatures(o);return l}async function _a({expressionInfo:i,arcadeUtils:e,interceptor:t,spatialReference:s,map:n,graphic:o,view:r}){if(!i||!i.expression)return null;const l=e.createSyntaxTree(i.expression),d=Xd.filter(f=>e.hasVariable(l,f)),[h]=await Promise.all([rh({graphic:o,view:r}),e.loadScriptDependencies(l,!0,d)]),u=e.getViewInfo({spatialReference:s}),p=e.createExecContext(o,u);p.interceptor=t,p.useAsync=!0,nh({aggregatedFeatures:h,arcadeUtils:e,featureSetVars:d,context:p,viewInfo:u,map:n,graphic:o,interceptor:t});const g=e.createFunction(l,p);return e.executeAsyncFunction(g,p).catch(f=>eh.error("arcade-execution-error",{error:f,graphic:o,expressionInfo:i}))}async function ah({expressionInfos:i,spatialReference:e,graphic:t,interceptor:s,map:n,view:o}){if(!i||!i.length)return{};const r=await fa(),l={};for(const u of i)l[`expression/${u.name}`]=_a({expressionInfo:u,arcadeUtils:r,interceptor:s,spatialReference:e,map:n,graphic:t,view:o});const d=await Dt(l),h={};for(const u in d)h[u]=th(d[u].value);return h}const lh=1;let _e=class extends Ms(D){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var n,o;const t=(n=this.contentElement)==null?void 0:n.type;(o=this.contentElementViewModel)==null||o.destroy();const s=t==="fields"?new Ts:t==="media"?new Rt:t==="text"?new ps:null;this._set("contentElementViewModel",s)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=oi(this._compile,lh,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:s,interceptor:n,spatialReference:o,map:r,view:l,_abortController:d}=this;if(!(t&&s&&o&&r))return void this._set("contentElement",null);const h=await fa();if(d!==this._abortController)return;const u=await _a({arcadeUtils:h,expressionInfo:t,graphic:s,interceptor:n,map:r,spatialReference:o,view:l});if(!u||u.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const p=await u.castAsJsonAsync(d==null?void 0:d.signal),g=p==null?void 0:p.type,f=g==="media"?Xl.fromJSON(p):g==="text"?jr.fromJSON(p):g==="fields"?Jl.fromJSON(p):null;this._set("contentElement",f)},this.handles.add([y(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),V),y(()=>[this.contentElement],()=>this._createVM(),V)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:s}=this;return e?"loading":t||s?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};a([c()],_e.prototype,"_abortController",void 0),a([c({type:ec})],_e.prototype,"expressionInfo",void 0),a([c({type:Vt})],_e.prototype,"graphic",void 0),a([c({readOnly:!0})],_e.prototype,"contentElement",void 0),a([c({readOnly:!0})],_e.prototype,"contentElementViewModel",void 0),a([c()],_e.prototype,"interceptor",void 0),a([c()],_e.prototype,"spatialReference",null),a([c({readOnly:!0})],_e.prototype,"state",null),a([c()],_e.prototype,"map",null),a([c()],_e.prototype,"view",void 0),_e=a([I("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],_e);const jn=_e,ji={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let Ji=class extends le{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new jn}initialize(){this.addHandles(y(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),V))}destroy(){this._destroyContentWidget()}renderLoading(){return m("div",{key:"loading-container",class:ji.loadingSpinnerContainer},m("span",{class:this.classes(ji.iconLoading,ji.spinner)}))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:ji.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,s=t==null?void 0:t.type;this._destroyContentWidget();const n=e?s==="fields"?new ma({viewModel:e}):s==="media"?new ga({viewModel:e}):s==="text"?new Yi({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};a([c({type:jn})],Ji.prototype,"viewModel",void 0),Ji=a([I("esri.widgets.Feature.FeatureExpression")],Ji);const ch=Ji,Ws=100;let z=class extends kr(Zr(Ms(D))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await $i(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await $i(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await $i(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=oi(this._queryController,Ws,this),this._queryFeatureCountThrottled=oi(this._queryFeatureCountController,Ws,this),this._queryPageThrottled=oi(this._queryPageController,Ws,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:s}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,s.removeAll(),s.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([y(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),V),y(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),y(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:s}=this,n=1,o=Math.ceil(s/t)||1;this._set("featurePage",Math.min(Math.max(e,n),o))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t!=null&&t.loaded)?e.map(s=>{const n=s.clone(),o=Si(s.field,t);return n.field=o,n}):e??[]}get supportsCacheHint(){var e,t,s;return!!((s=(t=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:t.queryRelated)!=null&&s.supportsCacheHint)}get canQuery(){var t,s;const e=(s=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:s.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t;return(this.objectIdField&&((t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new W}get relatedLayer(){const{layer:e,map:t,relationship:s}=this;return e!=null&&e.loaded&&t&&s?Cd(t,e,s)??null:null}get relationship(){var s;const{relationshipId:e,layer:t}=this;return typeof e=="number"?((s=t==null?void 0:t.relationships)==null?void 0:s.find(({id:n})=>n===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new W}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:s,canQuery:n}=this;return t?"loading":e||s?"querying":n?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:t,relationshipId:s,objectId:n,_queryFeatureCountAbortController:o,canQuery:r,supportsCacheHint:l}=this;if(await(e==null?void 0:e.load()),await(t==null?void 0:t.load()),!r||!e||!t)return void this._set("featureCount",0);const d=t.createQuery(),h=new hn({cacheHint:l,relationshipId:s,returnGeometry:!1,objectIds:[n],where:oo(d.where,void 0)}),u=await e.queryRelatedFeaturesCount(h,{signal:o==null?void 0:o.signal});this._set("featureCount",u[n]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:s}=this;return t?e:s?e.slice(0,s):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:s,_queryPageAbortController:n}=this;!s||t<2||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var ie;const{orderByFieldsFixedCasing:t,showAllEnabled:s,featuresPerPage:n,displayCount:o,layer:r,relationshipId:l,featurePage:d,featureCount:h,relatedLayer:u,supportsCacheHint:p}=this,{canQuery:g,objectId:f}=this;if(!g||!r||!u)return[];const M=s?((d-1)*n+h)%h:0,C=s?n:o,P=u.objectIdField,A=[...t==null?void 0:t.map(q=>q.field),P].filter(w),N=t==null?void 0:t.map(q=>`${q.field} ${q.order}`),L=u.createQuery(),H=new hn({orderByFields:N,start:M,num:C,outFields:A,cacheHint:p,relationshipId:l,returnGeometry:!1,objectIds:[f],where:oo(L.where,void 0)}),X=((ie=(await r.queryRelatedFeatures(H,{signal:e==null?void 0:e.signal}))[f])==null?void 0:ie.features)||[];return X.forEach(q=>{q.sourceLayer=u,q.layer=u}),X}};a([c()],z.prototype,"_queryAbortController",void 0),a([c()],z.prototype,"_queryPageAbortController",void 0),a([c()],z.prototype,"_queryFeatureCountAbortController",void 0),a([c({value:1})],z.prototype,"featurePage",null),a([c()],z.prototype,"featuresPerPage",void 0),a([c({readOnly:!0})],z.prototype,"orderByFieldsFixedCasing",null),a([c({readOnly:!0})],z.prototype,"supportsCacheHint",null),a([c({readOnly:!0})],z.prototype,"canQuery",null),a([c()],z.prototype,"description",void 0),a([c({readOnly:!0})],z.prototype,"itemDescriptionFieldName",null),a([c({value:3})],z.prototype,"displayCount",null),a([c({type:Vt})],z.prototype,"graphic",void 0),a([c()],z.prototype,"layer",void 0),a([c()],z.prototype,"map",void 0),a([c({readOnly:!0})],z.prototype,"objectId",null),a([c({readOnly:!0})],z.prototype,"objectIdField",null),a([c()],z.prototype,"orderByFields",void 0),a([c({readOnly:!0})],z.prototype,"relatedFeatures",null),a([c({readOnly:!0})],z.prototype,"relatedLayer",null),a([c({readOnly:!0})],z.prototype,"relationship",null),a([c()],z.prototype,"featureCount",void 0),a([c({readOnly:!0})],z.prototype,"relatedFeatureViewModels",null),a([c()],z.prototype,"relationshipId",void 0),a([c()],z.prototype,"showAllEnabled",void 0),a([c()],z.prototype,"state",null),a([c()],z.prototype,"title",void 0),z=a([I("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],z);const Gn=z,Mi="esri-feature",Zs=`${Mi}-relationship`,ze={base:Zs,esriWidget:"esri-widget",listContainer:`${Zs}__list`,listContainerQuerying:`${Zs}__list--querying`,featureObserver:`${Mi}__feature-observer`,stickySpinnerContainer:`${Mi}__sticky-loading-container`,loadingSpinnerContainer:`${Mi}__loading-container`,spinner:`${Mi}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},qo={title:!0,description:!0};let he=class extends le{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([s])=>{s!=null&&s.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new Gn,this.messages=null,this.messagesCommon=null,this.visibleElements={...qo},this._increaseFeaturePage=()=>{const{state:s,showAllEnabled:n,relatedFeatures:o,featuresPerPage:r,featurePage:l}=this.viewModel;s==="ready"&&n&&o.length>=r*l&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Cs,this.addHandles([y(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),V),y(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Ee(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([b(()=>import("./calcite-list-dca488f9.js"),["assets/calcite-list-dca488f9.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/interactive-1de2e238.js","assets/observers-90a6df09.js","assets/utils3-7e94db45.js","assets/loadable-6afd516d.js","assets/debounce-d5abe404.js","assets/t9n-155c460a.js","assets/icon-840ccd9c.js","assets/loader-839a9276.js","assets/guid-51402ee7.js","assets/scrim-f71cd89d.js"]),b(()=>import("./calcite-list-item-5da2bda3.js"),["assets/calcite-list-item-5da2bda3.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/interactive-1de2e238.js","assets/utils3-7e94db45.js","assets/loadable-6afd516d.js","assets/icon-840ccd9c.js","assets/observers-90a6df09.js"]),b(()=>import("./calcite-icon-f9a94ef8.js"),["assets/calcite-icon-f9a94ef8.js","assets/icon-840ccd9c.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/observers-90a6df09.js"]),b(()=>import("./calcite-notice-effc5e85.js"),["assets/calcite-notice-effc5e85.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/observers-90a6df09.js","assets/loadable-6afd516d.js","assets/t9n-155c460a.js","assets/icon-840ccd9c.js"])])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=re(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:s}=this.viewModel;return!e&&!!t&&(t>s||s===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return Se(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...qo,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?m("div",{key:"sticky-loader",class:ze.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return m("span",{class:this.classes(ze.iconLoading,ze.spinner)})}renderLoading(){return m("div",{key:"loading-container",class:ze.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return m("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Ve(this.container)?"chevron-left":"chevron-right";return m("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var o,r;const{itemDescriptionFieldName:t}=this.viewModel,s=e.title;e.description=t&&((o=e.formattedAttributes)==null?void 0:o.global[t]);const n=e.state==="loading";return m("calcite-list-item",{key:e.uid,label:n?`${(r=this.messagesCommon)==null?void 0:r.loading}`:s,description:n?"":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?m("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return m("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return m("div",{key:"feature-observer",class:ze.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return m("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return m("div",{key:"list-container",class:this.classes(ze.listContainer,{[ze.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return m("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:this.classes(ze.base,ze.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(s=>{this.addHandles(y(()=>[s.title,s.state],()=>this.scheduleRender(),V),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var o;const{headingLevel:e,visibleElements:t}=this,s=t.description&&this.description,n=t.title&&this.title;(o=this._featureElementInfo)==null||o.set({description:s,title:n,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await Fn(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};a([c()],he.prototype,"_relatedFeatureIntersectionObserverNode",void 0),a([c({readOnly:!0})],he.prototype,"displayShowAllButton",null),a([c({readOnly:!0})],he.prototype,"displayListItems",null),a([c()],he.prototype,"description",null),a([c({readOnly:!0})],he.prototype,"featureCountDescription",null),a([c()],he.prototype,"headingLevel",void 0),a([c()],he.prototype,"title",null),a([c({type:Gn})],he.prototype,"viewModel",void 0),a([c(),ae("esri/widgets/Feature/t9n/Feature")],he.prototype,"messages",void 0),a([c(),ae("esri/t9n/common")],he.prototype,"messagesCommon",void 0),a([c()],he.prototype,"visibleElements",void 0),a([Ce("visibleElements")],he.prototype,"castVisibleElements",null),he=a([I("esri.widgets.Feature.FeatureRelationship")],he);const Uo=he;let dh=class{constructor(e,t){this.preLayerQueryCallback=e,this.preRequestCallback=t,this.preLayerQueryCallback||(this.preLayerQueryCallback=s=>{}),this.preRequestCallback||(this.preLayerQueryCallback=s=>{})}};var Ii;const hh=1,Ho="content-view-models",jo="relationship-view-models",Go={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let U=Ii=class extends Zr(D){constructor(i){super(i),this._handles=new yt,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=oi(this._graphicChanged,hh,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Go},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return e.type==="attachments"&&!!t.attachmentsContent||e.type==="custom"&&!!t.customContent||e.type==="fields"&&!!t.fieldsContent||e.type==="media"&&!!t.mediaContent||e.type==="text"&&!!t.textContent||e.type==="expression"&&!!t.expressionContent||e.type==="relationship"&&!!t.relationshipContent},this._handles.add(y(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),V))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return w(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return _d(ko(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return oa(this.graphic)}castAbilities(i){return{...Go,...i}}get isTable(){var i;return((i=this._sourceLayer)==null?void 0:i.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(i){this._set("graphic",i?i.clone():null)}get spatialReference(){var i;return((i=this.view)==null?void 0:i.spatialReference)??null}set spatialReference(i){this._override("spatialReference",i)}get map(){var i;return((i=this.view)==null?void 0:i.map)||null}set map(i){this._override("map",i)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(i,e){const t=this.contentViewModels[i];t instanceof Rt&&t.setActiveMedia(e)}nextMedia(i){const e=this.contentViewModels[i];e instanceof Rt&&e.next()}previousMedia(i){const e=this.contentViewModels[i];e instanceof Rt&&e.previous()}async updateGeometry(){var r,l;const{graphic:i,spatialReference:e,_sourceLayer:t}=this;await(t==null?void 0:t.load());const s=t==null?void 0:t.objectIdField;if(!s||!i||!t)return;const n=(r=i==null?void 0:i.attributes)==null?void 0:r[s];if(n==null)return;const o=[n];if(!i.geometry){const d=(l=await ha({layer:t,graphic:i,outFields:[],objectIds:o,returnGeometry:!0,spatialReference:e}))==null?void 0:l.geometry;d&&(i.geometry=d)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:i}=this;if(!i)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(t){Sr(t)||(this._error=t,O.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:t,graphic:i,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:i}=this;i&&i.abort(),this._featureAbortController=null}_compileContentElement(i,e){return i.type==="attachments"?this._compileAttachments(i,e):i.type==="custom"?this._compileCustom(i,e):i.type==="fields"?this._compileFields(i,e):i.type==="media"?this._compileMedia(i,e):i.type==="text"?this._compileText(i,e):i.type==="expression"?this._compileExpression(i,e):i.type==="relationship"?this._compileRelationship(i,e):void 0}_compileContent(i){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(i)?i.filter(this._isAllowedContentType).map((e,t)=>this._compileContentElement(e,t)).filter(w):typeof i=="string"?this._compileText(new jr({text:i}),0).text:i}_destroyContentViewModels(){var i,e;(i=this._handles)==null||i.remove(jo),(e=this._handles)==null||e.remove(Ho),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(i,e){var n;const t=(n=i==null?void 0:i.graphic)==null?void 0:n.getObjectId(),s=e==null?void 0:e.getObjectId();return w(t)&&w(s)&&t===s}_setRelatedFeaturesViewModels({relatedFeatureViewModels:i,relatedFeatures:e,map:t}){const{view:s,spatialReference:n}=this;e==null||e.filter(Boolean).forEach(o=>{i.find(r=>this._matchesFeature(r,o))||i.add(new Ii({abilities:{relationshipContent:!1},map:t,view:s,spatialReference:n,graphic:o}))}),i.forEach(o=>{(e==null?void 0:e.find(l=>this._matchesFeature(o,l)))||i.remove(o)})}_setExpressionContentVM(i,e){const t=this.formattedAttributes,{contentElement:s,contentElementViewModel:n}=i,o=s==null?void 0:s.type;n&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:e,formattedAttributes:t}),n.set(this._createFieldsVMParams(s,e))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:e,formattedAttributes:t}),n.set(this._createMediaVMParams(s,e))),o==="text"&&n.set(this._createTextVMParams(s)))}_compileRelationship(i,e){const{displayCount:t,orderByFields:s,relationshipId:n,title:o,description:r}=i,{_sourceLayer:l,graphic:d,map:h}=this,u=new Gn({displayCount:t,graphic:d,orderByFields:s,relationshipId:n,layer:l,map:h,...this._compileTitleAndDesc({title:o,description:r})});return this.contentViewModels[e]=u,this._handles.add(Ee(()=>u.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(u)),jo),i}_compileExpression(i,e){const{expressionInfo:t}=i,{graphic:s,map:n,spatialReference:o,view:r}=this,l=new jn({expressionInfo:t,graphic:s,interceptor:Ii.interceptor,map:n,spatialReference:o,view:r});return this.contentViewModels[e]=l,this._handles.add(y(()=>l.contentElementViewModel,()=>this._setExpressionContentVM(l,e),V),Ho),i}_compileAttachments(i,e){const{graphic:t}=this,{description:s,title:n}=i;return this.contentViewModels[e]=new Un({graphic:t,...this._compileTitleAndDesc({title:n,description:s})}),i}_compileCustom(i,e){const{graphic:t}=this,{creator:s,destroyer:n}=i;return this.contentViewModels[e]=new ps({graphic:t,creator:s,destroyer:n}),i}_compileTitleAndDesc({title:i,description:e}){const{_fieldInfoMap:t,_sourceLayer:s,graphic:n,formattedAttributes:o}=this,r=n==null?void 0:n.attributes,l=this._expressionAttributes,d=o.global;return{title:Ft({attributes:r,fieldInfoMap:t,globalAttributes:d,expressionAttributes:l,layer:s,text:i}),description:Ft({attributes:r,fieldInfoMap:t,globalAttributes:d,expressionAttributes:l,layer:s,text:e})}}_createFieldsVMParams(i,e){var h;const t=this._effectivePopupTemplate,s=this.formattedAttributes,n={...s==null?void 0:s.global,...s==null?void 0:s.content[e]},o=(h=(i==null?void 0:i.fieldInfos)||(t==null?void 0:t.fieldInfos))==null?void 0:h.filter(({fieldName:u})=>Nn(u)||Ye(u)||n.hasOwnProperty(u)),r=t==null?void 0:t.expressionInfos,{description:l,title:d}=i;return{attributes:n,expressionInfos:r,fieldInfos:o,...this._compileTitleAndDesc({title:d,description:l})}}_compileFields(i,e){const t=i.clone(),s=new Ts(this._createFieldsVMParams(i,e));return this.contentViewModels[e]=s,t.fieldInfos=s.formattedFieldInfos.slice(0),t}_createMediaVMParams(i,e){const{abilities:t,graphic:s,_fieldInfoMap:n,_effectivePopupTemplate:o,relatedInfos:r,_sourceLayer:l,_expressionAttributes:d}=this,h=this.formattedAttributes,u=(s==null?void 0:s.attributes)??{},{description:p,mediaInfos:g,title:f}=i;return{abilities:{chartAnimation:t.chartAnimation},activeMediaInfoIndex:i.activeMediaInfoIndex||0,attributes:u,isAggregate:s==null?void 0:s.isAggregate,layer:l,fieldInfoMap:n,formattedAttributes:{...h==null?void 0:h.global,...h==null?void 0:h.content[e]},expressionAttributes:d,mediaInfos:g,popupTemplate:o,relatedInfos:r,...this._compileTitleAndDesc({title:f,description:p})}}_compileMedia(i,e){const t=i.clone(),s=new Rt(this._createMediaVMParams(i,e));return t.mediaInfos=s.formattedMediaInfos.slice(0),this.contentViewModels[e]=s,t}_createTextVMParams(i){var o;const{graphic:e,_fieldInfoMap:t,_sourceLayer:s,_expressionAttributes:n}=this;if(i&&i.text){const r=(e==null?void 0:e.attributes)??{},l=((o=this.formattedAttributes)==null?void 0:o.global)??{};i.text=Ft({attributes:r,fieldInfoMap:t,globalAttributes:l,expressionAttributes:n,layer:s,text:i.text})}return{graphic:e,creator:i.text}}_compileText(i,e){const t=i.clone();return this.contentViewModels[e]=new ps(this._createTextVMParams(t)),t}_compileLastEditInfo(){const{_effectivePopupTemplate:i,_sourceLayer:e,graphic:t}=this;if(!i)return;const{lastEditInfoEnabled:s}=i,n=e==null?void 0:e.editFieldsInfo;return s&&n?fd(n,t==null?void 0:t.attributes):void 0}_compileTitle(i){var l;const{_fieldInfoMap:e,_sourceLayer:t,graphic:s,_expressionAttributes:n}=this,o=(s==null?void 0:s.attributes)??{},r=((l=this.formattedAttributes)==null?void 0:l.global)??{};return Ft({attributes:o,fieldInfoMap:e,globalAttributes:r,expressionAttributes:n,layer:t,text:i})}async _getTitle(){const{_effectivePopupTemplate:i,graphic:e}=this;if(!e)return null;const t=i==null?void 0:i.title;return us(t,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:i,graphic:e}=this;if(!e)return null;const t=i==null?void 0:i.content;return us(t,{graphic:e})}async _queryFeature(i){const{_featureAbortController:e,_sourceLayer:t,graphic:s,_effectivePopupTemplate:n}=this,o=this.map,r=this.view,l=this.spatialReference;if(e!==this._featureAbortController||!s)return;await vd({graphic:s,popupTemplate:n,layer:t,spatialReference:l},i);const{content:{value:d},title:{value:h}}=await Dt({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:u}}=await Dt({checkForRelatedFeatures:this._checkForRelatedFeatures(i),expressionAttributes:ah({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:l,graphic:s,map:o,interceptor:Ii.interceptor,view:r})});e===this._featureAbortController&&s&&(this._expressionAttributes=u,this._graphicExpressionAttributes={...s.attributes,...u},this._set("formattedAttributes",this._createFormattedAttributes(d)),this._set("title",this._compileTitle(h)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(d)||null))}_createMediaFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){const{_effectivePopupTemplate:s,graphic:n,relatedInfos:o,_sourceLayer:r,_fieldInfoMap:l,_graphicExpressionAttributes:d}=this;t.content[e]=Os({fieldInfos:s==null?void 0:s.fieldInfos,graphic:n,attributes:{...d,...i.attributes},layer:r,fieldInfoMap:l,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){if(i.fieldInfos){const{graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:r,_graphicExpressionAttributes:l}=this;t.content[e]=Os({fieldInfos:i.fieldInfos,graphic:s,attributes:{...l,...i.attributes},layer:o,fieldInfoMap:r,relatedInfos:n})}}_createFormattedAttributes(i){const{_effectivePopupTemplate:e,graphic:t,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:r}=this,l=e==null?void 0:e.fieldInfos,d={global:Os({fieldInfos:l,graphic:t,attributes:r,layer:n,fieldInfoMap:o,relatedInfos:s}),content:[]};return Array.isArray(i)&&i.forEach((h,u)=>{h.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:h,contentElementIndex:u,formattedAttributes:d}),h.type==="media"&&this._createMediaFormattedAttributes({contentElement:h,contentElementIndex:u,formattedAttributes:d})}),d}_checkForRelatedFeatures(i){const{graphic:e,_effectivePopupTemplate:t}=this;return this._queryRelatedInfos(e,ko(t),i)}async _queryRelatedInfos(i,e,t){const{relatedInfos:s,_sourceLayer:n}=this;s.clear();const o=w(n==null?void 0:n.associatedLayer)?await(n==null?void 0:n.associatedLayer.load(t)):n;if(!o||!i)return;const r=e.filter(h=>h&&Ye(h.fieldName));if(!r||!r.length)return;e.forEach(h=>this._configureRelatedInfo(h,o));const l=await qd({relatedInfos:s,layer:o},t);Object.keys(l).forEach(h=>{var g;const u=s.get(h.toString()),p=(g=l[h])==null?void 0:g.value;u&&p&&(u.layerInfo=p.data)});const d=await Ud({graphic:i,relatedInfos:s,layer:o},t);Object.keys(d).forEach(h=>{var u;Vd((u=d[h])==null?void 0:u.value,s.get(h.toString()))})}_configureRelatedInfo(i,e){const{relatedInfos:t}=this,s=Xi(i.fieldName);if(!s)return;const{layerId:n,fieldName:o}=s;if(!n)return;const r=t.get(n.toString())||Dd(n,e);r&&(Hd({relatedInfo:r,fieldName:o,fieldInfo:i}),this.relatedInfos.set(n,r))}};U.interceptor=new dh(Md,Id),a([c()],U.prototype,"_error",void 0),a([c()],U.prototype,"_featureAbortController",void 0),a([c({readOnly:!0})],U.prototype,"_effectivePopupTemplate",null),a([c({readOnly:!0})],U.prototype,"_fieldInfoMap",null),a([c({readOnly:!0})],U.prototype,"_sourceLayer",null),a([c()],U.prototype,"abilities",void 0),a([Ce("abilities")],U.prototype,"castAbilities",null),a([c({readOnly:!0})],U.prototype,"content",void 0),a([c({readOnly:!0})],U.prototype,"contentViewModels",void 0),a([c()],U.prototype,"description",void 0),a([c({type:Boolean})],U.prototype,"defaultPopupTemplateEnabled",void 0),a([c({readOnly:!0})],U.prototype,"isTable",null),a([c({readOnly:!0})],U.prototype,"state",null),a([c({readOnly:!0})],U.prototype,"formattedAttributes",void 0),a([c({type:Vt,value:null})],U.prototype,"graphic",null),a([c({readOnly:!0})],U.prototype,"lastEditInfo",void 0),a([c({readOnly:!0})],U.prototype,"relatedInfos",void 0),a([c()],U.prototype,"spatialReference",null),a([c({readOnly:!0})],U.prototype,"title",void 0),a([c()],U.prototype,"map",null),a([c({readOnly:!0})],U.prototype,"waitingForContent",null),a([c()],U.prototype,"view",void 0),U=Ii=a([I("esri.widgets.FeatureViewModel")],U);const Wn=U,se="esri-feature",j={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:se,container:`${se}__size-container`,title:`${se}__title`,main:`${se}__main-container`,btn:`${se}__button`,icon:`${se}__icon`,content:`${se}__content`,contentNode:`${se}__content-node`,contentElement:`${se}__content-element`,text:`${se}__text`,lastEditedInfo:`${se}__last-edited-info`,fields:`${se}__fields`,fieldHeader:`${se}__field-header`,fieldData:`${se}__field-data`,fieldDataDate:`${se}__field-data--date`,loadingSpinnerContainer:`${se}__loading-container`,spinner:`${se}__loading-spinner`},ya=i=>{let e=class extends i{constructor(){super(...arguments),this.renderNodeContent=t=>Gr(t)&&!t.destroyed?m("div",{class:j.contentNode,key:t},t.render()):t instanceof HTMLElement?m("div",{class:j.contentNode,key:t,bind:t,afterCreate:this._attachToNode}):ic(t)?m("div",{class:j.contentNode,key:t,bind:t.domNode,afterCreate:this._attachToNode}):null}_attachToNode(t){const s=this;t.appendChild(s)}};return e=a([I("esri.widgets.Feature.ContentMixin")],e),e};var yn;const Wo={title:!0,content:!0,lastEditedInfo:!0},Zo="relationship-handles";let J=yn=class extends ya(le){constructor(i,e){super(i,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...Wo},this.viewModel=new Wn}initialize(){this.addHandles(y(()=>{var i;return(i=this.viewModel)==null?void 0:i.contentViewModels},()=>this._setupContentWidgets(),V))}loadDependencies(){return b(()=>import("./calcite-notice-effc5e85.js"),["assets/calcite-notice-effc5e85.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/observers-90a6df09.js","assets/loadable-6afd516d.js","assets/t9n-155c460a.js","assets/icon-840ccd9c.js"])}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(i){this.viewModel.graphic=i}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(i){this.viewModel.defaultPopupTemplateEnabled=i}get isTable(){return this.viewModel.isTable}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(i){this.viewModel.spatialReference=i}get title(){return this.viewModel.title}castVisibleElements(i){return{...Wo,...i}}get map(){return this.viewModel.map}set map(i){this.viewModel.map=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}render(){const{state:i}=this.viewModel,e=m("div",{class:j.container,key:"container"},this.renderTitle(),i==="error"?this.renderError():i==="loading"?this.renderLoading():this.renderContentContainer());return m("div",{class:this.classes(j.base,j.esriWidget)},e)}setActiveMedia(i,e){return this.viewModel.setActiveMedia(i,e)}nextMedia(i){return this.viewModel.nextMedia(i)}previousMedia(i){return this.viewModel.previousMedia(i)}renderError(){const{messagesCommon:i,messages:e,visibleElements:t}=this;return m("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},t.title?m("div",{key:"error-title",slot:"title"},i.errorMessage):null,m("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return m("div",{key:"loading-container",class:j.loadingSpinnerContainer},m("span",{class:this.classes(j.iconLoading,j.spinner)}))}renderContentContainer(){const{visibleElements:i}=this;return i.content?m("div",{class:j.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:i,title:e}=this;return i.title?m(Ln,{level:this.headingLevel,class:j.title,innerHTML:e}):null}renderContent(){const i=this.viewModel.content,e="content";if(!i)return null;if(Array.isArray(i))return i.length?m("div",{class:j.contentNode,key:`${e}-content-elements`},i.map(this.renderContentElement,this)):null;if(typeof i=="string"){const t=this._contentWidgets[0];return!t||t.destroyed?null:m("div",{class:j.contentNode,key:`${e}-content`},t.render())}return this.renderNodeContent(i)}renderContentElement(i,e){var s;const{visibleElements:t}=this;if(typeof t.content!="boolean"&&!((s=t.content)!=null&&s[i.type]))return null;switch(i.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(i,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(i,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(i){const e=this._contentWidgets[i];if(!e||e.destroyed)return null;const{state:t,attachmentInfos:s}=e.viewModel;return t==="loading"||s.length>0?m("div",{key:this._buildKey("attachments-element",i),class:this.classes(j.contentElement)},e.render()):null}renderRelationship(i){const e=this._contentWidgets[i];return e&&!e.destroyed&&this.flowItems?m("div",{key:this._buildKey("relationship-element",i),class:j.contentElement},e.render()):null}renderExpression(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("expression-element",i),class:j.contentElement},e.render())}renderCustom(i,e){const{creator:t}=i,s=this._contentWidgets[e];return!s||s.destroyed?null:t?m("div",{key:this._buildKey("custom-element",e),class:j.contentElement},s.render()):null}renderFields(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("fields-element",i),class:j.contentElement},e.render())}renderMedia(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("media-element",i),class:j.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:i,messages:e}=this,{lastEditInfo:t}=this.viewModel;if(!t||!i.lastEditedInfo)return null;const{date:s,user:n}=t,o=t.type==="edit"?n?e.lastEditedByUser:e.lastEdited:n?e.lastCreatedByUser:e.lastCreated,r=Se(o,{date:s,user:n});return m("div",{key:"edit-info-element",class:this.classes(j.lastEditedInfo,j.contentElement)},r)}renderText(i,e){const t=i.text,s=this._contentWidgets[e];return!s||s.destroyed?null:t?m("div",{key:this._buildKey("text-element",e),class:this.classes(j.contentElement,j.text)},s.render()):null}_buildKey(i,...e){return`${i}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(i){i&&(i.viewModel=null,!i.destroyed&&i.destroy())}_destroyContentWidgets(){this.removeHandles(Zo),this._contentWidgets.forEach(i=>this._destroyContentWidget(i)),this._contentWidgets=[]}_addFeatureRelationshipHandles(i){const{flowItems:e,visibleElements:t}=this;this.addHandles([Ee(()=>i,"select-record",({featureViewModel:s})=>{e&&(s.abilities={relationshipContent:!0},e.push(new yn({flowItems:e,viewModel:s,visibleElements:t})))}),Ee(()=>i,"show-all-records",()=>{if(!e)return;const{viewModel:s}=i;s.showAllEnabled=!0;const n=new Uo({visibleElements:{title:!1,description:!1},viewModel:s});this._addFeatureRelationshipHandles(n),e.push(n)})],Zo)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:i,visibleElements:e}=this,t=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(t))t.forEach((n,o)=>{if(n.type==="attachments"&&(this._contentWidgets[o]=new $d({displayType:n.displayType,headingLevel:e.title?i+1:i,viewModel:s[o]})),n.type==="fields"&&(this._contentWidgets[o]=new ma({viewModel:s[o]})),n.type==="media"&&(this._contentWidgets[o]=new ga({viewModel:s[o]})),n.type==="text"&&(this._contentWidgets[o]=new Yi({viewModel:s[o]})),n.type==="custom"&&(this._contentWidgets[o]=new Yi({viewModel:s[o]})),n.type==="expression"&&(this._contentWidgets[o]=new ch({viewModel:s[o]})),n.type==="relationship"){const r=new Uo({viewModel:s[o]});this._addFeatureRelationshipHandles(r),this._contentWidgets[o]=r}},this);else{const n=s[0];n&&!n.destroyed&&(this._contentWidgets[0]=new Yi({viewModel:n}))}this.scheduleRender()}};a([c()],J.prototype,"graphic",null),a([c()],J.prototype,"defaultPopupTemplateEnabled",null),a([c()],J.prototype,"flowItems",void 0),a([c()],J.prototype,"headingLevel",void 0),a([c({readOnly:!0})],J.prototype,"isTable",null),a([c()],J.prototype,"label",null),a([c(),ae("esri/widgets/Feature/t9n/Feature")],J.prototype,"messages",void 0),a([c(),ae("esri/t9n/common")],J.prototype,"messagesCommon",void 0),a([c(),ae("esri/widgets/support/t9n/uriUtils")],J.prototype,"messagesURIUtils",void 0),a([c()],J.prototype,"spatialReference",null),a([c({readOnly:!0})],J.prototype,"title",null),a([c()],J.prototype,"visibleElements",void 0),a([Ce("visibleElements")],J.prototype,"castVisibleElements",null),a([c()],J.prototype,"map",null),a([c()],J.prototype,"view",null),a([c({type:Wn})],J.prototype,"viewModel",void 0),J=yn=a([I("esri.widgets.Feature")],J);const uh=J;var va;const es=Symbol("anchorHandles");let Mt=class extends Dn.EventedAccessor{constructor(e){super(e),this[va]=new yt,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[es].add([Je(()=>wi(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),y(()=>this.screenLocation,(t,s)=>{w(t)&&w(s)&&this.emit("view-change")})])}destroy(){this.view=null,this[es]=re(this[es])}get screenLocation(){var n;const{location:e,view:t,screenLocationEnabled:s}=this;return s&&w(e)&&w(t)&&t.ready?(n=t.toScreen)==null?void 0:n.call(t,e):null}};va=es,a([c()],Mt.prototype,"location",void 0),a([c()],Mt.prototype,"screenLocation",null),a([c()],Mt.prototype,"screenLocationEnabled",void 0),a([c()],Mt.prototype,"view",void 0),Mt=a([I("esri.widgets.support.AnchorElementViewModel")],Mt);const wa=Mt,ph="esri.widgets.CompassViewModel";let ts=class extends wa{constructor(e){super(e),this.visible=!1}};a([c()],ts.prototype,"visible",void 0),ts=a([I(ph)],ts);const ba=ts,Ks="esri-spinner",Qs={base:Ks,spinnerStart:`${Ks}--start`,spinnerFinish:`${Ks}--finish`};let It=class extends le{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new ba}initialize(){this.addHandles(y(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:s}=e??{};t&&(this.viewModel.location=t),this.visible=!0;const n=()=>this.hide();s&&s.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,s=!!t,n=e&&s,o=!e&&s,r={[Qs.spinnerStart]:n,[Qs.spinnerFinish]:o},l=this._getPositionStyles();return m("div",{class:this.classes(Qs.base,r),styles:l})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Fn(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(F(t)||F(e))return{};const{padding:s}=t;return{left:e.x-s.left+"px",top:e.y-s.top+"px"}}};a([c()],It.prototype,"location",null),a([c()],It.prototype,"view",null),a([c({type:ba})],It.prototype,"viewModel",void 0),a([c()],It.prototype,"visible",null),It=a([I("esri.widgets.Spinner")],It);const mh=It,xs={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Lt=new Oi({id:"zoom-to-feature",title:"{messages.zoom}",className:xs.iconZoom}),Ko=new Oi({id:"remove-selected-feature",title:"{messages.remove}",className:xs.iconTrash}),ti=new Oi({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:xs.iconZoom}),ii=new Oi({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:xs.iconBrowseClusteredFeatures}),gh="esri.widgets.Popup.PopupViewModel",ms=O.getLogger(gh),fh=i=>{const{event:e,view:t}=i,{action:s}=e,n=t&&t.popup;if(!s)return Promise.reject(new $("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new $("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:r}=s;if(!r)return Promise.reject(new $("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new $("trigger-action:invalid-action","Action is disabled"));if(r===Lt.id)return yh(n.viewModel).catch(Pl);if(r===ti.id)return vh(n.viewModel);if(r===ii.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,r===Ko.id){n.close();const{selectedFeature:l}=n;if(!l)return Promise.reject(new $(`trigger-action:${Ko.id}`,"selectedFeature is required",{selectedFeature:l}));const{sourceLayer:d}=l;return d?d.remove(l):t.graphics.remove(l),Promise.resolve()}return Promise.resolve()};function Ma(i){const{selectedFeature:e,location:t,view:s}=i;return s?s.type==="3d"?e??t??null:i.get("selectedFeature.geometry")||t:null}function Pt(i){var e,t;return!!i&&i.isAggregate&&((t=(e=i.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:t.type)==="cluster"}async function _h(i,e){if((e==null?void 0:e.type)!=="3d"||!i||i.declaredClass!=="esri.Graphic")return!0;const t=e.getViewForGraphic(i);if(t&&"whenGraphicBounds"in t){let s;try{s=await t.whenGraphicBounds(i,{useViewElevation:!0})}catch{}return!s||!s.boundingBox||s.boundingBox[0]===s.boundingBox[3]&&s.boundingBox[1]===s.boundingBox[4]&&s.boundingBox[2]===s.boundingBox[5]}return!0}async function yh(i){var u;const{location:e,selectedFeature:t,view:s,zoomFactor:n}=i,o=Ma(i);if(!s||!o){const p=new $("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:s});throw ms.error(p),p}const r=s.scale/n,l=(u=i.selectedFeature)==null?void 0:u.geometry,d=l??e,h=w(d)&&d.type==="point"&&await _h(t,s);Lt.active=!0,Lt.disabled=!0;try{await i.zoomTo({target:{target:o,scale:h?r:void 0}})}catch{const g=new $("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:t});ms.error(g)}finally{Lt.active=!1,Lt.disabled=!1,i.zoomToLocation=null,h&&(i.location=d)}}async function vh(i){const{selectedFeature:e,view:t}=i;if((t==null?void 0:t.type)!=="2d"){const r=new $("zoomToCluster:invalid-view","View must be 2d MapView.",{view:t});throw ms.error(r),r}if(!e||!Pt(e)){const r=new $("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw ms.error(r),r}const[s,n]=await Zn(t,e);ti.active=!0,ti.disabled=!0;const{extent:o}=await s.queryExtent(n);await i.zoomTo({target:o}),ti.active=!1,ti.disabled=!1}async function wh(i){const{view:e,selectedFeature:t}=i;if(!e||!t)return;const[s,n]=await Zn(e,t),{extent:o}=await s.queryExtent(n);i.selectedClusterBoundaryFeature.geometry=o,e.graphics.add(i.selectedClusterBoundaryFeature)}async function bh(i){var r;const{selectedFeature:e,view:t}=i;if(!t||!e)return;const[s,n]=await Zn(t,e);ii.active=!0,ii.disabled=!0;const{features:o}=await s.queryFeatures(n);ii.active=!1,ii.disabled=!1,(r=t.popup)==null||r.open({features:[e].concat(o),featureMenuOpen:!0})}async function Zn(i,e){const t=await i.whenLayerView(e.sourceLayer),s=t.createQuery(),n=e.getObjectId();return s.aggregateIds=n!=null?[n]:[],[t,s]}function Mh(i){const e=i.features.filter(t=>Pt(t));e.length&&(i.features=e)}function Ia(i){var e;if(F(i))return null;switch(i.type){case"point":return i;case"extent":return i.center;case"polygon":return i.centroid;case"multipoint":case"polyline":return(e=i.extent)==null?void 0:e.center;default:return null}}const x="esri-popup",mi=`${x}__header`,wt=`${x}--is-docked`,_={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:x,widget:"esri-widget",main:`${x}__main-container`,loadingContainer:`${x}__loading-container`,isCollapsible:`${x}--is-collapsible`,isCollapsed:`${x}--is-collapsed`,shadow:`${x}--shadow`,isDocked:wt,isDockedTopLeft:`${wt}-top-left`,isDockedTopCenter:`${wt}-top-center`,isDockedTopRight:`${wt}-top-right`,isDockedBottomLeft:`${wt}-bottom-left`,isDockedBottomCenter:`${wt}-bottom-center`,isDockedBottomRight:`${wt}-bottom-right`,alignTopCenter:`${x}--aligned-top-center`,alignBottomCenter:`${x}--aligned-bottom-center`,alignTopLeft:`${x}--aligned-top-left`,alignBottomLeft:`${x}--aligned-bottom-left`,alignTopRight:`${x}--aligned-top-right`,alignBottomRight:`${x}--aligned-bottom-right`,isFeatureMenuOpen:`${x}--feature-menu-open`,isActionsMenuOpen:`${x}--actions-menu-open`,hasFeatureUpdated:`${x}--feature-updated`,header:mi,headerButtons:`${mi}-buttons`,headerContainer:`${mi}-container`,headerContainerButton:`${mi}-container--button`,headerTitle:`${mi}-title`,content:`${x}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${x}__footer`,footerHasPagination:`${x}__footer--has-pagination`,footerHasActions:`${x}__footer--has-actions`,footerHasActionsMenu:`${x}__footer--has-actions-menu`,button:`${x}__button`,buttonDisabled:`${x}__button--disabled`,buttonDock:`${x}__button--dock`,icon:`${x}__icon`,iconDock:`${x}__icon--dock-icon`,inlineActionsContainer:`${x}__inline-actions-container`,actionsMenuButton:`${x}__actions-menu-button`,actions:`${x}__actions`,action:`${x}__action`,actionImage:`${x}__action-image`,actionText:`${x}__action-text`,actionToggle:`${x}__action-toggle`,actionToggleOn:`${x}__action-toggle--on`,actionExit:`${x}__action--exit`,actionSelectFeature:`${x}__action--select-feature`,pointer:`${x}__pointer`,pointerDirection:`${x}__pointer-direction`,navigation:`${x}__navigation`,paginationPrevious:`${x}__pagination-previous`,paginationNext:`${x}__pagination-next`,paginationPreviousIconLTR:`${x}__pagination-previous-icon`,paginationPreviousIconRTL:`${x}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${x}__pagination-next-icon`,paginationNextIconRTL:`${x}__pagination-next-icon--rtl`,featureMenu:`${x}__feature-menu`,featureMenuList:`${x}__feature-menu-list`,featureMenuItem:`${x}__feature-menu-item`,featureMenuViewport:`${x}__feature-menu-viewport`,featureMenuHeader:`${x}__feature-menu-header`,featureMenuNote:`${x}__feature-menu-note`,featureMenuSelected:`${x}__feature-menu-item--selected`,featureMenuButton:`${x}__feature-menu-button`,featureMenuTitle:`${x}__feature-menu-title`,featureMenuObserver:`${x}__feature-menu-observer`,featureMenuLoader:`${x}__feature-menu-loader`,collapseButton:`${x}__collapse-button`,collapseIcon:`${x}__collapse-icon`},Ih="OBJECTID";let Ch=class{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const s in e){const n=e[s],o=new Ol(n,void 0,void 0,2,2);this._properties[s]={pool:o,acquired:[]}}this._afterDispatchHandle=Nl(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const s of t.acquired)uo(s)||t.pool.release(s);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),s=this._properties[e];let n=s.pool.acquire();for(s.acquired.push(n);n===t;)s.acquired.push(n),n=s.pool.acquire();return n}_release(){for(const e in this._properties){const t=this._properties[e];let s=0;for(const n of t.acquired)uo(n)?t.acquired[s++]=n:t.pool.release(n);t.acquired.length=s}}};const Th=De("mac")?"Meta":"Ctrl",Es={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let i=48;i<58;i++)Es[i]=String.fromCharCode(i);for(let i=1;i<25;i++)Es[111+i]=`F${i}`;for(let i=65;i<91;i++)Es[i]=[String.fromCharCode(i+32),String.fromCharCode(i)];function xh(i){if(i.key!==void 0)return kt(i);const e=Es[i.keyCode];return Array.isArray(e)?i.shiftKey?e[1]:e[0]:e}function Eh(i){switch(i){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let $h=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const t=e.modifiers;for(const s of this.keyModifiers)if(!t.has(s))return!1;return!0}};const Qo=O.getLogger("esri.views.input.InputHandler");let te=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const s of t)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?Qo.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(t=>this._handleEvent(t)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,t,s){let n;typeof t=="function"?(s=t,n=[]):n=t||[];const o=typeof e=="string"?new $h(e,n):e,r=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=u=>{const p=this._incoming[u.match.eventType];if(p){const g=p.indexOf(u);p.splice(g,1),r(),this._manager&&this._manager.updateDependencies()}},d=new kh(o,s,{onPause:l,onRemove:l,onResume:u=>{const p=this._incoming[u.match.eventType];p&&!p.includes(u)&&(p.push(u),r(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[o.eventType];return h||(h=[],this._incoming[o.eventType]=h),h.push(d),r(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new Ph(e,{onEmit:(s,n,o,r)=>{var l;(l=this._manager)==null||l.emit(s.eventType,n,o,r)},onRemove:s=>{var n;delete this._outgoing[s.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!0)}stopCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Qo.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var s;const t=this._incoming[e.type];if(t){for(const n of t)if(n.match.matches(e)&&((s=n.callback)==null||s.call(n,e),e.shouldStopPropagation()))break}}},kh=class{constructor(e,t,s){this.match=e,this._callback=t,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Ph=class{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,s){this._removed||this._handler.onEmit(this,e,t,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},Ah=class extends te{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",t=>{this._update(t.data)})}_update(e){const t=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:n}=e;t===this._value&&this._x===s&&this._y===n||(this._value=t,this._x=s,this._y=n,this._onChange(t,s,n))}},Fh=class extends te{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new gc(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},Pe=class extends D{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Th,this._latestPointerType="mouse",this._propertiesPool=new Ch({latestPointerLocation:Sh},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,s=ft.INTERNAL){if(this._nameToGroup[e])return void O.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void O.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const n={name:e,handlers:t.map(o=>({handler:o,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let o=n.handlers.length-1;o>=0;o--){const r=n.handlers[o];this._handlers.push(r),r.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,d,h,u,p)=>{this._emitInputEvent(r.priorityIndex+1,l,d,h,p,u)},setPointerCapture:(l,d)=>{this._setPointerCapture(n,r,l,d)},setEventCallback:l=>{r.eventCallback=l},setUninstallCallback:l=>{r.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(s=>{var n;s.removed=!0,(n=s.uninstallCallback)==null||n.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):O.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const n=this._handlers[s];n.priorityIndex=s,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const n=this._handlersPriority[s];n.priorityIndex=s;let o=n.handler.hasSideEffects;if(!o){for(const r of n.handler.outgoingEventTypes)if(e.has(r)){o=!0;break}}if(o)for(const r of n.handler.incomingEventMatches){e.add(r.eventType);for(const l of r.keyModifiers)Eh(l)||t.add(l)}n.active=o}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,s){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(F(n)||n.x!==t||n.y!==s){const o=this._propertiesPool.get("latestPointerLocation");o.x=t,o.y=s,this._set("latestPointerLocation",o)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const o=t;this._pointerCaptures.delete(o.native.pointerId)}this._updateKeyModifiers(e,t);const s=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,n=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,s,n)}_updateKeyModifiers(e,t){if(!t)return;let s=!1;const n=()=>{if(!s){const l=new Set;this._activeKeyModifiers.forEach(d=>{l.add(d)}),this._activeKeyModifiers=l,s=!0}},o=(l,d)=>{d&&!this._activeKeyModifiers.has(l)?(n(),this._activeKeyModifiers.add(l)):!d&&this._activeKeyModifiers.has(l)&&(n(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=t.key;this._keyModifiers.has(l)&&o(l,e==="key-down")}const r=t.native;o("Alt",!(!r||!r.altKey)),o("Ctrl",!(!r||!r.ctrlKey)),o("Shift",!(!r||!r.shiftKey)),o("Meta",!(!r||!r.metaKey)),o("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Ah((e,t,s)=>this._setLatestPointer(e,t,s)),this._multiTouchHandler=new Fh,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],ft.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ft.INTERNAL)}_setPointerCapture(e,t,s,n){const o=e.name+"-"+t.priorityIndex,r=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,r),n?(r.add(o),r.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):r.has(o)&&(r.delete(o),r.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,s,n){this._emitInputEvent(0,e,t,s,n)}_emitInputEvent(e,t,s,n,o,r){const l=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=o!==void 0&&o,h={event:new Rh(t,s,l,r||this._activeKeyModifiers,d),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(e){this._currentPropagation={events:new fo,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,s;const e=yl(this._currentPropagation);for(;e.events.length>0;){const{event:n,priorityIndex:o}=e.events.pop(),r=n.data&&n.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((s=(t=e.currentHandler).eventCallback)==null||s.call(t,n)),n.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new fo;t.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)t.push(s.events.pop());s.events=t,s.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const n of t.handler.incomingEventMatches){if(s.eventType!==n.eventType)continue;const o=s.keyModifiers.filter(r=>n.keyModifiers.includes(r));if(o.length===s.keyModifiers.length!=(o.length===n.keyModifiers.length))return s.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const s of e){let n=0;for(;n<t.length&&this._compareHandlerPriority(s,t[n])>=0;)n++;t.splice(n,0,s)}return t}get debug(){const e=t=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=s};return{injectEvent:(t,s)=>{e(()=>{this._onEventReceived(t,s)})},disablePointerCapture:e}}};a([c({readOnly:!0})],Pe.prototype,"hasPendingInputs",null),a([c({constructOnly:!0})],Pe.prototype,"eventSource",void 0),a([c({constructOnly:!0})],Pe.prototype,"recognizers",void 0),a([c()],Pe.prototype,"_latestPointerType",void 0),a([c()],Pe.prototype,"latestPointerType",null),a([c()],Pe.prototype,"multiTouchActive",null),a([c({readOnly:!0})],Pe.prototype,"latestPointerLocation",void 0),Pe=a([I("esri.views.input.InputManager")],Pe);let Rh=class{constructor(e,t,s,n,o){this.type=e,this.data=t,this.timestamp=s,this.modifiers=n,this.cancelable=o,this._propagationState=gt.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=gt.STOPPED}shouldStopPropagation(){return(this._propagationState&gt.STOPPED)!=0}async(e){this._propagationState|=gt.PAUSED;const t=(s,n)=>{this._propagationState&=~gt.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),n)throw s;return s};return(typeof e=="function"?e():e).then(s=>t(s,!1),s=>t(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&gt.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var gt;(function(i){i[i.NONE=0]="NONE",i[i.STOPPED=1]="STOPPED",i[i.PAUSED=2]="PAUSED"})(gt||(gt={}));const ft={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Lh=class{};const Sh=Lh,ki=W.ofType({key:"type",defaultKeyValue:"button",base:uc,typeMap:{button:Oi,toggle:pc}}),Dh=()=>[Lt.clone()],Vh=()=>[ti.clone(),ii.clone()];let R=class extends Kr(wa){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new yt,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new ki,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Vt({symbol:new mc({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([y(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),y(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),y(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),y(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),y(()=>this.location,e=>this._locationChange(e)),y(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),y(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),y(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),y(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>fh({event:e,view:this.view})),Je(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Fi),y(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),y(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Je(()=>!this.visible,()=>this.browseClusterEnabled=!1),y(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new ki;e.removeAll();const{actions:t,defaultActions:s,defaultPopupTemplateEnabled:n,includeDefaultActions:o,selectedFeature:r}=this,l=o?s.concat(t):t,d=r&&(typeof r.getEffectivePopupTemplate=="function"&&r.getEffectivePopupTemplate(n)||r.popupTemplate),h=d&&d.actions,u=d&&d.overwriteActions?h:h?h.concat(l):l;return u&&u.filter(Boolean).forEach(p=>e.add(p)),e}get defaultActions(){const e=this._get("defaultActions")||new ki;return e.removeAll(),e.addMany(Pt(this.selectedFeature)?Vh():Dh()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:s,promiseCount:n,selectedFeatureIndex:o}=this,r=n&&t.length;r&&s&&o===-1?this.selectedFeatureIndex=0:r&&o!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){var n,o,r;let t=e;const s=(o=(n=this.view)==null?void 0:n.spatialReference)==null?void 0:o.isWebMercator;e&&((r=e==null?void 0:e.spatialReference)!=null&&r.isWGS84)&&s&&(t=Ar(e)),this._set("location",t)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const s=o=>{this._pendingPromises.has(t)&&this._updateFeatures(o),this._updatePendingPromises(t)},n=()=>this._updatePendingPromises(t);t.then(s,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=Ma(this);return t&&e?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new $("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:s}=this;if(!s||!e)throw new $("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:s});return s.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:s}=t;delete t.fetchFeatures,s&&this._setFetchFeaturesPromises(t.location);const n=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const o of n)delete t[o];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Mh(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Pt(t)?(await wh(this),await bh(this)):O.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):O.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Lt.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Pt(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:s}=this;s&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:s,featuresPerPage:n,featureViewModels:o}=this;if(s===null)return;const r=((s-1)*n+t)%t,l=r+n;o.slice(r,l).forEach((d,h)=>{d&&!d.graphic&&(d.graphic=e[r+h])})}async _selectedFeatureChange(e){const{location:t,updateLocationEnabled:s,view:n}=this;if(e&&n){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Pt(e)?void 0:(e.symbol=await nc(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));!s&&t||!e.geometry?s&&!e.geometry&&this.centerAtLocation().then(()=>{var r;const o=(r=n.center)==null?void 0:r.clone();o&&(this.location=o)}):this.location=be(Ia(e.geometry))}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:s,promisesPerLayerView:n}=t,o=Promise.resolve(s),r=n.map(l=>l.promise);this.promises=[o,...r]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:s}=this;if(Pt(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const n=s.slice(0),o=[];t.forEach((r,l)=>{var h,u;if(!r)return;let d=null;if(n.some((p,g)=>(p&&p.graphic===r&&(d=p,n.splice(g,1)),!!d)),d)o[l]=d;else{const p=new Wn({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(h=this.view)==null?void 0:h.spatialReference,graphic:r===e?r:null,map:(u=this.view)==null?void 0:u.map,view:this.view});o[l]=p}}),n.forEach(r=>r&&!r.destroyed&&r.destroy()),this._set("featureViewModels",o)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:s}=this;if(t.remove(e),s&&this.view){const n=this.view.on("click",o=>{o.pointerType==="mouse"&&o.button!==0||this._fetchFeaturesAndOpen(o)},ft.WIDGET);t.add(n,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const s=new AbortController,{signal:n}=s;this._fetchFeaturesController=s,this.notifyChange("waitingForResult");const o=this.fetchFeatures(e,{signal:n,event:t});return o.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),o}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:s}=e,{view:n}=this;this._fetchFeaturesWithController(t,e).then(o=>{var u;const{clientOnlyGraphics:r,promisesPerLayerView:l,location:d}=o,h=[Promise.resolve(r),...l.map(p=>p.promise)];return(u=n==null?void 0:n.popup)==null||u.open({location:d||s,promises:h}),o})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:s}=e;return s&&"layer"in s&&s.layer?s.layer:(s==null?void 0:s.type)==="map-notes"||(s==null?void 0:s.type)==="subtype-group"?s:t}_getHighlightTarget(e,t){const s=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||Ih:null,n=e.attributes;return n&&s&&n[s]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:s,activeFeature:n,visible:o}=this;if(!(n&&s&&t&&o))return;const r=this._getHighlightLayer(n);if(!(r&&r instanceof go))return;const l=this._getLayerView(s,r);this._highlightActiveFeaturePromise=l;const d=await l;if(!(d&&_o(d)&&this._highlightActiveFeaturePromise===l&&this.activeFeature&&this.highlightEnabled))return;const h=d.highlight(this._getHighlightTarget(n,r));this._handles.add(h,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:s,view:n,visible:o}=this;if(!(t&&n&&s&&o))return;const r=this._getHighlightLayer(t);if(!(r&&r instanceof go))return;const l=this._getLayerView(n,r);this._highlightSelectedFeaturePromise=l;const d=await l;if(!(d&&_o(d)&&this._highlightSelectedFeaturePromise===l&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const h=d.highlight(this._getHighlightTarget(t,r));this._handles.add(h,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const s=e.filter(n=>!t.includes(n));this.features=t.concat(s)}};a([c()],R.prototype,"featurePage",void 0),a([c()],R.prototype,"isLoadingFeature",null),a([c({type:ki})],R.prototype,"actions",void 0),a([c({readOnly:!0})],R.prototype,"active",null),a([c()],R.prototype,"activeFeature",void 0),a([c({readOnly:!0})],R.prototype,"allActions",null),a([c({type:Boolean})],R.prototype,"defaultPopupTemplateEnabled",void 0),a([c()],R.prototype,"autoCloseEnabled",void 0),a([c()],R.prototype,"autoOpenEnabled",void 0),a([c()],R.prototype,"browseClusterEnabled",void 0),a([c()],R.prototype,"content",void 0),a([c({type:ki,readOnly:!0})],R.prototype,"defaultActions",null),a([c({readOnly:!0})],R.prototype,"featureCount",null),a([c()],R.prototype,"features",null),a([c()],R.prototype,"featuresPerPage",void 0),a([c()],R.prototype,"featureViewModelAbilities",void 0),a([c({readOnly:!0})],R.prototype,"featureViewModels",void 0),a([c()],R.prototype,"highlightEnabled",void 0),a([c()],R.prototype,"includeDefaultActions",void 0),a([c({type:Y})],R.prototype,"location",null),a([c({readOnly:!0})],R.prototype,"pendingPromisesCount",null),a([c({readOnly:!0})],R.prototype,"selectedClusterBoundaryFeature",void 0),a([c({readOnly:!0})],R.prototype,"waitingForResult",null),a([c({readOnly:!0})],R.prototype,"promiseCount",null),a([c()],R.prototype,"promises",null),a([c({value:null,readOnly:!0})],R.prototype,"selectedFeature",null),a([c({value:-1})],R.prototype,"selectedFeatureIndex",null),a([c({readOnly:!0})],R.prototype,"selectedFeatureViewModel",null),a([c({readOnly:!0})],R.prototype,"state",null),a([c()],R.prototype,"title",void 0),a([c()],R.prototype,"updateLocationEnabled",void 0),a([c()],R.prototype,"view",void 0),a([c()],R.prototype,"visible",void 0),a([c()],R.prototype,"zoomFactor",void 0),a([c()],R.prototype,"zoomToLocation",void 0),a([c()],R.prototype,"centerAtLocation",null),R=a([I("esri.widgets.Popup.PopupViewModel")],R);const Ca=R,Yo="selected-index",Oh=0,Xo="popup-spinner",Jo={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},er="esri-popup";function Be(i,e){return e===void 0?`${er}__${i}`:`${er}__${i}-${e}`}const tr={closeButton:!0,featureNavigation:!0};let T=class extends ya(le){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new yt,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([s])=>{s!=null&&s.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=oi(()=>this._displaySpinner(),Oh),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new W,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new Ca,this.visibleElements={...tr},this._handleOpenRelatedFeature=s=>{this._openRelatedFeature(s)},this._addSelectedFeatureIndexHandle(),this.addHandles([y(()=>{var s;return(s=this.viewModel)==null?void 0:s.screenLocation},()=>this._positionContainer()),y(()=>{var s;return[(s=this.viewModel)==null?void 0:s.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),y(()=>{var s;return(s=this.viewModel)==null?void 0:s.screenLocation},(s,n)=>{!!s!=!!n&&this.reposition()}),y(()=>{var s,n,o,r,l,d;return[(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.padding,(r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.size,(l=this.viewModel)==null?void 0:l.active,(d=this.viewModel)==null?void 0:d.location,this.alignment]},()=>this.reposition()),y(()=>this.spinnerEnabled,s=>this._spinnerEnabledChange(s)),y(()=>{var s,n;return(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.size},(s,n)=>this._updateDockEnabledForViewSize(s,n)),y(()=>{var s;return(s=this.viewModel)==null?void 0:s.view},(s,n)=>this._viewChange(s,n)),y(()=>{var s,n;return(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.ready},(s,n)=>this._viewReadyChange(s??!1,n??!1)),y(()=>{var s,n;return[(s=this.viewModel)==null?void 0:s.waitingForResult,(n=this.viewModel)==null?void 0:n.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),y(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),y(()=>{var s,n,o,r;return[(n=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:n.title,(r=(o=this.selectedFeatureWidget)==null?void 0:o.viewModel)==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),y(()=>{var s,n,o,r;return[(n=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:n.content,(r=(o=this.selectedFeatureWidget)==null?void 0:o.viewModel)==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),Je(()=>!this.collapsed,()=>{var s,n;((n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Ee(()=>{var s;return(s=this.viewModel)==null?void 0:s.allActions},"change",()=>this._watchActions()),y(()=>{var s;return(s=this.viewModel)==null?void 0:s.allActions},()=>this._watchActions(),V),y(()=>{var s;return(s=this.viewModel)==null?void 0:s.featureViewModels},()=>this._featureMenuViewportScrollTop()),Ee(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),y(()=>{var s,n,o,r;return[(n=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:n.state,(r=(o=this._activeFlowItemWidget)==null?void 0:o.viewModel)==null?void 0:r.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([b(()=>import("./calcite-flow-279f632c.js"),["assets/calcite-flow-279f632c.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/observers-90a6df09.js"]),b(()=>import("./calcite-flow-item-37435087.js"),["assets/calcite-flow-item-37435087.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/interactive-1de2e238.js","assets/loadable-6afd516d.js","assets/t9n-155c460a.js","assets/observers-90a6df09.js","assets/guid-51402ee7.js","assets/action-b5010c44.js","assets/icon-840ccd9c.js","assets/loader-839a9276.js","assets/tooltip-6f5f955b.js","assets/debounce-d5abe404.js","assets/scrim-f71cd89d.js"]),b(()=>import("./calcite-action-d13ca74b.js"),["assets/calcite-action-d13ca74b.js","assets/action-b5010c44.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/guid-51402ee7.js","assets/interactive-1de2e238.js","assets/loadable-6afd516d.js","assets/t9n-155c460a.js","assets/observers-90a6df09.js","assets/icon-840ccd9c.js","assets/loader-839a9276.js"]),b(()=>import("./calcite-tooltip-bc2ac1ea.js"),["assets/calcite-tooltip-bc2ac1ea.js","assets/tooltip-6f5f955b.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/debounce-d5abe404.js","assets/guid-51402ee7.js"]),b(()=>import("./calcite-icon-f9a94ef8.js"),["assets/calcite-icon-f9a94ef8.js","assets/icon-840ccd9c.js","assets/jsxFactory-9e4b8e7b.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/intl-71e7974a.js","assets/number-5e819186.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/messages-dc0c80a1.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/assets-7bd3ffcf.js","assets/Evented-3dfb26f2.js","assets/Promise-092442f7.js","assets/reactiveUtils-31da19f9.js","assets/uuid-73213768.js","assets/observers-90a6df09.js"])])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t!=null&&t.content);const s=e.viewModel;if(s!=null&&s.waitingForContent||(s==null?void 0:s.state)==="error")return!0;const n=s==null?void 0:s.content;return Array.isArray(n)?!!n.length:!!n}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Jo}set dockOptions(e){var d,h;const t={...Jo},s=(h=(d=this.viewModel)==null?void 0:d.view)==null?void 0:h.breakpoints,n={};s&&(n.width=s.xsmall,n.height=s.xsmall);const o={...t,...e},r={...t.breakpoint,...n},{breakpoint:l}=o;typeof l=="object"?o.breakpoint={...r,...l}:l&&(o.breakpoint=r),this._set("dockOptions",o),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:s,_flowItems:n}=this,{selectedFeatureViewModel:o}=this.viewModel,r={...t,title:!1};return o?(e?(e.viewModel=o,e.visibleElements=r):this._feature=new uh({flowItems:n,headingLevel:s+1,viewModel:o,visibleElements:r}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...tr,...e}}blur(){const{active:e}=this.viewModel;e||O.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||O.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var o,r;this._handles.remove(Yo);const t=!!e&&!!e.featureMenuOpen,s=!!e&&!!e.actionsMenuOpen,n={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:s,featureMenuOpen:t};((r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&(n.collapsed=!0),this.set(n),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var C,P,A,N;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:s,dividedActions:n,currentAlignment:o,currentDockPosition:r}=this,{active:l}=this.viewModel,{menuActions:d}=n,h=l&&d.length>1&&e,u=l&&t,p=l&&!t,g=(P=(C=this.selectedFeature)==null?void 0:C.layer)==null?void 0:P.title,f=(N=(A=this.selectedFeature)==null?void 0:A.layer)==null?void 0:N.id,M={[_.alignTopCenter]:o==="top-center",[_.alignBottomCenter]:o==="bottom-center",[_.alignTopLeft]:o==="top-left",[_.alignBottomLeft]:o==="bottom-left",[_.alignTopRight]:o==="top-right",[_.alignBottomRight]:o==="bottom-right",[_.isDocked]:u,[_.shadow]:p,[_.isDockedTopLeft]:r==="top-left",[_.isDockedTopCenter]:r==="top-center",[_.isDockedTopRight]:r==="top-right",[_.isDockedBottomLeft]:r==="bottom-left",[_.isDockedBottomCenter]:r==="bottom-center",[_.isDockedBottomRight]:r==="bottom-right",[_.isFeatureMenuOpen]:s,[_.isActionsMenuOpen]:h};return m("div",{class:this.classes(_.base,M),role:"presentation","data-layer-title":g,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},l?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return m("span",{"aria-hidden":"true",class:this.classes(_.icon,_.iconLoading,_.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?m("div",{key:Be("loading-container"),role:"presentation",class:_.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Ve(this.container),t={[_.iconRightTriangleArrow]:e,[_.paginationPreviousIconRTL]:e,[_.iconLeftTriangleArrow]:!e,[_.paginationPreviousIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(_.icon,t)})}renderPreviousButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(_.button,_.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Ve(this.container),t={[_.iconLeftTriangleArrow]:e,[_.paginationNextIconRTL]:e,[_.iconRightTriangleArrow]:!e,[_.paginationNextIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(_.icon,t)})}renderNextButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(_.button,_.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:s}=this,{featureCount:n,selectedFeatureIndex:o}=this.viewModel;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(_.button,_.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":s.menu,title:s.menu},this._getPageText(n,o))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),s={[_.iconUndock]:e,[_.iconDock]:!e,[_.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[_.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[_.iconDockToTop]:!e&&t==="top-center",[_.iconDockToBottom]:!e&&t==="bottom-center"};return m("span",{"aria-hidden":"true",class:this.classes(s,_.icon)})}renderDockButton(){var o,r,l;const{dockEnabled:e,messages:t}=this,s=(r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.widthBreakpoint,n=e?t.undock:t.dock;return s!=="xsmall"&&((l=this.dockOptions)!=null&&l.buttonEnabled)?m("div",{role:"button","aria-label":n,title:n,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(_.button,_.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:s,contentCollapsed:n,messagesCommon:o}=this,r={[_.headerContainerButton]:s},l=m(Ln,{level:this.headingLevel,class:_.headerTitle,innerHTML:e??""}),d=s?m("button",{key:`${e}--collapsible`,id:t,title:n?o.expand:o.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_.headerContainer,r),"aria-expanded":n?"false":"true",onclick:this._toggleCollapsed,type:"button"},l,m("calcite-icon",{class:_.collapseIcon,key:"collapse-icon",icon:n?"chevron-down":"chevron-up",scale:"m"})):m("div",{key:e??"title",id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_.headerContainer,r)},l);return e?d:null}renderCloseIcon(){return m("span",{"aria-hidden":"true",class:this.classes(_.icon,_.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?m("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:_.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return m("header",{class:_.header},this.renderTitle(),m("div",{class:_.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:s,_flowItems:n}=this,{content:o}=this.viewModel,r=n.toArray(),l={[_.contentHasFlows]:!!r.length};return t&&!s?m("div",{key:o??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(_.content,l)},m("calcite-flow",{bind:this},m("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:cs,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),r.map(d=>this.renderFlowItem(d))),r.map(d=>this.renderFlowItemTooltips(d))):null}renderFlowItem(e){const{messages:t}=this,s=dn(),n="graphic"in e&&!e.isTable;return m("calcite-flow-item",{bind:this,class:this.classes({[_.calciteThemeDark]:!s,[_.calciteThemeLight]:s}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},m("calcite-action",{class:_.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:o=>this._storeExitRelatedRecordsAction(e,o),onclick:this._destroyFlowItemWidgets}),n?m("calcite-action",{class:_.actionSelectFeature,icon:"zoom-to-object",label:t==null?void 0:t.selectFeature,text:t==null?void 0:t.selectFeature,slot:"header-actions-end",bind:this,afterCreate:o=>this._storeFeatureSelectionAction(e,o),onclick:()=>this._handleOpenRelatedFeature(e)}):null,m("div",{class:this.classes(_.contentFlowItem,{[_.calciteThemeDark]:s,[_.calciteThemeLight]:!s})},e.render()))}renderFlowItemTooltips(e){const{messages:t,_exitRelatedRecordsActions:s,_featureSelectionActions:n}=this,o=dn(),r=n.get(e);return[m("calcite-tooltip",{class:this.classes({[_.calciteThemeDark]:!o,[_.calciteThemeLight]:o}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:s.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords),r?m("calcite-tooltip",{class:this.classes({[_.calciteThemeDark]:!o,[_.calciteThemeLight]:o}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.selectFeature,overlayPositioning:"fixed",referenceElement:r,placement:"top"},t==null?void 0:t.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:s,dividedActions:n,messagesCommon:o}=this,r=s?o.close:o.open,{menuActions:l}=n;return l.length?m("div",{key:Be("actions-menu-button"),class:this.classes(_.button,_.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":s?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":r,title:r},m("span",{"aria-hidden":"true",class:_.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:s,dividedActions:n}=this,{menuActions:o}=n;return o.length&&s?m("ul",{id:e,role:"menu","aria-labelledby":t,key:Be("actions"),class:_.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},o.toArray().map(r=>this.renderAction({action:r,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(t=>this.renderAction({action:t,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,s=!!e.length,n=!!t.length;return s||n?m("div",{key:"inline-actions-container","data-inline-actions":s.toString(),"data-menu-actions":n.toString(),class:_.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?m("section",{key:Be("navigation"),class:this.classes(_.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:s,menuActions:n}=t,o=!!s.length,r=!!n.length,l={[_.footerHasPagination]:e,[_.footerHasActions]:o,[_.footerHasActionsMenu]:r};return e||o?m("div",{key:Be("feature-buttons"),class:this.classes(_.footer,l)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:s}=this.viewModel,n=Se(e.selectedFeatures,{total:t.length});return m("section",{key:Be("menu"),class:_.featureMenu},m("strong",{class:_.featureMenuHeader},n),m("nav",{bind:this,class:_.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:cs},this.renderFeatureMenu(),m("div",{class:_.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),s?m("div",{class:_.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:m("div",{key:Be("pointer"),class:_.pointer,role:"presentation"},m("div",{class:this.classes(_.pointerDirection,_.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:s,titleId:n,contentId:o,collapsible:r,hasContent:l,contentCollapsed:d,visibleElements:h}=this,{title:u}=this.viewModel,p=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||s==="top-left"||s==="top-center"||s==="top-right",g=t==="top-left"||t==="top-center"||t==="top-right"||s==="bottom-left"||s==="bottom-center"||s==="bottom-right",f={[_.shadow]:e,[_.isCollapsible]:r,[_.isCollapsed]:d};return m("div",{class:this.classes(_.main,_.widget,f),tabIndex:h.closeButton?void 0:-1,role:"dialog","aria-labelledby":u?n:"","aria-describedby":l&&!d?o:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),g?this.renderFooter():null,g?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?m("div",{class:j.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return m("span",{key:"text",class:_.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),s=this._getActionImage(e),n={[_.iconLoading]:e.active,[_.rotating]:e.active,[_.icon]:!!t,[_.actionImage]:!e.active&&!!s};return t&&(n[t]=!e.active),m("span",{key:"icon","aria-hidden":"true",class:this.classes(_.icon,n),styles:this._getIconStyles(s)})}renderAction(e){const{action:t,type:s}=e,n=this._getActionTitle(t),o={[_.action]:t.type!=="toggle",[_.actionToggle]:t.type==="toggle",[_.actionToggleOn]:t.type==="toggle"&&t.value,[_.buttonDisabled]:t.disabled},r=[this.renderActionIcon(t),this.renderActionText(n)],l=s==="menu-item"?m("li",{key:t.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(_.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},r):m("div",{key:t.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(_.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},r);return t.visible?l:null}renderFeatureMenuItem(e,t){const{messages:s,messagesCommon:n}=this,{selectedFeatureIndex:o,selectedFeatureViewModel:r}=this.viewModel,l=e===r,d={[_.featureMenuSelected]:l},h=l?m("span",{key:Be(`feature-menu-selected-feature-${o}`),title:s.selectedFeature,"aria-label":s.selectedFeature,class:_.iconCheckMark}):null,u=m("span",{innerHTML:e.title||n.untitled});return m("li",{role:"menuitem",tabIndex:-1,key:Be(`feature-menu-feature-${o}`),class:this.classes(d,_.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},m("span",{class:_.featureMenuTitle},u,h))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?m("ol",{class:_.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(s=>!!s.graphic).map((s,n)=>this.renderFeatureMenuItem(s,n))):null}_storeFeatureSelectionAction(e,t){this._featureSelectionActions.set(e,t),this.scheduleRender()}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const t=e.graphic,s=t==null?void 0:t.geometry;if(F(s)||F(t))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:s});const n=Ia(s);this.open({features:[t],location:w(n)?n:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){const{messages:t,selectedFeature:s,messagesCommon:n}=this,{id:o}=e,r=s==null?void 0:s.attributes,l=e.title??"",d=o==="zoom-to-feature"?Se(l,{messages:t}):o==="remove-selected-feature"?Se(l,{messages:n}):o==="zoom-to-clustered-features"||o==="browse-clustered-features"?Se(l,{messages:t}):e.title;return d&&r?Se(d,r):d??""}_getActionClass(e){const{selectedFeature:t}=this,s=t==null?void 0:t.attributes,{className:n,image:o}=e,r=o||n?n:_.iconDefaultAction;return r&&s?Se(r,s):r??""}_getActionImage(e){const{selectedFeature:t}=this,s=t==null?void 0:t.attributes,{image:n}=e;return n&&s?Se(n,s):n??""}_createFeatureUpdatedAnimation(){return Vl("enter",_.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const s=Math.round(e);return Math.max(t?s-1:s,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(s=>{this._handles.add(y(()=>[s.uid,s.active,s.className,s.disabled,s.id,s.title,s.image,s.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(r=>r.visible),s=this._getInlineActionCount(),n=s===null,o=s===0;return{inlineActions:n?t.slice(0):o?new W:t.slice(0,s),menuActions:n?new W:o?t.slice(0):t.slice(s)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var s,n;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((s=e.viewModel)==null?void 0:s.state)==="error"?t.errorMessage:((n=e.viewModel)==null?void 0:n.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){kt(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){kt(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,s=e.currentTarget["data-feature-index"];t.activeFeature=t.features[s]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=kt(e),{_featureMenuNode:s}=this,n=e.currentTarget["data-feature-index"];if(!s)return;const o=s.querySelectorAll("li"),r=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(n+1+r)%r].focus()):(e.stopPropagation(),o[(n-1+r)%r].focus())}_handleActionMenuItemKeyup(e){const t=kt(e),{_actionsMenuNode:s}=this,n=e.currentTarget.dataset.actionUid,{menuActions:o}=this.dividedActions,r=o.findIndex(h=>h.uid===n);if(!s)return;const l=s.querySelectorAll("li"),d=l.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),l[l.length-1].focus()):(e.stopPropagation(),l[0].focus()):(e.stopPropagation(),l[(r+1+d)%d].focus()):(e.stopPropagation(),l[(r-1+d)%d].focus())}_handleMainKeyup(e){const t=kt(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:s}=this.viewModel;s&&t?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e!=null&&e.shouldFocus&&(await Rn(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=y(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,s)=>this._selectedFeatureIndexUpdated(t,s));this._handles.add(e,Yo)}_selectedFeatureIndexUpdated(e,t){const{featureCount:s}=this;s&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:s,screenLocation:n,side:o,view:r}=e;if(isNaN(s)||isNaN(t)||!r||!n)return!1;const l=r.padding;return o==="right"&&n.x+s/2>r.width-l.right||o==="left"&&n.x-s/2<l.left||o==="top"&&n.y-t<l.top||o==="bottom"&&n.y+t>r.height-l.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:s,_mainContainerNode:n,viewModel:o}=this,{screenLocation:r,view:l}=o;if(F(r)||!l||!s)return"top-center";if(!this._isScreenLocationWithinView(r,l))return this._get("currentAlignment")||"top-center";function d(H){return parseInt(H.replace(/[^-\d\.]/g,""),10)}const h=n?window.getComputedStyle(n,null):null,u=h?d(h.getPropertyValue("max-height")):0,p=h?d(h.getPropertyValue("height")):0,{height:g,width:f}=s.getBoundingClientRect(),M=f+t,C=Math.max(g,u,p)+t,P=this._isOutsideView({popupHeight:C,popupWidth:M,screenLocation:r,side:"right",view:l}),A=this._isOutsideView({popupHeight:C,popupWidth:M,screenLocation:r,side:"left",view:l}),N=this._isOutsideView({popupHeight:C,popupWidth:M,screenLocation:r,side:"top",view:l}),L=this._isOutsideView({popupHeight:C,popupWidth:M,screenLocation:r,side:"bottom",view:l});return A?N?"bottom-right":"top-right":P?N?"bottom-left":"top-left":N?L?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return Ve(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var l;if(e!=="auto")return e;const t=(l=this.viewModel)==null?void 0:l.view,s=Ve(this.container)?"top-left":"top-right";if(!t)return s;const n=t.padding||{left:0,right:0,top:0,bottom:0},o=t.width-n.left-n.right,{breakpoints:r}=t;return r&&o<=r.xsmall?"bottom-center":s}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:t}=this.viewModel,{width:s}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(t,s);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:s}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+s:e}_calculateAlignmentPosition(e,t,s,n){const{currentAlignment:o,_pointerOffsetInPx:r}=this;if(!s)return;const{padding:l}=s,d=n/2,h=s.height-t,u=s.width-e;return o==="bottom-center"?{top:t+r-l.top,left:e-d-l.left}:o==="top-left"?{bottom:h+r-l.bottom,right:u+r-l.right}:o==="bottom-left"?{top:t+r-l.top,right:u+r-l.right}:o==="top-right"?{bottom:h+r-l.bottom,left:e+r-l.left}:o==="bottom-right"?{top:t+r-l.top,left:e+r-l.left}:o==="top-center"?{bottom:h+r-l.bottom,left:e-d-l.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:s,view:n}=this;if(!n)return;if(s)return{left:"",top:"",right:"",bottom:""};if(F(e)||!t)return;const o=this._calculateFullWidth(t),r=this._calculateAlignmentPosition(e.x,e.y,n,o);return r?{top:r.top!==void 0?`${r.top}px`:"auto",left:r.left!==void 0?`${r.left}px`:"auto",bottom:r.bottom!==void 0?`${r.bottom}px`:"auto",right:r.right!==void 0?`${r.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const s=this.get("viewModel.view");this._wireUpView(s)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,s){const[n,o]=e,[r,l]=t,{width:d=0,height:h=0}=s??{};return n<=d&&r>d||n>d&&r<=d||o<=h&&l>h||o>h&&l<=h}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const s=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},n=s.left+s.right,o=s.top+s.bottom,r=[],l=[];r[0]=e[0]-n,r[1]=e[1]-o,l[0]=t[0]-n,l[1]=t[1]-o;const{dockOptions:d}=this,h=d.breakpoint;this._dockingThresholdCrossed(r,l,h)&&this._setDockEnabledForViewSize(d),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const s=t.active&&!e;t.screenLocationEnabled=s}_shouldDockAtCurrentViewSize(e){var d,h;const t=e.breakpoint,s=(h=(d=this.viewModel)==null?void 0:d.view)==null?void 0:h.ui;if(!s)return!1;const{width:n,height:o}=s;if(isNaN(n)||isNaN(o)||!t)return!1;const r=t.hasOwnProperty("width")&&n<=(t.width??0),l=t.hasOwnProperty("height")&&o<=(t.height??0);return r||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Se(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(e,Xo),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new mh({view:e}),e.ui.add(this._spinner,{key:Xo,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:s}=this.viewModel,n=s.findIndex(r=>r.uid===t),o=s.getItemAt(n);o&&o.type==="toggle"&&(o.value=!o.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(n)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};a([c({readOnly:!0})],T.prototype,"actionsMenuId",null),a([c({readOnly:!0})],T.prototype,"actionsMenuButtonId",null),a([c({readOnly:!0})],T.prototype,"featureMenuId",null),a([c({readOnly:!0})],T.prototype,"titleId",null),a([c({readOnly:!0})],T.prototype,"contentId",null),a([c({readOnly:!0})],T.prototype,"hasContent",null),a([c({readOnly:!0})],T.prototype,"featureNavigationVisible",null),a([c({readOnly:!0})],T.prototype,"collapsible",null),a([c({readOnly:!0})],T.prototype,"featureMenuVisible",null),a([c({readOnly:!0})],T.prototype,"contentCollapsed",null),a([c({readOnly:!0})],T.prototype,"dividedActions",null),a([c({readOnly:!0,dependsOn:["_flowItems.length"]})],T.prototype,"_activeFlowItemWidget",null),a([c()],T.prototype,"actions",null),a([c()],T.prototype,"actionsMenuOpen",null),a([c()],T.prototype,"alignment",void 0),a([c()],T.prototype,"autoCloseEnabled",null),a([c()],T.prototype,"autoOpenEnabled",null),a([c()],T.prototype,"defaultPopupTemplateEnabled",null),a([c()],T.prototype,"content",null),a([c()],T.prototype,"collapsed",void 0),a([c()],T.prototype,"collapseEnabled",void 0),a([c({readOnly:!0})],T.prototype,"currentAlignment",null),a([c({readOnly:!0})],T.prototype,"currentDockPosition",null),a([c()],T.prototype,"dockOptions",null),a([c()],T.prototype,"dockEnabled",void 0),a([c({readOnly:!0})],T.prototype,"featureCount",null),a([c()],T.prototype,"featureMenuOpen",void 0),a([c()],T.prototype,"features",null),a([c()],T.prototype,"goToOverride",null),a([c()],T.prototype,"headingLevel",void 0),a([c()],T.prototype,"highlightEnabled",null),a([c()],T.prototype,"location",null),a([c()],T.prototype,"label",null),a([c()],T.prototype,"maxInlineActions",void 0),a([c(),ae("esri/widgets/Popup/t9n/Popup")],T.prototype,"messages",void 0),a([c(),ae("esri/t9n/common")],T.prototype,"messagesCommon",void 0),a([c()],T.prototype,"promises",null),a([c({readOnly:!0})],T.prototype,"selectedFeature",null),a([c()],T.prototype,"selectedFeatureIndex",null),a([c({readOnly:!0})],T.prototype,"selectedFeatureWidget",null),a([c()],T.prototype,"spinnerEnabled",void 0),a([c()],T.prototype,"title",null),a([c()],T.prototype,"updateLocationEnabled",null),a([c()],T.prototype,"view",null),a([c({type:Ca}),yc(["triggerAction","trigger-action"])],T.prototype,"viewModel",void 0),a([c()],T.prototype,"visible",null),a([c()],T.prototype,"visibleElements",void 0),a([Ce("visibleElements")],T.prototype,"castVisibleElements",null),a([Me()],T.prototype,"_close",null),a([Me()],T.prototype,"_toggleDockEnabled",null),a([Me()],T.prototype,"_toggleFeatureMenu",null),a([Me()],T.prototype,"_toggleActionsMenu",null),a([Me()],T.prototype,"_triggerAction",null),a([Me()],T.prototype,"_selectFeature",null),a([Me()],T.prototype,"_next",null),a([Me()],T.prototype,"_previous",null),T=a([I("esri.widgets.Popup")],T);const ir=T,Ys=[0,0];function Nh(i){const e=(i.ownerDocument||window.document).defaultView,t=i.getBoundingClientRect();return Ys[0]=t.left+((e==null?void 0:e.pageXOffset)??0),Ys[1]=t.top+((e==null?void 0:e.pageYOffset)??0),Ys}function sr(i){i&&(Nr(i),i.parentNode&&i.parentNode.removeChild(i))}function zh(i){const e=document.createElement("div");return i.appendChild(e),e}const gi=16,Gi=750,Bh=512,qh=2,Uh=i=>{let e=class extends i{constructor(...t){var s;super(...t),this._freqInfo={freq:gi,time:Gi},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,t.length!==0&&((s=t[0])==null?void 0:s.popup)!==void 0||(this.popup=new ir({view:this})),this.handles.add([y(()=>this.cursor,n=>{const{surface:o}=this;o&&o.setAttribute("data-cursor",n)}),y(()=>this.interacting,n=>{const{surface:o}=this;o&&o.setAttribute("data-interacting",n.toString())})])}initialize(){this.handles.add(y(()=>this.ui,(t,s)=>this._handleUIChange(t,s))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=re(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(t){const s=this._get("container"),n=Or(t);if(n||typeof t!="string"||O.getLogger(this.declaredClass).error("#container",`element with id '${t}' not found`),s===n)return;const o="dom-size";if(this.handles.remove(o),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(sr(this.root),this._set("root",null)),this.userContent&&(co(this.userContent,s),sr(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const r=document.createElement("div");r.className="esri-view-user-storage",co(n,r),n.appendChild(r),this._set("userContent",r);const l=document.createElement("div");l.className="esri-view-root",n.insertBefore(l,n.firstChild),this._set("root",l);const d=document.createElement("div");d.className="esri-view-surface",d.setAttribute("role","application"),d.tabIndex=0,l.appendChild(d),this._set("surface",d);const h=new To;l.appendChild(h.surface),this._set("overlay",h),y(()=>h.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=ai({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Xe(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(y(()=>this.size,u=>{const[p,g]=u,f="esri-view-surface--inset-outline";p>=document.body.clientWidth||g>=document.body.clientHeight?d.classList.add(f):d.classList.remove(f)},V),o),this._set("container",n),this._startMeasuring()}get focused(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}set popup(t){const s=this._get("popup");s&&s!==t&&s.destroy(),this._set("popup",t)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(t,s,n){const o=this.position;return t-=o?o[0]:0,s-=o?o[1]:0,n?(n[0]=t,n[1]=s):n=[t,s],n}containerToPage(t,s,n){const o=this.position;return t+=o?o[0]:0,s+=o?o[1]:0,n?(n[0]=t,n[1]=s):n=[t,s],n}_handleUIChange(t,s){s&&(this.handles.remove("ui"),s.destroy()),t&&this._wireUI(t),this._set("ui",t)}_wireUI(t){this.handles.remove("ui"),t&&(t.view=this,this.handles.add([y(()=>this.root,s=>{t.container=s?zh(s):null},V),y(()=>this.popup,(s,n)=>{const o="popup",r="manual";n&&t.remove(n,o),s&&(s.view=t.view,t.add(s,{key:o,position:r}))},V)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const t=this._freqInfo;t.freq=gi,t.time=Gi,this.handles.add([(()=>{const s=()=>{t.freq=gi,t.time=Gi};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),ai({prepare:s=>{const n=this._measure(),o=this._freqInfo;if(o.time+=s.deltaTime,n&&(o.freq=gi,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const r=this._position();o.freq=r||n?gi:Math.min(Gi,o.freq*qh),!n&&o.freq>=Bh&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const t=this.container,s=t?t.clientWidth:0,n=t?t.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,r=this.height;return s===o&&n===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:r,width:s,height:n}),!0)}_position(){const t=this.container,s=this.position,n=t&&Nh(t);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return a([c()],e.prototype,"container",null),a([c({readOnly:!0})],e.prototype,"focused",null),a([c({readOnly:!0})],e.prototype,"height",void 0),a([c({type:ir})],e.prototype,"popup",null),a([c({type:To})],e.prototype,"overlay",void 0),a([c({readOnly:!0})],e.prototype,"position",void 0),a([c({readOnly:!0})],e.prototype,"resizing",void 0),a([c({readOnly:!0})],e.prototype,"root",void 0),a([c({value:null,readOnly:!0})],e.prototype,"size",null),a([c({readOnly:!0})],e.prototype,"surface",void 0),a([c({readOnly:!0})],e.prototype,"suspended",void 0),a([c()],e.prototype,"ui",void 0),a([c({readOnly:!0})],e.prototype,"userContent",void 0),a([c({readOnly:!0})],e.prototype,"width",void 0),a([c()],e.prototype,"widthBreakpoint",void 0),e=a([I("esri.views.DOMContainer")],e),e},Hh=i=>{let e=class extends i{async fetchPopupFeatures(t,s){await this.when();const{location:n,queryArea:o,layerViewsAndGraphics:r,clientOnlyGraphics:l}=await this._prepareFetchPopupFeatures(t,s),d=Promise.resolve(l),h=this._queryLayerPopupFeatures(o,r,s),u=h.map(p=>p.promise);return{location:n,clientOnlyGraphics:l,allGraphicsPromise:Al([d,...u]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:h}}_queryLayerPopupFeatures(t,s,n){return s.map(({layerView:o,graphics:r})=>{const l={clientGraphics:r,event:w(n)?n.event:void 0,signal:w(n)?n.signal:void 0,defaultPopupTemplateEnabled:!!w(n)&&!!n.defaultPopupTemplateEnabled},d=o.fetchPopupFeatures(t,l);return{layerView:o,promise:d}})}_isValidPopupGraphic(t,s){return t&&!!t.getEffectivePopupTemplate(w(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,s){const{clientGraphics:n,queryArea:o,location:r}=await this._popupHitTestGraphics(t,s),l=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:d,clientOnlyGraphics:h}=this._graphicsPerFetchPopupLayerView(n,l);return{clientOnlyGraphics:h,layerViewsAndGraphics:d,queryArea:o,location:r}}async _popupHitTestGraphics(t,s){const n=await this.popupHitTest(t),o=n.results,r=n.mapPoint,l=o.filter(h=>h.type==="graphic"&&this._isValidPopupGraphic(h.graphic,s)),d=l.length?l[0].mapPoint:null;return{clientGraphics:l.map(h=>h.graphic),queryArea:r,location:r||d}}_getFetchPopupLayerViews(){const t=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&t.push(s)}),w(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return w(t)&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,s){const n=[],o=new Map,r=s.map(l=>{const d=[];return"layer"in l?o.set(l.layer,d):o.set(l.graphics,d),{layerView:l,graphics:d}});for(const l of t){const d=o.get(l.layer)||o.get(l.sourceLayer)||null;d?d.push(l):n.push(l)}return{layerViewsAndGraphics:r,clientOnlyGraphics:n}}};return e=a([I("esri.views.PopupView")],e),e};let gs=class extends Cc{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{F(t.item)||t.item.parent===this.owner&&(O.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};gs=a([I("esri.support.AnalysesCollection")],gs);let lt=class extends D{constructor(e){super(e),this.view=null,this.baseLayerViews=new W,this.referenceLayerViews=new W,this._loadingHandle=y(()=>{var t,s;return(s=(t=this.view)==null?void 0:t.map)==null?void 0:s.basemap},t=>{t&&t.load().catch(()=>{})},V)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,s;if(this.view&&this.view.suspended)return!1;const e=(s=(t=this.view)==null?void 0:t.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};a([c({constructOnly:!0})],lt.prototype,"view",void 0),a([c({readOnly:!0})],lt.prototype,"baseLayerViews",void 0),a([c({readOnly:!0})],lt.prototype,"referenceLayerViews",void 0),a([c({readOnly:!0})],lt.prototype,"suspended",null),a([c({type:Boolean,readOnly:!0})],lt.prototype,"updating",null),lt=a([I("esri.views.BasemapView")],lt);function jh(i){return"tryRecycleWith"in i}class Gh{constructor(e,t,s){this.layer=e,this.view=t,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=Dr(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ps(this._controller.signal,()=>{const n=new $("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!jh(this.layerView))return null;const t=this.layer.type,s=this._controller.signal;for(let n=0;n<e.length;n++){const o=e[n];if(o.type!==t)continue;const r=this.layerView.tryRecycleWith(o,{signal:s});if(r){e.splice(n,1),this.layer=o;const l=this.layerView,d=l.view;return this.promise=Promise.race([r.then(()=>(ni(this._controller.signal),o.emit("layerview-destroy",{view:d,layerView:l}),d.emit("layerview-destroy",{view:d,layerView:l}),o.emit("layerview-create",{view:d,layerView:l}),d.emit("layerview-create",{view:d,layerView:l}),l)),new Promise((h,u)=>Ps(this._controller.signal,()=>u(Vr())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:t,view:s}=this;t.emit("layerview-destroy",{view:s,layerView:e}),s.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,o,r;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:s}=this;this._map=s.map;try{let l,d;if(await t.load({signal:e}),"prefetchResources"in t&&await((n=t.prefetchResources)==null?void 0:n.call(t,{signal:e})),Zh(t))l=await t.createLayerView(s,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new $("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(t);ni(e),l="default"in p?new p.default({layer:t,view:s}):new p({layer:t,view:s})}const h=()=>{d=Xe(d),l.destroyed||l.destroy(),l.layer=null,l.parent=null,l.view=null,this.done=!0};d=Ps(e,h),ni(e);try{await l.when()}catch(p){throw h(),p}if(!((r=(o=this._map)==null?void 0:o.allLayers)==null?void 0:r.includes(t)))return h(),void this._deferred.reject(new $("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=l,t.emit("layerview-create",{view:s,layerView:l}),s.emit("layerview-create",{layer:t,layerView:l}),this.done=!0,this._deferred.resolve(l)}catch(l){t.emit("layerview-create-error",{view:s,error:l}),s.emit("layerview-create-error",{layer:t,error:l}),this.done=!0,this._deferred.reject(new $("layerview:create-error","layerview creation failed",{layer:t,error:l}))}}}let we=class extends D{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Br,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var s;const t=(s=this.view.map)==null?void 0:s.allLayers;if(t)for(const n of t)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>(F(this._workPromise)&&(this._workPromise=Dr(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(zl(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var d,h,u;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),F(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const s=new Set,n=[],o=this.view.ready,r=p=>{if(!F(p)){for(const g of p)if(g){s.add(g);const f=this._layerLayerViewInfoMap.get(g);f&&o?f.start():f||this._recyclingInfoMap.has(g)||n.push(g),"layers"in g&&g.layers&&r(g.layers)}}};for(const p of this._rootCollectionNames)r(this.get(p));for(const[p,g]of this._layerLayerViewInfoMap)if(!s.has(p)){this._layerLayerViewInfoMap.delete(g.layer);const f=g.tryRecycle(n);f?(this._recyclingInfoMap.set(g.layer,g),f.then(()=>{this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule()})):g.destroy()}for(const[p,g]of this._recyclingInfoMap)s.has(p)||(this._recyclingInfoMap.delete(g.layer),g.destroy());for(const p of n)this._createLayerView(p);this._refreshCollections();const l=[(d=t==null?void 0:t.ground)==null?void 0:d.layers,(h=t==null?void 0:t.basemap)==null?void 0:h.baseLayers,(u=t==null?void 0:t.basemap)==null?void 0:u.referenceLayers,t==null?void 0:t.layers].filter(p=>!!p);s.forEach(p=>"layers"in p&&l.push(p.layers)),this.addHandles(l.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Ee(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),y(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),bt)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,w(this._workPromise)&&(this._workPromise.reject(Vr()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return w(this._workPromise)||this._watchUpdatingTracking.updating||ys(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new $("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,s){if(!e||!t)return void(t&&t.removeAll());let n=0;for(const o of e){const r=this._layerLayerViewInfoMap.get(o);if(!r||!r.layerView)continue;const l=r.layerView;l.layer=o,l.parent=s,t.getItemAt(n)!==l&&t.splice(n,0,l),o.layers&&this._populateLayerViewsOwners(o.layers,l.layerViews,l),n+=1}n<t.length&&t.splice(n,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new Gh(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),s=>{s&&(Sr(s)||s.name==="cancelled:layerview-create")||O.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:s}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};a([c()],we.prototype,"_workPromise",void 0),a([c({readOnly:!0})],we.prototype,"_watchUpdatingTracking",void 0),a([c({readOnly:!0})],we.prototype,"_layersToLayerViews",null),a([c({readOnly:!0})],we.prototype,"_rootCollectionNames",null),a([c()],we.prototype,"layerViewImporter",void 0),a([c()],we.prototype,"supportsGround",void 0),a([c({readOnly:!0})],we.prototype,"updating",null),a([c({readOnly:!0})],we.prototype,"updatingRemaining",null),a([c({constructOnly:!0})],we.prototype,"view",void 0),we=a([I("esri.views.LayerViewManager")],we);const Wh=we;function Zh(i){return"createLayerView"in i&&i.createLayerView!=null}let ye=class extends D{constructor(e){super(e),this.factor=1.5,this.offset=pe(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};a([c({type:Number})],ye.prototype,"factor",void 0),a([c({nonNullable:!0})],ye.prototype,"offset",void 0),a([c()],ye.prototype,"position",void 0),a([c({type:Number,range:{min:0}})],ye.prototype,"size",void 0),a([c()],ye.prototype,"maskUrl",void 0),a([c()],ye.prototype,"maskEnabled",void 0),a([c()],ye.prototype,"overlayUrl",void 0),a([c()],ye.prototype,"overlayEnabled",void 0),a([c({readOnly:!0})],ye.prototype,"version",null),a([c({type:Boolean})],ye.prototype,"visible",void 0),ye=a([I("esri.views.Magnifier")],ye);const Ta=ye;let Ci=class extends D{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(t==null?void 0:t.registerTask(fc.TEXTURE_UNLOAD))??_c}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,s){const n=this.makeUid(e);let o=this._textureRequests.get(n);if(!o){const r=t();o={referenceCount:0,texture:r,textureAsync:null,abortController:null,onRemove:s},this._stage&&(this._stage.add(r),this._stage.loadImmediate(r)),this._textureRequests.set(n,o)}return o.referenceCount++,{uid:n,texture:o.texture,release:()=>this._release(n)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return w(t)?`${e}.${t}px`:e}};a([c()],Ci.prototype,"_frameTask",void 0),a([c()],Ci.prototype,"updating",null),Ci=a([I("esri.views.3d.support.TextureCollection")],Ci);var nr;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right"})(nr||(nr={}));const xa=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Ea={};function $a(i){return!!Ea[i]}function Kh(i){for(const e of i)if(!$a(e))return!1;return!0}xa.forEach(i=>{Ea[i]=!0});let Qh=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:t,priority:s},n)=>{var o;return(o=this.inputManager)==null?void 0:o.installHandlers(n,[t],s)})}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>{var s;return(s=this.inputManager)==null?void 0:s.uninstallHandlers(t)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,s,n){const o=Array.isArray(e)?e:e.split(",");if(!Kh(o))return o.some($a)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let r,l;Array.isArray(t)?l=t:(r=t,l=[]),typeof s=="function"?r=s:n=s,n=n??ft.DEFAULT;const d=this._createUniqueGroupName(),h=new Yh(this.view,o,l,r);this._handlers.set(d,{handler:h,priority:n});for(const u of o){const p=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,p+1)}return this.inputManager&&this.inputManager.installHandlers(d,[h],n),{remove:()=>this._removeHandler(d,o)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const s of t){const n=this._handlerCounts.get(s);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):n===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Yh=class extends te{constructor(e,t,s,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const o of t)switch(o){case"click":this.registerIncoming("click",s,r=>n(this._wrapClick(r)));break;case"double-click":this.registerIncoming("double-click",s,r=>n(this._wrapDoubleClick(r)));break;case"immediate-click":this.registerIncoming("immediate-click",s,r=>n(this._wrapImmediateClick(r)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,r=>n(this._wrapImmediateDoubleClick(r)));break;case"hold":this.registerIncoming("hold",s,r=>n(this._wrapHold(r)));break;case"drag":this.registerIncoming("drag",s,r=>{const l=this._wrapDrag(r);l&&n(l)});break;case"key-down":this.registerIncoming("key-down",s,r=>n(this._wrapKeyDown(r)));break;case"key-up":this.registerIncoming("key-up",s,r=>n(this._wrapKeyUp(r)));break;case"pointer-down":this.registerIncoming("pointer-down",s,r=>n(this._wrapPointer(r,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,r=>n(this._wrapPointer(r,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,r=>n(this._wrapPointer(r,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,r=>n(this._wrapPointerDrag(r)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,r=>n(this._wrapMouseWheel(r)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,r=>n(this._wrapPointer(r,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,r=>n(this._wrapPointer(r,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,r=>{n(this._wrapGamepad(r))});break;case"focus":this.registerIncoming("focus",s,r=>{n(this._wrapFocus(r))});break;case"blur":this.registerIncoming("blur",s,r=>{n(this._wrapBlur(r))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,{cancelable:h,timestamp:u}=e;return{type:"click",pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:u,screenPoint:pe(o,r),mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,{cancelable:h,timestamp:u}=e;return{type:"double-click",pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:u,mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,h=l.pointerId,{cancelable:u,timestamp:p}=e;return{type:"immediate-click",pointerId:h,pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:p,mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,h=l.pointerId,{cancelable:u,timestamp:p}=e;return{type:"immediate-double-click",pointerId:h,pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:p,mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l}=e.data,{cancelable:d,timestamp:h}=e;return{type:"hold",pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:h,mapPoint:this._getMapPoint(o,r),cancelable:d,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap(pe(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:s,y:n}=t.center,{action:o,pointerType:r,button:l}=t;if(o==="start"&&(this._latestDragStart=t),!this._latestDragStart)return;const d=t.pointer.native,h=t.buttons,{cancelable:u,timestamp:p}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:s,y:n,origin:g,pointerType:r,button:l,buttons:h,radius:t.radius,angle:fl(t.angle),native:d,timestamp:p,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:s,native:n}=e.data,{cancelable:o,timestamp:r}=e;return{type:"key-down",key:t,repeat:s,native:n,timestamp:r,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:s}=e.data,{cancelable:n,timestamp:o}=e;return{type:"key-up",key:t,native:s,timestamp:o,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:s,y:n,button:o,buttons:r,native:l,eventId:d}=e.data,h=l.pointerId,u=l.pointerType,{cancelable:p,timestamp:g}=e;return{type:t,x:s,y:n,pointerId:h,pointerType:u,button:o,buttons:r,native:l,timestamp:g,eventId:d,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:s,buttons:n,native:o,eventId:r}=e.data.currentEvent,{button:l}=e.data.startEvent,d=e.data.startEvent.native.pointerId,h=e.data.startEvent.native.pointerType,u=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:g,timestamp:f}=e;return{type:"pointer-drag",x:t,y:s,pointerId:d,pointerType:h,button:l,buttons:n,action:u,origin:p,native:o,timestamp:f,eventId:r,cancelable:g,stopPropagation:()=>e.stopPropagation(),async:M=>e.async(M),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:s,timestamp:n}=e,{x:o,y:r,deltaY:l,native:d}=s;return{type:"mouse-wheel",x:o,y:r,deltaY:l,native:d,timestamp:n,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:s,device:n}=e.data,{cancelable:o,timestamp:r}=e,{buttons:l,axes:d}=s;return{type:"gamepad",device:n,timestamp:r,action:t,buttons:l,axes:d,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}};var Di,or,rr;(function(i){i[i.USER=0]="USER",i[i.MANAGER=1]="MANAGER"})(Di||(Di={})),function(i){i[i.None=0]="None",i[i.Unfocused=1]="Unfocused",i[i.Focused=2]="Focused",i[i.Unselected=4]="Unselected",i[i.Selected=8]="Selected",i[i.All=15]="All"}(or||(or={})),function(i){i[i.None=0]="None",i[i.Custom1=16]="Custom1",i[i.Custom2=32]="Custom2",i[i.Custom3=64]="Custom3",i[i.Custom4=128]="Custom4",i[i.Custom5=256]="Custom5",i[i.Custom6=512]="Custom6",i[i.Custom7=1024]="Custom7",i[i.Custom8=2048]="Custom8",i[i.Custom9=4096]="Custom9",i[i.Custom10=8192]="Custom10",i[i.Custom11=16384]="Custom11",i[i.Custom12=32768]="Custom12",i[i.All=65520]="All"}(rr||(rr={}));function Xh(i){return[i.on("before-add",e=>{const t=e.item;if(t==null||i.includes(t))return O.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();t.onAdd()}),i.on("after-remove",e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()})]}function vn(i){return i.visible&&i.getEditableFlag!=null&&i.getEditableFlag(Di.USER)&&i.getEditableFlag(Di.MANAGER)}function Ae(i){return pe(i.x,i.y)}function ka(i,e){var s;const t=(s=i instanceof HTMLElement?i:i.surface)==null?void 0:s.getBoundingClientRect();return t?pe(e.clientX-t.left,e.clientY-t.top):pe(0,0)}function ar(i,e){return e instanceof Event?ka(i,e):Ae(e)}function lr(i){if(i instanceof Event)return!0;if(typeof i=="object"&&"type"in i)switch(i.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Jh=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,t){const s=()=>e.stopPropagation();switch(e.type){case"pointer-move":cr(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!dr(e))break;const n=Ae(e),o=this._intersect(n,e.pointerType,t.forEachTool);if(F(o))break;const r=o.manipulator,l=o.tool;!(w(r)&&w(l)&&r.interactive)||r.grabbable&&r.grabbableForEvent(e)||!r.grabbing||r.dragging||this._ungrabManipulatorBeforeDragging(r,e,t),w(r)&&w(l)&&r.interactive&&r.grabbable&&r.grabbableForEvent(e)&&!r.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:r,tool:l,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&F(t.activeTool)&&(this._revertToNullActiveTool=!0,t.setActiveTool(o.tool)),r.grabbing=!0,r.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),s());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!dr(e))break;const n=this._grabbedManipulators.get(e.pointerId),o=wi(n,({manipulator:u})=>u),r=wi(n,({tool:u})=>u);if(F(o)||F(r))break;const l=Ae(e);l.x=Ai(l.x,0,t.view.width),l.y=Ai(l.y,0,t.view.height);const d=be(n).start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,h?o.events.emit("drag",{action:"update",start:d,screenPoint:l}):o.events.emit("drag",{action:"start",start:d,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:r,manipulator:o,start:d}));break;case"end":o.dragging=!1,h&&o.events.emit("drag",{action:"end",start:d,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}s();break}case"immediate-click":{const n=Ae(e),o=this._intersect(n,e.pointerType,t.forEachTool);if(eu(e)||t.forEachTool(h=>{if((!w(o)||o.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let u=!1;h.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,u=!0)}),u&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),F(o))break;const{manipulator:r,tool:l}=o;if(!r.interactive)break;r.selectable&&l.automaticManipulatorSelection&&(r.selected=!r.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const d=e.native.shiftKey;r.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:d,stopPropagation:s});break}case"click":{const n=Ae(e),o=this._intersect(n,e.pointerType,t.forEachTool),r=w(o)?o.manipulator:null;if(F(r)||!r.interactive)break;const l=e.native.shiftKey;r.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l}),s();break}case"double-click":{const n=Ae(e),o=this._intersect(n,e.pointerType,t.forEachTool),r=w(o)?o.manipulator:null;if(F(r)||!r.interactive)break;const l=e.native.shiftKey;r.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:s});break}case"immediate-double-click":{const n=Ae(e),o=this._intersect(n,e.pointerType,t.forEachTool),r=w(o)?o.manipulator:null;if(F(r)||!r.interactive)break;const l=e.native.shiftKey;r.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:s});break}}this._onFocusChange(t.forEachTool)}_ungrabManipulatorBeforeDragging(e,t,s){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Ae(t)}),this._grabbedManipulators.forEach(({manipulator:n},o)=>{n===e&&this._grabbedManipulators.delete(o)}),this._afterManipulatorUngrab(s.setActiveTool)}_handlePointerEnd(e,t){const s=wi(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);F(s)||s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Ae(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(t.setActiveTool))}_cursorFromMap(e){let t=null;return ys(e,({manipulator:s})=>!(F(s)||!s.interactive)&&(s.grabbing&&s.grabCursor?(t=s.grabCursor,!0):!!s.cursor&&(t=s.cursor,!0))),t}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:n})=>{t.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{s.add(n)}),e(n=>{n.hasGrabbedManipulators=t.has(n),n.hasHoveredManipulators=s.has(n);const o=this._grabbedManipulators.values(),r=ml(o,({tool:l})=>l===n);n.firstGrabbedManipulator=w(r)?r.manipulator:null})}clearPointers(e,{forEachTool:t,setActiveTool:s},n=!0,o){const r=(l,d)=>l===e&&(F(o)||o===d);this._grabbedManipulators.forEach(({tool:l,manipulator:d,pointerType:h},u)=>{r(l,d)&&(this._grabbedManipulators.delete(u),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:l,manipulator:d},h)=>{r(l,d)&&(this._draggedManipulators.delete(h),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:l,manipulator:d},h)=>{r(l,d)&&(this._hoveredManipulators.delete(h),d.hovering=!1)}),this._afterManipulatorUngrab(s),this._onFocusChange(t)}_intersect(e,t,s){let n=null;return s(o=>{if(o.manipulators==null||!vn(o))return!1;const r=o.manipulators.intersect(e,t);return!F(r)&&(n={tool:o,manipulator:r},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,s)=>{this._updateHoveredStateForPointerAtScreenPosition(pe(t.x,t.y),s,t.pointerType,e)})}handleHoverEvent(e,t){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!cr(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Ae(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,s,n){let o=this._intersect(e,s,n);const r=wi(this._hoveredManipulators.get(t),({manipulator:l})=>l);w(o)&&!o.manipulator.interactive&&(o=null),w(o)&&r===o.manipulator||(w(r)&&(r.hovering=!1),w(o)?(o.manipulator.hovering=!0,this._hoveredManipulators.set(t,o)):this._hoveredManipulators.delete(t),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function cr(i){return i==="mouse"}function dr(i){return i.pointerType!=="mouse"||i.button===0}function eu(i){return!!i.native.shiftKey}const hr="attached",Xs="tools";let Ge=class extends qr{constructor(e){super(e),this._manipulatorState=new Jh,this.tools=new W,this.cursor=null,this._forEachTool=t=>{for(const s of this.tools.items)if(t(s))return}}initialize(){this.handles.add([this.view.on(xa,e=>{this._handleInputEvent(e)},ft.TOOL),...Xh(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(w(e)&&!this.view.ready)return void O.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),w(t)&&t.deactivate(),w(e)&&e.activate(),this._removeIncompleteTools(e);for(const s of this.tools){this._updateToolEditableFlag(s);const n=vn(s);!F(this.activeTool)&&n||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(t=>t.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}attach(){var e;this.view.type==="3d"?(this._set("textures",new Ci(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([y(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",t=>this._forEachManipulator(s=>s.onElevationChange(t))),zr(()=>this._set("textures",re(this.textures)))],hr)):this.handles.add(y(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){w(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(hr)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:s})=>e(s,t))})}_handleInputEvent(e){let t=!1;const s={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};w(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool(n=>{!t&&n.visible&&n.handleInputEvent(s)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),!t&&w(this.activeTool)&&this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Xs),this._forEachTool(e=>{if(e instanceof D){const t=y(()=>[e.cursor,e.visible,e.editable],()=>{vn(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,Xs)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Xs)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var t;(t=e.setEditableFlag)==null||t.call(e,Di.MANAGER,F(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;F(e)&&this._forEachTool(t=>!(!w(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(F(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};a([c({constructOnly:!0,nonNullable:!0})],Ge.prototype,"view",void 0),a([c({readOnly:!0,nonNullable:!0})],Ge.prototype,"textures",void 0),a([c({value:null})],Ge.prototype,"activeTool",null),a([c({readOnly:!0,type:W})],Ge.prototype,"tools",void 0),a([c({readOnly:!0})],Ge.prototype,"cursor",void 0),a([c({readOnly:!0})],Ge.prototype,"updating",null),Ge=a([I("esri.views.ToolViewManager")],Ge);const tu=Ge;let Kt=class extends D{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":iu.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return su[this.deviceType]}};a([c({nonNullable:!0,readOnly:!0})],Kt.prototype,"nativeIndex",void 0),a([c({type:String,readOnly:!0})],Kt.prototype,"deviceType",null),a([c({type:Number,readOnly:!0})],Kt.prototype,"axisThreshold",null),Kt=a([I("esri.views.input.gamepad.GamepadInputDevice")],Kt);const iu=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),su={standard:.15,spacemouse:.025,unknown:0},Kn=Kt;let Ti=class extends D{constructor(...e){super(...e),this.devices=new W,this.enabledFocusMode="document"}};a([c({type:W.ofType(Kn),readOnly:!0})],Ti.prototype,"devices",void 0),a([c({type:["document","view","none"]})],Ti.prototype,"enabledFocusMode",void 0),Ti=a([I("esri.views.input.gamepad.GamepadSettings")],Ti);const nu=Ti;let is=class extends D{constructor(){super(...arguments),this.gamepad=new nu}};a([c({readOnly:!0})],is.prototype,"gamepad",void 0),is=a([I("esri.views.input.Input")],is);const ou=is;let ct=class extends D{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};a([c({type:Boolean,nonNullable:!0})],ct.prototype,"enabled",void 0),a([c({type:Kn})],ct.prototype,"device",void 0),a([c({type:["pan","zoom"],nonNullable:!0})],ct.prototype,"mode",void 0),a([c({type:["forward-down","forward-up"],nonNullable:!0})],ct.prototype,"tiltDirection",void 0),a([c({type:Number,nonNullable:!0})],ct.prototype,"velocityFactor",void 0),ct=a([I("esri.views.navigation.gamepad.GamepadSettings")],ct);const Pa=ct;let Ct=class extends D{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Pa,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};a([c({type:Boolean})],Ct.prototype,"browserTouchPanEnabled",void 0),a([c({type:Pa,nonNullable:!0})],Ct.prototype,"gamepad",void 0),a([c({type:Boolean})],Ct.prototype,"momentumEnabled",void 0),a([c({type:Boolean})],Ct.prototype,"mouseWheelZoomEnabled",void 0),Ct=a([I("esri.views.navigation.Navigation")],Ct);const Aa=Ct;var ur;function ru(i){var s;const e=i.url?Tc(i.url):void 0;return!(((s=i.spatialReference)==null?void 0:s.vcsWkid)==null&&w(e)&&e.serverType==="ImageServer")&&Fa(i)&&i.heightModelInfo?i.heightModelInfo:au(i)?Vn.deriveUnitFromSR(cu,i.spatialReference):null}function Fa(i){return"heightModelInfo"in i}function Ra(i){if(i.type==="unknown"||!("capabilities"in i))return!1;switch(i.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function au(i){return Ra(i)?!!(i.capabilities&&i.capabilities.data&&i.capabilities.data.supportsZ):La(i)}function lu(i){return i.layers!=null||La(i)||Ra(i)||Fa(i)}function La(i){switch(i.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(i){i[i.Ok=0]="Ok",i[i.Units=1]="Units",i[i.HeightModel=2]="HeightModel",i[i.CRS=3]="CRS",i[i.Unsupported=4]="Unsupported"})(ur||(ur={}));const cu=new Vn({heightModel:"gravity-related-height"});let wn,Js=null;async function du(i){Js||(Js=b(()=>import("./geometryServiceUtils-e5bdd1b2.js"),["assets/geometryServiceUtils-e5bdd1b2.js","assets/Error-781981d1.js","assets/string-75082bc6.js","assets/typedArrayUtil-74bbfd45.js","assets/Portal-c7b19d88.js","assets/preload-helper-fb43855a.js","assets/Accessor-815cb0cf.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/ensureType-125d327f.js","assets/request-6e1d5843.js","assets/JSONSupport-2b897629.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/Extent-8fae2379.js","assets/cast-f7d2a22f.js","assets/locale-30120714.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/project-bfd3abf8.js","assets/jsonUtils-15ca15d7.js","assets/Polyline-40b9e769.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js"]).then(e=>wn=e)),await Js,ni(i)}async function Sa(i,e,t,s){if(!i)return null;const n=i.spatialReference;return Ri()||ws(n,e)?Vi(i,e):wn?wn.projectGeometry(i,e,t,s):(await Promise.race([du(s),bs(s)]),Sa(i,e,t,s))}let B=class extends D{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ln(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return w(this.userSpatialReference)?this.userSpatialReference:be(this._spatialReferenceTask.spatialReference)}get extent(){return be(this._extentTask.extent)}get heightModelInfo(){return be(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return be(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return be(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return F(this.userSpatialReference)||this.userSpatialReference.equals(be(this._spatialReferenceTask.spatialReference))?be(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return be(this._tileInfoTask.tileInfo)}get mapCollections(){var s,n,o,r;const e=(s=this.map)==null?void 0:s.call(this),t=[];return w(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(o=e==null?void 0:e.ground)==null?void 0:o.layers},{parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let s=null;for(const o of e){const r=this._getSupportedSpatialReferences(o);if(r.length>0){const l=this._narrowDownSpatialReferenceCandidates(s,r);w(l)&&(s=l)}if(w(s)&&s.length===1)break}if(t&&(F(s)||s.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(s);return{spatialReference:w(n)?n.spatialReference:null,viewingMode:w(n)?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var s,n,o,r,l,d,h;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(s=this.map)==null?void 0:s.call(this))==null?void 0:n.basemap,layers:(l=(r=(o=this.map)==null?void 0:o.call(this))==null?void 0:r.basemap)==null?void 0:l.baseLayers},{layers:(h=(d=this.map)==null?void 0:d.call(this))==null?void 0:h.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const u=e[0].tileInfo;return{tileInfo:u&&u.spatialReference.equals(this.spatialReference)?u:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var s,n,o;if(!this.required.heightModelInfo||this.suspended&&((s=this._get("_heightModelInfoTask"))!=null&&s.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const r of e)if(lu(r)){const l=ru(r);if(l)return{heightModelInfo:l,vcsWkid:(n=r.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(o=r.spatialReference)==null?void 0:o.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,s=[];for(const n of e.layers){const o="fullExtents"in n&&n.fullExtents||(w(n.fullExtent)?[n.fullExtent]:[]),r=this.requiresExtentInSpatialReference?null:o[0],l=o.find(d=>d.spatialReference.equals(this.spatialReference))??r;if(l)return{candidates:[{extent:l,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const d of o)s.push({extent:d,layer:n})}return{candidates:s,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(F(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(e),n=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:w(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(w(this._projectExtentTask.task)&&(this._projectExtentTask.task=ln(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:n.clone(),task:Qr(async o=>{try{const r=await Sa(s.extent,n,s.layer.portalItem,o);this._projectExtentTask={...this._projectExtentTask,task:null,output:r}}catch{if(Fl(o))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(F(e))return t;const s=[],n=(o,r)=>w(o)?w(r)?o===r&&o:o:r;for(const o of e)for(const r of t){if(!o.spatialReference.equals(r.spatialReference))continue;const l=n(o.viewingMode,r.viewingMode);if(l!==!1){s.push({spatialReference:o.spatialReference,viewingMode:l});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return F(e)||e.length<1?w(t)?{spatialReference:t,viewingMode:null}:null:(w(t)&&e.length>1&&e.some(({spatialReference:s})=>s.equals(t))&&(e=e.filter(({spatialReference:s})=>s.equals(t))),e.length>1&&e.some(({viewingMode:s})=>s!==wo.Local)&&(e=e.filter(({viewingMode:s})=>s!==wo.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const s=[];for(const n of t){const o=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(w(o)){const r=w(o.constraints)?o.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:l,viewingMode:d}of r)(!this.requiresExtentInSpatialReference||F(this.userSpatialReference)||l.equals(this.userSpatialReference))&&s.push({spatialReference:l,viewingMode:d})}}return s}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:s})=>t.equals(s.spatialReference))||e[0]}_collectLayers(e){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const s of e.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(s),"layers"in s&&this._collectCollection({layers:s.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};a([c()],B.prototype,"required",void 0),a([c({constructOnly:!0})],B.prototype,"map",void 0),a([c({constructOnly:!0})],B.prototype,"getSpatialReferenceSupport",void 0),a([c()],B.prototype,"defaultSpatialReference",void 0),a([c()],B.prototype,"userSpatialReference",void 0),a([c()],B.prototype,"sourcePreloadCount",void 0),a([c()],B.prototype,"priorityCollection",void 0),a([c()],B.prototype,"requiresExtentInSpatialReference",void 0),a([c()],B.prototype,"suspended",void 0),a([c({readOnly:!0})],B.prototype,"ready",null),a([c({readOnly:!0})],B.prototype,"heightModelInfoReady",null),a([c({readOnly:!0})],B.prototype,"spatialReference",null),a([c({readOnly:!0})],B.prototype,"extent",null),a([c({readOnly:!0})],B.prototype,"heightModelInfo",null),a([c({readOnly:!0})],B.prototype,"vcsWkid",null),a([c({readOnly:!0})],B.prototype,"latestVcsWkid",null),a([c({readOnly:!0})],B.prototype,"viewingMode",null),a([c({readOnly:!0})],B.prototype,"tileInfo",null),a([c({readOnly:!0})],B.prototype,"mapCollections",null),a([c({readOnly:!0})],B.prototype,"_allLayers",null),a([c({readOnly:!0})],B.prototype,"_spatialReferenceTask",null),a([c({readOnly:!0})],B.prototype,"_tileInfoTask",null),a([c({readOnly:!0})],B.prototype,"_heightModelInfoTask",null),a([c({readOnly:!0})],B.prototype,"_extentCandidatesTask",null),a([c()],B.prototype,"_extentTask",null),a([c()],B.prototype,"_projectExtentTask",void 0),B=a([I("esri.views.support.DefaultsFromMap")],B);var ss;let E=ss=class extends Ms(Dn.EventedMixin(Mc(D))){constructor(i){super(i),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Lr({getCollections:()=>{var e,t,s;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(t=this.groundView)==null?void 0:t.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Yr,this.analyses=new gs,this.typeSpecificPreconditionsReady=!0,this.layerViews=new W,this.magnifier=new Ta,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Xr,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new ou,this.navigation=new Aa,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Qh(this),this.persistableViewModels=new W,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(y(()=>this.preconditionsReady,e=>{var t,s;e?(this._currentSpatialReference=this.spatialReference,ss.views.add(this)):(this._currentSpatialReference=null,ss.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((t=this.toolViewManager)==null||t.detach(),w(this.analysisViewManager)&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown()):e&&!this.ready&&(this._startup(),w(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Fi))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,Rn(()=>this.ready)))),this.basemapView=new lt({view:this}),this.layerViewManager=new Wh({view:this,layerViewImporter:{importLayerView:i=>this.importLayerView(i),hasLayerViewModule:i=>this.hasLayerViewModule(i)},supportsGround:this.supportsGround}),this.toolViewManager=new tu({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([y(()=>this.initialExtentRequired,i=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:i},{sync:!0,initial:!0}),y(()=>this.ready,i=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=i,this.defaultsFromMap.userSpatialReference=i?this.spatialReference:this._userSpatialReference)},{sync:!0}),y(()=>this._userSpatialReference,i=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=i)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let i=null;this.handles.add([y(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var s;const t=((s=this.map)==null?void 0:s.allLayers.length)>0;if(e&&!this.spatialReference&&t){if(w(i))return;const n=zr(()=>i=ln(i));i=Qr(async o=>{try{await Fn(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{i=null}O.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=re(this.graphics),this.analyses=re(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),re(this.analysisViewManager),this.toolViewManager=re(this.toolViewManager),this.layerViewManager=re(this.layerViewManager),this.basemapView=re(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const i=this.map;this.map=null,i==null||i.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return O.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var i;return(i=this.toolViewManager)==null?void 0:i.activeTool}set activeTool(i){this.toolViewManager&&(this.toolViewManager.activeTool=i)}get animation(){return this._get("animation")}set animation(i){this._set("animation",i)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new B({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:i=>this.getSpatialReferenceSupport(i),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(i){this._set("extent",i)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var i;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||yo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((i=this.defaultsFromMap)!=null&&i.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(i){i!==this._get("map")&&(i!=null&&i.destroyed&&(O.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:i}),i=null),yo.isLoadable(i)&&i.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",i))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&((t=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&t.heightModelInfo)&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(i){const e=!_s(i,this._get("spatialReference"));this._set("_userSpatialReference",i),e&&(this._set("spatialReference",i),this._spatialReferenceChanged(i))}_spatialReferenceChanged(i){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var i;return(i=this.toolViewManager)==null?void 0:i.tools}get initialExtent(){var i;return(i=this.defaultsFromMap)==null?void 0:i.extent}get cursor(){const i=this.toolViewManager?this.toolViewManager.cursor:null;return w(i)?i:this._cursor||"default"}set cursor(i){this._cursor=i,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(i){return this.layerViewManager.whenLayerView(i)}getDefaultSpatialReference(){var i;return(i=this.defaultsFromMap)==null?void 0:i.spatialReference}getDefaultHeightModelInfo(){var i;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((i=this.defaultsFromMap)==null?void 0:i.heightModelInfo)??null}importLayerView(i){throw new $("importLayerView() not implemented")}hasLayerViewModule(i){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(i){return w(this.getSpatialReferenceSupport({spatialReference:i}))}when(i,e){return this.isResolved()&&!this.ready&&O.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(i,e)}forceReadyCycle(){this.ready&&(Je(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(i){this.toolViewManager.tools.add(i),this.activeTool=i}tryFatalErrorRecovery(){this.fatalError=null}};E.views=new W,a([c()],E.prototype,"_userSpatialReference",void 0),a([c()],E.prototype,"activeTool",null),a([c({readOnly:!0})],E.prototype,"allLayerViews",void 0),a([c()],E.prototype,"groundView",void 0),a([c()],E.prototype,"animation",null),a([c()],E.prototype,"basemapView",void 0),a([c()],E.prototype,"center",null),a([c({readOnly:!0})],E.prototype,"_defaultsFromMapSettings",null),a([c()],E.prototype,"defaultsFromMap",null),a([c()],E.prototype,"fatalError",void 0),a([c({type:li})],E.prototype,"extent",null),a([c(vo(Yr,"graphics"))],E.prototype,"graphics",void 0),a([c(vo(gs,"analyses"))],E.prototype,"analyses",void 0),a([c({readOnly:!0,type:Vn})],E.prototype,"heightModelInfo",null),a([c({readOnly:!0})],E.prototype,"interacting",null),a([c({readOnly:!0})],E.prototype,"navigating",null),a([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],E.prototype,"preconditionsReady",null),a([c({readOnly:!0})],E.prototype,"typeSpecificPreconditionsReady",void 0),a([c({type:W,readOnly:!0})],E.prototype,"layerViews",void 0),a([c()],E.prototype,"resolution",null),a([c({type:Ta})],E.prototype,"magnifier",void 0),a([c({value:null,type:vc})],E.prototype,"map",null),a([c()],E.prototype,"padding",void 0),a([c({readOnly:!0})],E.prototype,"ready",void 0),a([c({type:An})],E.prototype,"spatialReference",null),a([c()],E.prototype,"spatialReferenceWarningDelay",void 0),a([c()],E.prototype,"stationary",null),a([c({readOnly:!0})],E.prototype,"supportsGround",void 0),a([c({type:wc})],E.prototype,"timeExtent",void 0),a([c({type:Xr,nonNullable:!0})],E.prototype,"timeReference",void 0),a([c()],E.prototype,"tools",null),a([c()],E.prototype,"toolViewManager",void 0),a([c({readOnly:!0})],E.prototype,"type",void 0),a([c({type:Number})],E.prototype,"scale",void 0),a([c({readOnly:!0})],E.prototype,"updating",void 0),a([c({readOnly:!0})],E.prototype,"initialExtentRequired",void 0),a([c({readOnly:!0})],E.prototype,"initialExtent",null),a([c()],E.prototype,"cursor",null),a([c({readOnly:!0})],E.prototype,"input",void 0),a([c({type:Aa,nonNullable:!0})],E.prototype,"navigation",void 0),a([c()],E.prototype,"layerViewManager",void 0),a([c()],E.prototype,"analysisViewManager",void 0),a([c()],E.prototype,"width",void 0),a([c()],E.prototype,"height",void 0),a([c({readOnly:!0})],E.prototype,"resizing",void 0),a([c({value:null,readOnly:!0})],E.prototype,"size",null),a([c({readOnly:!0})],E.prototype,"suspended",void 0),a([c({readOnly:!0})],E.prototype,"viewEvents",void 0),a([c({readOnly:!0})],E.prototype,"persistableViewModels",void 0),a([c()],E.prototype,"_isValid",void 0),a([c()],E.prototype,"_readyCycleForced",void 0),a([c()],E.prototype,"_currentSpatialReference",void 0),E=ss=a([I("esri.views.View")],E);const hu=E;let dt=class extends Ic{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new $("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=Rl(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};a([c({readOnly:!0})],dt.prototype,"done",null),a([c({readOnly:!0,type:String})],dt.prototype,"state",void 0),a([c()],dt.prototype,"target",void 0),dt=a([I("esri.views.ViewAnimation")],dt),function(i){i.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(dt||(dt={}));const bn=dt;function _t(){return[1,0,0,1,0,0]}function uu(i){return[i[0],i[1],i[2],i[3],i[4],i[5]]}function pu(i,e,t,s,n,o){return[i,e,t,s,n,o]}function mu(i,e){return new Float64Array(i,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:uu,create:_t,createView:mu,fromValues:pu},Symbol.toStringTag,{value:"Module"}));const Da=96,Va=39.37,gu=180/Math.PI;function Oa(i){return i.wkid?i:i.spatialReference||An.WGS84}function Qn(i,e){return e.type?ne(i,e.x,e.y):hs(i,e)}function Na(i){return Ml(i)}function Pi(i,e){const t=Math.max(1,e[0]),s=Math.max(1,e[1]);return Math.max(i.width/t,i.height/s)*Cu(i.spatialReference)}async function xi(i,e,t,s){let n,o;if(!i||Array.isArray(i)&&!i.length)return null;if(W.isCollection(i)&&(i=i.toArray()),Array.isArray(i)&&i.length&&typeof i[0]=="object"){const l=i.every(u=>"attributes"in u),d=i.some(u=>!u.geometry);let h=i;if(l&&d&&e&&e.allLayerViews){const u=new Map;for(const M of i){const C=M.layer,P=u.get(C)||[],A=M.attributes[C.objectIdField];A!=null&&P.push(A),u.set(C,P)}const p=[];u.forEach((M,C)=>{const P=e.allLayerViews.find(A=>A.layer.id===C.id);if(P&&"queryFeatures"in P){const A=C.createQuery();A.objectIds=M,A.returnGeometry=!0,p.push(P.queryFeatures(A))}});const g=await Promise.all(p),f=[];for(const M of g)if(M&&M.features&&M.features.length)for(const C of M.features)w(C.geometry)&&f.push(C.geometry);h=f}for(const u of h)s=await xi(u,e,t,s);return s}if(Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number")n=new Y(i);else if(i instanceof Il)n=i;else if("geometry"in i){if(i.geometry)n=i.geometry;else if(i.layer){const l=i.layer,d=e.allLayerViews.find(h=>h.layer.id===l.id);if(d&&"queryFeatures"in d){const h=l.createQuery();h.objectIds=[i.attributes[l.objectIdField]],h.returnGeometry=!0;const u=await d.queryFeatures(h);n=vl(u,"features",0,"geometry")}}}if(F(n)||(o=n.type==="point"?new li({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!o))return null;Ri()||ws(o.spatialReference,t)||await bs();const r=Vi(o,t);return r?s=s?s.union(r):r:null}function fu(i){if(i&&(!Array.isArray(i)||typeof i[0]!="number")&&(typeof i=="object"||Array.isArray(i)&&typeof i[0]=="object")){if("layer"in i&&i.layer&&i.layer.minScale&&i.layer.maxScale){const e=i.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(i)&&i.length&&i.every(e=>"layer"in e)){let e=0,t=0;for(const s of i){const n=s.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,t=n.maxScale>t?n.maxScale:t)}return e&&t?{min:e,max:t}:null}}}function en(i,e){return _s(Oa(i),e)?i:Vi(i,e)}async function _u(i,e){if(!i||!e)return new Oe({targetGeometry:new Y,scale:0,rotation:0});let t=e.spatialReference;const{constraints:s,padding:n,viewpoint:o,size:r}=e,l=[n?r[0]-n.left-n.right:r[0],n?r[1]-n.top-n.bottom:r[1]];let d=null;i instanceof Oe?d=i:i.viewpoint?d=i.viewpoint:i.target&&i.target.declaredClass==="esri.Viewpoint"&&(d=i.target);let h=null;d&&d.targetGeometry?h=d.targetGeometry:i instanceof li?h=i:(i||i&&("center"in i||"extent"in i||"target"in i))&&(h=await xi(i.center,e,t)||await xi(i.extent,e,t)||await xi(i.target,e,t)||await xi(i,e,t)),!h&&o&&o.targetGeometry?h=o.targetGeometry:!h&&e.extent&&(h=e.extent),t||(t=Oa(e.spatialReference||e.extent||h)),Ri()||_s(h.spatialReference,t)||ws(h,t)||await bs();const u=en(h.center?h.center:h,t);let p=0;if(d&&w(d.targetGeometry)&&d.targetGeometry.type==="point")p=d.scale;else if("scale"in i&&i.scale)p=i.scale;else if("zoom"in i&&i.zoom!==-1&&s&&s.effectiveLODs)p=s.zoomToScale(i.zoom);else if(Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0){const C=en(e.extent,t);p=w(C)?Pi(C,l):e.extent?Pi(e.extent,l):o.scale}else p=Pi(en(h.extent,t),l);const g=fu(i);g&&(g.min&&g.min>p?p=g.min:g.max&&g.max<p&&(p=g.max));let f=0;d?f=d.rotation:i.hasOwnProperty("rotation")?f=i.rotation:o&&(f=o.rotation);let M=new Oe({targetGeometry:u,scale:p,rotation:f});return s&&(M=s.fit(M),s.constrainByGeometry(M),s.rotationEnabled||(M.rotation=f)),M}function $e(i,e){const t=i.targetGeometry,s=e.targetGeometry;return t.x=s.x,t.y=s.y,t.spatialReference=s.spatialReference,i.scale=e.scale,i.rotation=e.rotation,i}function yu(i,e,t){return t?ne(i,.5*(e[0]-t.right+t.left),.5*(e[1]-t.bottom+t.top)):Is(i,e,.5)}const vu=function(){const i=ee();return function(e,t,s){const n=t.targetGeometry;Qn(i,n);const o=.5*ci(t);return e.xmin=i[0]-o*s[0],e.ymin=i[1]-o*s[1],e.xmax=i[0]+o*s[0],e.ymax=i[1]+o*s[1],e.spatialReference=n.spatialReference,e}}();function wu(i,e,t,s,n){return Mn(i,e,t.center),i.scale=Pi(t,s),n&&n.constraints&&n.constraints.constrain(i),i}function bu(i,e,t,s){return Jn(i,e,t,s),ta(i,i)}const za=function(){const i=ee();return function(e,t,s){return ia(e,Tu(e,t),yu(i,t,s))}}(),Mu=function(){const i=_t(),e=ee();return function(t,s,n,o){const r=ci(s),l=Yn(s);return ne(e,r,r),$c(i,e),On(i,i,l),ds(i,i,za(e,n,o)),ds(i,i,[0,o.top-o.bottom]),ne(t,i[4],i[5])}}();function ci(i){return i.scale*Iu(i.targetGeometry)}function Iu(i){return w(i)&&Fr(i.spatialReference)?1/(Na(i.spatialReference)*Va*Da):1}function Yn(i){return Pr(i.rotation)||0}function Cu(i){return Fr(i)?Na(i)*Va*Da:1}function Tu(i,e){return Is(i,e,.5)}const Xn=function(){const i=ee(),e=ee(),t=ee();return function(s,n,o,r,l,d){return Fc(i,n),Is(e,o,.5*d),ne(t,1/r*d,-1/r*d),ea(s,e),l&&On(s,s,l),Jr(s,s,t),ds(s,s,i),s}}(),Jn=function(){const i=ee();return function(e,t,s,n){const o=ci(t),r=Yn(t);return Qn(i,t.targetGeometry),Xn(e,i,s,o,r,n)}}(),xu=function(){const i=ee();return function(e,t,s,n){const o=ci(t);return Qn(i,t.targetGeometry),Xn(e,i,s,o,0,n)}}();function Eu(i){const e=Cl(i);return e?e.valid[1]-e.valid[0]:0}function $u(i,e){return Math.round(Eu(i)/e)}const ku=function(){const i=ee(),e=ee(),t=[0,0,0];return function(s,n,o){pn(i,s,n),bo(i,i),pn(e,s,o),bo(e,e),Pc(t,i,e);let r=Math.acos(Ac(i,e)/(Mo(i)*Mo(e)))*gu;return t[2]<0&&(r=-r),isNaN(r)&&(r=0),r}}(),Pu=function(){const i=ee();return function(e,t,s,n){const o=e.targetGeometry;return $e(e,t),Mu(i,t,s,n),o.x+=i[0],o.y+=i[1],e}}(),Mn=function(i,e,t){$e(i,e);const s=i.targetGeometry;return s.x=t.x,s.y=t.y,s.spatialReference=t.spatialReference,i},Au=function(){const i=ee();return function(e,t,s,n,o){o||(o="center"),ia(i,s,n),Is(i,i,.5);const r=i[0],l=i[1];switch(o){case"center":ne(i,0,0);break;case"left":ne(i,-r,0);break;case"top":ne(i,0,l);break;case"right":ne(i,r,0);break;case"bottom":ne(i,0,-l);break;case"top-left":ne(i,-r,l);break;case"bottom-left":ne(i,-r,-l);break;case"top-right":ne(i,r,l);break;case"bottom-right":ne(i,r,-l)}return $s(e,t,i),e}}();function Pf(i,e,t){return $e(i,e),i.rotation+=t,i}function Fu(i,e,t){return $e(i,e),i.rotation=t,i}const Ru=function(){const i=ee();return function(e,t,s,n,o){return $e(e,t),isNaN(s)||s===0||(qa(i,n,t,o),e.scale=t.scale*s,Ua(i,i,e,o),$s(e,e,ne(i,i[0]-n[0],n[1]-i[1]))),e}}();function pr(i,e,t){return $e(i,e),i.scale=t,i}const Ba=function(){const i=ee();return function(e,t,s,n,o,r){return $e(e,t),isNaN(s)||s===0||(qa(i,o,t,r),e.scale=t.scale*s,e.rotation+=n,Ua(i,i,e,r),$s(e,e,ne(i,i[0]-o[0],o[1]-i[1]))),e}}(),Af=function(){const i=ee(),e=ee();return function(t,s,n,o,r,l,d){return za(e,l,d),Rc(i,r,e),o?Ba(t,s,n,o,i,l):Ru(t,s,n,i,l)}}(),qa=function(){const i=_t();return function(e,t,s,n){return Ke(e,t,bu(i,s,n,1))}}(),Ua=function(){const i=_t();return function(e,t,s,n){return Ke(e,t,Jn(i,s,n,1))}}(),$s=function(){const i=ee(),e=_t();return function(t,s,n){$e(t,s);const o=ci(s),r=t.targetGeometry;return Ec(e,Yn(s)),Jr(e,e,Sc(o,o)),Ke(i,n,e),r.x+=i[0],r.y+=i[1],t}}();let Lu=class{constructor(e,t,s,n){const o=e.targetGeometry,r=t.targetGeometry;n?typeof n=="string"&&(n=xc(n)||un.ease):n=un.ease,this.easing=n,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=r.x,this.tCenterY=r.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const s=this.easing(t);let n,o,r,l;t>=1?(n=this.tCenterX,o=this.tCenterY,r=this.tRotation,l=this.tScale):(n=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,r=this.sRotation+s*this.dRotation,l=this.sScale+s*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=o,e.scale=l,e.rotation=r}},We=class extends D{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=un.ease,this.view=null,this.viewpoint=new Oe({targetGeometry:new Y,scale:0,rotation:0}),this._updateTask=ai({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Xe(this._updateTask)}animate(e,t,s){this.stop();const n=this.viewpoint;$e(n,t),this.transition=new Lu(this.viewpoint,e.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{var r,l;this.animation===e&&this._updateTask&&(e.state==="finished"&&((r=this.transition)==null||r.applyRatio(this.viewpoint,1),(l=this.view)!=null&&l.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const s=new bn({target:e.clone()}),n=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var s,n;const t=this.animation;if(t&&t.state!==bn.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const o=this.transition,r=(performance.now()-this._startTime)/o.duration,l=r>=1;o.applyRatio(this.viewpoint,r),l&&((s=this.animation)==null||s.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};a([c()],We.prototype,"animation",void 0),a([c()],We.prototype,"duration",void 0),a([c()],We.prototype,"transition",void 0),a([c()],We.prototype,"easing",void 0),a([c()],We.prototype,"view",void 0),a([c()],We.prototype,"viewpoint",void 0),We=a([I("esri.views.2d.AnimationManager")],We);const Su=We;let Du=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var l;this._updateRequested=!1;const{basemapView:t,graphicsView:s,labelManager:n,layerViews:o,state:{id:r}}=this.view;t==null||t.baseLayerViews.forEach(this._updateLayerView,this),o.forEach(this._updateLayerView,this),t==null||t.referenceLayerViews.forEach(this._updateLayerView,this),w(n)&&(n.lastUpdateId!==r&&(n.viewChange(),n.lastUpdateId=r),n.updateRequested&&n.processUpdate(this._updateParameters)),w(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((l=this._frameTaskHandle)==null||l.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=y(()=>e.stationary,t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=ai(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,s=e.lastUpdateId;s!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),s!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function K(){return Promise.all([b(()=>import("./webglDeps-8052ac07.js"),["assets/webglDeps-8052ac07.js","assets/VertexArrayObject-315bde4b.js","assets/Error-781981d1.js","assets/string-75082bc6.js","assets/typedArrayUtil-74bbfd45.js","assets/Texture-f1890c15.js","assets/mathUtils-15f63a45.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/ProgramTemplate-da7e5f1d.js","assets/programUtils-5ef87558.js","assets/NestedMap-1b5db22e.js"]),b(()=>import("./mapViewDeps-b8e74d04.js"),["assets/mapViewDeps-b8e74d04.js","assets/Error-781981d1.js","assets/string-75082bc6.js","assets/typedArrayUtil-74bbfd45.js","assets/promiseUtils-28f2a985.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/nextTick-3ee5a785.js","assets/mat3f32-6c416b1c.js","assets/CIMResourceManager-f2bdf1ff.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/Rasterizer-afd81f67.js","assets/_commonjsHelpers-2f3e7994.js","assets/mathUtils-15f63a45.js","assets/cimAnalyzer-d2dc3869.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/ensureType-125d327f.js","assets/fontUtils-dae2860f.js","assets/screenUtils-7afeb41c.js","assets/fieldUtils-85274dd9.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/Accessor-815cb0cf.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/jsonUtils-15ca15d7.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-36c92184.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/rasterizingUtils-263a194f.js","assets/imageutils-20e8663d.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Evented-3dfb26f2.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/BufferPool-1f98d681.js","assets/enums-b1d611e3.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/reactiveUtils-31da19f9.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/programUtils-5ef87558.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-ac5d1332.js","assets/pbf-c0fe6550.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/enumeration-94b1319d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/Clonable-6d5134c7.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/assets-7bd3ffcf.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/locale-30120714.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/persistableUrlUtils-0364346d.js","assets/styleUtils-88557de2.js","assets/CircularArray-27e292bb.js","assets/webgl-debug-b1f7a2c5.js","assets/HandleOwner-124247b4.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/lengthUtils-40356f92.js","assets/sizeVariableUtils-d4870b0d.js","assets/RenderingContext-a95e362b.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/mat3-53e5916e.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-79d61d37.js","assets/normalizeUtilsSync-f6be8e80.js","assets/normalizeUtilsCommon-04cad10b.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/SimpleObservable-729c9019.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/Collection-912f4315.js","assets/collectionUtils-5a99c1c0.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/jsonUtils-aa2a2e29.js","assets/AttributeStoreView-89b5e0d8.js","assets/TiledDisplayObject-a8c16acc.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/PopupTemplate-51cd4af1.js","assets/number-5e819186.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/visualVariableUtils-74855aa7.js","assets/Graphic-87396b85.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/normalizeUtils-120a3150.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/GraphicContainer-0dd1ee7e.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/TileContainer-41317e18.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-5c97747c.js","assets/requestImageUtils-478e4ac7.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])])}const fi=()=>K().then(()=>b(()=>import("./TileLayerView2D-46f694e4.js"),["assets/TileLayerView2D-46f694e4.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/reactiveUtils-31da19f9.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/GraphicsCollection-0ae219af.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/HandleOwner-124247b4.js","assets/Rasterizer-afd81f67.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-36c92184.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/rasterizingUtils-263a194f.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/BufferPool-1f98d681.js","assets/enums-b1d611e3.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-ac5d1332.js","assets/pbf-c0fe6550.js","assets/imageutils-20e8663d.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/assets-7bd3ffcf.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-88557de2.js","assets/CircularArray-27e292bb.js","assets/webgl-debug-b1f7a2c5.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/lengthUtils-40356f92.js","assets/sizeVariableUtils-d4870b0d.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/GraphicsView2D-79d61d37.js","assets/normalizeUtilsSync-f6be8e80.js","assets/normalizeUtilsCommon-04cad10b.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/jsonUtils-aa2a2e29.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat3-53e5916e.js","assets/TiledDisplayObject-a8c16acc.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/normalizeUtils-120a3150.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-5c97747c.js","assets/imageUtils-8b970c75.js","assets/BitmapTileContainer-09dac99d.js","assets/Bitmap-ea5a0772.js","assets/TileContainer-41317e18.js","assets/LayerView-b94a4bbe.js","assets/HighlightGraphicContainer-11907e23.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/RefreshableLayerView-fc6330e9.js","assets/drapedUtils-67ce7b54.js","assets/scaleUtils-7da28fc4.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-0f8d24ce.js","assets/popupUtils-02929482.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),Ut=()=>K().then(()=>b(()=>import("./FeatureLayerView2D-5e03d813.js"),["assets/FeatureLayerView2D-5e03d813.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/TimeExtent-202e4138.js","assets/Query-4c66990d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureSet-11704ad2.js","assets/definitions-19bfb61c.js","assets/LayerView-b94a4bbe.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/enums-b1d611e3.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-eea54cdd.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-87145551.js","assets/createSymbolSchema-5985c686.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/ExpandedCIM-71cc43f8.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/util-7544e8cf.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-e2b48f65.js","assets/featureConversionUtils-55a32b06.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-53e5916e.js","assets/TileStrategy-56172cce.js"])),mr={"base-dynamic":()=>K().then(()=>b(()=>import("./BaseDynamicLayerView2D-9e2167cd.js"),["assets/BaseDynamicLayerView2D-9e2167cd.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/BitmapContainer-479a7ecf.js","assets/WGLContainer-302ed869.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/mathUtils-15f63a45.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/screenUtils-7afeb41c.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Evented-3dfb26f2.js","assets/reactiveUtils-31da19f9.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/aaBoundingRect-3cd21eb0.js","assets/jsonUtils-15ca15d7.js","assets/Polyline-40b9e769.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-b94a4bbe.js","assets/Collection-912f4315.js","assets/SimpleObservable-729c9019.js","assets/collectionUtils-5a99c1c0.js","assets/geometry-0d19f94b.js","assets/typeUtils-3bf84b36.js","assets/HandleOwner-124247b4.js","assets/Identifiable-f5397426.js","assets/Promise-092442f7.js","assets/ExportStrategy-f5e3a824.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/Bitmap-ea5a0772.js","assets/mat3-53e5916e.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/enumeration-94b1319d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/Clonable-6d5134c7.js","assets/RefreshableLayerView-fc6330e9.js","assets/preload-helper-fb43855a.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/fieldUtils-85274dd9.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-56172cce.js","assets/capabilities-c77778e7.js"])),"base-tile":fi,"bing-maps":fi,csv:Ut,"geo-rss":()=>K().then(()=>b(()=>import("./GeoRSSLayerView2D-f4609117.js"),["assets/GeoRSSLayerView2D-f4609117.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Extent-8fae2379.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/geometry-0d19f94b.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/reactiveUtils-31da19f9.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/LegendOptions-540a8245.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/Graphic-87396b85.js","assets/jsonUtils-15ca15d7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/FeatureSet-11704ad2.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/LayerView-b94a4bbe.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/GraphicContainer-0dd1ee7e.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/Queue-687500af.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat2d-68947564.js","assets/mat3-53e5916e.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-87145551.js","assets/VertexArrayObject-315bde4b.js","assets/TileContainer-41317e18.js","assets/WGLContainer-302ed869.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/capabilities-c77778e7.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),feature:Ut,geojson:Ut,graphics:()=>K().then(()=>b(()=>import("./GraphicsLayerView2D-27244b72.js"),["assets/GraphicsLayerView2D-27244b72.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/LayerView-b94a4bbe.js","assets/reactiveUtils-31da19f9.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/GraphicContainer-0dd1ee7e.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/Queue-687500af.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat2d-68947564.js","assets/mat3-53e5916e.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-87145551.js","assets/VertexArrayObject-315bde4b.js","assets/TileContainer-41317e18.js","assets/WGLContainer-302ed869.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/lengthUtils-40356f92.js","assets/capabilities-c77778e7.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-aa2a2e29.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-88557de2.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),group:()=>K().then(()=>b(()=>import("./GroupLayerView2D-ce3f9ec3.js"),["assets/GroupLayerView2D-ce3f9ec3.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/GroupContainer-2434fe99.js","assets/WGLContainer-302ed869.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/mathUtils-15f63a45.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/screenUtils-7afeb41c.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Evented-3dfb26f2.js","assets/reactiveUtils-31da19f9.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/aaBoundingRect-3cd21eb0.js","assets/jsonUtils-15ca15d7.js","assets/Polyline-40b9e769.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-b94a4bbe.js","assets/Collection-912f4315.js","assets/SimpleObservable-729c9019.js","assets/collectionUtils-5a99c1c0.js","assets/geometry-0d19f94b.js","assets/typeUtils-3bf84b36.js","assets/HandleOwner-124247b4.js","assets/Identifiable-f5397426.js","assets/Promise-092442f7.js","assets/preload-helper-fb43855a.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/fieldUtils-85274dd9.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/Queue-687500af.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/FullTextSearch-da95615f.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/mat3-53e5916e.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-c77778e7.js"])),imagery:()=>K().then(()=>b(()=>import("./ImageryLayerView2D-a5880ef2.js"),["assets/ImageryLayerView2D-a5880ef2.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/GraphicsCollection-0ae219af.js","assets/HandleOwner-124247b4.js","assets/RasterVFDisplayObject-4fd67bb5.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-3c4d61ef.js","assets/pixelRangeUtils-03719dd8.js","assets/mat3f32-6c416b1c.js","assets/WGLContainer-302ed869.js","assets/definitions-19bfb61c.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/mat3-53e5916e.js","assets/LayerView-b94a4bbe.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/mat2d-68947564.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/normalizeUtilsCommon-04cad10b.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-aa2a2e29.js","assets/AttributeStoreView-89b5e0d8.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-88557de2.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/normalizeUtils-120a3150.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/HighlightGraphicContainer-11907e23.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/TileContainer-41317e18.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-479a7ecf.js","assets/Bitmap-ea5a0772.js","assets/ExportStrategy-f5e3a824.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/rasterProjectionHelper-dc7176b3.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),"imagery-tile":()=>K().then(()=>b(()=>import("./ImageryTileLayerView2D-4f1ed418.js"),["assets/ImageryTileLayerView2D-4f1ed418.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/multidimensionalUtils-dd610488.js","assets/RasterVFDisplayObject-4fd67bb5.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-3c4d61ef.js","assets/pixelRangeUtils-03719dd8.js","assets/mat3f32-6c416b1c.js","assets/WGLContainer-302ed869.js","assets/definitions-19bfb61c.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/mat3-53e5916e.js","assets/LayerView-b94a4bbe.js","assets/HandleOwner-124247b4.js","assets/rasterUtils-c4924209.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/TileContainer-41317e18.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/RawBlockCache-97a987d9.js","assets/rasterProjectionHelper-dc7176b3.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/capabilities-c77778e7.js","assets/util-7544e8cf.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/lengthUtils-40356f92.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),kml:()=>K().then(()=>b(()=>import("./KMLLayerView2D-ac41bc7d.js"),["assets/KMLLayerView2D-ac41bc7d.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/reactiveUtils-31da19f9.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/projection-6de68766.js","assets/mathUtils-15f63a45.js","assets/mat4-a8da3f27.js","assets/Polyline-40b9e769.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/kmlUtils-09120674.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/fieldUtils-85274dd9.js","assets/geometry-0d19f94b.js","assets/typeUtils-3bf84b36.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/aaBoundingBox-5e14079b.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/LegendOptions-540a8245.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/Graphic-87396b85.js","assets/jsonUtils-15ca15d7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/FeatureSet-11704ad2.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/utils-25aa08c8.js","assets/GraphicsCollection-0ae219af.js","assets/HandleOwner-124247b4.js","assets/Bitmap-ea5a0772.js","assets/mat3-53e5916e.js","assets/mat3f32-6c416b1c.js","assets/vec2f32-eaf29605.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/BitmapContainer-479a7ecf.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-b94a4bbe.js","assets/GraphicContainer-0dd1ee7e.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/Queue-687500af.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat2d-68947564.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/TileContainer-41317e18.js","assets/capabilities-c77778e7.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/projectionSupport-617bead6.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/rasterProjectionHelper-dc7176b3.js","assets/RenderingContext-a95e362b.js","assets/programUtils-5ef87558.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/webgl-debug-b1f7a2c5.js","assets/rasterUtils-c4924209.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),"knowledge-graph":()=>K().then(()=>b(()=>import("./KnowledgeGraphLayerView2D-1833e6f6.js"),["assets/KnowledgeGraphLayerView2D-1833e6f6.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/collectionUtils-5a99c1c0.js","assets/LayerView-b94a4bbe.js","assets/reactiveUtils-31da19f9.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/mathUtils-15f63a45.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/JSONSupport-2b897629.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/jsonUtils-15ca15d7.js","assets/HandleOwner-124247b4.js","assets/Identifiable-f5397426.js","assets/Promise-092442f7.js","assets/preload-helper-fb43855a.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/fieldUtils-85274dd9.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/Queue-687500af.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/aaBoundingRect-3cd21eb0.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/FullTextSearch-da95615f.js","assets/featureConversionUtils-55a32b06.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/mat3-53e5916e.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-c77778e7.js"])),"link-chart":()=>K().then(()=>b(()=>import("./KnowledgeGraphLayerView2D-1833e6f6.js"),["assets/KnowledgeGraphLayerView2D-1833e6f6.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/collectionUtils-5a99c1c0.js","assets/LayerView-b94a4bbe.js","assets/reactiveUtils-31da19f9.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/mathUtils-15f63a45.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/JSONSupport-2b897629.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/jsonUtils-15ca15d7.js","assets/HandleOwner-124247b4.js","assets/Identifiable-f5397426.js","assets/Promise-092442f7.js","assets/preload-helper-fb43855a.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/fieldUtils-85274dd9.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/Queue-687500af.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/aaBoundingRect-3cd21eb0.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/FullTextSearch-da95615f.js","assets/featureConversionUtils-55a32b06.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/mat3-53e5916e.js","assets/vec2f32-eaf29605.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/capabilities-c77778e7.js"])),"knowledge-graph-sublayer":Ut,"map-image":()=>K().then(()=>b(()=>import("./MapImageLayerView2D-8e6e98a2.js"),["assets/MapImageLayerView2D-8e6e98a2.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/reactiveUtils-31da19f9.js","assets/GraphicsCollection-0ae219af.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/HandleOwner-124247b4.js","assets/BitmapContainer-479a7ecf.js","assets/WGLContainer-302ed869.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-b94a4bbe.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/mat2d-68947564.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/normalizeUtilsCommon-04cad10b.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-aa2a2e29.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat3-53e5916e.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-88557de2.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/normalizeUtils-120a3150.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/HighlightGraphicContainer-11907e23.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/TileContainer-41317e18.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-f5e3a824.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/Bitmap-ea5a0772.js","assets/ExportImageParameters-608f778c.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-0f8d24ce.js","assets/RefreshableLayerView-fc6330e9.js","assets/drapedUtils-67ce7b54.js","assets/scaleUtils-7da28fc4.js","assets/popupUtils-02929482.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),"map-notes":()=>K().then(()=>b(()=>import("./MapNotesLayerView2D-2a9aa05c.js"),["assets/MapNotesLayerView2D-2a9aa05c.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/GroupContainer-2434fe99.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-b94a4bbe.js","assets/HandleOwner-124247b4.js","assets/GraphicContainer-0dd1ee7e.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/Queue-687500af.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat2d-68947564.js","assets/mat3-53e5916e.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/TileContainer-41317e18.js","assets/lengthUtils-40356f92.js","assets/capabilities-c77778e7.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-aa2a2e29.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-88557de2.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),media:()=>K().then(()=>b(()=>import("./MediaLayerView2D-3401b725.js"),["assets/MediaLayerView2D-3401b725.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/reactiveUtils-31da19f9.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/aaBoundingRect-3cd21eb0.js","assets/perspectiveUtils-6b724c64.js","assets/projection-6de68766.js","assets/mat4-a8da3f27.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/normalizeUtilsSync-f6be8e80.js","assets/normalizeUtilsCommon-04cad10b.js","assets/mat3-53e5916e.js","assets/mat3f64-221ce671.js","assets/vec2-4c517306.js","assets/Rasterizer-afd81f67.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-36c92184.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-68947564.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/rasterizingUtils-263a194f.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/BufferPool-1f98d681.js","assets/enums-b1d611e3.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/utils-eea54cdd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-ac5d1332.js","assets/pbf-c0fe6550.js","assets/imageutils-20e8663d.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/defaultsJSON-b087dd4d.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-27e292bb.js","assets/webgl-debug-b1f7a2c5.js","assets/HandleOwner-124247b4.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/GraphicsView2D-79d61d37.js","assets/projectionSupport-617bead6.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/AttributeStoreView-89b5e0d8.js","assets/TiledDisplayObject-a8c16acc.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/normalizeUtils-120a3150.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-5c97747c.js","assets/LayerView-b94a4bbe.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),"ogc-feature":()=>K().then(()=>b(()=>import("./OGCFeatureLayerView2D-38b2a670.js"),["assets/OGCFeatureLayerView2D-38b2a670.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/FeatureLayerView2D-5e03d813.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/TimeExtent-202e4138.js","assets/Query-4c66990d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureSet-11704ad2.js","assets/definitions-19bfb61c.js","assets/LayerView-b94a4bbe.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/enums-b1d611e3.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-eea54cdd.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-87145551.js","assets/createSymbolSchema-5985c686.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/ExpandedCIM-71cc43f8.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/util-7544e8cf.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-e2b48f65.js","assets/featureConversionUtils-55a32b06.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-53e5916e.js","assets/TileStrategy-56172cce.js"])),"open-street-map":fi,"oriented-imagery":Ut,route:()=>K().then(()=>b(()=>import("./RouteLayerView2D-3fe38a41.js"),["assets/RouteLayerView2D-3fe38a41.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/CollectionFlattener-670e79b4.js","assets/reactiveUtils-31da19f9.js","assets/Stop-e7c7e916.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/LayerView-b94a4bbe.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/GraphicContainer-0dd1ee7e.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/Queue-687500af.js","assets/AttributeStoreView-89b5e0d8.js","assets/mat2d-68947564.js","assets/mat3-53e5916e.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/visualVariablesUtils-c19b01f0.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-87145551.js","assets/VertexArrayObject-315bde4b.js","assets/TileContainer-41317e18.js","assets/WGLContainer-302ed869.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/lengthUtils-40356f92.js","assets/capabilities-c77778e7.js","assets/vec3f32-ad1dc57f.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/GraphicsView2D-79d61d37.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/normalizeUtilsSync-f6be8e80.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-aa2a2e29.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-88557de2.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/Cyclical-a38bc08c.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),stream:()=>K().then(()=>b(()=>import("./StreamLayerView2D-603dd385.js"),["assets/StreamLayerView2D-603dd385.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/reactiveUtils-31da19f9.js","assets/FeatureSet-11704ad2.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FeatureLayerView2D-5e03d813.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/TimeExtent-202e4138.js","assets/Query-4c66990d.js","assets/DataLayerSource-3a7a94c9.js","assets/FullTextSearch-da95615f.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/definitions-19bfb61c.js","assets/LayerView-b94a4bbe.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/enums-b1d611e3.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-eea54cdd.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-87145551.js","assets/createSymbolSchema-5985c686.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/ExpandedCIM-71cc43f8.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/util-7544e8cf.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-e2b48f65.js","assets/featureConversionUtils-55a32b06.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-53e5916e.js","assets/TileStrategy-56172cce.js"])),"subtype-group":()=>K().then(()=>b(()=>import("./SubtypeGroupLayerView2D-93d830ff.js"),["assets/SubtypeGroupLayerView2D-93d830ff.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/reactiveUtils-31da19f9.js","assets/FeatureReductionLayer-68313f46.js","assets/JSONSupport-2b897629.js","assets/jsonUtils-0607c004.js","assets/parser-527c5e80.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/mathUtils-15f63a45.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/TimeExtent-202e4138.js","assets/Query-4c66990d.js","assets/enumeration-94b1319d.js","assets/jsonUtils-15ca15d7.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/Clonable-6d5134c7.js","assets/PopupTemplate-51cd4af1.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/UniqueValueRenderer-c479518a.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/LegendOptions-540a8245.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/Graphic-87396b85.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/layerUtils-5e9bebc1.js","assets/styleUtils-88557de2.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/deprecate-da2b7904.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureLayerView2D-5e03d813.js","assets/EffectView-106fd8f9.js","assets/FeatureSet-11704ad2.js","assets/definitions-19bfb61c.js","assets/LayerView-b94a4bbe.js","assets/Container-1fd7ba94.js","assets/mat3f32-6c416b1c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/HandleOwner-124247b4.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/enums-b1d611e3.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-eea54cdd.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-87145551.js","assets/createSymbolSchema-5985c686.js","assets/cimAnalyzer-d2dc3869.js","assets/fontUtils-dae2860f.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/GeometryUtils-53652037.js","assets/utils-36c92184.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/ExpandedCIM-71cc43f8.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/util-7544e8cf.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-e2b48f65.js","assets/featureConversionUtils-55a32b06.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/mat3-53e5916e.js","assets/TileStrategy-56172cce.js"])),tile:fi,"vector-tile":()=>K().then(()=>b(()=>import("./VectorTileLayerView2D-604e8181.js"),["assets/VectorTileLayerView2D-604e8181.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/diffUtils-0b07ec68.js","assets/aaBoundingRect-3cd21eb0.js","assets/enums-fb086c25.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/Queue-687500af.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/Rect-ea14f53a.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/pbf-c0fe6550.js","assets/rasterizingUtils-263a194f.js","assets/floatRGBA-047cef41.js","assets/TileKey-e007f54a.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/TileStore-53c9ad86.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/mat3-53e5916e.js","assets/mat3f32-6c416b1c.js","assets/VertexArrayObject-315bde4b.js","assets/config-1337d16e.js","assets/TiledDisplayObject-a8c16acc.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/definitions-19bfb61c.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/TileContainer-41317e18.js","assets/WGLContainer-302ed869.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/vec2f32-eaf29605.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/StyleRepository-f6573683.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/unitBezier-881ac1eb.js","assets/LayerView-b94a4bbe.js","assets/HandleOwner-124247b4.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/TileStrategy-56172cce.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/capabilities-c77778e7.js"])),wcs:()=>K().then(()=>b(()=>import("./ImageryTileLayerView2D-4f1ed418.js"),["assets/ImageryTileLayerView2D-4f1ed418.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/Graphic-87396b85.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/PopupTemplate-51cd4af1.js","assets/Clonable-6d5134c7.js","assets/Collection-912f4315.js","assets/Evented-3dfb26f2.js","assets/SimpleObservable-729c9019.js","assets/fieldUtils-85274dd9.js","assets/preload-helper-fb43855a.js","assets/enumeration-94b1319d.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/mathUtils-15f63a45.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/aaBoundingBox-5e14079b.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/collectionUtils-5a99c1c0.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/jsonUtils-15ca15d7.js","assets/reactiveUtils-31da19f9.js","assets/multidimensionalUtils-dd610488.js","assets/RasterVFDisplayObject-4fd67bb5.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-3c4d61ef.js","assets/pixelRangeUtils-03719dd8.js","assets/mat3f32-6c416b1c.js","assets/WGLContainer-302ed869.js","assets/definitions-19bfb61c.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingRect-3cd21eb0.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/mat3-53e5916e.js","assets/LayerView-b94a4bbe.js","assets/HandleOwner-124247b4.js","assets/rasterUtils-c4924209.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/TileContainer-41317e18.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/RawBlockCache-97a987d9.js","assets/rasterProjectionHelper-dc7176b3.js","assets/projection-6de68766.js","assets/assets-7bd3ffcf.js","assets/zscale-a617710a.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/capabilities-c77778e7.js","assets/util-7544e8cf.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/lengthUtils-40356f92.js","assets/popupUtils-02929482.js","assets/RefreshableLayerView-fc6330e9.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])),"web-tile":fi,wfs:Ut,wms:()=>K().then(()=>b(()=>import("./WMSLayerView2D-fc9c4c65.js"),["assets/WMSLayerView2D-fc9c4c65.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/reactiveUtils-31da19f9.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/BitmapContainer-479a7ecf.js","assets/WGLContainer-302ed869.js","assets/mat3f32-6c416b1c.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-315bde4b.js","assets/Texture-f1890c15.js","assets/mathUtils-15f63a45.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/screenUtils-7afeb41c.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/StyleDefinition-7d58136b.js","assets/vec2f32-eaf29605.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Evented-3dfb26f2.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/aaBoundingRect-3cd21eb0.js","assets/jsonUtils-15ca15d7.js","assets/Polyline-40b9e769.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-b94a4bbe.js","assets/Collection-912f4315.js","assets/SimpleObservable-729c9019.js","assets/collectionUtils-5a99c1c0.js","assets/geometry-0d19f94b.js","assets/typeUtils-3bf84b36.js","assets/HandleOwner-124247b4.js","assets/Identifiable-f5397426.js","assets/Promise-092442f7.js","assets/ExportStrategy-f5e3a824.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/Bitmap-ea5a0772.js","assets/mat3-53e5916e.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/enumeration-94b1319d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/Clonable-6d5134c7.js","assets/RefreshableLayerView-fc6330e9.js","assets/commonProperties-3eba42f9.js","assets/persistableUrlUtils-0364346d.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/ElevationInfo-89e4d39d.js","assets/fieldUtils-85274dd9.js","assets/lengthUtils-40356f92.js","assets/opacityUtils-107b33de.js","assets/ExportWMSImageParameters-fedc4551.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/symbolLayerUtils3D-15190f75.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-56172cce.js","assets/capabilities-c77778e7.js"])),wmts:()=>K().then(()=>b(()=>import("./WMTSLayerView2D-7c24d150.js"),["assets/WMTSLayerView2D-7c24d150.js","assets/Accessor-815cb0cf.js","assets/typedArrayUtil-74bbfd45.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/string-75082bc6.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-28f2a985.js","assets/Error-781981d1.js","assets/ensureType-125d327f.js","assets/reactiveUtils-31da19f9.js","assets/Extent-8fae2379.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/imageUtils-8b970c75.js","assets/BitmapTileContainer-09dac99d.js","assets/aaBoundingRect-3cd21eb0.js","assets/mathUtils-15f63a45.js","assets/mat3f32-6c416b1c.js","assets/Bitmap-ea5a0772.js","assets/mat3-53e5916e.js","assets/vec2f32-eaf29605.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Evented-3dfb26f2.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/TiledDisplayObject-a8c16acc.js","assets/TileKey-e007f54a.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/enums-4b2a86a0.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/alignmentUtils-ae955d28.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/Color-5e799d63.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec2-4c517306.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/jsonUtils-15ca15d7.js","assets/Polyline-40b9e769.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/TileContainer-41317e18.js","assets/LayerView-b94a4bbe.js","assets/Collection-912f4315.js","assets/SimpleObservable-729c9019.js","assets/collectionUtils-5a99c1c0.js","assets/geometry-0d19f94b.js","assets/typeUtils-3bf84b36.js","assets/HandleOwner-124247b4.js","assets/Identifiable-f5397426.js","assets/Promise-092442f7.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/enumeration-94b1319d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/Clonable-6d5134c7.js","assets/TileStrategy-56172cce.js","assets/RefreshableLayerView-fc6330e9.js","assets/preload-helper-fb43855a.js","assets/Graphic-87396b85.js","assets/PopupTemplate-51cd4af1.js","assets/fieldUtils-85274dd9.js","assets/number-5e819186.js","assets/locale-30120714.js","assets/ActionToggle-dc9b6fc6.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/request-6e1d5843.js","assets/persistableUrlUtils-0364346d.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/assets-7bd3ffcf.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/projection-6de68766.js","assets/zscale-a617710a.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/layerUtils-5e9bebc1.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/LegendOptions-540a8245.js","assets/utils-6bcb0cea.js","assets/asyncUtils-5c97747c.js","assets/jsonUtils-0607c004.js","assets/ItemCache-dc80b100.js","assets/MemCache-9d81d118.js","assets/utils-36c92184.js","assets/jsonUtils-fea00035.js","assets/UniqueValueRenderer-c479518a.js","assets/diffUtils-0b07ec68.js","assets/colorRamps-f3b121e7.js","assets/sizeVariableUtils-d4870b0d.js","assets/visualVariableUtils-74855aa7.js","assets/compilerUtils-024563a4.js","assets/lengthUtils-40356f92.js","assets/jsonUtils-aa2a2e29.js","assets/styleUtils-88557de2.js","assets/DictionaryLoader-4286edaa.js","assets/LRUCache-425021b3.js","assets/deprecate-da2b7904.js","assets/colorUtils-c0f43caf.js","assets/mat2d-68947564.js","assets/webStyleSymbolUtils-9412a45d.js","assets/devEnvironmentUtils-5002a058.js","assets/executeQueryJSON-9dcde882.js","assets/utils-25aa08c8.js","assets/query-e9117fc1.js","assets/normalizeUtils-120a3150.js","assets/normalizeUtilsCommon-04cad10b.js","assets/utils-067ee6bc.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/pbf-c0fe6550.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/sql-71c23a8f.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/TimeReference-afe9f4e7.js","assets/datetime-b6333958.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/FeatureReductionLayer-68313f46.js","assets/labelingInfo-40ffffc8.js","assets/labelUtils-75fd34dc.js","assets/defaultsJSON-b087dd4d.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/FieldsIndex-24f2e4ca.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/capabilities-c77778e7.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Vu(i){const e=i.declaredClass?i.declaredClass.slice(i.declaredClass.lastIndexOf(".")+1):"Unknown",t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new $(`${t}:view-not-supported`,`${e} is not supported in 2D`)}const gr={hasLayerViewModule:i=>w(mr[i.type]),importLayerView:i=>{const e=mr[i.type];if(F(e))throw Vu(i);return e(i)}};function Ou(i,e){const{spatialReference:t}=e,s=[e.x,e.y];let n=Number.POSITIVE_INFINITY,o=0,r=0;const l=[0,0],d=i.type==="extent"?[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]:i.rings;for(const h of d)for(let u=0;u<h.length-1;u++){ac(l,s,h,u);const p=Lc(s,l);p<n&&(n=p,o=l[0],r=l[1])}return{coordinate:new Y({x:o,y:r,spatialReference:t}),distance:n}}var In;let At=In=class extends Sn(D){constructor(i){super(i),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(F(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Vi(this.geometry,this.spatialReference)}catch(i){return O.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:i}),null}return this.geometry}constrain(i,e){if(F(this.normalizedGeometry))return i;const t=i.targetGeometry;if(this.normalizedGeometry.type==="extent"?Rr(this.normalizedGeometry,t):Tl(this.normalizedGeometry,t))return i;const{coordinate:s}=Ou(this.normalizedGeometry,t);return s&&(i.targetGeometry=s),i}clone(){var i,e;return new In({geometry:(i=this.geometry)==null?void 0:i.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};a([c({constructOnly:!0})],At.prototype,"geometry",void 0),a([c({readOnly:!0})],At.prototype,"normalizedGeometry",null),a([c({constructOnly:!0})],At.prototype,"spatialReference",void 0),At=In=a([I("esri.views.2d.constraints.GeometryConstraint")],At);var Cn;let Ei=Cn=class extends Sn(D){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(i,e){return this.enabled&&e&&(this.rotationEnabled||(i.rotation=e.rotation)),i}clone(){return new Cn({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};a([c()],Ei.prototype,"enabled",void 0),a([c()],Ei.prototype,"rotationEnabled",void 0),Ei=Cn=a([I("esri.views.2d.constraints.RotationConstraint")],Ei);const Ha=Ei;var Tn;let fe=Tn=class extends Sn(D){constructor(i){super(i),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let i,{lods:e,minScale:t,maxScale:s,minZoom:n,maxZoom:o}=this,r=-1,l=-1,d=!1,h=!1;if(t!==0&&s!==0&&t<s&&([t,s]=[s,t]),!e||!e.length)return this._set("effectiveMinScale",t),void this._set("effectiveMaxScale",s);e=e.map(u=>u.clone()),e.sort((u,p)=>p.scale-u.scale),e.forEach((u,p)=>u.level=p);for(const u of e)!d&&t>0&&t>=u.scale&&(r=u.level,d=!0),!h&&s>0&&s>=u.scale&&(l=i?i.level:-1,h=!0),i=u;n===-1&&(n=t===0?0:r),o===-1&&(o=s===0?e.length-1:l),n=Math.max(n,0),n=Math.min(n,e.length-1),o=Math.max(o,0),o=Math.min(o,e.length-1),n>o&&([n,o]=[o,n]),t=e[n].scale,s=e[o].scale,e.splice(0,n),e.splice(o-n+1,e.length),e.forEach((u,p)=>{this._lodByScale[u.scale]=u,this._scales[p]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",t),this._set("effectiveMaxScale",s)}constrain(i,e){if(e&&i.scale===e.scale)return i;const t=this.effectiveMinScale,s=this.effectiveMaxScale,n=i.targetGeometry,o=e&&e.targetGeometry,r=s!==0&&i.scale<s,l=t!==0&&i.scale>t;if(r||l){const d=l?t:s;if(e&&o){const h=(d-e.scale)/(i.scale-e.scale);n.x=o.x+(n.x-o.x)*h,n.y=o.y+(n.y-o.y)*h}i.scale=d}return this.snapToZoom&&this.effectiveLODs&&(i.scale=this._getClosestScale(i.scale)),i}fit(i){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(i,null);const e=this.scaleToZoom(i.scale),t=Math.abs(e-Math.floor(e));return i.scale=this.zoomToScale(t>.99?Math.round(e):Math.floor(e)),i}zoomToScale(i){if(!this.effectiveLODs)return 0;i-=this.effectiveMinZoom,i=Math.max(0,i);const e=this._scales;if(i<=0)return e[0];if(i>=e.length)return e[e.length-1];const t=Math.round(i-.5),s=Math.round(i);return e[s]+(s-i)*(e[t]-e[s])}scaleToZoom(i){if(!this.effectiveLODs)return-1;const e=this._scales;let t,s;if(i>=e[0])return this.effectiveMinZoom;if(i<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(t=e[n],s=e[n+1],s===i)return n+this.effectiveMinZoom+1;if(t>i&&s<i)return n+this.effectiveMinZoom+1-(i-s)/(t-s)}return-1}snapToClosestScale(i){if(!this.effectiveLODs)return i;const e=this.scaleToZoom(i);return this.zoomToScale(Math.round(e))}snapToNextScale(i,e=.5){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t+1)}snapToPreviousScale(i,e=2){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t-1)}clone(){return new Tn({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(i){return this._lodByScale[i]||(i=this._scales.reduce((e,t)=>Math.abs(t-i)<=Math.abs(e-i)?t:e,this._scales[0])),this._lodByScale[i].scale}};a([c({readOnly:!0})],fe.prototype,"effectiveLODs",void 0),a([c({readOnly:!0})],fe.prototype,"effectiveMinZoom",void 0),a([c({readOnly:!0})],fe.prototype,"effectiveMaxZoom",void 0),a([c({readOnly:!0})],fe.prototype,"effectiveMinScale",void 0),a([c({readOnly:!0})],fe.prototype,"effectiveMaxScale",void 0),a([c()],fe.prototype,"lods",void 0),a([c()],fe.prototype,"minZoom",void 0),a([c()],fe.prototype,"maxZoom",void 0),a([c()],fe.prototype,"minScale",void 0),a([c()],fe.prototype,"maxScale",void 0),a([c()],fe.prototype,"snapToZoom",void 0),fe=Tn=a([I("esri.views.2d.constraints.ZoomConstraint")],fe);const ja=fe,Nu={base:null,key:"type",typeMap:{extent:li,polygon:lc}};let Z=class extends D{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,s;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _defaultLODs(){var s,n,o;const e=(n=(s=this.view)==null?void 0:s.defaultsFromMap)==null?void 0:n.tileInfo,t=(o=this.view)==null?void 0:o.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new At({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new Ha({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,s=this.minZoom,n=this.maxZoom,o=this.minScale,r=this.maxScale,l=this.snapToZoom;return e&&e.lods===t&&e.minZoom===s&&e.maxZoom===n&&e.minScale===o&&e.maxScale===r&&e.snapToZoom===l?e:new ja({lods:t,minZoom:s,maxZoom:n,minScale:o,maxScale:r,snapToZoom:l})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};a([c({readOnly:!0})],Z.prototype,"effectiveLODs",null),a([c({readOnly:!0})],Z.prototype,"effectiveMinScale",null),a([c({readOnly:!0})],Z.prototype,"effectiveMaxScale",null),a([c({readOnly:!0})],Z.prototype,"effectiveMinZoom",null),a([c({readOnly:!0})],Z.prototype,"effectiveMaxZoom",null),a([c({types:Nu,value:null})],Z.prototype,"geometry",null),a([c({type:[Sl]})],Z.prototype,"lods",void 0),a([c()],Z.prototype,"minScale",void 0),a([c()],Z.prototype,"maxScale",void 0),a([c()],Z.prototype,"minZoom",void 0),a([c()],Z.prototype,"maxZoom",void 0),a([c()],Z.prototype,"rotationEnabled",void 0),a([c()],Z.prototype,"snapToZoom",void 0),a([c()],Z.prototype,"view",void 0),a([c({readOnly:!0})],Z.prototype,"version",null),a([c()],Z.prototype,"_defaultLODs",null),a([c({type:At})],Z.prototype,"_geometry",null),a([c({type:Ha})],Z.prototype,"_rotation",null),a([c({readOnly:!0,type:ja})],Z.prototype,"_zoom",null),Z=a([I("esri.views.2d.MapViewConstraints")],Z);const Ga=Z;function zu(i){return i instanceof Float32Array&&i.length>=2}function Bu(i){return Array.isArray(i)&&i.length>=2}function tn(i){return zu(i)||Bu(i)}var xn;const qe=[0,0];let ht=xn=class extends fs{constructor(i){super(i),this._viewpoint2D={center:ee(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new li,this.id=0,this.inverseTransform=_t(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=_t(),this.transformNoRotation=_t(),this.displayMat3=Ls(),this.displayViewMat3=Ls(),this.viewMat3=Ls(),this.viewMat2d=kc(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(i){this._set("pixelRatio",i),this._update()}set size(i){this._set("size",i),this._update()}set viewpoint(i){if(i){const e=this._viewpoint2D,t=i.targetGeometry;e.center[0]=t.x,e.center[1]=t.y,e.rotation=i.rotation,e.scale=i.scale,e.spatialReference=t.spatialReference}this._update()}copy(i){const e=this.size,t=this.viewpoint;return t&&e?(this.viewpoint=$e(t,i.viewpoint),this._set("size",hs(e,i.size))):(this.viewpoint=i.viewpoint.clone(),this._set("size",[i.size[0],i.size[1]])),this._set("pixelRatio",i.pixelRatio),this}clone(){return new xn({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(i,e,t){return tn(e)?Ke(i,e,this.inverseTransform):(qe[0]=e,qe[1]=t,Ke(i,qe,this.inverseTransform))}toScreen(i,e,t){return tn(e)?Ke(i,e,this.transform):(qe[0]=e,qe[1]=t,Ke(i,qe,this.transform))}toScreenNoRotation(i,e,t){return tn(e)?Ke(i,e,this.transformNoRotation):(qe[0]=e,qe[1]=t,Ke(i,qe,this.transformNoRotation))}getScreenTransform(i,e){const{center:t}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return Xn(i,t,n,e,0,s),i}_update(){const{center:i,spatialReference:e,scale:t,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),r=new Oe({targetGeometry:new Y(i[0],i[1],e),scale:t,rotation:s});if(this._set("viewpoint",r),!o||!e||!t)return;this.resolution=ci(r),this.rotation=s,this.scale=t,this.spatialReference=e,hs(this.center,i);const l=o[0]!==0?2/o[0]:0,d=o[1]!==0?-2/o[1]:0;Dc(this.displayMat3,l,0,0,0,d,0,-1,1,1);const h=Vc(this.viewMat3),u=Co(o[0]/2,o[1]/2),p=Co(-o[0]/2,-o[1]/2),g=Pr(s);Io(h,h,u),Oc(h,h,g),Io(h,h,p),Nc(this.displayViewMat3,this.displayMat3,h);const f=ea(this.viewMat2d,u);return On(f,f,g),ds(f,f,p),vu(this.extent,r,o),Jn(this.transform,r,o,n),ta(this.inverseTransform,this.transform),xu(this.transformNoRotation,r,o,n),this.worldScreenWidth=$u(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};a([c({readOnly:!0})],ht.prototype,"id",void 0),a([c({value:1,json:{write:!0}})],ht.prototype,"pixelRatio",null),a([c({json:{write:!0}})],ht.prototype,"size",null),a([c()],ht.prototype,"spatialReference",void 0),a([c({type:Oe,json:{write:!0}})],ht.prototype,"viewpoint",null),ht=xn=a([I("esri.views.2d.ViewState")],ht);const fr=ht;var En,$n;let Qe=En=class extends D{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new En({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};a([c()],Qe.prototype,"left",void 0),a([c()],Qe.prototype,"top",void 0),a([c()],Qe.prototype,"right",void 0),a([c()],Qe.prototype,"bottom",void 0),Qe=En=a([I("esri.views.2d.PaddedViewState.Padding")],Qe);let Qt=$n=class extends fr{constructor(...i){super(...i),this.paddedViewState=new fr,this._updateContent=(()=>{const e=ee();return()=>{const t=this._get("size"),s=this._get("padding");if(!t||!s)return;const n=this.paddedViewState;ne(e,s.left+s.right,s.top+s.bottom),pn(e,t,e),hs(n.size,e);const o=n.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(y(()=>[this.size,this.padding],()=>this._updateContent(),Fi)),this.padding=new Qe,this.size=[0,0]}set padding(i){this._set("padding",i||new Qe)}set viewpoint(i){if(i){const e=i.clone();this.paddedViewState.viewpoint=i,Pu(e,i,this._get("size"),this._get("padding"));const t=this._viewpoint2D,s=e.targetGeometry;t.center[0]=s.x,t.center[1]=s.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=s.spatialReference,this._update()}}clone(){return new $n({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};a([c()],Qt.prototype,"paddedViewState",void 0),a([c({type:Qe})],Qt.prototype,"padding",null),a([c()],Qt.prototype,"viewpoint",null),Qt=$n=a([I("esri.views.2d.PaddedViewState")],Qt);const qu=Qt;function eo(i,e){switch(e){case"primary":return i.pointerType==="touch"||i.button===0;case"secondary":return i.pointerType!=="touch"&&i.button===2;case"tertiary":return i.pointerType!=="touch"&&i.button===1}}let _r=class extends te{constructor(e,t){super(!0),this._view=e,this.registerIncoming("double-click",t,s=>this._handleDoubleClick(s,t))}_handleDoubleClick(e,t){eo(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Uu=class extends te{constructor(e,t,s){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",s,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:s}=t;if(s!==this.pointerType)return;e.stopPropagation();const{action:n,delta:o}=t,{view:r}=this,{mapViewNavigation:l}=r;switch(n){case"begin":{const{scale:d}=r;this._startScale=d,this._currentScale=d,this._previousDelta=o,l.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const d=1.015**o.y,h=this._startScale*d,u=h/this._currentScale;l.setViewpointImmediate(u),this._currentScale=h;break}case"end":{const{constraints:d}=r,{effectiveLODs:h,snapToZoom:u}=d;if(!u||!h)return void l.end();const p=d.snapScale(this._currentScale),g=(o.y>0?Math.max(p,d.snapToPreviousScale(this._startScale)):Math.min(p,d.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(g);break}}}},ks=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const t=e.data,s=t.pointers.size;switch(t.action){case"start":this._currentCount=s,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var t,s;this._startEvent=e,(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var t,s;(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var t,s;(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Hu=class extends te{constructor(e,t,s){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",s,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new ks({start:(t,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(t,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(t,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(t,s)=>t===1&&eo(s.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ju=class extends te{constructor(e,t,s){super(!0),this._view=e,this.pointerAction=t;const n=this._view.mapViewNavigation;this._dragEventSeparator=new ks({start:(o,r)=>{n.rotate.begin(this._view,r.data),r.stopPropagation()},update:(o,r)=>{n.rotate.update(this._view,r.data),r.stopPropagation()},end:(o,r)=>{n.rotate.end(),r.stopPropagation()},condition:(o,r)=>o===1&&eo(r.data,this.pointerAction)}),this.registerIncoming("drag",s,o=>this._dragEventSeparator.handle(o))}};function Te(i){let e=i*i;return i<0&&(e*=-1),e}function Gu(i){return i.translation[0]=0,i.translation[1]=0,i.translation[2]=0,i.heading=0,i.tilt=0,i}function Wu(i,e,t){const s=t,n=i.state,o=i.device,r=e.tiltDirection==="forward-down"?1:-1,l=1;return o.deviceType==="standard"?(s.translation[0]=Te(n.axes[0]),s.translation[1]=Te(n.axes[1]),s.translation[2]=Te(n.buttons[7])-Te(n.buttons[6]),s.heading=Te(n.axes[2]),s.tilt=Te(n.axes[3])):o.deviceType==="spacemouse"&&(s.translation[0]=1.2*Te(n.axes[0]),s.translation[1]=1.2*Te(n.axes[1]),s.translation[2]=2*-Te(n.axes[2]),s.heading=1.2*Te(n.axes[5]),s.tilt=1.2*Te(n.axes[3])),s.tilt*=r,_l(s.translation,s.translation,l),s}function Zu(i){return i.translation[0]===0&&i.translation[1]===0&&i.translation[2]===0&&i.heading===0&&i.tilt===0&&i.zoom===0}let Ku=class extends te{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new yt,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",t=>this._handleGamePadEvent(t)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([y(()=>{var t;return(t=this._view.navigation.gamepad)==null?void 0:t.enabled},t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=ai({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},V)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Gu(this._transformation)):(this._currentDevice=e.data.device,Wu(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const t=this._transformation;if(Zu(t))return;const s=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,o=Yu*n*e;$s(s,s,[t.translation[0]*o,-t.translation[1]*o]);const r=1+t.translation[2]*Xu*e,l=this._view.constraints.rotationEnabled?-t.heading*Qu*e:0,d=this._view.size,h=[d[0]/2,d[1]];Ba(s,s,r,l,h,d);const u=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=u}};const Qu=.06,Yu=.7,Xu=6e-4;let Ju=class extends te{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const s=this._keyMap[e.data.key];if(this._pressed=s!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},ep=class extends te{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const s=e.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var si;(function(i){i[i.IN=0]="IN",i[i.OUT=1]="OUT"})(si||(si={}));let tp=class extends te{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),t.zoomIn.forEach(n=>this._keysToZoomAction[n]=si.IN),t.zoomOut.forEach(n=>this._keysToZoomAction[n]=si.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:s}=e.data;if(!(s in this._keysToZoomAction))return;const n=this._keysToZoomAction[s],{mapViewNavigation:o}=this.view;let r=null;switch(n){case si.IN:r=o.zoomIn();break;case si.OUT:r=o.zoomOut();break;default:return}o.begin(),r.then(()=>o.end()),e.stopPropagation()}};const ip=.6;let sp=class extends te{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,s=>this._handleMouseWheel(s))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const t=this._view.mapViewNavigation,{x:s,y:n,deltaY:o}=e.data,r=1/ip**(1/60*o),l=t.zoom(r,[s,n]);l&&(this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()}))}},np=class extends te{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const t=this.view.mapViewNavigation;this._dragEventSeparator=new ks({start:(s,n)=>{t.pinch.begin(this.view,n.data),n.stopPropagation()},update:(s,n)=>{t.pinch.update(this.view,n.data),n.stopPropagation()},end:(s,n)=>{t.pinch.end(this.view),n.stopPropagation()},condition:s=>s>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function yr(i){const e=i.native;return e?{buttons:e.buttons.map(t=>t.pressed?t.value?t.value:1:0),axes:e.axes.map(t=>ap(t,i.axisThreshold))}:{buttons:[],axes:[]}}function op(i,e){if(i.axes.length!==e.axes.length||i.buttons.length!==e.buttons.length)return!1;for(let t=0;t<i.axes.length;t++)if(i.axes[t]!==e.axes[t])return!1;for(let t=0;t<i.buttons.length;t++)if(i.buttons[t]!==e.buttons[t])return!1;return!0}function rp(i){for(let e=0;e<i.axes.length;e++)if(i.axes[e]!==0)return!1;for(let e=0;e<i.buttons.length;e++)if(i.buttons[e]!==0)return!1;return!0}function ap(i,e){const t=Math.abs(i);return t<e?0:Math.sign(i)*(t-e)/(1-e)}let lp=class{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const r=o.gamepad,l=r.index,d=this._inputDevices[l];d&&(this._emitGamepadEvent(r,yr(d),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=s&&n,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const t=new Kn(e);t.deviceType!=="unknown"&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=ai({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!t;this._forEachGamepad(n=>{const o=this._inputDevices[n.index];if(!o)return;const r=this._latestUpdate[n.index],l=yr(o),d=s||rp(l);r&&(r.timestamp===n.timestamp||!r.active&&d||op(r.state,l))||this._emitGamepadEvent(n,l,!d)})}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const n=t[s];this._validate(n)&&e(n)}}_emitGamepadEvent(e,t,s){const n=this._latestUpdate[e.index],o=n&&n.active;if(!o&&!s)return;const r=!o&&s?"start":o&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:r})}_validate(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}};const vr=De("edge"),cp=De("chrome"),dp=De("ff"),hp=De("safari"),wr="esri-view-surface",Ht={touchNone:`${wr}--touch-none`,touchPan:`${wr}--touch-pan`};let Wa=class Za{constructor(e,t){this._input=t,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new lp(e,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=re(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const s=this._active[t];this._element.removeEventListener(sn[t],s),delete this._active[t]}e&&e.forEach(t=>{if(!this._active[t]&&sn[t]){const s=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(sn[t],s),this._active[t]=s}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ht.touchNone:Ht.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ht.touchPan:Ht.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ht.touchNone),this._element.classList.remove(Ht.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,t){const s=ka(this._element,e);return Za.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),t.x=s.x,t.y=s.y,t}_handleKey(e,t){const s=xh(t);s&&e==="key-up"&&this._keyDownState.delete(s);const n={native:t,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,t){const s=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,s)}_handlePointerPreventDefault(e,t){const s=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,s)}_handleMouseWheel(e,t){let s=t.deltaY;switch(t.deltaMode){case 0:vr&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}vr?s*=.7:cp||hp?s*=.6:dp&&(s*=1.375);const n=100,o=Math.abs(s);o>n&&(s=s/o*200/(1+Math.exp(-.02*(o-n))));const r=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:s});this._callback(e,r)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const s={native:t};t.preventDefault(),this._callback(e,s)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};Wa.test={disableSubpixelCoordinates:!1};const sn={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let up=class extends te{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function to(i,e){return Math.abs(e.x-i.x)+Math.abs(e.y-i.y)}function pp(i,e){const t=e.x-i.x,s=e.y-i.y;return Math.sqrt(t*t+s*s)}function mp(i,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:pe()},i.length===0)return e;if(i.length===1)return e.center.x=i[0].x,e.center.y=i[0].y,e;if(i.length===2){const[L,H]=i,[X,ie]=[H.x-L.x,H.y-L.y];return e.radius=Math.sqrt(X*X+ie*ie)/2,e.center.x=(L.x+H.x)/2,e.center.y=(L.y+H.y)/2,e}let t=0,s=0;for(let L=0;L<i.length;L++)t+=i[L].x,s+=i[L].y;t/=i.length,s/=i.length;const n=i.map(L=>L.x-t),o=i.map(L=>L.y-s);let r=0,l=0,d=0,h=0,u=0,p=0,g=0;for(let L=0;L<n.length;L++){const H=n[L],X=o[L],ie=H*H,q=X*X;r+=ie,l+=q,d+=H*X,h+=ie*H,u+=q*X,p+=H*q,g+=X*ie}const f=.5*(h+p),M=.5*(u+g),C=r*l-d*d,P=(f*l-M*d)/C,A=(r*M-d*f)/C,N=pe(P+t,A+s);return{radius:Math.sqrt(P*P+A*A+(r+l)/i.length),center:N}}function St(i){const{native:e}=i,{pointerId:t,button:s,pointerType:n}=e;return n==="mouse"?`${t}:${s}`:`${n}`}const Ie={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let gp=class extends te{constructor(e=Ie.maximumDoubleClickDelay,t=Ie.maximumDoubleClickDistance,s=Ie.maximumDoubleTouchDelay,n=Ie.maximumDoubleTouchDistance,o=vs){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Xe(e.doubleClickTimer))}get hasPendingInputs(){return ys(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,t){const s=this._pointerState.get(e);s&&(s.doubleClickTimer=Xe(s.doubleClickTimer),t&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);t.pointerDownCount===1&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:t,pointerType:s,button:n}=e.native;return s==="mouse"?`${t}:${n}`:`${s}`}_handleImmediateClick(e){const t=e.data,{pointerType:s}=t.native,n=this._getPointerId(t);if(!this._pointerState.has(n))return void this._startClick(e);const o=this._pointerState.get(n),{data:r,modifiers:l}=o.event,d=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;to(r,t)>d?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),o.pointerDownCount===2&&this._doubleClick.emit(r,void 0,l))}_handlePointerDown(e){const t=St(e.data),s=this._pointerState.get(t);s&&(s.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:s}}=t,n=St(t),o=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),o),l=1;this._pointerState.set(n,{event:e,doubleClickTimer:r,pointerDownCount:l}),this.refreshHasPendingInputs()}},fp=class extends te{constructor(e=Ie.maximumDoubleClickDelay,t=Ie.maximumDoubleClickDistance,s=Ie.maximumDoubleTouchDelay,n=Ie.maximumDoubleTouchDistance,o=vs){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=pe(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new ks({start:(r,l)=>this._dragStart(r,l),update:(r,l)=>this._dragUpdate(l),end:(r,l)=>this._dragEnd(l)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Xe(e.doubleTapTimeout)})}get hasPendingInputs(){return ys(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout=Xe(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,s){const{button:n,buttons:o,pointer:r,pointers:l,pointerType:d,timestamp:h}=s;return{action:e,delta:t,button:n,buttons:o,pointer:r,pointers:l,pointerType:d,timestamp:h}}_dragStart(e,t){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:n}=t,{center:o}=s;this._dragStartCenter=o;const r=this._createDoubleTapDragData("begin",pe(0,0),s);this._doubleTapDrag.emit(r,void 0,n),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:s}=e,{center:n}=t,o=pe(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r=this._createDoubleTapDragData("update",o,t);this._doubleTapDrag.emit(r,void 0,s),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:s}=e,{center:n}=t,o=pe(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r=this._createDoubleTapDragData("end",o,t);this._doubleTapDrag.emit(r,void 0,s),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,s=St(t),n=this._pointerState.get(s),{pointerType:o}=t.native;if(n){const r=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),to(n.event.data,t)>r?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:t}=e,{pointerType:s}=t.native,n=St(t),o=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._clearPointerDown(n),o);this._pointerState.set(n,{event:e,doubleTapTimeout:r}),this.refreshHasPendingInputs()}},_p=class extends te{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,s,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:n,pointers:yp(this._activePointerMap),pointer:t,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(e){const t=e.native.pointerId,s=Wi(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,n);const o=ns(n,Ka(this._activePointerMap));n.initialAngle=o,n.lastAngle=o,this._updatePointerAngles(s)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const t=e.native.pointerId,s=this._activePointerMap.get(t);s?s.event=e:this._addPointer(e)}_removePointer(e){const t=Wi(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=Wi(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=ns(s,t)-e,s.lastAngle=ns(s,t)-e})}_emitEvent(e,t,s){const n=Wi(this._activePointerMap);this._drag.emit(this._createPayload(e,t,n,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,s=As(e.timestamp);this._activePointerMap.get(t)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,As(e.timestamp))))}_handlePointerDrag(e){const t=e.data,s=t.currentEvent,n=As(e.timestamp);switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,n)):(this._addPointer(s),this._emitEvent("added",s,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Ka(i){const e=[];return i.forEach(t=>{e.push(pe(t.event.x,t.event.y))}),mp(e)}function Wi(i){const e=Ka(i);let t=0;return i.forEach(s=>{let n=ns(s,e),o=n-s.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;n=s.lastAngle+o,s.lastAngle=n;const r=n-s.initialAngle;t+=r}),t/=i.size||1,{angle:t,radius:e.radius,center:e.center}}function yp(i){const e=new Map;return i.forEach((t,s)=>e.set(s,t.event)),e}function ns(i,e){const t=i.event,s=t.x-e.center.x,n=t.y-e.center.y;return Math.atan2(n,s)}var br;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right",i[i.Back=3]="Back",i[i.Forward=4]="Forward",i[i.Undefined=-1]="Undefined"})(br||(br={}));let vp=class extends te{constructor(e=Ie.maximumDoubleClickDelay,t=Ie.maximumDoubleClickDistance,s=Ie.maximumDoubleTouchDelay,n=Ie.maximumDoubleTouchDistance,o=vs){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const t=e.data,s=St(t);if(!this._pointerState.has(s)){const n={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(s,n),this.startCapturingPointer(t.native)}}_handlePointerUp(e){const t=e.data,s=St(t),n=this._pointerState.get(s);if(n&&n.downButton===t.native.button){const o=n.immediateDoubleClick;if(o){o.timeoutHandle.remove();const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;to(o,e.data)>r?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,o.modifiers),this._removeState(t))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,t){const s=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),s)}}_removeState(e){const t=St(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const _i={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let wp=class extends te{constructor(e=_i.maximumClickDelay,t=_i.movementUntilMouseDrag,s=_i.movementUntilPenDrag,n=_i.movementUntilTouchDrag,o=_i.holdDelay,r=vs){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=t,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=n,this._holdDelay=o,this._clock=r,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",l=>{this._handlePointerLoss(l,"pointer-up")}),this.registerIncoming("pointer-capture-lost",l=>{this._handlePointerLoss(l,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",l=>{this._handlePointerLoss(l,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Xe(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const t=e.data,s=t.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const r=this._pointerState.get(s);if(r){if(!r.isDragging){const l=r.previousEvent;this._pointerHold.emit(l,void 0,e.modifiers),r.holdEmitted=!0}r.holdTimeout=null}},this._holdDelay));const o={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(s,o),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,s){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:s}}_handlePointerMove(e){const t=e.data,s=t.native.pointerId,n=this._pointerState.get(s);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,t),void 0,n.modifiers):pp(t,n.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),n.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const t=e.data,s=t.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,s===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,t)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,t){const s=e.data,n=s.native.pointerId,o=this._pointerState.get(n);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,t==="pointer-up"?s:o.previousEvent),void 0,o.modifiers):t==="pointer-up"&&o.downButton===s.native.button&&e.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(n),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Zi={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Tt=class extends D{constructor(){super(...arguments),this._handles=new yt}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([Je(()=>!e(),()=>this._disconnect()),Je(e,()=>this._connect())])}destroy(){this._handles=re(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=re(this._inputManager)}_connect(){const e=this.view.surface,t=new Wa(e,this.view.input),s=[new vp,new wp,new gp,new _p(this.view.navigation),new fp],n=new Pe({eventSource:t,recognizers:s});n.installHandlers("prevent-context-menu",[new up],ft.INTERNAL),n.installHandlers("navigation",[new np(this.view),new Ku(this.view),new sp(this.view),new _r(this.view),new _r(this.view,[Zi.counter]),new Hu(this.view,"primary"),new Ju(this.view,Zi.pan),new tp(this.view,Zi.zoom),new ep(this.view,Zi.rotate),new ju(this.view,"secondary"),new Uu(this.view,"touch")],ft.INTERNAL),this.view.viewEvents.connect(n),this._source=t,this._inputManager=n,y(()=>{var o,r;return(r=(o=this.view)==null?void 0:o.navigation)==null?void 0:r.browserTouchPanEnabled},o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},V)}get test(){return{inputManager:this._inputManager}}};a([c()],Tt.prototype,"view",void 0),a([c()],Tt.prototype,"latestPointerType",null),a([c()],Tt.prototype,"latestPointerLocation",null),a([c()],Tt.prototype,"multiTouchActive",null),Tt=a([I("esri.views.2d.input.MapViewInputManager")],Tt);const bp=Tt;let xt=class extends D{constructor(){super(...arguments),this.color=new Li([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};a([c({type:Li})],xt.prototype,"color",void 0),a([c({type:Li})],xt.prototype,"haloColor",void 0),a([c()],xt.prototype,"haloOpacity",void 0),a([c()],xt.prototype,"fillOpacity",void 0),xt=a([I("esri.views.2d.support.HighlightOptions")],xt);const Qa=xt,Mp=i=>i.includes("Brush");let Ya=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Mp(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function Ip(i,e,t,s,n,o,r,l){i.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let d=null;i.width!=null&&i.height!=null?d=[i.width,i.height]:i.width==null&&i.height!=null?d=[i.height,i.height]:i.width!=null&&i.height==null?d=[i.width,i.width]:i.width==null&&i.height==null&&(d=null);const h=t[0]-(s.left+s.right),u=t[1]-(s.top+s.bottom);let p,g,f=i.area||{x:0,y:0,width:h,height:u};if(d){const M=h/u,C=d[0]/d[1];if(C>M){const P=f.width/C;f={x:f.x,y:Math.round(f.y+(f.height-P)/2),width:f.width,height:Math.round(P)}}else{const P=f.height*C;f={x:Math.round(f.x+(f.width-P)/2),y:f.y,width:Math.round(P),height:f.height}}}else d=[f.width,f.height];return d[0]>f.width?(p=Math.min(d[0]/f.width,e),g=d[0]/f.width/p):(p=1,g=d[0]/f.width),{resolutionScale:p,cropArea:{x:Math.round((f.x+s.left)*p),y:Math.round((f.y+s.top)*p),width:Math.round(f.width*p),height:Math.round(f.height*p)},outputScale:g,format:n,quality:o,children:r,rotation:l}}function Cp(i,e,t){const{ctx:s,canvas:n}=Xa(i,t),o=s.getImageData(0,0,i.width,i.height),r=Ep(n,e);return Ja(n),{dataUrl:r,data:o}}function Tp(i,e){const{ctx:t,canvas:s}=Xa(i,e),n=t.getImageData(0,0,i.width,i.height);return Ja(s),n}function Xa(i,e){const t=xp();e.premultipliedAlpha&&Fp(i),t.width=i.width,t.height=i.height;const s=t.getContext("2d",{willReadFrequently:!0});return s.putImageData(i,0,0),e.flipY&&Ap(s),{ctx:s,canvas:t}}function Ja(i){i.width=0,i.height=0}function xp(){return F(nn)&&(nn=document.createElement("canvas")),nn}let nn=null;function Ep(i,e){const t=Rp[e.format],s=e.quality/100;return i.toDataURL(t,s)}function $p(i,e){const t=Pp(i),s=Sp[t];return{format:t,quality:Ai(e??s,0,100)}}function kp(i,e){return e/Math.max(i[0],i[1])}function s_(i,e,t,s=0,n=0,o=i.width-s,r=i.height-n,l=!1){const{data:d}=i,{width:h,height:u,data:p}=e,g=o/h,f=r/u,M=Math.ceil(g/2),C=Math.ceil(f/2),P=i.width;for(let A=0;A<u;A++)for(let N=0;N<h;N++){const L=4*(N+(l?u-A-1:A)*h);let H=0,X=0,ie=0,q=0,Ot=0,zi=0;const di=(A+.5)*f;for(let Nt=Math.floor(A*f);Nt<(A+1)*f;Nt++){const Bi=Math.abs(di-(Nt+.5))/C,ul=(N+.5)*g,pl=Bi*Bi;for(let qi=Math.floor(N*g);qi<(N+1)*g;qi++){const io=Math.abs(ul-(qi+.5))/M,zt=Math.sqrt(pl+io*io);if(zt>=1)continue;let et=2*zt*zt*zt-3*zt*zt+1;const Bt=4*(s+qi+(n+Nt)*P);zi+=et*d[Bt+3],X+=et,!t&&d[Bt+3]<255&&(et=et*d[Bt+3]/255),ie+=et*d[Bt],q+=et*d[Bt+1],Ot+=et*d[Bt+2],H+=et}}p[L]=ie/H,p[L+1]=q/H,p[L+2]=Ot/H,p[L+3]=zi/X}return e}function Pp(i){switch(i){case"png":case"jpg":case"jpeg":return i;default:return Lp}}function Ap(i){i.save(),i.globalCompositeOperation="copy",i.scale(1,-1),i.translate(0,-i.canvas.height),i.drawImage(i.canvas,0,0),i.restore()}function Fp(i){const e=i.data,t=e.length;for(let s=0;s<t;s+=4){const n=e[s+3];if(n!==255&&n>0){const o=255/n;e[s+0]=e[s+0]*o,e[s+1]=e[s+1]*o,e[s+2]=e[s+2]*o}}}const Rp={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Mr=98,Lp="png",Sp={png:100,jpg:Mr,jpeg:Mr};function Dp(i){const e=qc(i);if(!e.available)return new $("webgl:required","WebGL is required but not supported.");if(i==="3d"&&e.majorPerformanceCaveat)return new $("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new $("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new $("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Uc.WEBGL1){if(!e.supportsElementIndexUint)return new $("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new $("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new $("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Vp(i){return i&&"nodeType"in i}function Op(i){return i&&typeof i.render=="function"}const Ir={component:"esri-component"};let Et=class extends D{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(Ir.component),t&&t.classList.remove(Ir.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||Vp(e)?(this._set("widget",null),Or(e)):(Op(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};a([c({dependsOn:[]})],Et.prototype,"id",null),a([c()],Et.prototype,"node",null),a([Ce("node")],Et.prototype,"castNode",null),a([c({readOnly:!0})],Et.prototype,"widget",void 0),Et=a([I("esri.views.ui.Component")],Et);const os=Et,Np={left:0,top:0,bottom:0,right:0},el={bottom:30,top:15,right:15,left:15},on="manual",Ue="esri-ui",de={ui:Ue,corner:`${Ue}-corner`,innerContainer:`${Ue}-inner-container`,manualContainer:`${Ue}-manual-container`,cornerContainer:`${Ue}-corner-container`,topLeft:`${Ue}-top-left`,topRight:`${Ue}-top-right`,bottomLeft:`${Ue}-bottom-left`,bottomRight:`${Ue}-bottom-right`};function zp(i){return i&&!i._started&&typeof i.postMixInProperties=="function"&&typeof i.buildRendering=="function"&&typeof i.postCreate=="function"&&typeof i.startup=="function"}function rn(i){const e=i,t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?i:null}function an(i,{top:e,bottom:t,left:s,right:n}){i.style.top=e,i.style.bottom=t,i.style.left=s,i.style.right=n}let Fe=class extends Dn.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=Wr(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&an(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&an(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([y(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,V),y(()=>this.padding,this._applyUIPadding,V),y(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},V),dc(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(de.ui),oc(e),this._attachContainers(e)),t&&(t.classList.remove(de.ui),an(t,{top:"",bottom:"",left:"",right:""}),Nr(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),s=t.top+t.bottom;return Math.max(e-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...el,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),s=t.left+t.right;return Math.max(e-s,0)}add(e,t){let s,n;if(Array.isArray(e))return void e.forEach(r=>this.add(r,t));const o=rn(e);o&&({index:s,position:t,component:e,key:n}=o),t&&typeof t=="object"&&({index:s,key:n,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,s,n)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,t));const s=this._find(e);if(s){const n=this._componentToKey;if(n.has(e)&&n.get(e)!==t)return;const o=this._components.indexOf(s);return s.node.parentNode&&s.node.parentNode.removeChild(s.node),this._componentToKey.delete(e),this._components.splice(o,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,s)=>t.concat(s)):(e=e||on)===on?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(de.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(r=>this.move(r,t)),!e)return;let s;const n=rn(e)||rn(t);if(n&&(s=n.index,t=n.position,e=n.component||e),t&&!this._isValidPosition(t))return;const o=this.remove(e);o&&this.add(o,{position:t,index:s})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,s,n){e instanceof os||(e=new os({node:e})),this._place({component:e,position:t,index:s}),this._components.push(e),n&&this._componentToKey.set(e,n)}_find(e){return e?e instanceof os?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||Np}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(de.innerContainer),e.classList.add(de.cornerContainer);const t=document.createElement("div");t.classList.add(de.innerContainer),t.classList.add(de.manualContainer);const s=document.createElement("div");s.classList.add(de.topLeft),s.classList.add(de.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(de.topRight),n.classList.add(de.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(de.bottomLeft),o.classList.add(de.corner),e.appendChild(o);const r=document.createElement("div");r.classList.add(de.bottomRight),r.classList.add(de.corner),e.appendChild(r),this._innerContainer=e,this._manualContainer=t;const l=Ve();this._cornerNameToContainerLookup={"top-left":s,"top-right":n,"bottom-left":o,"bottom-right":r,"top-leading":l?n:s,"top-trailing":l?s:n,"bottom-leading":l?r:o,"bottom-trailing":l?o:r},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,s=e.position||on,n=e.index,o=this._positionNameToContainerLookup[s],r=n!=null&&n>-1;if(zp(t.widget)&&t.widget.startup(),!r)return void o.appendChild(t.node);const l=Array.prototype.slice.call(o.children);if(n===0)return void(o.firstChild?ho(t.node,o.firstChild):o.appendChild(t.node));n>=l.length?o.appendChild(t.node):ho(t.node,l[n])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,s=null;return this._components.some(n=>(t=n===e,t&&(s=n),t)),s}_findById(e){let t,s=null;return this._components.some(n=>(t=n.id===e,t&&(s=n),t)),s}_findByNode(e){let t,s=null;return this._components.some(n=>(t=n.node===e,t&&(s=n),t)),s}};a([c()],Fe.prototype,"_locale",void 0),a([c()],Fe.prototype,"container",null),a([c()],Fe.prototype,"height",null),a([c({value:el})],Fe.prototype,"padding",null),a([Ce("padding")],Fe.prototype,"castPadding",null),a([c()],Fe.prototype,"view",void 0),a([c()],Fe.prototype,"width",null),Fe=a([I("esri.views.ui.UI")],Fe);const Bp=Fe;function Cr(i,e){return i&&"copyright"in i&&(!e||typeof i.originOf=="function"&&i.originOf("copyright")==="user")}function qp(i,e){return i.length!==e.length||i.some((t,s)=>t.text!==e[s].text)}function Ki(i,e,t){!t||!e||i.find(s=>s.layerView===e&&s.text===t)||i.push({text:t,layerView:e})}function Up(i){return i.type==="bing-maps"}const it=[];let Yt=class extends qr{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new W,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const s=this.get("view.allLayerViews");s&&this.handles.add(s.map(n=>y(()=>{var o;return[n.suspended,(o=n.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([Ee(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Je(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;it.length=0,e&&t?(t.forEach(s=>{var r;if(s.suspended||!((r=s.layer)!=null&&r.attributionVisible))return;const n=s.layer;if(Cr(n,"user"))return void Ki(it,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const l=this._fetchedAttributionData.get(s);return void(l?Ki(it,s,this._getDynamicAttribution(l,e,n)):Cr(n)&&Ki(it,s,n.copyright))}return void this._fetchAttributionData(s)}const o=n.get("portalItem.accessInformation");Ki(it,s,o||n.copyright)}),qp(this.items,it)&&(this.items.removeAll(),this.items.addMany(it)),it.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await bc(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const s=t.ok?this._createContributionIndex(t.value,Up(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,s)}this._updateAttributionItems()}_createContributionIndex(e,t){const s=e.contributors,n={};if(!s)return n;for(let o=0;o<s.length;o++){const r=s[o],l=r.coverageAreas;if(!l)return;for(const d of l){const h=d.bbox,u=d.zoomMin-(t&&d.zoomMin?1:0),p=d.zoomMax-(t&&d.zoomMax?1:0),g={xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:An.WGS84},f={extent:Ar(g),attribution:r.attribution||"",score:d.score!=null?d.score:100,id:o};for(let M=u;M<=p;M++)n[M]=n[M]||[],n[M].push(f)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,t,s){var u;const{extent:n,scale:o}=t;let r=((u=s.tileInfo)==null?void 0:u.scaleToZoom(o))??0;if(r=Math.min(e.maxKey??0,Math.round(r)),!n||r==null||r<=-1)return"";const l=e[r],d=xl(n.center.clone().normalize(),t.spatialReference),h={};return l?l.filter(p=>{const g=p.id,f=!h[g]&&d&&p.extent&&Rr(p.extent,d);return f&&(h[g]=!0),f}).sort((p,g)=>g.score-p.score||p.objectId-g.objectId).map(p=>p.attribution).join(", "):""}};a([c({readOnly:!0,type:W})],Yt.prototype,"items",void 0),a([c({readOnly:!0})],Yt.prototype,"state",null),a([c()],Yt.prototype,"view",void 0),Yt=a([I("esri.widgets.Attribution.AttributionViewModel")],Yt);const tl=Yt,jt="esri-attribution",st={base:`${jt} esri-widget`,poweredBy:`${jt}__powered-by`,sources:`${jt}__sources`,open:`${jt}--open`,sourcesOpen:`${jt}__sources--open`,link:`${jt}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ue=class extends le{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(s=>s.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=st.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new tl}initialize(){this.addHandles(Ee(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[st.open]:this._isOpen};return m("div",{bind:this,class:this.classes(st.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return m("div",{class:st.poweredBy},"Powered by"," ",m("a",{class:st.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,s=t?"0":"",{attributionText:n}=this,o={[st.sourcesOpen]:e,[st.interactive]:t};return m("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(st.sources,o),innerHTML:n,tabindex:s})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:s,clientWidth:n,scrollWidth:o}=e,r=o>n,l=this._attributionTextOverflowed!==r;if(this._attributionTextOverflowed=r,l&&(t=!0),this._isOpen){const d=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,d&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};a([c()],ue.prototype,"_isOpen",void 0),a([c()],ue.prototype,"_isInteractive",null),a([c()],ue.prototype,"_attributionTextOverflowed",void 0),a([c()],ue.prototype,"_prevSourceNodeHeight",void 0),a([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ue.prototype,"attributionText",null),a([c()],ue.prototype,"iconClass",void 0),a([c()],ue.prototype,"itemDelimiter",void 0),a([c()],ue.prototype,"label",null),a([c(),ae("esri/widgets/Attribution/t9n/Attribution")],ue.prototype,"messages",void 0),a([c()],ue.prototype,"view",null),a([c({type:tl})],ue.prototype,"viewModel",void 0),a([Me()],ue.prototype,"_toggleState",null),ue=a([I("esri.widgets.Attribution")],ue);const Hp=ue,jp="esri.widgets.CompassViewModel";let $t=class extends Kr(D){constructor(e){super(e),this._handles=new yt,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(y(()=>this.view,this._updateRotationWatcher,V))}destroy(){Xe(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var t;if(!this.get("view.ready"))return;const e={};((t=this.view)==null?void 0:t.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?y(()=>e==null?void 0:e.rotation,this._updateForRotation,V):y(()=>e==null?void 0:e.camera,this._updateForCamera,V))}};a([c({readOnly:!0})],$t.prototype,"canShowNorth",null),a([c()],$t.prototype,"orientation",void 0),a([c({readOnly:!0})],$t.prototype,"state",null),a([c()],$t.prototype,"view",void 0),$t=a([I(jp)],$t);const il=$t,nt={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Re=class extends le{constructor(e,t){super(e,t),this.iconClass=nt.widgetIcon,this.messages=null,this.viewModel=new il}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,s=t==="disabled",n=(t==="rotation"?"rotation":"compass")=="compass",o=s?-1:0,r={[nt.disabled]:s,[nt.interactive]:!s},l={[nt.northIcon]:n,[nt.rotationIcon]:!n},{messages:d}=this;return m("div",{bind:this,class:this.classes(nt.base,r),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:o,"aria-label":d.reset,title:d.reset},m("span",{"aria-hidden":"true",class:this.classes(nt.icon,l),styles:this._toRotationTransform(e)}),m("span",{class:nt.text},d.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};a([c()],Re.prototype,"goToOverride",null),a([c()],Re.prototype,"iconClass",void 0),a([c()],Re.prototype,"label",null),a([c(),ae("esri/widgets/Compass/t9n/Compass")],Re.prototype,"messages",void 0),a([c()],Re.prototype,"view",null),a([c({type:il})],Re.prototype,"viewModel",void 0),a([Me()],Re.prototype,"_reset",null),Re=a([I("esri.widgets.Compass")],Re);const Gp=Re,Gt="esri-navigation-toggle",ve={base:`${Gt} esri-widget`,button:`${Gt}__button esri-widget--button`,activeButton:`${Gt}__button--active`,panButton:`${Gt}__button--pan`,rotateButton:`${Gt}__button--rotate`,isLayoutHorizontal:`${Gt}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Xt=class extends D{constructor(i){super(i),this.navigationMode="pan",this.view=null}initialize(){this.own(Je(()=>{var i;return(i=this.view)==null?void 0:i.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var i;return this.get("view.ready")&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};a([c({readOnly:!0})],Xt.prototype,"state",null),a([c()],Xt.prototype,"navigationMode",void 0),a([c()],Xt.prototype,"view",void 0),Xt=a([I("esri.widgets.NavigationToggleViewModel")],Xt);const sl=Xt;let Le=class extends le{constructor(e,t){super(e,t),this.iconClass=ve.widgetIcon,this.messages=null,this.viewModel=new sl}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",s={[ve.disabled]:e,[ve.isLayoutHorizontal]:this.layout==="horizontal"},n={[ve.activeButton]:t},o={[ve.activeButton]:!t},r=e?-1:0,l=this.messages.toggle;return m("div",{bind:this,class:this.classes(ve.base,s),onclick:this._toggle,onkeydown:this._toggle,tabIndex:r,"aria-label":l,title:l},m("div",{class:this.classes(ve.button,ve.panButton,n)},m("span",{class:ve.panIcon})),m("div",{class:this.classes(ve.button,ve.rotateButton,o)},m("span",{class:ve.rotationIcon})))}_toggle(){this.toggle()}};a([c()],Le.prototype,"iconClass",void 0),a([c()],Le.prototype,"label",null),a([c({value:"vertical"})],Le.prototype,"layout",null),a([c(),ae("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Le.prototype,"messages",void 0),a([c()],Le.prototype,"view",null),a([c({type:sl})],Le.prototype,"viewModel",void 0),a([Me()],Le.prototype,"_toggle",null),Le=a([I("esri.widgets.NavigationToggle")],Le);const Wp=Le,yi={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let ut=class extends le{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const i=this.enabled?0:-1,e={[yi.disabled]:!this.enabled,[yi.interactive]:this.enabled},t={[this.iconClass]:!!this.iconClass};return m("div",{bind:this,class:this.classes(yi.button,e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:i,title:this.title},m("span",{"aria-hidden":"true",role:"presentation",class:this.classes(yi.icon,t)}),m("span",{class:yi.iconText},this.title))}_triggerAction(){this.action.call(this)}};a([c()],ut.prototype,"action",void 0),a([c()],ut.prototype,"enabled",void 0),a([c()],ut.prototype,"iconClass",void 0),a([c()],ut.prototype,"title",void 0),a([Me()],ut.prototype,"_triggerAction",null),ut=a([I("esri.widgets.IconButton")],ut);const Tr=ut;let Jt=class extends D{get canZoomIn(){if(!this.get("view.ready"))return!1;const i=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return e===0||i>e}get canZoomOut(){if(!this.get("view.ready"))return!1;const i=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");return e===0||i<e}};a([c({readOnly:!0})],Jt.prototype,"canZoomIn",null),a([c({readOnly:!0})],Jt.prototype,"canZoomOut",null),a([c()],Jt.prototype,"view",void 0),Jt=a([I("esri.widgets.Zoom.ZoomConditions2D")],Jt);const Zp=Jt;let ei=class extends D{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};a([c({readOnly:!0})],ei.prototype,"canZoomIn",null),a([c({readOnly:!0})],ei.prototype,"canZoomOut",null),a([c()],ei.prototype,"view",void 0),ei=a([I("esri.widgets.Zoom.ZoomConditions3D")],ei);const Kp=ei;let pt=class extends D{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return w(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return w(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Zp({view:e}):e.type==="3d"&&(this._zoomConditions=new Kp({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():$i(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():$i(e.goTo({zoomFactor:.5}))}};a([c()],pt.prototype,"_zoomConditions",void 0),a([c()],pt.prototype,"canZoomIn",null),a([c()],pt.prototype,"canZoomOut",null),a([c({readOnly:!0})],pt.prototype,"state",null),a([c()],pt.prototype,"view",null),pt=a([I("esri.widgets.Zoom.ZoomViewModel")],pt);const nl=pt,vi={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Ze=class extends le{constructor(e,t){super(e,t),this.iconClass=vi.widgetIcon,this.messages=null,this.viewModel=new nl}initialize(){this._zoomInButton=new Tr({action:this.zoomIn.bind(this),iconClass:vi.zoomInIcon}),this._zoomOutButton=new Tr({action:this.zoomOut.bind(this),iconClass:vi.zoomOutIcon})}destroy(){this._zoomInButton=re(this._zoomInButton),this._zoomOutButton=re(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[vi.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:s,canZoomOut:n}=e;this._zoomInButton.enabled=s,this._zoomOutButton.enabled=n;const{zoomIn:o,zoomOut:r}=this.messages;return this._zoomInButton.title=o,this._zoomOutButton.title=r,m("div",{class:this.classes(vi.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};a([c()],Ze.prototype,"iconClass",void 0),a([c()],Ze.prototype,"label",null),a([c({value:"vertical"})],Ze.prototype,"layout",null),a([c(),ae("esri/widgets/Zoom/t9n/Zoom")],Ze.prototype,"messages",void 0),a([c()],Ze.prototype,"view",null),a([c({type:nl})],Ze.prototype,"viewModel",void 0),Ze=a([I("esri.widgets.Zoom")],Ze);const Qp=Ze;function Yp(i){return i&&i.view!==void 0}let rs=class extends Bp{constructor(i){super(i),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([y(()=>this.components,this._componentsWatcher.bind(this),V),y(()=>this.view,this._updateViewAwareWidgets.bind(this),V)])}_add(i,e,t,s){let n=i;if(typeof i=="string"&&this._defaultPositionLookup[i]){if(this._find(i))return;n=this._createComponent(i)}super._add(n,e,t,s)}_removeComponents(i){i.forEach(e=>{const t=this._find(e);t&&(this.remove(t),t.destroy())})}_updateViewAwareWidgets(i){this.components.forEach(e=>{const t=this._find(e),s=t&&t.widget;Yp(s)&&(s.view=i)})}_componentsWatcher(i,e){this._removeComponents(e),this._addComponents(i),this._adjustPadding(i)}_adjustPadding(i){if(!i.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(i){this.constructed&&i.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(i){const e=this._createWidget(i);if(e)return new os({id:i,node:e})}_createWidget(i){return i==="attribution"?this._createAttribution():i==="compass"?this._createCompass():i==="navigation-toggle"?this._createNavigationToggle():i==="zoom"?this._createZoom():void 0}_createAttribution(){return new Hp({view:this.view})}_createCompass(){return new Gp({view:this.view})}_createNavigationToggle(){return new Wp({view:this.view})}_createZoom(){return new Qp({view:this.view})}};a([c()],rs.prototype,"components",void 0),rs=a([I("esri.views.ui.DefaultUI")],rs);const Xp=rs;let as=class extends Xp{constructor(i){super(i),this.components=["attribution","zoom"]}};a([c()],as.prototype,"components",void 0),as=a([I("esri.views.ui.2d.DefaultUI2D")],as);const ol=as;var kn;let ls=kn=class extends fs{constructor(i){super(i),this.color=new Li([0,0,0,1])}clone(){return new kn($l({color:this.color}))}};a([c({type:Li,json:{write:!0}})],ls.prototype,"color",void 0),ls=kn=a([I("esri.webmap.background.ColorBackground")],ls);const Jp=ls;let rl,al,ll,cl,dl,hl;async function em(){const[,{GraphicsView2D:i,GraphicContainer:e,LabelManager:t,MapViewNavigation:s,MagnifierView2D:n,Stage:o}]=await Promise.all([b(()=>import("./webglDeps-8052ac07.js"),["assets/webglDeps-8052ac07.js","assets/VertexArrayObject-315bde4b.js","assets/Error-781981d1.js","assets/string-75082bc6.js","assets/typedArrayUtil-74bbfd45.js","assets/Texture-f1890c15.js","assets/mathUtils-15f63a45.js","assets/context-util-31041918.js","assets/enums-64ab819c.js","assets/ProgramTemplate-da7e5f1d.js","assets/programUtils-5ef87558.js","assets/NestedMap-1b5db22e.js"]),b(()=>import("./mapViewDeps-b8e74d04.js"),["assets/mapViewDeps-b8e74d04.js","assets/Error-781981d1.js","assets/string-75082bc6.js","assets/typedArrayUtil-74bbfd45.js","assets/promiseUtils-28f2a985.js","assets/watch-c7facfb0.js","assets/ArrayPool-ae2ef0ab.js","assets/nextTick-3ee5a785.js","assets/mat3f32-6c416b1c.js","assets/CIMResourceManager-f2bdf1ff.js","assets/request-6e1d5843.js","assets/preload-helper-fb43855a.js","assets/Rasterizer-afd81f67.js","assets/_commonjsHelpers-2f3e7994.js","assets/mathUtils-15f63a45.js","assets/cimAnalyzer-d2dc3869.js","assets/Color-5e799d63.js","assets/colorUtils-639f4d25.js","assets/ensureType-125d327f.js","assets/fontUtils-dae2860f.js","assets/screenUtils-7afeb41c.js","assets/fieldUtils-85274dd9.js","assets/geometry-0d19f94b.js","assets/Extent-8fae2379.js","assets/Accessor-815cb0cf.js","assets/JSONSupport-2b897629.js","assets/cast-f7d2a22f.js","assets/Polyline-40b9e769.js","assets/typeUtils-3bf84b36.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-3cd21eb0.js","assets/jsonUtils-15ca15d7.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/utils-36c92184.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/mat2d-68947564.js","assets/vec2-4c517306.js","assets/vec2f32-eaf29605.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-158f275c.js","assets/floatRGBA-047cef41.js","assets/rasterizingUtils-263a194f.js","assets/imageutils-20e8663d.js","assets/Container-1fd7ba94.js","assets/EffectView-106fd8f9.js","assets/parser-527c5e80.js","assets/mat4f32-60a2394b.js","assets/mat4-a8da3f27.js","assets/Evented-3dfb26f2.js","assets/enums-64ab819c.js","assets/Texture-f1890c15.js","assets/context-util-31041918.js","assets/BufferPool-1f98d681.js","assets/enums-b1d611e3.js","assets/WGLContainer-302ed869.js","assets/VertexArrayObject-315bde4b.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-e7189c96.js","assets/ProgramTemplate-da7e5f1d.js","assets/MaterialKey-34911e37.js","assets/utils-eea54cdd.js","assets/heatmapUtils-8c1efe72.js","assets/vec4f64-aa64c7e9.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/reactiveUtils-31da19f9.js","assets/earcut-61f7b102.js","assets/vec2f64-22afc56f.js","assets/featureConversionUtils-55a32b06.js","assets/aaBoundingBox-5e14079b.js","assets/OptimizedFeature-6cca5f48.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/programUtils-5ef87558.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-ac5d1332.js","assets/pbf-c0fe6550.js","assets/Matcher-2700b0d9.js","assets/TileStrategy-56172cce.js","assets/TileStore-53c9ad86.js","assets/Queue-687500af.js","assets/TileKey-e007f54a.js","assets/rbush-f2a85c98.js","assets/quickselect-56c5966e.js","assets/Query-4c66990d.js","assets/TimeExtent-202e4138.js","assets/enumeration-94b1319d.js","assets/DataLayerSource-3a7a94c9.js","assets/Field-7770b57d.js","assets/fieldType-e429d020.js","assets/FullTextSearch-da95615f.js","assets/Clonable-6d5134c7.js","assets/visualVariablesUtils-c19b01f0.js","assets/visualVariablesUtils-87145551.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-80b75c8b.js","assets/assets-7bd3ffcf.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-425021b3.js","assets/MemCache-9d81d118.js","assets/ExpandedCIM-71cc43f8.js","assets/devEnvironmentUtils-5002a058.js","assets/Portal-c7b19d88.js","assets/Loadable-6776e4d9.js","assets/Promise-092442f7.js","assets/locale-30120714.js","assets/PortalGroup-d3a43002.js","assets/PortalUser-a3f3561a.js","assets/persistableUrlUtils-0364346d.js","assets/styleUtils-88557de2.js","assets/CircularArray-27e292bb.js","assets/webgl-debug-b1f7a2c5.js","assets/HandleOwner-124247b4.js","assets/FeatureSetReader-0068ee06.js","assets/ArcadeDate-3d8ef842.js","assets/executionError-fb3f283a.js","assets/datetime-b6333958.js","assets/arcadeTimeUtils-4ff979d1.js","assets/FieldsIndex-24f2e4ca.js","assets/TimeReference-afe9f4e7.js","assets/centroid-e285663a.js","assets/lengthUtils-40356f92.js","assets/sizeVariableUtils-d4870b0d.js","assets/RenderingContext-a95e362b.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/basicInterfaces-b7051eb1.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/mat3-53e5916e.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-79d61d37.js","assets/normalizeUtilsSync-f6be8e80.js","assets/normalizeUtilsCommon-04cad10b.js","assets/projectionSupport-617bead6.js","assets/projection-6de68766.js","assets/SimpleObservable-729c9019.js","assets/zscale-a617710a.js","assets/json-48e3ea08.js","assets/labelingInfo-40ffffc8.js","assets/symbols-716c75e3.js","assets/CIMSymbol-3ee77172.js","assets/opacityUtils-107b33de.js","assets/symbolLayerUtils3D-15190f75.js","assets/Collection-912f4315.js","assets/collectionUtils-5a99c1c0.js","assets/labelUtils-75fd34dc.js","assets/layerUtils-5e9bebc1.js","assets/jsonUtils-aa2a2e29.js","assets/AttributeStoreView-89b5e0d8.js","assets/TiledDisplayObject-a8c16acc.js","assets/schemaUtils-7f923636.js","assets/sql-71c23a8f.js","assets/diffUtils-0b07ec68.js","assets/createSymbolSchema-5985c686.js","assets/rendererUtils-1bc13370.js","assets/capabilities-c77778e7.js","assets/FeatureReductionLayer-68313f46.js","assets/jsonUtils-0607c004.js","assets/PopupTemplate-51cd4af1.js","assets/number-5e819186.js","assets/ActionToggle-dc9b6fc6.js","assets/Identifiable-f5397426.js","assets/UniqueValueRenderer-c479518a.js","assets/LegendOptions-540a8245.js","assets/colorRamps-f3b121e7.js","assets/visualVariableUtils-74855aa7.js","assets/Graphic-87396b85.js","assets/compilerUtils-024563a4.js","assets/jsonUtils-fea00035.js","assets/DictionaryLoader-4286edaa.js","assets/deprecate-da2b7904.js","assets/commonProperties-3eba42f9.js","assets/ElevationInfo-89e4d39d.js","assets/util-7544e8cf.js","assets/ComputedAttributeStorage-d77f8c87.js","assets/normalizeUtils-120a3150.js","assets/utils-25aa08c8.js","assets/utils-067ee6bc.js","assets/GraphicContainer-0dd1ee7e.js","assets/BaseGraphicContainer-7daba3ab.js","assets/FeatureContainer-51f61b6f.js","assets/TileContainer-41317e18.js","assets/vec3f32-ad1dc57f.js","assets/asyncUtils-5c97747c.js","assets/requestImageUtils-478e4ac7.js","assets/Cyclical-a38bc08c.js","assets/CollectionFlattener-670e79b4.js","assets/workers-79a370d4.js","assets/Connection-4113b752.js","assets/intl-71e7974a.js","assets/messages-dc0c80a1.js","assets/TileInfo-1aef4d7f.js","assets/TileKey-b87e0dc5.js","assets/jsxFactory-9e4b8e7b.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-6ef9e2f8.js","assets/AttachmentQuery-527f7d40.js","assets/Heading-9979860e.js","assets/widget-30d91dc2.js","assets/symbolUtils-b6a898f8.js","assets/utils-6bcb0cea.js","assets/ItemCache-dc80b100.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-9412a45d.js","assets/executeQueryJSON-9dcde882.js","assets/query-e9117fc1.js","assets/urlUtils-6a004888.js","assets/pbfQueryUtils-9730bd74.js","assets/queryZScale-e2b48f65.js","assets/FeatureSet-11704ad2.js","assets/RelationshipQuery-9431dd85.js","assets/TopFeaturesQuery-bceb40dd.js","assets/FeatureLayer-81642491.js","assets/MultiOriginJSONSupport-6a5e69d5.js","assets/FeatureLayerBase-eb045254.js","assets/HeightModelInfo-0c04472c.js","assets/arcgisLayerUrl-94ca51fa.js","assets/serviceCapabilitiesUtils-f8cdc42b.js","assets/Layer-9c99e5a9.js","assets/editsZScale-884a3138.js","assets/APIKeyMixin-8bba595e.js","assets/ArcGISService-04cf234b.js","assets/BlendLayer-f72967b1.js","assets/CustomParametersMixin-7c5495bd.js","assets/EditBusLayer-b9bbb936.js","assets/OperationalLayer-be76a501.js","assets/OrderedLayer-0495accc.js","assets/PortalLayer-ab74a160.js","assets/PortalItem-90bf2143.js","assets/portalItemUtils-2867876d.js","assets/RefreshableLayer-ac9eee59.js","assets/ScaleRangeLayer-abd4cd2e.js","assets/TemporalLayer-1e6749cc.js","assets/FeatureTemplate-d52241a0.js","assets/FeatureType-f3879578.js","assets/fieldProperties-00a2cc41.js","assets/versionUtils-09a78861.js","assets/styleUtils-023b7cfa.js","assets/popupUtils-c2b20cc0.js","assets/Scheduler-58e89fab.js","assets/GoTo-a612a338.js","assets/accessibleHandler-33d234ac.js","assets/vmEvent-d773b6c5.js","assets/Map-471aba16.js","assets/Basemap-c8601fc5.js","assets/loadAll-38268fb1.js","assets/writeUtils-8884705e.js","assets/basemapUtils-7287d45c.js","assets/TablesMixin-d42f2392.js","assets/GraphicsCollection-0ae219af.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js"])]);al=i,ll=e,cl=t,dl=s,hl=n,rl=o}const xr=160;function tm(i){return i&&i.declaredClass==="esri.Viewpoint"}let k=class extends Gc(Uh(Hh(hu))){constructor(i){super(i),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Lr({getCollections:()=>{var e,t;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(t=this.basemapView)==null?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new Du(this),this._pePromise=null,this.floors=new W,this.highlightOptions=new Qa,this.inputManager=new bp({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Ya,this.type="2d",this.ui=new ol,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new Ga,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([y(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(xr)},Fi),this.on("resize",e=>this._resizeHandler(e)),y(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),Ll()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new zc(this.featuresTilingScheme)}get initialExtentRequired(){var r;const{scale:i,constraints:e,center:t,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((r=this.map.initialViewProperties)!=null&&r.viewpoint))&&!n&&(e!=null&&e.effectiveLODs||(o=-1),(!t||i===0&&o===-1)&&(!s||!w(s.targetGeometry)||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Ri()||(this._pePromise||(this._pePromise=bs().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const i=this._getDefaultViewpoint();if(!i)return!1;const e=this.spatialReference,t=be(i.targetGeometry);return!!ws(t.spatialReference,e)||this._projectionEngineLoaded}set animation(i){const e=this._get("animation");if(i===e)return;if(e&&e.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i),this.frameTask.animationInProgress=!0;const t=()=>{var s;i===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};i.when(t,t)}get background(){return sm(this.map)?this.map.initialViewProperties.background:null}set background(i){this._override("background",i)}get center(){if(!this.ready)return this._get("center");const{center:i,spatialReference:e}=this.state.paddedViewState;return new Y({x:i[0],y:i[1],spatialReference:e})}set center(i){if(i==null)return;if(!this.ready)return this._set("center",i),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(i,this.spatialReference)}catch(s){return void O.getLogger(this.declaredClass).error(new $("mapview:invalid-center","could not project the value in the view's spatial reference",{input:i,error:s}))}const t=this.viewpoint;Mn(t,t,e),this.viewpoint=t}set constraints(i){const e=this._get("constraints");e&&(this.handles.remove("map-view-constraints"),e.destroy()),this._set("constraints",i),i&&(i.view=this,this.ready&&(this.state.viewpoint=i.fit(this.state.paddedViewState.viewpoint)),this.handles.add(y(()=>i.version,()=>{this.ready&&this.state&&(this.state.viewpoint=i.fit(this.state.paddedViewState.viewpoint))},Fi),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(i){if(i==null)return;if(!i.width||!i.height)return void O.getLogger(this.declaredClass).error(new $("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",i),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(i,this.spatialReference)}catch(s){return void O.getLogger(this.declaredClass).error(new $("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const t=this.viewpoint;wu(t,t,e,this.size,{constraints:this.constraints}),this.viewpoint=t}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(i){this.ready?(this.state.padding=i,this._set("padding",this.state.padding)):this._set("padding",i)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(i){if(isNaN(i))return;if(!this.ready)return void this._set("rotation",i);const e=this.viewpoint;Fu(e,e,i),this.viewpoint=e}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(i){if(!i||isNaN(i))return;if(!this.ready){this._set("scale",i),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;pr(e,e,i),this.viewpoint=e}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,t,s;const i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(n=>!n.destroyed&&!("layerViews"in n)&&n.updating===!0));if(De("esri-2d-log-updating")){const n=this.allLayerViews.reduce((o,r)=>({...o,[r.layer.id]:!r.destroyed&&!("layerViews"in r)&&r.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(t=this.labelManager)==null?void 0:t.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(n)}
`)}return i}get viewpoint(){if(!this.ready)return this._get("viewpoint");const i=this.state.paddedViewState;return i&&i.viewpoint.clone()}set viewpoint(i){if(i==null)return;if(!this.ready)return this._set("viewpoint",i),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let e,t;try{e=this._project(i,this.spatialReference),!i.scale||isNaN(i.scale)?t=new $("mapview:invalid-viewpoint",`invalid scale value of ${i.scale}`):F(i.targetGeometry)&&(t=new $("mapview:invalid-viewpoint","geometry not defined"))}catch(n){t=new $("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(t)return void O.getLogger(this.declaredClass).error(t);this._scaleBeforeChangingSpatialReference=null;const s=new Oe({targetGeometry:new Y,scale:0,rotation:0});$e(s,e),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(i){if(i==null)return;if(!this.ready){this._set("zoom",i),this._set("scale",0);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const e=this.viewpoint;pr(e,e,this.constraints.zoomToScale(i)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(i,e){if(i)return this.animation&&(this.animation=null),this._createAnimation(),Rn(()=>this.ready,e).then(()=>{var n;const t={animate:!0,...e},s=_u(i,this);return(n=this.animation)==null||n.update(s),this._gotoTask={},t.animate?this._gotoAnimated(s,t):this._gotoImmediate(s,t)});O.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(i,e){const t=lr(i)?ar(this,i):i;if(!this.ready||isNaN(t.x)||isNaN(t.y))return{screenPoint:t,results:[]};let s=new Set,n=!1,o=null,r=null;e!=null&&e.include?$r(e.include,Er(this,u=>s.add(u),u=>{o||(o=new Set),o.add(u)},u=>s.add(u),()=>n=!0)):(n=!0,s=new Set(this.allLayerViews)),e!=null&&e.exclude&&$r(e.exclude,Er(this,u=>s.delete(u),u=>{r||(r=new Set),r.add(u)}));const l=this.allLayerViews.filter(u=>!u.suspended&&s.has(u)).reverse(),d=this.toMap(t);let h=[...n?this.graphicsView.hitTest(d).map(u=>({type:"graphic",graphic:u,layer:null,mapPoint:d})):[],...await Promise.all(l.map(u=>u.hitTest(d,t)).toArray())].filter(w).flat().filter(w);return o&&(h=h.filter(u=>!("graphic"in u)||!u.graphic||(o==null?void 0:o.has(Pn(u.graphic))))),r&&(h=h.filter(u=>!("graphic"in u)||!u.graphic||(r==null?void 0:r.has(Pn(u.graphic))))),{screenPoint:t,results:h}}async takeScreenshot(i){const e=this._createScreenshotPlan(i),t=await this._stage.takeScreenshot(e);return Cp(t,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(i){const e=this._createScreenshotPlan(i),t=await this._stage.takeScreenshot(e);return Tp(t,this._pixelFormat)}_createScreenshotPlan(i){i=i??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,kp(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let t;i.layers?(t=[],i.layers.forEach(o=>{const r=this.allLayerViews.find(l=>l.layer.id===o.id);r&&"container"in r&&r.container&&t.push(r.container)})):t=this._stage.children;const{format:s,quality:n}=$p(i.format,i.quality);return Ip(i,e,this.size,this.padding,s,n,t,i.rotation)}get test(){return{takeScreenshot:i=>this._takeScreenshot(i)}}toMap(i){if(!this.ready)return null;const e=lr(i)?ar(this,i):i,t=[0,0],[s,n]=this.state.toMap(t,[e.x,e.y]),o=this.spatialReference;return new Y({x:s,y:n,spatialReference:o})}toScreen(i){if(!this.ready)return null;const e=this._project(i,this.spatialReference),t=[e.x,e.y];return this.state.toScreen(t,t),pe(t[0],t[1])}on(i,e,t,s){return this.inputManager&&this.viewEvents.on(i,e,t,s)||super.on(i,e)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}whenLayerView(i){return super.whenLayerView(i)}graphicChanged(i){this.graphicsView&&this.graphicsView.graphicUpdateHandler(i)}whenReady(){return new Promise(i=>{this.ready?i(this):this._resolveWhenReady.push(i)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var i,e,t;return this.map&&"initialViewProperties"in this.map&&((e=(i=this.map)==null?void 0:i.initialViewProperties)==null?void 0:e.spatialReference)||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}hasLayerViewModule(i){return gr.hasLayerViewModule(i)}importLayerView(i){return gr.importLayerView(i)}pixelSizeAt(){return this.ready?this.state.resolution:(O.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(i){return this.hitTest(i).then(e=>({...e,mapPoint:this.toMap(i)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let i=Dp(this.type);return De("safari")&&De("safari")<9&&(i=new $("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:De("safari")})),w(i)?(O.getLogger(this.declaredClass).warn("#validate()",i.message),Promise.reject(i)):em()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new bn),this.animation}_cancellableGoTo(i,e,t){const s=()=>i===this._gotoTask,n=t.then(()=>{s()&&(this.animation=null)}).catch(r=>{throw s()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),r}),o=new Promise(r=>r(n));return e.when().catch(()=>{s()&&o.cancel&&o.cancel()}),o}_gotoImmediate(i,e){const t=this._gotoTask,s=this.animation,n=i.then(o=>{if(ni(e),t!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(t,s,n)}_flipStationary(i){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<xr&&(this._stationaryTimer=this._flipStationary(e))},i)),this._stationaryTimer}_getDefaultViewpoint(){var P,A,N,L;const{constraints:i,initialExtent:e,map:t,padding:s,size:n}=this;if(!i)return null;const o=t&&"initialViewProperties"in t?t.initialViewProperties:void 0,r={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};i.effectiveLODs?r.zoom!==-1&&(r.scale=i.zoomToScale(r.zoom)):r.zoom=-1;let l=null,d=null,h=0;const u=r.viewpoint&&r.viewpoint.rotation,p=r.viewpoint&&r.viewpoint.targetGeometry;w(p)&&(p.type==="extent"?l=p:p.type==="point"&&(d=p,h=r.viewpoint.scale));const g=r.extent||l||((A=be((P=o==null?void 0:o.viewpoint)==null?void 0:P.targetGeometry))==null?void 0:A.extent)||e,f=r.center||d||(g==null?void 0:g.center),M=r.scale||h||((N=o==null?void 0:o.viewpoint)==null?void 0:N.scale)||g&&Pi(g,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),C=r.rotation||u||((L=o==null?void 0:o.viewpoint)==null?void 0:L.rotation)||0;return f&&M?new Oe({targetGeometry:f,scale:M,rotation:C}):null}_gotoAnimated(i,e){const t=this._gotoTask,s=this.animation;if(!s)return Promise.resolve();const n=i.then(o=>{if(ni(e),t!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");return s.update(o),this.animationManager.animate(s,this.viewpoint,e),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(t,s,n)}_project(i,e){var n;const t=i&&i.targetGeometry||i;if(!e)return i;if(!t)return null;if(e.imageCoordinateSystem||(n=t.spatialReference)!=null&&n.imageCoordinateSystem||_s(e,t.spatialReference))return i;const s=Vi(t,e);if(!s)throw new $("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:t,spatialReference:e});return tm(i)?(i.targetGeometry=s,i):s}_resizeHandler(i){if(!this.ready)return;const e=this.state;let t=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();e.size=[i.width,i.height],Au(t,t,s,this.state.paddedViewState.size,this.resizeAlign),t=this.constraints.constrain(t,void 0),this.state.viewpoint=t}_startup(){var l,d;this.timeline.begin("MapView Startup");const i=this._getDefaultViewpoint(),e=i.targetGeometry;try{this._project(i,this.spatialReference)}catch(h){O.getLogger(this.declaredClass).warn(new so("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:e.toJSON(),spatialReference:this.spatialReference,error:h})),i.targetGeometry=((l=this.defaultsFromMap.extent)==null?void 0:l.center)||new Y({x:0,y:0,spatialReference:this.spatialReference})}(d=this.constraints)==null||d.fit(i),this._set("state",new qu({padding:this._get("padding"),size:this.size,viewpoint:i})),this.graphics.owner=this;const t=new rl(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=t,this._magnifierView=new hl,this._magnifierView.magnifier=this.magnifier;const s=new cl({view:this});this._set("labelManager",s);const n=new Su({view:this});this._set("animationManager",n);const o=new dl({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",h=>this.fatalError=h.error),y(()=>this.stationary,h=>t.stationary=h,bt),y(()=>this.background,h=>{t.background=h,this._magnifierView.background=h},bt),y(()=>this.magnifier,h=>this._magnifierView.magnifier=h,bt),y(()=>this.renderingOptions,h=>t.renderingOptions=h,bt),y(()=>this.highlightOptions,h=>t.highlightOptions=h,bt),y(()=>this.state.id,()=>t.state=this.state,bt)],"map-view"),this._updateStageChildren();const r=this._resolveWhenReady;this._resolveWhenReady=[],r.forEach(h=>h(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[i,e],spatialReference:t,rotation:s,scale:n}=this.state.paddedViewState,o=new Y({x:i,y:e,spatialReference:t});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",t),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const i=this.graphicsView;this._stage.addChild(i.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const i=new Bc(Dl.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",i);const e=new al({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ll(i)});this.frameTask.graphicsView=e,this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const i=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,i.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(i){if(!this.ready)return;this.frameTask.stop();for(const l of this.allLayerViews)l.processDetach();this._destroySpatialReferenceDependentProperties();const e=this.state.paddedViewState.clone();if(F(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=e.scale;else{const l=e.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=l}const t=e.clone(),[s,n]=e.center;let o=null;try{o=this._project(new Y({x:s,y:n,spatialReference:e.spatialReference}),i)}catch(l){Ri()||O.getLogger(this.declaredClass).warn(new so("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:i,error:l}))}o||(o=new Y({x:0,y:0,spatialReference:i}));const r=Mn(new Oe({targetGeometry:new Y,scale:0,rotation:0}),e.viewpoint,o);t.viewpoint=r;try{const d=[e.size[0]/2,e.size[1]/2],h=[d[0]+20,d[1]],u=e.toMap([0,0],h),{x:p,y:g}=this._project(new Y({x:u[0],y:u[1],spatialReference:e.spatialReference}),i);u[0]=p,u[1]=g,t.toScreen(u,u);const f=ku(d,u,h),M=Math.hypot(u[0]-d[0],u[1]-d[1])/20;!Number.isFinite(M)||Math.abs(M)>4?(r.rotation=0,r.targetGeometry=new Y({x:0,y:0,spatialReference:i})):(r.scale*=M,r.scale>De("mapview-srswitch-adjust-rotation-scale-threshold")?r.rotation=0:r.rotation+=Number.isFinite(f)?f:0)}catch{}this._get("constraints").constrain(r,void 0),this._get("state").viewpoint=r,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const l of this.allLayerViews)l.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};k.type="2d",a([c({readOnly:!0})],k.prototype,"animationManager",void 0),a([c({constructOnly:!0})],k.prototype,"deactivatedWebGLExtensions",void 0),a([c({constructOnly:!0})],k.prototype,"debugWebGLExtensions",void 0),a([c({readOnly:!0})],k.prototype,"featuresTilingScheme",void 0),a([c({readOnly:!0})],k.prototype,"fullOpacity",void 0),a([c({readOnly:!0})],k.prototype,"graphicsTileStore",null),a([c()],k.prototype,"graphicsView",void 0),a([c({readOnly:!0})],k.prototype,"state",void 0),a([c()],k.prototype,"initialExtentRequired",null),a([c()],k.prototype,"labelManager",void 0),a([c({readOnly:!0})],k.prototype,"resourceManager",null),a([c({readOnly:!0})],k.prototype,"textureManager",null),a([c({readOnly:!0})],k.prototype,"mapViewNavigation",void 0),a([c({constructOnly:!0})],k.prototype,"renderCanvas",void 0),a([c()],k.prototype,"renderingOptions",void 0),a([c({readOnly:!0})],k.prototype,"rendering",void 0),a([c({constructOnly:!0})],k.prototype,"supersampleScreenshotsEnabled",void 0),a([c({readOnly:!0})],k.prototype,"supportsGround",void 0),a([c()],k.prototype,"_stationaryTimer",void 0),a([c()],k.prototype,"_defaultsFromMapSettings",null),a([c()],k.prototype,"_pePromise",void 0),a([c({readOnly:!0})],k.prototype,"typeSpecificPreconditionsReady",null),a([c()],k.prototype,"animation",null),a([c({type:Jp})],k.prototype,"background",null),a([c({value:null,type:Y,dependsOn:["state.id","ready"]})],k.prototype,"center",null),a([c({type:Ga})],k.prototype,"constraints",null),a([c({value:null,type:li,dependsOn:["state.id","ready"]})],k.prototype,"extent",null),a([c()],k.prototype,"floors",void 0),a([c({type:Qa})],k.prototype,"highlightOptions",void 0),a([c({readOnly:!0})],k.prototype,"inputManager",void 0),a([c()],k.prototype,"map",void 0),a([c({value:{top:0,right:0,bottom:0,left:0},cast:i=>({top:0,right:0,bottom:0,left:0,...i})})],k.prototype,"padding",null),a([c()],k.prototype,"resizeAlign",void 0),a([c({readOnly:!0,dependsOn:["state.id"]})],k.prototype,"resolution",null),a([c({value:0,type:Number,dependsOn:["state.id","ready"]})],k.prototype,"rotation",null),a([c({value:0,type:Number,dependsOn:["state.id","ready"]})],k.prototype,"scale",null),a([c({constructOnly:!0})],k.prototype,"spatialReferenceLocked",void 0),a([c()],k.prototype,"stationary",null),a([c({type:Ya,readOnly:!0})],k.prototype,"timeline",void 0),a([c({readOnly:!0})],k.prototype,"type",void 0),a([c({readOnly:!0})],k.prototype,"updating",null),a([c({value:null,type:Oe,dependsOn:["state.id","ready"]})],k.prototype,"viewpoint",null),a([c({value:-1,dependsOn:["state.id","ready"]})],k.prototype,"zoom",null),a([c({readOnly:!0})],k.prototype,"navigating",null),a([c({type:ol})],k.prototype,"ui",void 0),k=a([I("esri.views.MapView")],k);const im=k;function Pn(i){var t,s;const e=i.getObjectId();return e?`${((t=i.layer)==null?void 0:t.uid)??((s=i.sourceLayer)==null?void 0:s.uid)??"MapView"}/${e}`:`"MapView/${i.uid}`}function Er(i,e,t,s,n){return o=>{if(o instanceof Vt){if(o.layer===i)n==null||n();else{const r=i.allLayerViews.find(l=>l.layer===o.layer);r&&(s==null||s(r))}t(Pn(o))}else{const r=i.allLayerViews.find(l=>l.layer===o);r&&e(r)}}}function $r(i,e){if(i)if(no(i))for(const t of i)if(no(t))for(const s of t)e(s);else e(t);else e(i)}function sm(i){return(i==null?void 0:i.declaredClass)==="esri.WebMap"}const p_=Object.freeze(Object.defineProperty({__proto__:null,default:im},Symbol.toStringTag,{value:"Module"}));export{yu as $,Ba as G,p_ as M,ft as P,Af as R,$s as S,oi as a,Pf as b,Qa as c,Eu as d,Ya as e,s_ as m,za as n,ku as p,Oe as u};
